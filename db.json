{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"source/about/avatar.png","path":"about/avatar.png","modified":1,"renderable":0},{"_id":"themes/again/source/favicon.ico","path":"favicon.ico","modified":1,"renderable":1},{"_id":"source/about/css/app.css.map","path":"about/css/app.css.map","modified":1,"renderable":0},{"_id":"themes/again/source/css/app.scss","path":"css/app.scss","modified":1,"renderable":1},{"_id":"themes/again/source/images/avatar.png","path":"images/avatar.png","modified":1,"renderable":1},{"_id":"themes/again/source/images/banner-small.png","path":"images/banner-small.png","modified":1,"renderable":1},{"_id":"themes/again/source/js/app.js","path":"js/app.js","modified":1,"renderable":1},{"_id":"themes/again/source/images/banner-large.png","path":"images/banner-large.png","modified":1,"renderable":1},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.eot","path":"about/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":0},{"_id":"source/about/font-awesome/fonts/FontAwesome.otf","path":"about/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":0},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.woff","path":"about/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":0},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.woff2","path":"about/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":0},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.ttf","path":"about/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":0},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.svg","path":"about/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":0}],"Cache":[{"_id":"source/CNAME","hash":"60823518d66b70bf6a61f470bceec61caaec3031","modified":1473310917000},{"_id":"themes/again/README.md","hash":"71396c4147a14f871ebb74f8bc57c7d55a5b7a70","modified":1473311359000},{"_id":"themes/again/_config.yml","hash":"7ceaf39113944b7fe330e9833c59387e81f6e45e","modified":1473316807000},{"_id":"source/about/app.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1473310917000},{"_id":"source/_drafts/let-us-learn-RxJS.md","hash":"79e808b218ff79eb8b7ed129cb1b8a2a28c5f3e3","modified":1473310917000},{"_id":"source/_posts/5-Ways-to-Make-a-Sticky-Footer.md","hash":"55234c57739b4c0b6ebe704aefdc41e60505703b","modified":1473310917000},{"_id":"source/_posts/ES6-In-Practice-0-watch-a-demo.md","hash":"3590e57abf8302f21fc28f2fccda8287f4a5133b","modified":1473310917000},{"_id":"source/_posts/BFC-in-CSS-0-WTF.md","hash":"879e1baf137fac165a98b709d82df3b4b6f655ee","modified":1473310917000},{"_id":"source/_posts/How-Medium-Load-Images.md","hash":"69318f9d73a11b46738afedddf8cd93adf58bbc5","modified":1473310917000},{"_id":"source/_posts/JavaScript-For-Kids-This.md","hash":"e0b537402a7b080b843d5bbda2352cba2fcbf7fa","modified":1473310917000},{"_id":"source/_posts/JavaScript-Module-A-Beginner-Guide.md","hash":"4dff791e604b29c16c6c40ac1967eba70bb122c2","modified":1473310917000},{"_id":"source/_posts/JavaScript-Modules-Part-2.md","hash":"5346f5f40376f195f241fb150d769ed2680d80e1","modified":1473310917000},{"_id":"source/_posts/Learning-React-Without-Using-React-Part-1.md","hash":"67b276e7002e543b45d8f75c189fd6b99a9a569c","modified":1473310917000},{"_id":"source/_posts/Learning-React-Without-Using-React-Part-2.md","hash":"1d8b1419fd994eb7b196385328ab12c78041357f","modified":1473310917000},{"_id":"source/_posts/Scope-0-What-Is-Scope.md","hash":"7d3997b2fbb23c6e1a1b3d1768c3fe46a7a0d086","modified":1473310917000},{"_id":"source/_posts/Oh-My-Nginx.md","hash":"b9ea6e92ee46856f607f7c2862053116cc72207f","modified":1473310917000},{"_id":"source/_posts/Promise.md","hash":"ee09b5bff6e94fb737fb5d49cc0438e9b77606f0","modified":1473310917000},{"_id":"source/_posts/Scope-1-Nested-Scope.md","hash":"1d22fb87065285977d2f4774700ea7882ae9ddb0","modified":1473310917000},{"_id":"source/_posts/Scope-2-Lexical-Scope-Dynamical-Scope.md","hash":"0b6b4ebafcb9344ada5106c30653e97e7836524f","modified":1473310917000},{"_id":"source/_posts/Scope-3-What-Is-Closure.md","hash":"598a16972c2b63a3036b94341ddfc2eba8c0a63c","modified":1473310917000},{"_id":"source/_posts/Virtual-DOM.md","hash":"1460912403a98f4bbe1c59276f149bf72da491fc","modified":1473310917000},{"_id":"source/_posts/Write-Test-For-Your-JavaScript.md","hash":"7dc4c1baa6287a2ad2cfba1dc4c2dc1144fdd824","modified":1473310917000},{"_id":"source/_posts/Write-a-Hexo-Theme-From-Strach.md","hash":"009f5f049cd2d8b814317518fe946b5b281444b9","modified":1473310917000},{"_id":"source/_posts/a-mathematical-expressions-parser.md","hash":"783ea2b0046a2564ac2ebde14da27c0b91d69af0","modified":1473310917000},{"_id":"source/_posts/bubble-sorting-visually.md","hash":"cc507abb0e8d948d0e2511d0506d63fe0bcb4ab5","modified":1473310917000},{"_id":"source/_posts/google-chrome-Devtools-Overview.md","hash":"50ae5916cf6b834b012ab06f1194389b9079b583","modified":1473310917000},{"_id":"source/_posts/gulp-in-practice.md","hash":"7600da16c5646928cc45104178e4b70fe43d2850","modified":1473310917000},{"_id":"source/_posts/fetch-api-now.md","hash":"4ae70e1778f775edaeea17ee4779396c3fbfeead","modified":1473329962000},{"_id":"source/_posts/implement-a-simple-AMD-module-loader.md","hash":"911aec81e2ae99c2fe588ecbf3da4a12dab433f7","modified":1473310917000},{"_id":"source/_posts/justified-layout.md","hash":"01439f0e2686abc0c11ba5bd4d731988c8ba88b8","modified":1473310917000},{"_id":"source/about/.gitignore","hash":"24f76f7afbf37b1cffe3a05256896680a75d8ae5","modified":1473310917000},{"_id":"source/about/avatar.png","hash":"60d81ac876c5c4aa0e92dbed5abcdbed357c2bf4","modified":1473310917000},{"_id":"source/about/index.html","hash":"778e2153a968f31c58a1952baac9874c00e42056","modified":1473310917000},{"_id":"source/about/package.json","hash":"7984f209a2321bef9af38c17ee0e0ab4dd2c51b9","modified":1473310917000},{"_id":"themes/again/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1473311359000},{"_id":"themes/again/.git/config","hash":"9bb4936b97a8a39252913e1ef65c753a853c2e53","modified":1473326273000},{"_id":"themes/again/.git/COMMIT_EDITMSG","hash":"cba60cb3779ad43fd15f12a3d2291f1930dfe87e","modified":1473324372000},{"_id":"themes/again/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1473311355000},{"_id":"themes/again/.git/index","hash":"6eaaa999ca03637a7bf72f222937b2b673ae226b","modified":1473324372000},{"_id":"themes/again/.git/packed-refs","hash":"d34c99854ad17c901b42d12b85f9569643b8dcc9","modified":1473325343000},{"_id":"themes/again/layout/archive.ejs","hash":"1f8724a48ab2ef61182b8a930e3998f833eb1487","modified":1473311359000},{"_id":"themes/again/layout/index.ejs","hash":"b87edba726df46b991bcaa153c1a222080f991e9","modified":1473311359000},{"_id":"themes/again/layout/layout.ejs","hash":"bfe888472313a2edc8b7db3190b1802d580fc2bd","modified":1473311359000},{"_id":"themes/again/layout/page.ejs","hash":"b1c9235cd9ccff78c4dc15608a708e4a74433d46","modified":1473311359000},{"_id":"themes/again/layout/post.ejs","hash":"fa55c7bed8d3ac20e3911140d5252b9184ca3b14","modified":1473311359000},{"_id":"themes/again/source/favicon.ico","hash":"47f8c468756506ff0c9a1df1dcbc48c1ae54c81d","modified":1473311359000},{"_id":"source/_posts/How-Medium-Load-Images/network.png","hash":"a18d03e816c5b414923510f5887890b899cf4e60","modified":1473310917000},{"_id":"source/_posts/How-Medium-Load-Images/inspect.png","hash":"1a97326447787e0323820c9a0b25cbcebd2ab9a5","modified":1473310917000},{"_id":"source/_posts/Virtual-DOM/vdom0.png","hash":"e68599840c52b920be8e0d792284d8f326636ed2","modified":1473310917000},{"_id":"source/_posts/Virtual-DOM/vdom1.png","hash":"7e900ff6a710a45c99c704cda30e665f19694ac2","modified":1473310917000},{"_id":"source/_posts/Virtual-DOM/vdom2.png","hash":"ab790847d320a49315483d1272b79de066176c5d","modified":1473310917000},{"_id":"source/_posts/justified-layout/1.png","hash":"c3de7ce9f527278689d44a7352c4159901ea36d9","modified":1473310917000},{"_id":"source/_posts/justified-layout/3.png","hash":"3d96ff3d48f593166f9fa80a485312a97066bfb8","modified":1473310917000},{"_id":"source/_posts/justified-layout/2.png","hash":"02e5d13e57920c792bc7bb593d43c9ba04931c03","modified":1473310917000},{"_id":"source/_posts/justified-layout/4.png","hash":"cb2990881fe4c0129d519f9238579f45f440f269","modified":1473310917000},{"_id":"source/_posts/从零开始编写一个Hexo主题/hexo.png","hash":"c2a8a470c1111865e6efaee878695e84ce62965c","modified":1473310917000},{"_id":"source/_posts/从零开始编写一个Hexo主题/hexo2.png","hash":"c7dbf46e9b5c991f9d08cf098869ef630d7ab025","modified":1473310917000},{"_id":"source/_posts/从零开始编写一个Hexo主题/hexo1.png","hash":"b80330c96520a4f6dddc4a445eeea258c4741d0b","modified":1473310917000},{"_id":"source/_posts/为你的JavaScript代码写测试/0.png","hash":"cff3e867fa4f604612fbc072c84315dfe6ba1397","modified":1473310917000},{"_id":"source/about/css/app.css","hash":"4b6b28bb18a0e0d71781d19f56b338467d159f55","modified":1473310917000},{"_id":"source/about/css/app.css.map","hash":"f75631c35a9c4aa1db076a73584f03d50a1b02f3","modified":1473310917000},{"_id":"source/about/sass/_basic.scss","hash":"4159d631fd811deb1985f29862a39b0c5007f90e","modified":1473310917000},{"_id":"source/about/sass/_variables.scss","hash":"2e0f622fee92d46c80c78d75e019a2bc505f78be","modified":1473310917000},{"_id":"source/about/sass/app.scss","hash":"e49983669fbd23f9d581f9de278ba9ed815bf808","modified":1473310917000},{"_id":"themes/again/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1473311355000},{"_id":"themes/again/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1473311355000},{"_id":"themes/again/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1473311355000},{"_id":"themes/again/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1473311355000},{"_id":"themes/again/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1473311355000},{"_id":"themes/again/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1473311355000},{"_id":"themes/again/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1473311355000},{"_id":"themes/again/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1473311355000},{"_id":"themes/again/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1473311355000},{"_id":"themes/again/.git/info/exclude","hash":"bb5a85730dcf100facee799c05cc4f6affec0745","modified":1473311355000},{"_id":"themes/again/.git/logs/HEAD","hash":"84fadc5fac8815d7b9cabcde6247a50f6c166ce7","modified":1473324372000},{"_id":"themes/again/layout/_partial/article.ejs","hash":"b65d93599fa7e18af428f31027e915209f1a8c8c","modified":1473311359000},{"_id":"themes/again/layout/_partial/footer.ejs","hash":"5ba7fc1a96449b06759457f95916f530db4b9490","modified":1473311359000},{"_id":"themes/again/layout/_partial/archive.ejs","hash":"394b6f97a6860fe2e027fd0410e24187f9970d5a","modified":1473311359000},{"_id":"themes/again/layout/_partial/head.ejs","hash":"90b414e1b02b9d16d13651721043cc2c914f42f4","modified":1473311359000},{"_id":"themes/again/layout/_partial/index.ejs","hash":"bf9208ec37b0882698d004895631488061f5593e","modified":1473311359000},{"_id":"themes/again/layout/_partial/header.ejs","hash":"219c66b37b46bad660099e1516dbb6dcbab0a992","modified":1473311359000},{"_id":"themes/again/layout/_widget/back-to-home.ejs","hash":"6d3544def976676e38e10134cae071f44bbf67d7","modified":1473311359000},{"_id":"themes/again/layout/_partial/nav.ejs","hash":"9145acd2c9f3fcb5d1ed3d63ad6ad4b8a075b734","modified":1473311359000},{"_id":"themes/again/layout/_widget/disqus.ejs","hash":"47eb63418da61245bf674cb1764419c2741e486b","modified":1473311359000},{"_id":"themes/again/layout/_widget/paginator.ejs","hash":"ed04dbcb0cc79733ac338c3fc2a8604d41eb0848","modified":1473311359000},{"_id":"themes/again/layout/_widget/sharing.ejs","hash":"8d50310cae2bd6531a3ba04b5c5188c616035359","modified":1473311359000},{"_id":"themes/again/layout/_widget/twitter.ejs","hash":"49acef5c7713af0dc27f3aa78b80cb6379d18262","modified":1473311359000},{"_id":"themes/again/source/css/_base.scss","hash":"00c16f952cf7c8a9e5ec71f339b97b9e9b18a74a","modified":1473316474000},{"_id":"themes/again/source/css/_font.scss","hash":"3348cde2f82797bd92ab69405824f02472736698","modified":1473311359000},{"_id":"themes/again/source/css/_variables.scss","hash":"e649d7f3a0323d8742b9ef9fdd2b6cf458025bce","modified":1473316517000},{"_id":"themes/again/source/css/app.scss","hash":"7b466635119bfb88c54532f4f88b8f824b5a6666","modified":1473311359000},{"_id":"themes/again/source/images/avatar.png","hash":"60d81ac876c5c4aa0e92dbed5abcdbed357c2bf4","modified":1473311359000},{"_id":"themes/again/source/images/banner-small.png","hash":"4b87b439bbf9507f7bed53d7c2c1a22e07a064e8","modified":1473311359000},{"_id":"themes/again/source/js/app.js","hash":"8e00097211a064209ae0e9fb556920673f5b9a42","modified":1473311359000},{"_id":"source/about/font-awesome/css/font-awesome.css","hash":"b488600451227b445414796e9b8550e7c1bd6d29","modified":1473310917000},{"_id":"source/about/font-awesome/css/font-awesome.min.css","hash":"12d6861075de8e293265ff6ff03b1f3adcb44c76","modified":1473310917000},{"_id":"source/about/sass/aside/_avatar.scss","hash":"5e687ad346933b740689577be2b6373a876cf66f","modified":1473310917000},{"_id":"source/about/sass/aside/_index.scss","hash":"39870d4d43df1c125bf1e1fb8057384b31b793a3","modified":1473310917000},{"_id":"source/about/sass/main/_index.scss","hash":"6235109d433ede6f7880ff801643ac99d9e62243","modified":1473310917000},{"_id":"source/about/sass/main/_header.scss","hash":"c1fc18849847fcd7ee0a3cd2b429a274528546b6","modified":1473310917000},{"_id":"source/about/sass/aside/_info.scss","hash":"6d18edbf50528eb66ae3a26e66ce9a30fc6c3b86","modified":1473310917000},{"_id":"source/about/sass/main/_project.scss","hash":"2ffc2598b83e48a72c6701a0b9c31ba60f6b3d86","modified":1473310917000},{"_id":"source/about/sass/main/_skills.scss","hash":"ce6f2ee50fdd21af796553114ccea0d9cd77ce05","modified":1473310917000},{"_id":"source/about/sass/main/_work.scss","hash":"351b3732444c0a3f51095a1dacd0f17378e66b38","modified":1473310917000},{"_id":"themes/again/.git/objects/5a/3f8d423ed1cf87c75da734f06a82b2377ff80a","hash":"251246c15cf590929c947084b29d8ce9b8870e5f","modified":1473324372000},{"_id":"themes/again/.git/objects/09/b9828883bc3ebbe2b49f33c57d6043fb27ffda","hash":"cb9f8697e1277f47ce3f439aa00b0be5278fff7a","modified":1473324372000},{"_id":"themes/again/.git/objects/3c/95c547bf1ee3d4396e1277f5002f805b07f57c","hash":"393ffb420e40717d1db3c07ad6799b2a445ce968","modified":1473324372000},{"_id":"themes/again/.git/objects/3d/f829de43027acae9e913f6b263bea1375a9c30","hash":"8d5da364ae8b0babeb10817488c55f30dc7108f2","modified":1473324338000},{"_id":"themes/again/.git/objects/8f/869606f27d954fec524f6cc75f5c84465894f8","hash":"c77cb6931e5a85b68b8b8aa51cb7fdc71a622819","modified":1473324372000},{"_id":"themes/again/.git/objects/5b/fa4c3ba013f29b583ba9bd81521d9712a7965b","hash":"751120be912ea07d11f93312cd0f9f66fde6e68c","modified":1473324338000},{"_id":"themes/again/.git/objects/5d/b70a53e15a788d94c67095ae3ad6c62e2341e8","hash":"0cf61ff9a2a3ad72fbaf23ecef91e1d0928077ee","modified":1473324338000},{"_id":"themes/again/.git/objects/65/44aceead88773d1879c4e7ac69917249193575","hash":"f1034c0885cc0ae1670653ba4822c15174f3ba18","modified":1473324338000},{"_id":"themes/again/.git/objects/cd/d8d5e584b85f8620d38f2461cd3a8537077200","hash":"648400fa4815146968d430689cfe2fdb417a947b","modified":1473324372000},{"_id":"themes/again/.git/objects/e5/0ffceadef397c8fe4a9530c5c982c0be7ef7f0","hash":"ee628c5f492d83198cc0b703369d757bbb871a33","modified":1473324338000},{"_id":"themes/again/.git/objects/pack/pack-5c1f33a14f60ad0943e515006ac2442ac8ae7068.idx","hash":"1a7a184390f7340728e309ac4312866f428b5bd1","modified":1473311359000},{"_id":"themes/again/.git/objects/fb/05a1123fdf0ec06c8141e7562c9e554fe2c8a5","hash":"b17eca756d7adf327fda1f773206775ee902db7d","modified":1473324338000},{"_id":"themes/again/.git/objects/ff/2d90ea6ca8e8900b6da906d4d7fe7444a7de07","hash":"980f223ffbe09a7a50e6bf2eb2b02c3ae0d06e77","modified":1473324372000},{"_id":"themes/again/.git/refs/heads/master","hash":"1f0d6e963a65ca7e45ff8e878b57b9e994a2fb8c","modified":1473324372000},{"_id":"themes/again/source/css/_helper/grid.scss","hash":"d290e1315dc8dc3509e26fb5e4ff55eb277e6e84","modified":1473311359000},{"_id":"themes/again/source/css/_helper/index.scss","hash":"8c35cff7ea4785042f6116f28b09ea8ffc087255","modified":1473311359000},{"_id":"themes/again/source/css/_partial/archive.scss","hash":"b358e1a0e51ebea6ea5aee80447644baaa463723","modified":1473311359000},{"_id":"themes/again/source/css/_partial/article.scss","hash":"12962161260e93c13dddb709f90f155d53066166","modified":1473330581000},{"_id":"themes/again/source/css/_partial/footer.scss","hash":"f1ecaa07e5920eede1c2e0b7bfbfe1b3a8f8fb5c","modified":1473311359000},{"_id":"themes/again/source/css/_partial/header.scss","hash":"e0d092a98d2c9822a31a4b93c1e31fca5d68af21","modified":1473316932000},{"_id":"themes/again/source/css/_partial/index.scss","hash":"7498f3c447a5510891fb880d685a39f4791550f0","modified":1473311359000},{"_id":"themes/again/source/css/_partial/nav.scss","hash":"d66e6ae75faaa0bf77c481264e9109714007b1f8","modified":1473311359000},{"_id":"themes/again/source/css/_partial/page.scss","hash":"b576caf22a0d0b9b872ad54dbd0ab2c16a104b86","modified":1473311359000},{"_id":"themes/again/source/css/_partial/partials.scss","hash":"5fd002673fcd254a600b0d034c9eba03033715a4","modified":1473311359000},{"_id":"themes/again/source/css/_widget/back-to-home.scss","hash":"d60425bff8e9cbed9f0f0a9827cbc567f994fb14","modified":1473311359000},{"_id":"themes/again/source/css/_widget/highlight.scss","hash":"433e8a1c04b6e0fe5617cdadc2e12762c337d7f9","modified":1473323864000},{"_id":"themes/again/source/css/_widget/index.scss","hash":"5de4195cf47963fe68a15e16b7bb067970e0b83c","modified":1473311359000},{"_id":"themes/again/source/css/_widget/sharing.scss","hash":"38f54a9aa48654e4dad44535918550098aa913a6","modified":1473311359000},{"_id":"themes/again/source/images/banner-large.png","hash":"3e91a135ca4c446301995aedc998784e035d485a","modified":1473311359000},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.eot","hash":"986eed8dca049714e43eeebcb3932741a4bec76d","modified":1473310917000},{"_id":"source/about/font-awesome/fonts/FontAwesome.otf","hash":"42c179eef588854b5ec151bcf6a3f58aa8b79b11","modified":1473310917000},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.woff","hash":"4a313eb93b959cc4154c684b915b0a31ddb68d84","modified":1473310917000},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.woff2","hash":"638c652d623280a58144f93e7b552c66d1667a11","modified":1473310917000},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.ttf","hash":"6484f1af6b485d5096b71b344e67f4164c33dd1f","modified":1473310917000},{"_id":"themes/again/.git/logs/refs/heads/master","hash":"84fadc5fac8815d7b9cabcde6247a50f6c166ce7","modified":1473324372000},{"_id":"themes/again/.git/refs/remotes/origin/master","hash":"1f0d6e963a65ca7e45ff8e878b57b9e994a2fb8c","modified":1473326284000},{"_id":"themes/again/.git/logs/refs/remotes/origin/HEAD","hash":"6909ef6c52b5430f13ed30d2f02308522fef4df6","modified":1473311359000},{"_id":"themes/again/.git/logs/refs/remotes/origin/master","hash":"567bf72b7f471669d4dab10cdb858c36b83e27fc","modified":1473326284000},{"_id":"source/about/font-awesome/fonts/fontawesome-webfont.svg","hash":"b06b5c8f67fd632cdc62a33b62ae4f74194131b3","modified":1473310917000},{"_id":"themes/again/.git/objects/pack/pack-5c1f33a14f60ad0943e515006ac2442ac8ae7068.pack","hash":"3034f3ede9f112fdaf529de67ef3e6f3cb19d560","modified":1473311359000}],"Category":[{"name":"JavaScript","_id":"cisu742yo000737rqacq4ui2b"},{"name":"CSS","_id":"cisu742z2000c37rq9mwl0mvn"},{"name":"翻译","_id":"cisu742za000i37rq8zpwktdl"},{"name":"Tools","_id":"cisu7430j001k37rqm2bdf825"},{"name":"FrontEnd","_id":"cisu7430p001q37rqhrvkwu6d"}],"Data":[],"Page":[{"_content":"","source":"about/app.js","raw":"","date":"2016-09-08T05:01:57.000Z","updated":"2016-09-08T05:01:57.000Z","path":"about/app.js","layout":"false","title":"","comments":1,"_id":"cisu742xd000037rqrua5ysj6","content":"","excerpt":"","more":""},{"layout":"false","_content":"\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>简历 - 梁远成</title>\n  <link rel=\"stylesheet\" href=\"./font-awesome/css/font-awesome.min.css\">\n  <link rel=\"stylesheet\" href=\"./css/app.css\">\n</head>\n<body>\n  <main>\n    <section class=\"work\">\n      <h3 class=\"title\">\n        <span>个人作品<span>\n          <i class=\"fa fa-heart-o\"></i>\n        </h3>\n      <ul>\n        <li>\n          <a href=\"http://drakeleung.github.io/groove/ \">groove</a>\n          - 排序算法可视化\n        </li>\n        <li>\n          <a href=\"https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2FREADME.md\">\n            jjjustify\n          </a>- 保持图片比例不变的布局\n        </li>\n        <li>前端轮子 - UI 组件，Virtual DOM, Promise</li>\n        <li>Hexo 博客主题 -\n          <a href=\"https://github.com/DrakeLeung/hexo-theme-again\">AGAIN</a>\n        </li>\n        <li>操作系统课设 -\n          <a href=\"https://github.com/DrakeLeung/OS-scheduling\">\n            多道批处理系统两级调度的模拟\n          </a>\n         </li>\n      </ul>\n    </section>\n\n\n    <section class=\"project\">\n      <h3 class=\"title\">\n        <span>项目经验</span>\n        <i class=\"fa fa-star-o\"></i>\n      </h3>\n\n      <ul>\n        <li>\n          <h4 class=\"project-name\">广州优校云教师管理</h4>\n          <p class=\"project-details\">家长和教师沟通平台，现已在多个小学中使用中。\n            我提出使用<strong> MVC 模式 </strong> 。负责权限模块，消息推送，成绩评估等模块。\n          </p>\n        </li>\n\n        <li>\n          <h4 class=\"project-name\">长沙烟草局日常管理</h4>\n          <p class=\"project-details\">\n            主要负责<strong>视频监控模块</strong>。阅读视频硬件商的文档和 demo ，实现了查看各个地区的摄像头的在线情况，实时播放车辆追踪等。\n          </p>\n        </li>\n\n        <li>\n          <h4 class=\"project-name\">海口应急指挥调度系统</h4>\n          <p class=\"project-details\">\n            该系统用来处理海口的紧急事件。维护项目，修复 bug。用 RequireJS 重构地图模块。使用事件冒泡优化电话控件。\n          </p>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"skills\">\n      <h3 class=\"title\">\n        <span>专业技能</span>\n        <i class=\"fa fa-smile-o\"></i>\n      </h3>\n      <ul>\n        <li>\n          <span>JavaScript(ES6)</span>\n          <progress value=\"80\" max=\"100\">80 %</progress>\n        </li>\n        <li>\n          <span>HTML 与 CSS</span>\n          <progress value=\"70\" max=\"100\">70 %</progress>\n        </li>\n        <li>\n          <span>JavaScript 框架</span>\n          <progress value=\"60\" max=\"100\">50 %</progress>\n        </li>\n        <li>\n          <span>CSS 框架和预处理器</span>\n          <progress value=\"50\" max=\"100\">50 %</progress>\n        </li>\n\n        <li>\n          <span>计算机网络(HTTP)</span>\n          <progress value=\"50\" max=\"100\">50 %</progress>\n        </li>\n        <li>\n          <span>服务器端(Node)</span>\n          <progress value=\"30\" max=\"100\">20 %</progress>\n        </li>\n        <li>\n          <span>版本控制(Git)</span>\n          <progress value=\"60\" max=\"100\">60 %</progress>\n        </li>\n        <li>\n          <span>构建工具(Webpack)</span>\n          <progress value=\"30\" max=\"100\">20 %</progress>\n        </li>\n      </ul>\n    </section>\n  </main>\n\n  <aside>\n    <section class=\"avatar\">\n      <img src=\"./avatar.png\" alt=\"avatar\">\n    </section>\n\n    <section class=\"info\">\n      <h4 class=\"title\">个人信息</h4>\n      <ul>\n        <li>梁远成 / 男 / 大三</li>\n        <li>本科 / 广东工业大学 / 计算机</li>\n        <li>\n          <i class=\"fa fa-lg fa-github\"></i>\n          <a href=\"https://github.com/DrakeLeung\" title=\"GitHub\">\n            github.com/DrakeLeung\n          </a>\n        </li>\n        <li>\n          <i class=\"fa fa-home fa-lg\"></i>\n          <a href=\"http://drakeleung.github.io/blog/\" title=\"blog\">\n            lyyourc.com\n          </a>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"contact\">\n      <h4 class=\"title\">联系方式</h4>\n      <ul>\n        <li>\n          <i class=\"fa fa-lg fa-mobile\"></i>\n          <span>15622733230<span>\n        </li>\n        <li>\n          <i class=\"fa fa-envelope-o\"></i>\n          <span>drakeleung42@gmail.com</span>\n        </li>\n        <li>\n          <span>期望职位：<strong>前端工程师</strong>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"profile\">\n      <h4 class=\"title\">个人简介</h4>\n      <p>在学校的 TopView 工作室进行前端开发工作，且负责培训新人。</p>\n      <p>热爱前端，喜欢编程。有想法，能够<strong>独立解决问题 </strong>。喜欢学习不同的东西。想认识更多厉害的人。</p>\n    </section>\n  </aside>\n</body>\n</html>\n","source":"about/index.html","raw":"layout: false\n---\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>简历 - 梁远成</title>\n  <link rel=\"stylesheet\" href=\"./font-awesome/css/font-awesome.min.css\">\n  <link rel=\"stylesheet\" href=\"./css/app.css\">\n</head>\n<body>\n  <main>\n    <section class=\"work\">\n      <h3 class=\"title\">\n        <span>个人作品<span>\n          <i class=\"fa fa-heart-o\"></i>\n        </h3>\n      <ul>\n        <li>\n          <a href=\"http://drakeleung.github.io/groove/ \">groove</a>\n          - 排序算法可视化\n        </li>\n        <li>\n          <a href=\"https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2FREADME.md\">\n            jjjustify\n          </a>- 保持图片比例不变的布局\n        </li>\n        <li>前端轮子 - UI 组件，Virtual DOM, Promise</li>\n        <li>Hexo 博客主题 -\n          <a href=\"https://github.com/DrakeLeung/hexo-theme-again\">AGAIN</a>\n        </li>\n        <li>操作系统课设 -\n          <a href=\"https://github.com/DrakeLeung/OS-scheduling\">\n            多道批处理系统两级调度的模拟\n          </a>\n         </li>\n      </ul>\n    </section>\n\n\n    <section class=\"project\">\n      <h3 class=\"title\">\n        <span>项目经验</span>\n        <i class=\"fa fa-star-o\"></i>\n      </h3>\n\n      <ul>\n        <li>\n          <h4 class=\"project-name\">广州优校云教师管理</h4>\n          <p class=\"project-details\">家长和教师沟通平台，现已在多个小学中使用中。\n            我提出使用<strong> MVC 模式 </strong> 。负责权限模块，消息推送，成绩评估等模块。\n          </p>\n        </li>\n\n        <li>\n          <h4 class=\"project-name\">长沙烟草局日常管理</h4>\n          <p class=\"project-details\">\n            主要负责<strong>视频监控模块</strong>。阅读视频硬件商的文档和 demo ，实现了查看各个地区的摄像头的在线情况，实时播放车辆追踪等。\n          </p>\n        </li>\n\n        <li>\n          <h4 class=\"project-name\">海口应急指挥调度系统</h4>\n          <p class=\"project-details\">\n            该系统用来处理海口的紧急事件。维护项目，修复 bug。用 RequireJS 重构地图模块。使用事件冒泡优化电话控件。\n          </p>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"skills\">\n      <h3 class=\"title\">\n        <span>专业技能</span>\n        <i class=\"fa fa-smile-o\"></i>\n      </h3>\n      <ul>\n        <li>\n          <span>JavaScript(ES6)</span>\n          <progress value=\"80\" max=\"100\">80 %</progress>\n        </li>\n        <li>\n          <span>HTML 与 CSS</span>\n          <progress value=\"70\" max=\"100\">70 %</progress>\n        </li>\n        <li>\n          <span>JavaScript 框架</span>\n          <progress value=\"60\" max=\"100\">50 %</progress>\n        </li>\n        <li>\n          <span>CSS 框架和预处理器</span>\n          <progress value=\"50\" max=\"100\">50 %</progress>\n        </li>\n\n        <li>\n          <span>计算机网络(HTTP)</span>\n          <progress value=\"50\" max=\"100\">50 %</progress>\n        </li>\n        <li>\n          <span>服务器端(Node)</span>\n          <progress value=\"30\" max=\"100\">20 %</progress>\n        </li>\n        <li>\n          <span>版本控制(Git)</span>\n          <progress value=\"60\" max=\"100\">60 %</progress>\n        </li>\n        <li>\n          <span>构建工具(Webpack)</span>\n          <progress value=\"30\" max=\"100\">20 %</progress>\n        </li>\n      </ul>\n    </section>\n  </main>\n\n  <aside>\n    <section class=\"avatar\">\n      <img src=\"./avatar.png\" alt=\"avatar\">\n    </section>\n\n    <section class=\"info\">\n      <h4 class=\"title\">个人信息</h4>\n      <ul>\n        <li>梁远成 / 男 / 大三</li>\n        <li>本科 / 广东工业大学 / 计算机</li>\n        <li>\n          <i class=\"fa fa-lg fa-github\"></i>\n          <a href=\"https://github.com/DrakeLeung\" title=\"GitHub\">\n            github.com/DrakeLeung\n          </a>\n        </li>\n        <li>\n          <i class=\"fa fa-home fa-lg\"></i>\n          <a href=\"http://drakeleung.github.io/blog/\" title=\"blog\">\n            lyyourc.com\n          </a>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"contact\">\n      <h4 class=\"title\">联系方式</h4>\n      <ul>\n        <li>\n          <i class=\"fa fa-lg fa-mobile\"></i>\n          <span>15622733230<span>\n        </li>\n        <li>\n          <i class=\"fa fa-envelope-o\"></i>\n          <span>drakeleung42@gmail.com</span>\n        </li>\n        <li>\n          <span>期望职位：<strong>前端工程师</strong>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"profile\">\n      <h4 class=\"title\">个人简介</h4>\n      <p>在学校的 TopView 工作室进行前端开发工作，且负责培训新人。</p>\n      <p>热爱前端，喜欢编程。有想法，能够<strong>独立解决问题 </strong>。喜欢学习不同的东西。想认识更多厉害的人。</p>\n    </section>\n  </aside>\n</body>\n</html>\n","date":"2016-09-08T05:01:57.000Z","updated":"2016-09-08T05:01:57.000Z","path":"about/index.html","title":"","comments":1,"_id":"cisu742yc000237rqyc6p5gaz","content":"\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>简历 - 梁远成</title>\n  <link rel=\"stylesheet\" href=\"./font-awesome/css/font-awesome.min.css\">\n  <link rel=\"stylesheet\" href=\"./css/app.css\">\n</head>\n<body>\n  <main>\n    <section class=\"work\">\n      <h3 class=\"title\">\n        <span>个人作品<span>\n          <i class=\"fa fa-heart-o\"></i>\n        </span></span></h3>\n      <ul>\n        <li>\n          <a href=\"http://drakeleung.github.io/groove/ \">groove</a>\n          - 排序算法可视化\n        </li>\n        <li>\n          <a href=\"https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2FREADME.md\" target=\"_blank\" rel=\"external\">\n            jjjustify\n          </a>- 保持图片比例不变的布局\n        </li>\n        <li>前端轮子 - UI 组件，Virtual DOM, Promise</li>\n        <li>Hexo 博客主题 -\n          <a href=\"https://github.com/DrakeLeung/hexo-theme-again\" target=\"_blank\" rel=\"external\">AGAIN</a>\n        </li>\n        <li>操作系统课设 -\n          <a href=\"https://github.com/DrakeLeung/OS-scheduling\" target=\"_blank\" rel=\"external\">\n            多道批处理系统两级调度的模拟\n          </a>\n         </li>\n      </ul>\n    </section>\n\n\n    <section class=\"project\">\n      <h3 class=\"title\">\n        <span>项目经验</span>\n        <i class=\"fa fa-star-o\"></i>\n      </h3>\n\n      <ul>\n        <li>\n          <h4 class=\"project-name\">广州优校云教师管理</h4>\n          <p class=\"project-details\">家长和教师沟通平台，现已在多个小学中使用中。\n            我提出使用<strong> MVC 模式 </strong> 。负责权限模块，消息推送，成绩评估等模块。\n          </p>\n        </li>\n\n        <li>\n          <h4 class=\"project-name\">长沙烟草局日常管理</h4>\n          <p class=\"project-details\">\n            主要负责<strong>视频监控模块</strong>。阅读视频硬件商的文档和 demo ，实现了查看各个地区的摄像头的在线情况，实时播放车辆追踪等。\n          </p>\n        </li>\n\n        <li>\n          <h4 class=\"project-name\">海口应急指挥调度系统</h4>\n          <p class=\"project-details\">\n            该系统用来处理海口的紧急事件。维护项目，修复 bug。用 RequireJS 重构地图模块。使用事件冒泡优化电话控件。\n          </p>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"skills\">\n      <h3 class=\"title\">\n        <span>专业技能</span>\n        <i class=\"fa fa-smile-o\"></i>\n      </h3>\n      <ul>\n        <li>\n          <span>JavaScript(ES6)</span>\n          <progress value=\"80\" max=\"100\">80 %</progress>\n        </li>\n        <li>\n          <span>HTML 与 CSS</span>\n          <progress value=\"70\" max=\"100\">70 %</progress>\n        </li>\n        <li>\n          <span>JavaScript 框架</span>\n          <progress value=\"60\" max=\"100\">50 %</progress>\n        </li>\n        <li>\n          <span>CSS 框架和预处理器</span>\n          <progress value=\"50\" max=\"100\">50 %</progress>\n        </li>\n\n        <li>\n          <span>计算机网络(HTTP)</span>\n          <progress value=\"50\" max=\"100\">50 %</progress>\n        </li>\n        <li>\n          <span>服务器端(Node)</span>\n          <progress value=\"30\" max=\"100\">20 %</progress>\n        </li>\n        <li>\n          <span>版本控制(Git)</span>\n          <progress value=\"60\" max=\"100\">60 %</progress>\n        </li>\n        <li>\n          <span>构建工具(Webpack)</span>\n          <progress value=\"30\" max=\"100\">20 %</progress>\n        </li>\n      </ul>\n    </section>\n  </main>\n\n  <aside>\n    <section class=\"avatar\">\n      <img src=\"./avatar.png\" alt=\"avatar\">\n    </section>\n\n    <section class=\"info\">\n      <h4 class=\"title\">个人信息</h4>\n      <ul>\n        <li>梁远成 / 男 / 大三</li>\n        <li>本科 / 广东工业大学 / 计算机</li>\n        <li>\n          <i class=\"fa fa-lg fa-github\"></i>\n          <a href=\"https://github.com/DrakeLeung\" title=\"GitHub\" target=\"_blank\" rel=\"external\">\n            github.com/DrakeLeung\n          </a>\n        </li>\n        <li>\n          <i class=\"fa fa-home fa-lg\"></i>\n          <a href=\"http://drakeleung.github.io/blog/\" title=\"blog\">\n            lyyourc.com\n          </a>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"contact\">\n      <h4 class=\"title\">联系方式</h4>\n      <ul>\n        <li>\n          <i class=\"fa fa-lg fa-mobile\"></i>\n          <span>15622733230<span>\n        </span></span></li>\n        <li>\n          <i class=\"fa fa-envelope-o\"></i>\n          <span>drakeleung42@gmail.com</span>\n        </li>\n        <li>\n          <span>期望职位：<strong>前端工程师</strong>\n        </span></li>\n      </ul>\n    </section>\n\n    <section class=\"profile\">\n      <h4 class=\"title\">个人简介</h4>\n      <p>在学校的 TopView 工作室进行前端开发工作，且负责培训新人。</p>\n      <p>热爱前端，喜欢编程。有想法，能够<strong>独立解决问题 </strong>。喜欢学习不同的东西。想认识更多厉害的人。</p>\n    </section>\n  </aside>\n</body>\n</html>\n","excerpt":"","more":"\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>简历 - 梁远成</title>\n  <link rel=\"stylesheet\" href=\"./font-awesome/css/font-awesome.min.css\">\n  <link rel=\"stylesheet\" href=\"./css/app.css\">\n</head>\n<body>\n  <main>\n    <section class=\"work\">\n      <h3 class=\"title\">\n        <span>个人作品<span>\n          <i class=\"fa fa-heart-o\"></i>\n        </h3>\n      <ul>\n        <li>\n          <a href=\"http://drakeleung.github.io/groove/ \">groove</a>\n          - 排序算法可视化\n        </li>\n        <li>\n          <a href=\"https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2FREADME.md\">\n            jjjustify\n          </a>- 保持图片比例不变的布局\n        </li>\n        <li>前端轮子 - UI 组件，Virtual DOM, Promise</li>\n        <li>Hexo 博客主题 -\n          <a href=\"https://github.com/DrakeLeung/hexo-theme-again\">AGAIN</a>\n        </li>\n        <li>操作系统课设 -\n          <a href=\"https://github.com/DrakeLeung/OS-scheduling\">\n            多道批处理系统两级调度的模拟\n          </a>\n         </li>\n      </ul>\n    </section>\n\n\n    <section class=\"project\">\n      <h3 class=\"title\">\n        <span>项目经验</span>\n        <i class=\"fa fa-star-o\"></i>\n      </h3>\n\n      <ul>\n        <li>\n          <h4 class=\"project-name\">广州优校云教师管理</h4>\n          <p class=\"project-details\">家长和教师沟通平台，现已在多个小学中使用中。\n            我提出使用<strong> MVC 模式 </strong> 。负责权限模块，消息推送，成绩评估等模块。\n          </p>\n        </li>\n\n        <li>\n          <h4 class=\"project-name\">长沙烟草局日常管理</h4>\n          <p class=\"project-details\">\n            主要负责<strong>视频监控模块</strong>。阅读视频硬件商的文档和 demo ，实现了查看各个地区的摄像头的在线情况，实时播放车辆追踪等。\n          </p>\n        </li>\n\n        <li>\n          <h4 class=\"project-name\">海口应急指挥调度系统</h4>\n          <p class=\"project-details\">\n            该系统用来处理海口的紧急事件。维护项目，修复 bug。用 RequireJS 重构地图模块。使用事件冒泡优化电话控件。\n          </p>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"skills\">\n      <h3 class=\"title\">\n        <span>专业技能</span>\n        <i class=\"fa fa-smile-o\"></i>\n      </h3>\n      <ul>\n        <li>\n          <span>JavaScript(ES6)</span>\n          <progress value=\"80\" max=\"100\">80 %</progress>\n        </li>\n        <li>\n          <span>HTML 与 CSS</span>\n          <progress value=\"70\" max=\"100\">70 %</progress>\n        </li>\n        <li>\n          <span>JavaScript 框架</span>\n          <progress value=\"60\" max=\"100\">50 %</progress>\n        </li>\n        <li>\n          <span>CSS 框架和预处理器</span>\n          <progress value=\"50\" max=\"100\">50 %</progress>\n        </li>\n\n        <li>\n          <span>计算机网络(HTTP)</span>\n          <progress value=\"50\" max=\"100\">50 %</progress>\n        </li>\n        <li>\n          <span>服务器端(Node)</span>\n          <progress value=\"30\" max=\"100\">20 %</progress>\n        </li>\n        <li>\n          <span>版本控制(Git)</span>\n          <progress value=\"60\" max=\"100\">60 %</progress>\n        </li>\n        <li>\n          <span>构建工具(Webpack)</span>\n          <progress value=\"30\" max=\"100\">20 %</progress>\n        </li>\n      </ul>\n    </section>\n  </main>\n\n  <aside>\n    <section class=\"avatar\">\n      <img src=\"./avatar.png\" alt=\"avatar\">\n    </section>\n\n    <section class=\"info\">\n      <h4 class=\"title\">个人信息</h4>\n      <ul>\n        <li>梁远成 / 男 / 大三</li>\n        <li>本科 / 广东工业大学 / 计算机</li>\n        <li>\n          <i class=\"fa fa-lg fa-github\"></i>\n          <a href=\"https://github.com/DrakeLeung\" title=\"GitHub\">\n            github.com/DrakeLeung\n          </a>\n        </li>\n        <li>\n          <i class=\"fa fa-home fa-lg\"></i>\n          <a href=\"http://drakeleung.github.io/blog/\" title=\"blog\">\n            lyyourc.com\n          </a>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"contact\">\n      <h4 class=\"title\">联系方式</h4>\n      <ul>\n        <li>\n          <i class=\"fa fa-lg fa-mobile\"></i>\n          <span>15622733230<span>\n        </li>\n        <li>\n          <i class=\"fa fa-envelope-o\"></i>\n          <span>drakeleung42@gmail.com</span>\n        </li>\n        <li>\n          <span>期望职位：<strong>前端工程师</strong>\n        </li>\n      </ul>\n    </section>\n\n    <section class=\"profile\">\n      <h4 class=\"title\">个人简介</h4>\n      <p>在学校的 TopView 工作室进行前端开发工作，且负责培训新人。</p>\n      <p>热爱前端，喜欢编程。有想法，能够<strong>独立解决问题 </strong>。喜欢学习不同的东西。想认识更多厉害的人。</p>\n    </section>\n  </aside>\n</body>\n</html>\n"},{"_content":"{\n  \"name\": \"test\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"sass\": \"sass sass/app.scss:css/app.css --watch\",\n    \"server\": \"live-server --port=3000\",\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n","source":"about/package.json","raw":"{\n  \"name\": \"test\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"sass\": \"sass sass/app.scss:css/app.css --watch\",\n    \"server\": \"live-server --port=3000\",\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n","date":"2016-09-08T05:01:57.000Z","updated":"2016-09-08T05:01:57.000Z","path":"about/package.json","layout":"false","title":"","comments":1,"_id":"cisu742yg000437rqb8yru8lm","content":"{\"name\":\"test\",\"version\":\"1.0.0\",\"description\":\"\",\"main\":\"app.js\",\"scripts\":{\"sass\":\"sass sass/app.scss:css/app.css --watch\",\"server\":\"live-server --port=3000\",\"test\":\"echo \\\"Error: no test specified\\\" && exit 1\"},\"keywords\":[],\"author\":\"\",\"license\":\"ISC\"}","excerpt":"","more":"{\"name\":\"test\",\"version\":\"1.0.0\",\"description\":\"\",\"main\":\"app.js\",\"scripts\":{\"sass\":\"sass sass/app.scss:css/app.css --watch\",\"server\":\"live-server --port=3000\",\"test\":\"echo \\\"Error: no test specified\\\" && exit 1\"},\"keywords\":[],\"author\":\"\",\"license\":\"ISC\"}"},{"_content":"* {\n  box-sizing: border-box; }\n\nhtml {\n  font-size: 62.5%; }\n\nbody {\n  margin: 0;\n  font-size: 1.6rem;\n  font-family: \"Source Han Sans\", \"Microsoft YaHei\", Helvetica, Arial, sans-serif;\n  width: 980px;\n  margin-left: auto;\n  margin-right: auto; }\n\nul {\n  list-style: none;\n  margin: 0;\n  padding: 0; }\n\np {\n  line-height: 1.5; }\n\na {\n  text-decoration: none;\n  color: #42b983; }\n\n.avatar {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 2rem; }\n  .avatar img {\n    padding-top: 1rem;\n    border-radius: 50%; }\n\n.info a {\n  text-decoration: none; }\n\naside {\n  width: 280px;\n  float: right;\n  height: 100%;\n  padding: .8rem;\n  background: #fff;\n  color: #000; }\n  aside h4 {\n    text-align: center;\n    font-size: 1.2rem;\n    background: #42b983;\n    color: #fff;\n    margin: 0 1rem;\n    padding: .5rem 1rem; }\n  aside ul {\n    padding: 1.5rem 1rem; }\n  aside p {\n    padding: 1.5rem 1rem;\n    padding-bottom: 0;\n    margin: 0; }\n  aside li {\n    padding: .5rem; }\n\nheader {\n  background: #000;\n  color: #42b983;\n  min-height: 8rem;\n  position: relative; }\n  header > p {\n    position: absolute;\n    top: 2rem;\n    left: 2rem; }\n\n.work li {\n  padding: .5rem 0; }\n\nsection.project li {\n  overflow: hidden; }\n  section.project li h4.project-name {\n    float: left;\n    width: 9rem;\n    background: #42b983;\n    color: #fff;\n    text-align: center;\n    margin-top: 3px;\n    border-radius: 3px;\n    font-size: 1.2rem;\n    padding: .5rem; }\n  section.project li p.project-details {\n    float: left;\n    width: 70%;\n    margin-left: 2rem;\n    margin-top: 0; }\n\n.skills ul {\n  display: flex;\n  flex-wrap: wrap; }\n.skills li {\n  padding-top: 1rem;\n  width: 50%;\n  padding-right: 1rem;\n  display: flex;\n  justify-content: space-between; }\n  .skills li span {\n    display: inline-block;\n    margin-top: -3px; }\n.skills h3 {\n  margin-bottom: .8rem; }\n.skills progress[value] {\n  -webkit-appearance: none;\n  appearance: none; }\n.skills progress[value]::-webkit-progress-value {\n  background-color: #42b983; }\n.skills progress[value]::-webkit-progress-bar {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25) inset; }\n\nmain {\n  width: 700px;\n  float: right;\n  overflow: hidden;\n  padding: 2rem 1rem;\n  background: #fff;\n  /* create a line after heading */ }\n  main h3 {\n    margin-top: 0; }\n  main > section {\n    border-left: 5px solid #f33;\n    padding-left: 3rem;\n    margin-top: 2rem;\n    position: relative;\n    overflow: hidden; }\n    main > section::before {\n      content: '';\n      display: block;\n      width: 1rem;\n      height: 1.5rem;\n      border-radius: 50%;\n      background: #f33;\n      position: absolute;\n      left: -.5rem; }\n  main > section:first-child {\n    margin-top: 0; }\n\n/*# sourceMappingURL=app.css.map */\n","source":"about/css/app.css","raw":"* {\n  box-sizing: border-box; }\n\nhtml {\n  font-size: 62.5%; }\n\nbody {\n  margin: 0;\n  font-size: 1.6rem;\n  font-family: \"Source Han Sans\", \"Microsoft YaHei\", Helvetica, Arial, sans-serif;\n  width: 980px;\n  margin-left: auto;\n  margin-right: auto; }\n\nul {\n  list-style: none;\n  margin: 0;\n  padding: 0; }\n\np {\n  line-height: 1.5; }\n\na {\n  text-decoration: none;\n  color: #42b983; }\n\n.avatar {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 2rem; }\n  .avatar img {\n    padding-top: 1rem;\n    border-radius: 50%; }\n\n.info a {\n  text-decoration: none; }\n\naside {\n  width: 280px;\n  float: right;\n  height: 100%;\n  padding: .8rem;\n  background: #fff;\n  color: #000; }\n  aside h4 {\n    text-align: center;\n    font-size: 1.2rem;\n    background: #42b983;\n    color: #fff;\n    margin: 0 1rem;\n    padding: .5rem 1rem; }\n  aside ul {\n    padding: 1.5rem 1rem; }\n  aside p {\n    padding: 1.5rem 1rem;\n    padding-bottom: 0;\n    margin: 0; }\n  aside li {\n    padding: .5rem; }\n\nheader {\n  background: #000;\n  color: #42b983;\n  min-height: 8rem;\n  position: relative; }\n  header > p {\n    position: absolute;\n    top: 2rem;\n    left: 2rem; }\n\n.work li {\n  padding: .5rem 0; }\n\nsection.project li {\n  overflow: hidden; }\n  section.project li h4.project-name {\n    float: left;\n    width: 9rem;\n    background: #42b983;\n    color: #fff;\n    text-align: center;\n    margin-top: 3px;\n    border-radius: 3px;\n    font-size: 1.2rem;\n    padding: .5rem; }\n  section.project li p.project-details {\n    float: left;\n    width: 70%;\n    margin-left: 2rem;\n    margin-top: 0; }\n\n.skills ul {\n  display: flex;\n  flex-wrap: wrap; }\n.skills li {\n  padding-top: 1rem;\n  width: 50%;\n  padding-right: 1rem;\n  display: flex;\n  justify-content: space-between; }\n  .skills li span {\n    display: inline-block;\n    margin-top: -3px; }\n.skills h3 {\n  margin-bottom: .8rem; }\n.skills progress[value] {\n  -webkit-appearance: none;\n  appearance: none; }\n.skills progress[value]::-webkit-progress-value {\n  background-color: #42b983; }\n.skills progress[value]::-webkit-progress-bar {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25) inset; }\n\nmain {\n  width: 700px;\n  float: right;\n  overflow: hidden;\n  padding: 2rem 1rem;\n  background: #fff;\n  /* create a line after heading */ }\n  main h3 {\n    margin-top: 0; }\n  main > section {\n    border-left: 5px solid #f33;\n    padding-left: 3rem;\n    margin-top: 2rem;\n    position: relative;\n    overflow: hidden; }\n    main > section::before {\n      content: '';\n      display: block;\n      width: 1rem;\n      height: 1.5rem;\n      border-radius: 50%;\n      background: #f33;\n      position: absolute;\n      left: -.5rem; }\n  main > section:first-child {\n    margin-top: 0; }\n\n/*# sourceMappingURL=app.css.map */\n","date":"2016-09-08T05:01:57.000Z","updated":"2016-09-08T05:01:57.000Z","path":"about/css/app.css","layout":"false","title":"","comments":1,"_id":"cisu7431a002337rqxraq1k3w","content":"* {\n  box-sizing: border-box; }\n\nhtml {\n  font-size: 62.5%; }\n\nbody {\n  margin: 0;\n  font-size: 1.6rem;\n  font-family: \"Source Han Sans\", \"Microsoft YaHei\", Helvetica, Arial, sans-serif;\n  width: 980px;\n  margin-left: auto;\n  margin-right: auto; }\n\nul {\n  list-style: none;\n  margin: 0;\n  padding: 0; }\n\np {\n  line-height: 1.5; }\n\na {\n  text-decoration: none;\n  color: #42b983; }\n\n.avatar {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 2rem; }\n  .avatar img {\n    padding-top: 1rem;\n    border-radius: 50%; }\n\n.info a {\n  text-decoration: none; }\n\naside {\n  width: 280px;\n  float: right;\n  height: 100%;\n  padding: .8rem;\n  background: #fff;\n  color: #000; }\n  aside h4 {\n    text-align: center;\n    font-size: 1.2rem;\n    background: #42b983;\n    color: #fff;\n    margin: 0 1rem;\n    padding: .5rem 1rem; }\n  aside ul {\n    padding: 1.5rem 1rem; }\n  aside p {\n    padding: 1.5rem 1rem;\n    padding-bottom: 0;\n    margin: 0; }\n  aside li {\n    padding: .5rem; }\n\nheader {\n  background: #000;\n  color: #42b983;\n  min-height: 8rem;\n  position: relative; }\n  header > p {\n    position: absolute;\n    top: 2rem;\n    left: 2rem; }\n\n.work li {\n  padding: .5rem 0; }\n\nsection.project li {\n  overflow: hidden; }\n  section.project li h4.project-name {\n    float: left;\n    width: 9rem;\n    background: #42b983;\n    color: #fff;\n    text-align: center;\n    margin-top: 3px;\n    border-radius: 3px;\n    font-size: 1.2rem;\n    padding: .5rem; }\n  section.project li p.project-details {\n    float: left;\n    width: 70%;\n    margin-left: 2rem;\n    margin-top: 0; }\n\n.skills ul {\n  display: flex;\n  flex-wrap: wrap; }\n.skills li {\n  padding-top: 1rem;\n  width: 50%;\n  padding-right: 1rem;\n  display: flex;\n  justify-content: space-between; }\n  .skills li span {\n    display: inline-block;\n    margin-top: -3px; }\n.skills h3 {\n  margin-bottom: .8rem; }\n.skills progress[value] {\n  -webkit-appearance: none;\n  appearance: none; }\n.skills progress[value]::-webkit-progress-value {\n  background-color: #42b983; }\n.skills progress[value]::-webkit-progress-bar {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25) inset; }\n\nmain {\n  width: 700px;\n  float: right;\n  overflow: hidden;\n  padding: 2rem 1rem;\n  background: #fff;\n  /* create a line after heading */ }\n  main h3 {\n    margin-top: 0; }\n  main > section {\n    border-left: 5px solid #f33;\n    padding-left: 3rem;\n    margin-top: 2rem;\n    position: relative;\n    overflow: hidden; }\n    main > section::before {\n      content: '';\n      display: block;\n      width: 1rem;\n      height: 1.5rem;\n      border-radius: 50%;\n      background: #f33;\n      position: absolute;\n      left: -.5rem; }\n  main > section:first-child {\n    margin-top: 0; }\n\n/*# sourceMappingURL=app.css.map */\n","excerpt":"","more":"* {\n  box-sizing: border-box; }\n\nhtml {\n  font-size: 62.5%; }\n\nbody {\n  margin: 0;\n  font-size: 1.6rem;\n  font-family: \"Source Han Sans\", \"Microsoft YaHei\", Helvetica, Arial, sans-serif;\n  width: 980px;\n  margin-left: auto;\n  margin-right: auto; }\n\nul {\n  list-style: none;\n  margin: 0;\n  padding: 0; }\n\np {\n  line-height: 1.5; }\n\na {\n  text-decoration: none;\n  color: #42b983; }\n\n.avatar {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 2rem; }\n  .avatar img {\n    padding-top: 1rem;\n    border-radius: 50%; }\n\n.info a {\n  text-decoration: none; }\n\naside {\n  width: 280px;\n  float: right;\n  height: 100%;\n  padding: .8rem;\n  background: #fff;\n  color: #000; }\n  aside h4 {\n    text-align: center;\n    font-size: 1.2rem;\n    background: #42b983;\n    color: #fff;\n    margin: 0 1rem;\n    padding: .5rem 1rem; }\n  aside ul {\n    padding: 1.5rem 1rem; }\n  aside p {\n    padding: 1.5rem 1rem;\n    padding-bottom: 0;\n    margin: 0; }\n  aside li {\n    padding: .5rem; }\n\nheader {\n  background: #000;\n  color: #42b983;\n  min-height: 8rem;\n  position: relative; }\n  header > p {\n    position: absolute;\n    top: 2rem;\n    left: 2rem; }\n\n.work li {\n  padding: .5rem 0; }\n\nsection.project li {\n  overflow: hidden; }\n  section.project li h4.project-name {\n    float: left;\n    width: 9rem;\n    background: #42b983;\n    color: #fff;\n    text-align: center;\n    margin-top: 3px;\n    border-radius: 3px;\n    font-size: 1.2rem;\n    padding: .5rem; }\n  section.project li p.project-details {\n    float: left;\n    width: 70%;\n    margin-left: 2rem;\n    margin-top: 0; }\n\n.skills ul {\n  display: flex;\n  flex-wrap: wrap; }\n.skills li {\n  padding-top: 1rem;\n  width: 50%;\n  padding-right: 1rem;\n  display: flex;\n  justify-content: space-between; }\n  .skills li span {\n    display: inline-block;\n    margin-top: -3px; }\n.skills h3 {\n  margin-bottom: .8rem; }\n.skills progress[value] {\n  -webkit-appearance: none;\n  appearance: none; }\n.skills progress[value]::-webkit-progress-value {\n  background-color: #42b983; }\n.skills progress[value]::-webkit-progress-bar {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25) inset; }\n\nmain {\n  width: 700px;\n  float: right;\n  overflow: hidden;\n  padding: 2rem 1rem;\n  background: #fff;\n  /* create a line after heading */ }\n  main h3 {\n    margin-top: 0; }\n  main > section {\n    border-left: 5px solid #f33;\n    padding-left: 3rem;\n    margin-top: 2rem;\n    position: relative;\n    overflow: hidden; }\n    main > section::before {\n      content: '';\n      display: block;\n      width: 1rem;\n      height: 1.5rem;\n      border-radius: 50%;\n      background: #f33;\n      position: absolute;\n      left: -.5rem; }\n  main > section:first-child {\n    margin-top: 0; }\n\n/*# sourceMappingURL=app.css.map */\n"},{"_content":"@import \"./variables\";\n\n@import \"./basic\";\n@import \"./aside/index\";\n@import \"./main/index\"\n","source":"about/sass/app.scss","raw":"@import \"./variables\";\n\n@import \"./basic\";\n@import \"./aside/index\";\n@import \"./main/index\"\n","date":"2016-09-08T05:01:57.000Z","updated":"2016-09-08T05:01:57.000Z","path":"about/sass/app.css","layout":"false","title":"","comments":1,"_id":"cisu7431d002437rqbkrir07a","content":"* {\n  box-sizing: border-box; }\n\nhtml {\n  font-size: 62.5%; }\n\nbody {\n  margin: 0;\n  font-size: 1.6rem;\n  font-family: \"Source Han Sans\", \"Microsoft YaHei\", Helvetica, Arial, sans-serif;\n  width: 980px;\n  margin-left: auto;\n  margin-right: auto; }\n\nul {\n  list-style: none;\n  margin: 0;\n  padding: 0; }\n\np {\n  line-height: 1.5; }\n\na {\n  text-decoration: none;\n  color: #42b983; }\n\n.avatar {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 2rem; }\n  .avatar img {\n    padding-top: 1rem;\n    border-radius: 50%; }\n\n.info a {\n  text-decoration: none; }\n\naside {\n  width: 280px;\n  float: right;\n  height: 100%;\n  padding: .8rem;\n  background: #fff;\n  color: #000; }\n  aside h4 {\n    text-align: center;\n    font-size: 1.2rem;\n    background: #42b983;\n    color: #fff;\n    margin: 0 1rem;\n    padding: .5rem 1rem; }\n  aside ul {\n    padding: 1.5rem 1rem; }\n  aside p {\n    padding: 1.5rem 1rem;\n    padding-bottom: 0;\n    margin: 0; }\n  aside li {\n    padding: .5rem; }\n\nheader {\n  background: #000;\n  color: #42b983;\n  min-height: 8rem;\n  position: relative; }\n  header > p {\n    position: absolute;\n    top: 2rem;\n    left: 2rem; }\n\n.work li {\n  padding: .5rem 0; }\n\nsection.project li {\n  overflow: hidden; }\n  section.project li h4.project-name {\n    float: left;\n    width: 9rem;\n    background: #42b983;\n    color: #fff;\n    text-align: center;\n    margin-top: 3px;\n    border-radius: 3px;\n    font-size: 1.2rem;\n    padding: .5rem; }\n  section.project li p.project-details {\n    float: left;\n    width: 70%;\n    margin-left: 2rem;\n    margin-top: 0; }\n\n.skills ul {\n  display: flex;\n  flex-wrap: wrap; }\n\n.skills li {\n  padding-top: 1rem;\n  width: 50%;\n  padding-right: 1rem;\n  display: flex;\n  justify-content: space-between; }\n  .skills li span {\n    display: inline-block;\n    margin-top: -3px; }\n\n.skills h3 {\n  margin-bottom: .8rem; }\n\n.skills progress[value] {\n  -webkit-appearance: none;\n  appearance: none; }\n\n.skills progress[value]::-webkit-progress-value {\n  background-color: #42b983; }\n\n.skills progress[value]::-webkit-progress-bar {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25) inset; }\n\nmain {\n  width: 700px;\n  float: right;\n  overflow: hidden;\n  padding: 2rem 1rem;\n  background: #fff;\n  /* create a line after heading */ }\n  main h3 {\n    margin-top: 0; }\n  main > section {\n    border-left: 5px solid #f33;\n    padding-left: 3rem;\n    margin-top: 2rem;\n    position: relative;\n    overflow: hidden; }\n    main > section::before {\n      content: '';\n      display: block;\n      width: 1rem;\n      height: 1.5rem;\n      border-radius: 50%;\n      background: #f33;\n      position: absolute;\n      left: -.5rem; }\n  main > section:first-child {\n    margin-top: 0; }\n","excerpt":"","more":"* {\n  box-sizing: border-box; }\n\nhtml {\n  font-size: 62.5%; }\n\nbody {\n  margin: 0;\n  font-size: 1.6rem;\n  font-family: \"Source Han Sans\", \"Microsoft YaHei\", Helvetica, Arial, sans-serif;\n  width: 980px;\n  margin-left: auto;\n  margin-right: auto; }\n\nul {\n  list-style: none;\n  margin: 0;\n  padding: 0; }\n\np {\n  line-height: 1.5; }\n\na {\n  text-decoration: none;\n  color: #42b983; }\n\n.avatar {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 2rem; }\n  .avatar img {\n    padding-top: 1rem;\n    border-radius: 50%; }\n\n.info a {\n  text-decoration: none; }\n\naside {\n  width: 280px;\n  float: right;\n  height: 100%;\n  padding: .8rem;\n  background: #fff;\n  color: #000; }\n  aside h4 {\n    text-align: center;\n    font-size: 1.2rem;\n    background: #42b983;\n    color: #fff;\n    margin: 0 1rem;\n    padding: .5rem 1rem; }\n  aside ul {\n    padding: 1.5rem 1rem; }\n  aside p {\n    padding: 1.5rem 1rem;\n    padding-bottom: 0;\n    margin: 0; }\n  aside li {\n    padding: .5rem; }\n\nheader {\n  background: #000;\n  color: #42b983;\n  min-height: 8rem;\n  position: relative; }\n  header > p {\n    position: absolute;\n    top: 2rem;\n    left: 2rem; }\n\n.work li {\n  padding: .5rem 0; }\n\nsection.project li {\n  overflow: hidden; }\n  section.project li h4.project-name {\n    float: left;\n    width: 9rem;\n    background: #42b983;\n    color: #fff;\n    text-align: center;\n    margin-top: 3px;\n    border-radius: 3px;\n    font-size: 1.2rem;\n    padding: .5rem; }\n  section.project li p.project-details {\n    float: left;\n    width: 70%;\n    margin-left: 2rem;\n    margin-top: 0; }\n\n.skills ul {\n  display: flex;\n  flex-wrap: wrap; }\n\n.skills li {\n  padding-top: 1rem;\n  width: 50%;\n  padding-right: 1rem;\n  display: flex;\n  justify-content: space-between; }\n  .skills li span {\n    display: inline-block;\n    margin-top: -3px; }\n\n.skills h3 {\n  margin-bottom: .8rem; }\n\n.skills progress[value] {\n  -webkit-appearance: none;\n  appearance: none; }\n\n.skills progress[value]::-webkit-progress-value {\n  background-color: #42b983; }\n\n.skills progress[value]::-webkit-progress-bar {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25) inset; }\n\nmain {\n  width: 700px;\n  float: right;\n  overflow: hidden;\n  padding: 2rem 1rem;\n  background: #fff;\n  /* create a line after heading */ }\n  main h3 {\n    margin-top: 0; }\n  main > section {\n    border-left: 5px solid #f33;\n    padding-left: 3rem;\n    margin-top: 2rem;\n    position: relative;\n    overflow: hidden; }\n    main > section::before {\n      content: '';\n      display: block;\n      width: 1rem;\n      height: 1.5rem;\n      border-radius: 50%;\n      background: #f33;\n      position: absolute;\n      left: -.5rem; }\n  main > section:first-child {\n    margin-top: 0; }\n"},{"_content":"/*!\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */\n/* FONT PATH\n * -------------------------- */\n@font-face {\n  font-family: 'FontAwesome';\n  src: url('../fonts/fontawesome-webfont.eot?v=4.5.0');\n  src: url('../fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'), url('../fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'), url('../fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'), url('../fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'), url('../fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n.fa {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n/* makes the font 33% larger relative to the icon container */\n.fa-lg {\n  font-size: 1.33333333em;\n  line-height: 0.75em;\n  vertical-align: -15%;\n}\n.fa-2x {\n  font-size: 2em;\n}\n.fa-3x {\n  font-size: 3em;\n}\n.fa-4x {\n  font-size: 4em;\n}\n.fa-5x {\n  font-size: 5em;\n}\n.fa-fw {\n  width: 1.28571429em;\n  text-align: center;\n}\n.fa-ul {\n  padding-left: 0;\n  margin-left: 2.14285714em;\n  list-style-type: none;\n}\n.fa-ul > li {\n  position: relative;\n}\n.fa-li {\n  position: absolute;\n  left: -2.14285714em;\n  width: 2.14285714em;\n  top: 0.14285714em;\n  text-align: center;\n}\n.fa-li.fa-lg {\n  left: -1.85714286em;\n}\n.fa-border {\n  padding: .2em .25em .15em;\n  border: solid 0.08em #eeeeee;\n  border-radius: .1em;\n}\n.fa-pull-left {\n  float: left;\n}\n.fa-pull-right {\n  float: right;\n}\n.fa.fa-pull-left {\n  margin-right: .3em;\n}\n.fa.fa-pull-right {\n  margin-left: .3em;\n}\n/* Deprecated as of 4.4.0 */\n.pull-right {\n  float: right;\n}\n.pull-left {\n  float: left;\n}\n.fa.pull-left {\n  margin-right: .3em;\n}\n.fa.pull-right {\n  margin-left: .3em;\n}\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n  animation: fa-spin 2s infinite linear;\n}\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n  animation: fa-spin 1s infinite steps(8);\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n.fa-rotate-90 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);\n  -webkit-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.fa-rotate-180 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n  -webkit-transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n  transform: rotate(180deg);\n}\n.fa-rotate-270 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);\n  -webkit-transform: rotate(270deg);\n  -ms-transform: rotate(270deg);\n  transform: rotate(270deg);\n}\n.fa-flip-horizontal {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);\n  -webkit-transform: scale(-1, 1);\n  -ms-transform: scale(-1, 1);\n  transform: scale(-1, 1);\n}\n.fa-flip-vertical {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);\n  -webkit-transform: scale(1, -1);\n  -ms-transform: scale(1, -1);\n  transform: scale(1, -1);\n}\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  filter: none;\n}\n.fa-stack {\n  position: relative;\n  display: inline-block;\n  width: 2em;\n  height: 2em;\n  line-height: 2em;\n  vertical-align: middle;\n}\n.fa-stack-1x,\n.fa-stack-2x {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n.fa-stack-1x {\n  line-height: inherit;\n}\n.fa-stack-2x {\n  font-size: 2em;\n}\n.fa-inverse {\n  color: #ffffff;\n}\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\n   readers do not read off random characters that represent icons */\n.fa-glass:before {\n  content: \"\\f000\";\n}\n.fa-music:before {\n  content: \"\\f001\";\n}\n.fa-search:before {\n  content: \"\\f002\";\n}\n.fa-envelope-o:before {\n  content: \"\\f003\";\n}\n.fa-heart:before {\n  content: \"\\f004\";\n}\n.fa-star:before {\n  content: \"\\f005\";\n}\n.fa-star-o:before {\n  content: \"\\f006\";\n}\n.fa-user:before {\n  content: \"\\f007\";\n}\n.fa-film:before {\n  content: \"\\f008\";\n}\n.fa-th-large:before {\n  content: \"\\f009\";\n}\n.fa-th:before {\n  content: \"\\f00a\";\n}\n.fa-th-list:before {\n  content: \"\\f00b\";\n}\n.fa-check:before {\n  content: \"\\f00c\";\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: \"\\f00d\";\n}\n.fa-search-plus:before {\n  content: \"\\f00e\";\n}\n.fa-search-minus:before {\n  content: \"\\f010\";\n}\n.fa-power-off:before {\n  content: \"\\f011\";\n}\n.fa-signal:before {\n  content: \"\\f012\";\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: \"\\f013\";\n}\n.fa-trash-o:before {\n  content: \"\\f014\";\n}\n.fa-home:before {\n  content: \"\\f015\";\n}\n.fa-file-o:before {\n  content: \"\\f016\";\n}\n.fa-clock-o:before {\n  content: \"\\f017\";\n}\n.fa-road:before {\n  content: \"\\f018\";\n}\n.fa-download:before {\n  content: \"\\f019\";\n}\n.fa-arrow-circle-o-down:before {\n  content: \"\\f01a\";\n}\n.fa-arrow-circle-o-up:before {\n  content: \"\\f01b\";\n}\n.fa-inbox:before {\n  content: \"\\f01c\";\n}\n.fa-play-circle-o:before {\n  content: \"\\f01d\";\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: \"\\f01e\";\n}\n.fa-refresh:before {\n  content: \"\\f021\";\n}\n.fa-list-alt:before {\n  content: \"\\f022\";\n}\n.fa-lock:before {\n  content: \"\\f023\";\n}\n.fa-flag:before {\n  content: \"\\f024\";\n}\n.fa-headphones:before {\n  content: \"\\f025\";\n}\n.fa-volume-off:before {\n  content: \"\\f026\";\n}\n.fa-volume-down:before {\n  content: \"\\f027\";\n}\n.fa-volume-up:before {\n  content: \"\\f028\";\n}\n.fa-qrcode:before {\n  content: \"\\f029\";\n}\n.fa-barcode:before {\n  content: \"\\f02a\";\n}\n.fa-tag:before {\n  content: \"\\f02b\";\n}\n.fa-tags:before {\n  content: \"\\f02c\";\n}\n.fa-book:before {\n  content: \"\\f02d\";\n}\n.fa-bookmark:before {\n  content: \"\\f02e\";\n}\n.fa-print:before {\n  content: \"\\f02f\";\n}\n.fa-camera:before {\n  content: \"\\f030\";\n}\n.fa-font:before {\n  content: \"\\f031\";\n}\n.fa-bold:before {\n  content: \"\\f032\";\n}\n.fa-italic:before {\n  content: \"\\f033\";\n}\n.fa-text-height:before {\n  content: \"\\f034\";\n}\n.fa-text-width:before {\n  content: \"\\f035\";\n}\n.fa-align-left:before {\n  content: \"\\f036\";\n}\n.fa-align-center:before {\n  content: \"\\f037\";\n}\n.fa-align-right:before {\n  content: \"\\f038\";\n}\n.fa-align-justify:before {\n  content: \"\\f039\";\n}\n.fa-list:before {\n  content: \"\\f03a\";\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: \"\\f03b\";\n}\n.fa-indent:before {\n  content: \"\\f03c\";\n}\n.fa-video-camera:before {\n  content: \"\\f03d\";\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: \"\\f03e\";\n}\n.fa-pencil:before {\n  content: \"\\f040\";\n}\n.fa-map-marker:before {\n  content: \"\\f041\";\n}\n.fa-adjust:before {\n  content: \"\\f042\";\n}\n.fa-tint:before {\n  content: \"\\f043\";\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: \"\\f044\";\n}\n.fa-share-square-o:before {\n  content: \"\\f045\";\n}\n.fa-check-square-o:before {\n  content: \"\\f046\";\n}\n.fa-arrows:before {\n  content: \"\\f047\";\n}\n.fa-step-backward:before {\n  content: \"\\f048\";\n}\n.fa-fast-backward:before {\n  content: \"\\f049\";\n}\n.fa-backward:before {\n  content: \"\\f04a\";\n}\n.fa-play:before {\n  content: \"\\f04b\";\n}\n.fa-pause:before {\n  content: \"\\f04c\";\n}\n.fa-stop:before {\n  content: \"\\f04d\";\n}\n.fa-forward:before {\n  content: \"\\f04e\";\n}\n.fa-fast-forward:before {\n  content: \"\\f050\";\n}\n.fa-step-forward:before {\n  content: \"\\f051\";\n}\n.fa-eject:before {\n  content: \"\\f052\";\n}\n.fa-chevron-left:before {\n  content: \"\\f053\";\n}\n.fa-chevron-right:before {\n  content: \"\\f054\";\n}\n.fa-plus-circle:before {\n  content: \"\\f055\";\n}\n.fa-minus-circle:before {\n  content: \"\\f056\";\n}\n.fa-times-circle:before {\n  content: \"\\f057\";\n}\n.fa-check-circle:before {\n  content: \"\\f058\";\n}\n.fa-question-circle:before {\n  content: \"\\f059\";\n}\n.fa-info-circle:before {\n  content: \"\\f05a\";\n}\n.fa-crosshairs:before {\n  content: \"\\f05b\";\n}\n.fa-times-circle-o:before {\n  content: \"\\f05c\";\n}\n.fa-check-circle-o:before {\n  content: \"\\f05d\";\n}\n.fa-ban:before {\n  content: \"\\f05e\";\n}\n.fa-arrow-left:before {\n  content: \"\\f060\";\n}\n.fa-arrow-right:before {\n  content: \"\\f061\";\n}\n.fa-arrow-up:before {\n  content: \"\\f062\";\n}\n.fa-arrow-down:before {\n  content: \"\\f063\";\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: \"\\f064\";\n}\n.fa-expand:before {\n  content: \"\\f065\";\n}\n.fa-compress:before {\n  content: \"\\f066\";\n}\n.fa-plus:before {\n  content: \"\\f067\";\n}\n.fa-minus:before {\n  content: \"\\f068\";\n}\n.fa-asterisk:before {\n  content: \"\\f069\";\n}\n.fa-exclamation-circle:before {\n  content: \"\\f06a\";\n}\n.fa-gift:before {\n  content: \"\\f06b\";\n}\n.fa-leaf:before {\n  content: \"\\f06c\";\n}\n.fa-fire:before {\n  content: \"\\f06d\";\n}\n.fa-eye:before {\n  content: \"\\f06e\";\n}\n.fa-eye-slash:before {\n  content: \"\\f070\";\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: \"\\f071\";\n}\n.fa-plane:before {\n  content: \"\\f072\";\n}\n.fa-calendar:before {\n  content: \"\\f073\";\n}\n.fa-random:before {\n  content: \"\\f074\";\n}\n.fa-comment:before {\n  content: \"\\f075\";\n}\n.fa-magnet:before {\n  content: \"\\f076\";\n}\n.fa-chevron-up:before {\n  content: \"\\f077\";\n}\n.fa-chevron-down:before {\n  content: \"\\f078\";\n}\n.fa-retweet:before {\n  content: \"\\f079\";\n}\n.fa-shopping-cart:before {\n  content: \"\\f07a\";\n}\n.fa-folder:before {\n  content: \"\\f07b\";\n}\n.fa-folder-open:before {\n  content: \"\\f07c\";\n}\n.fa-arrows-v:before {\n  content: \"\\f07d\";\n}\n.fa-arrows-h:before {\n  content: \"\\f07e\";\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: \"\\f080\";\n}\n.fa-twitter-square:before {\n  content: \"\\f081\";\n}\n.fa-facebook-square:before {\n  content: \"\\f082\";\n}\n.fa-camera-retro:before {\n  content: \"\\f083\";\n}\n.fa-key:before {\n  content: \"\\f084\";\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: \"\\f085\";\n}\n.fa-comments:before {\n  content: \"\\f086\";\n}\n.fa-thumbs-o-up:before {\n  content: \"\\f087\";\n}\n.fa-thumbs-o-down:before {\n  content: \"\\f088\";\n}\n.fa-star-half:before {\n  content: \"\\f089\";\n}\n.fa-heart-o:before {\n  content: \"\\f08a\";\n}\n.fa-sign-out:before {\n  content: \"\\f08b\";\n}\n.fa-linkedin-square:before {\n  content: \"\\f08c\";\n}\n.fa-thumb-tack:before {\n  content: \"\\f08d\";\n}\n.fa-external-link:before {\n  content: \"\\f08e\";\n}\n.fa-sign-in:before {\n  content: \"\\f090\";\n}\n.fa-trophy:before {\n  content: \"\\f091\";\n}\n.fa-github-square:before {\n  content: \"\\f092\";\n}\n.fa-upload:before {\n  content: \"\\f093\";\n}\n.fa-lemon-o:before {\n  content: \"\\f094\";\n}\n.fa-phone:before {\n  content: \"\\f095\";\n}\n.fa-square-o:before {\n  content: \"\\f096\";\n}\n.fa-bookmark-o:before {\n  content: \"\\f097\";\n}\n.fa-phone-square:before {\n  content: \"\\f098\";\n}\n.fa-twitter:before {\n  content: \"\\f099\";\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: \"\\f09a\";\n}\n.fa-github:before {\n  content: \"\\f09b\";\n}\n.fa-unlock:before {\n  content: \"\\f09c\";\n}\n.fa-credit-card:before {\n  content: \"\\f09d\";\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: \"\\f09e\";\n}\n.fa-hdd-o:before {\n  content: \"\\f0a0\";\n}\n.fa-bullhorn:before {\n  content: \"\\f0a1\";\n}\n.fa-bell:before {\n  content: \"\\f0f3\";\n}\n.fa-certificate:before {\n  content: \"\\f0a3\";\n}\n.fa-hand-o-right:before {\n  content: \"\\f0a4\";\n}\n.fa-hand-o-left:before {\n  content: \"\\f0a5\";\n}\n.fa-hand-o-up:before {\n  content: \"\\f0a6\";\n}\n.fa-hand-o-down:before {\n  content: \"\\f0a7\";\n}\n.fa-arrow-circle-left:before {\n  content: \"\\f0a8\";\n}\n.fa-arrow-circle-right:before {\n  content: \"\\f0a9\";\n}\n.fa-arrow-circle-up:before {\n  content: \"\\f0aa\";\n}\n.fa-arrow-circle-down:before {\n  content: \"\\f0ab\";\n}\n.fa-globe:before {\n  content: \"\\f0ac\";\n}\n.fa-wrench:before {\n  content: \"\\f0ad\";\n}\n.fa-tasks:before {\n  content: \"\\f0ae\";\n}\n.fa-filter:before {\n  content: \"\\f0b0\";\n}\n.fa-briefcase:before {\n  content: \"\\f0b1\";\n}\n.fa-arrows-alt:before {\n  content: \"\\f0b2\";\n}\n.fa-group:before,\n.fa-users:before {\n  content: \"\\f0c0\";\n}\n.fa-chain:before,\n.fa-link:before {\n  content: \"\\f0c1\";\n}\n.fa-cloud:before {\n  content: \"\\f0c2\";\n}\n.fa-flask:before {\n  content: \"\\f0c3\";\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: \"\\f0c4\";\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: \"\\f0c5\";\n}\n.fa-paperclip:before {\n  content: \"\\f0c6\";\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: \"\\f0c7\";\n}\n.fa-square:before {\n  content: \"\\f0c8\";\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: \"\\f0c9\";\n}\n.fa-list-ul:before {\n  content: \"\\f0ca\";\n}\n.fa-list-ol:before {\n  content: \"\\f0cb\";\n}\n.fa-strikethrough:before {\n  content: \"\\f0cc\";\n}\n.fa-underline:before {\n  content: \"\\f0cd\";\n}\n.fa-table:before {\n  content: \"\\f0ce\";\n}\n.fa-magic:before {\n  content: \"\\f0d0\";\n}\n.fa-truck:before {\n  content: \"\\f0d1\";\n}\n.fa-pinterest:before {\n  content: \"\\f0d2\";\n}\n.fa-pinterest-square:before {\n  content: \"\\f0d3\";\n}\n.fa-google-plus-square:before {\n  content: \"\\f0d4\";\n}\n.fa-google-plus:before {\n  content: \"\\f0d5\";\n}\n.fa-money:before {\n  content: \"\\f0d6\";\n}\n.fa-caret-down:before {\n  content: \"\\f0d7\";\n}\n.fa-caret-up:before {\n  content: \"\\f0d8\";\n}\n.fa-caret-left:before {\n  content: \"\\f0d9\";\n}\n.fa-caret-right:before {\n  content: \"\\f0da\";\n}\n.fa-columns:before {\n  content: \"\\f0db\";\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: \"\\f0dc\";\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: \"\\f0dd\";\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: \"\\f0de\";\n}\n.fa-envelope:before {\n  content: \"\\f0e0\";\n}\n.fa-linkedin:before {\n  content: \"\\f0e1\";\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: \"\\f0e2\";\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: \"\\f0e3\";\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: \"\\f0e4\";\n}\n.fa-comment-o:before {\n  content: \"\\f0e5\";\n}\n.fa-comments-o:before {\n  content: \"\\f0e6\";\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: \"\\f0e7\";\n}\n.fa-sitemap:before {\n  content: \"\\f0e8\";\n}\n.fa-umbrella:before {\n  content: \"\\f0e9\";\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: \"\\f0ea\";\n}\n.fa-lightbulb-o:before {\n  content: \"\\f0eb\";\n}\n.fa-exchange:before {\n  content: \"\\f0ec\";\n}\n.fa-cloud-download:before {\n  content: \"\\f0ed\";\n}\n.fa-cloud-upload:before {\n  content: \"\\f0ee\";\n}\n.fa-user-md:before {\n  content: \"\\f0f0\";\n}\n.fa-stethoscope:before {\n  content: \"\\f0f1\";\n}\n.fa-suitcase:before {\n  content: \"\\f0f2\";\n}\n.fa-bell-o:before {\n  content: \"\\f0a2\";\n}\n.fa-coffee:before {\n  content: \"\\f0f4\";\n}\n.fa-cutlery:before {\n  content: \"\\f0f5\";\n}\n.fa-file-text-o:before {\n  content: \"\\f0f6\";\n}\n.fa-building-o:before {\n  content: \"\\f0f7\";\n}\n.fa-hospital-o:before {\n  content: \"\\f0f8\";\n}\n.fa-ambulance:before {\n  content: \"\\f0f9\";\n}\n.fa-medkit:before {\n  content: \"\\f0fa\";\n}\n.fa-fighter-jet:before {\n  content: \"\\f0fb\";\n}\n.fa-beer:before {\n  content: \"\\f0fc\";\n}\n.fa-h-square:before {\n  content: \"\\f0fd\";\n}\n.fa-plus-square:before {\n  content: \"\\f0fe\";\n}\n.fa-angle-double-left:before {\n  content: \"\\f100\";\n}\n.fa-angle-double-right:before {\n  content: \"\\f101\";\n}\n.fa-angle-double-up:before {\n  content: \"\\f102\";\n}\n.fa-angle-double-down:before {\n  content: \"\\f103\";\n}\n.fa-angle-left:before {\n  content: \"\\f104\";\n}\n.fa-angle-right:before {\n  content: \"\\f105\";\n}\n.fa-angle-up:before {\n  content: \"\\f106\";\n}\n.fa-angle-down:before {\n  content: \"\\f107\";\n}\n.fa-desktop:before {\n  content: \"\\f108\";\n}\n.fa-laptop:before {\n  content: \"\\f109\";\n}\n.fa-tablet:before {\n  content: \"\\f10a\";\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: \"\\f10b\";\n}\n.fa-circle-o:before {\n  content: \"\\f10c\";\n}\n.fa-quote-left:before {\n  content: \"\\f10d\";\n}\n.fa-quote-right:before {\n  content: \"\\f10e\";\n}\n.fa-spinner:before {\n  content: \"\\f110\";\n}\n.fa-circle:before {\n  content: \"\\f111\";\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: \"\\f112\";\n}\n.fa-github-alt:before {\n  content: \"\\f113\";\n}\n.fa-folder-o:before {\n  content: \"\\f114\";\n}\n.fa-folder-open-o:before {\n  content: \"\\f115\";\n}\n.fa-smile-o:before {\n  content: \"\\f118\";\n}\n.fa-frown-o:before {\n  content: \"\\f119\";\n}\n.fa-meh-o:before {\n  content: \"\\f11a\";\n}\n.fa-gamepad:before {\n  content: \"\\f11b\";\n}\n.fa-keyboard-o:before {\n  content: \"\\f11c\";\n}\n.fa-flag-o:before {\n  content: \"\\f11d\";\n}\n.fa-flag-checkered:before {\n  content: \"\\f11e\";\n}\n.fa-terminal:before {\n  content: \"\\f120\";\n}\n.fa-code:before {\n  content: \"\\f121\";\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: \"\\f122\";\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: \"\\f123\";\n}\n.fa-location-arrow:before {\n  content: \"\\f124\";\n}\n.fa-crop:before {\n  content: \"\\f125\";\n}\n.fa-code-fork:before {\n  content: \"\\f126\";\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: \"\\f127\";\n}\n.fa-question:before {\n  content: \"\\f128\";\n}\n.fa-info:before {\n  content: \"\\f129\";\n}\n.fa-exclamation:before {\n  content: \"\\f12a\";\n}\n.fa-superscript:before {\n  content: \"\\f12b\";\n}\n.fa-subscript:before {\n  content: \"\\f12c\";\n}\n.fa-eraser:before {\n  content: \"\\f12d\";\n}\n.fa-puzzle-piece:before {\n  content: \"\\f12e\";\n}\n.fa-microphone:before {\n  content: \"\\f130\";\n}\n.fa-microphone-slash:before {\n  content: \"\\f131\";\n}\n.fa-shield:before {\n  content: \"\\f132\";\n}\n.fa-calendar-o:before {\n  content: \"\\f133\";\n}\n.fa-fire-extinguisher:before {\n  content: \"\\f134\";\n}\n.fa-rocket:before {\n  content: \"\\f135\";\n}\n.fa-maxcdn:before {\n  content: \"\\f136\";\n}\n.fa-chevron-circle-left:before {\n  content: \"\\f137\";\n}\n.fa-chevron-circle-right:before {\n  content: \"\\f138\";\n}\n.fa-chevron-circle-up:before {\n  content: \"\\f139\";\n}\n.fa-chevron-circle-down:before {\n  content: \"\\f13a\";\n}\n.fa-html5:before {\n  content: \"\\f13b\";\n}\n.fa-css3:before {\n  content: \"\\f13c\";\n}\n.fa-anchor:before {\n  content: \"\\f13d\";\n}\n.fa-unlock-alt:before {\n  content: \"\\f13e\";\n}\n.fa-bullseye:before {\n  content: \"\\f140\";\n}\n.fa-ellipsis-h:before {\n  content: \"\\f141\";\n}\n.fa-ellipsis-v:before {\n  content: \"\\f142\";\n}\n.fa-rss-square:before {\n  content: \"\\f143\";\n}\n.fa-play-circle:before {\n  content: \"\\f144\";\n}\n.fa-ticket:before {\n  content: \"\\f145\";\n}\n.fa-minus-square:before {\n  content: \"\\f146\";\n}\n.fa-minus-square-o:before {\n  content: \"\\f147\";\n}\n.fa-level-up:before {\n  content: \"\\f148\";\n}\n.fa-level-down:before {\n  content: \"\\f149\";\n}\n.fa-check-square:before {\n  content: \"\\f14a\";\n}\n.fa-pencil-square:before {\n  content: \"\\f14b\";\n}\n.fa-external-link-square:before {\n  content: \"\\f14c\";\n}\n.fa-share-square:before {\n  content: \"\\f14d\";\n}\n.fa-compass:before {\n  content: \"\\f14e\";\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: \"\\f150\";\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: \"\\f151\";\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: \"\\f152\";\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: \"\\f153\";\n}\n.fa-gbp:before {\n  content: \"\\f154\";\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: \"\\f155\";\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: \"\\f156\";\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: \"\\f157\";\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: \"\\f158\";\n}\n.fa-won:before,\n.fa-krw:before {\n  content: \"\\f159\";\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: \"\\f15a\";\n}\n.fa-file:before {\n  content: \"\\f15b\";\n}\n.fa-file-text:before {\n  content: \"\\f15c\";\n}\n.fa-sort-alpha-asc:before {\n  content: \"\\f15d\";\n}\n.fa-sort-alpha-desc:before {\n  content: \"\\f15e\";\n}\n.fa-sort-amount-asc:before {\n  content: \"\\f160\";\n}\n.fa-sort-amount-desc:before {\n  content: \"\\f161\";\n}\n.fa-sort-numeric-asc:before {\n  content: \"\\f162\";\n}\n.fa-sort-numeric-desc:before {\n  content: \"\\f163\";\n}\n.fa-thumbs-up:before {\n  content: \"\\f164\";\n}\n.fa-thumbs-down:before {\n  content: \"\\f165\";\n}\n.fa-youtube-square:before {\n  content: \"\\f166\";\n}\n.fa-youtube:before {\n  content: \"\\f167\";\n}\n.fa-xing:before {\n  content: \"\\f168\";\n}\n.fa-xing-square:before {\n  content: \"\\f169\";\n}\n.fa-youtube-play:before {\n  content: \"\\f16a\";\n}\n.fa-dropbox:before {\n  content: \"\\f16b\";\n}\n.fa-stack-overflow:before {\n  content: \"\\f16c\";\n}\n.fa-instagram:before {\n  content: \"\\f16d\";\n}\n.fa-flickr:before {\n  content: \"\\f16e\";\n}\n.fa-adn:before {\n  content: \"\\f170\";\n}\n.fa-bitbucket:before {\n  content: \"\\f171\";\n}\n.fa-bitbucket-square:before {\n  content: \"\\f172\";\n}\n.fa-tumblr:before {\n  content: \"\\f173\";\n}\n.fa-tumblr-square:before {\n  content: \"\\f174\";\n}\n.fa-long-arrow-down:before {\n  content: \"\\f175\";\n}\n.fa-long-arrow-up:before {\n  content: \"\\f176\";\n}\n.fa-long-arrow-left:before {\n  content: \"\\f177\";\n}\n.fa-long-arrow-right:before {\n  content: \"\\f178\";\n}\n.fa-apple:before {\n  content: \"\\f179\";\n}\n.fa-windows:before {\n  content: \"\\f17a\";\n}\n.fa-android:before {\n  content: \"\\f17b\";\n}\n.fa-linux:before {\n  content: \"\\f17c\";\n}\n.fa-dribbble:before {\n  content: \"\\f17d\";\n}\n.fa-skype:before {\n  content: \"\\f17e\";\n}\n.fa-foursquare:before {\n  content: \"\\f180\";\n}\n.fa-trello:before {\n  content: \"\\f181\";\n}\n.fa-female:before {\n  content: \"\\f182\";\n}\n.fa-male:before {\n  content: \"\\f183\";\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: \"\\f184\";\n}\n.fa-sun-o:before {\n  content: \"\\f185\";\n}\n.fa-moon-o:before {\n  content: \"\\f186\";\n}\n.fa-archive:before {\n  content: \"\\f187\";\n}\n.fa-bug:before {\n  content: \"\\f188\";\n}\n.fa-vk:before {\n  content: \"\\f189\";\n}\n.fa-weibo:before {\n  content: \"\\f18a\";\n}\n.fa-renren:before {\n  content: \"\\f18b\";\n}\n.fa-pagelines:before {\n  content: \"\\f18c\";\n}\n.fa-stack-exchange:before {\n  content: \"\\f18d\";\n}\n.fa-arrow-circle-o-right:before {\n  content: \"\\f18e\";\n}\n.fa-arrow-circle-o-left:before {\n  content: \"\\f190\";\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: \"\\f191\";\n}\n.fa-dot-circle-o:before {\n  content: \"\\f192\";\n}\n.fa-wheelchair:before {\n  content: \"\\f193\";\n}\n.fa-vimeo-square:before {\n  content: \"\\f194\";\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: \"\\f195\";\n}\n.fa-plus-square-o:before {\n  content: \"\\f196\";\n}\n.fa-space-shuttle:before {\n  content: \"\\f197\";\n}\n.fa-slack:before {\n  content: \"\\f198\";\n}\n.fa-envelope-square:before {\n  content: \"\\f199\";\n}\n.fa-wordpress:before {\n  content: \"\\f19a\";\n}\n.fa-openid:before {\n  content: \"\\f19b\";\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: \"\\f19c\";\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: \"\\f19d\";\n}\n.fa-yahoo:before {\n  content: \"\\f19e\";\n}\n.fa-google:before {\n  content: \"\\f1a0\";\n}\n.fa-reddit:before {\n  content: \"\\f1a1\";\n}\n.fa-reddit-square:before {\n  content: \"\\f1a2\";\n}\n.fa-stumbleupon-circle:before {\n  content: \"\\f1a3\";\n}\n.fa-stumbleupon:before {\n  content: \"\\f1a4\";\n}\n.fa-delicious:before {\n  content: \"\\f1a5\";\n}\n.fa-digg:before {\n  content: \"\\f1a6\";\n}\n.fa-pied-piper:before {\n  content: \"\\f1a7\";\n}\n.fa-pied-piper-alt:before {\n  content: \"\\f1a8\";\n}\n.fa-drupal:before {\n  content: \"\\f1a9\";\n}\n.fa-joomla:before {\n  content: \"\\f1aa\";\n}\n.fa-language:before {\n  content: \"\\f1ab\";\n}\n.fa-fax:before {\n  content: \"\\f1ac\";\n}\n.fa-building:before {\n  content: \"\\f1ad\";\n}\n.fa-child:before {\n  content: \"\\f1ae\";\n}\n.fa-paw:before {\n  content: \"\\f1b0\";\n}\n.fa-spoon:before {\n  content: \"\\f1b1\";\n}\n.fa-cube:before {\n  content: \"\\f1b2\";\n}\n.fa-cubes:before {\n  content: \"\\f1b3\";\n}\n.fa-behance:before {\n  content: \"\\f1b4\";\n}\n.fa-behance-square:before {\n  content: \"\\f1b5\";\n}\n.fa-steam:before {\n  content: \"\\f1b6\";\n}\n.fa-steam-square:before {\n  content: \"\\f1b7\";\n}\n.fa-recycle:before {\n  content: \"\\f1b8\";\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: \"\\f1b9\";\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: \"\\f1ba\";\n}\n.fa-tree:before {\n  content: \"\\f1bb\";\n}\n.fa-spotify:before {\n  content: \"\\f1bc\";\n}\n.fa-deviantart:before {\n  content: \"\\f1bd\";\n}\n.fa-soundcloud:before {\n  content: \"\\f1be\";\n}\n.fa-database:before {\n  content: \"\\f1c0\";\n}\n.fa-file-pdf-o:before {\n  content: \"\\f1c1\";\n}\n.fa-file-word-o:before {\n  content: \"\\f1c2\";\n}\n.fa-file-excel-o:before {\n  content: \"\\f1c3\";\n}\n.fa-file-powerpoint-o:before {\n  content: \"\\f1c4\";\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: \"\\f1c5\";\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: \"\\f1c6\";\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: \"\\f1c7\";\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: \"\\f1c8\";\n}\n.fa-file-code-o:before {\n  content: \"\\f1c9\";\n}\n.fa-vine:before {\n  content: \"\\f1ca\";\n}\n.fa-codepen:before {\n  content: \"\\f1cb\";\n}\n.fa-jsfiddle:before {\n  content: \"\\f1cc\";\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: \"\\f1cd\";\n}\n.fa-circle-o-notch:before {\n  content: \"\\f1ce\";\n}\n.fa-ra:before,\n.fa-rebel:before {\n  content: \"\\f1d0\";\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: \"\\f1d1\";\n}\n.fa-git-square:before {\n  content: \"\\f1d2\";\n}\n.fa-git:before {\n  content: \"\\f1d3\";\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: \"\\f1d4\";\n}\n.fa-tencent-weibo:before {\n  content: \"\\f1d5\";\n}\n.fa-qq:before {\n  content: \"\\f1d6\";\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: \"\\f1d7\";\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: \"\\f1d8\";\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: \"\\f1d9\";\n}\n.fa-history:before {\n  content: \"\\f1da\";\n}\n.fa-circle-thin:before {\n  content: \"\\f1db\";\n}\n.fa-header:before {\n  content: \"\\f1dc\";\n}\n.fa-paragraph:before {\n  content: \"\\f1dd\";\n}\n.fa-sliders:before {\n  content: \"\\f1de\";\n}\n.fa-share-alt:before {\n  content: \"\\f1e0\";\n}\n.fa-share-alt-square:before {\n  content: \"\\f1e1\";\n}\n.fa-bomb:before {\n  content: \"\\f1e2\";\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: \"\\f1e3\";\n}\n.fa-tty:before {\n  content: \"\\f1e4\";\n}\n.fa-binoculars:before {\n  content: \"\\f1e5\";\n}\n.fa-plug:before {\n  content: \"\\f1e6\";\n}\n.fa-slideshare:before {\n  content: \"\\f1e7\";\n}\n.fa-twitch:before {\n  content: \"\\f1e8\";\n}\n.fa-yelp:before {\n  content: \"\\f1e9\";\n}\n.fa-newspaper-o:before {\n  content: \"\\f1ea\";\n}\n.fa-wifi:before {\n  content: \"\\f1eb\";\n}\n.fa-calculator:before {\n  content: \"\\f1ec\";\n}\n.fa-paypal:before {\n  content: \"\\f1ed\";\n}\n.fa-google-wallet:before {\n  content: \"\\f1ee\";\n}\n.fa-cc-visa:before {\n  content: \"\\f1f0\";\n}\n.fa-cc-mastercard:before {\n  content: \"\\f1f1\";\n}\n.fa-cc-discover:before {\n  content: \"\\f1f2\";\n}\n.fa-cc-amex:before {\n  content: \"\\f1f3\";\n}\n.fa-cc-paypal:before {\n  content: \"\\f1f4\";\n}\n.fa-cc-stripe:before {\n  content: \"\\f1f5\";\n}\n.fa-bell-slash:before {\n  content: \"\\f1f6\";\n}\n.fa-bell-slash-o:before {\n  content: \"\\f1f7\";\n}\n.fa-trash:before {\n  content: \"\\f1f8\";\n}\n.fa-copyright:before {\n  content: \"\\f1f9\";\n}\n.fa-at:before {\n  content: \"\\f1fa\";\n}\n.fa-eyedropper:before {\n  content: \"\\f1fb\";\n}\n.fa-paint-brush:before {\n  content: \"\\f1fc\";\n}\n.fa-birthday-cake:before {\n  content: \"\\f1fd\";\n}\n.fa-area-chart:before {\n  content: \"\\f1fe\";\n}\n.fa-pie-chart:before {\n  content: \"\\f200\";\n}\n.fa-line-chart:before {\n  content: \"\\f201\";\n}\n.fa-lastfm:before {\n  content: \"\\f202\";\n}\n.fa-lastfm-square:before {\n  content: \"\\f203\";\n}\n.fa-toggle-off:before {\n  content: \"\\f204\";\n}\n.fa-toggle-on:before {\n  content: \"\\f205\";\n}\n.fa-bicycle:before {\n  content: \"\\f206\";\n}\n.fa-bus:before {\n  content: \"\\f207\";\n}\n.fa-ioxhost:before {\n  content: \"\\f208\";\n}\n.fa-angellist:before {\n  content: \"\\f209\";\n}\n.fa-cc:before {\n  content: \"\\f20a\";\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: \"\\f20b\";\n}\n.fa-meanpath:before {\n  content: \"\\f20c\";\n}\n.fa-buysellads:before {\n  content: \"\\f20d\";\n}\n.fa-connectdevelop:before {\n  content: \"\\f20e\";\n}\n.fa-dashcube:before {\n  content: \"\\f210\";\n}\n.fa-forumbee:before {\n  content: \"\\f211\";\n}\n.fa-leanpub:before {\n  content: \"\\f212\";\n}\n.fa-sellsy:before {\n  content: \"\\f213\";\n}\n.fa-shirtsinbulk:before {\n  content: \"\\f214\";\n}\n.fa-simplybuilt:before {\n  content: \"\\f215\";\n}\n.fa-skyatlas:before {\n  content: \"\\f216\";\n}\n.fa-cart-plus:before {\n  content: \"\\f217\";\n}\n.fa-cart-arrow-down:before {\n  content: \"\\f218\";\n}\n.fa-diamond:before {\n  content: \"\\f219\";\n}\n.fa-ship:before {\n  content: \"\\f21a\";\n}\n.fa-user-secret:before {\n  content: \"\\f21b\";\n}\n.fa-motorcycle:before {\n  content: \"\\f21c\";\n}\n.fa-street-view:before {\n  content: \"\\f21d\";\n}\n.fa-heartbeat:before {\n  content: \"\\f21e\";\n}\n.fa-venus:before {\n  content: \"\\f221\";\n}\n.fa-mars:before {\n  content: \"\\f222\";\n}\n.fa-mercury:before {\n  content: \"\\f223\";\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: \"\\f224\";\n}\n.fa-transgender-alt:before {\n  content: \"\\f225\";\n}\n.fa-venus-double:before {\n  content: \"\\f226\";\n}\n.fa-mars-double:before {\n  content: \"\\f227\";\n}\n.fa-venus-mars:before {\n  content: \"\\f228\";\n}\n.fa-mars-stroke:before {\n  content: \"\\f229\";\n}\n.fa-mars-stroke-v:before {\n  content: \"\\f22a\";\n}\n.fa-mars-stroke-h:before {\n  content: \"\\f22b\";\n}\n.fa-neuter:before {\n  content: \"\\f22c\";\n}\n.fa-genderless:before {\n  content: \"\\f22d\";\n}\n.fa-facebook-official:before {\n  content: \"\\f230\";\n}\n.fa-pinterest-p:before {\n  content: \"\\f231\";\n}\n.fa-whatsapp:before {\n  content: \"\\f232\";\n}\n.fa-server:before {\n  content: \"\\f233\";\n}\n.fa-user-plus:before {\n  content: \"\\f234\";\n}\n.fa-user-times:before {\n  content: \"\\f235\";\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: \"\\f236\";\n}\n.fa-viacoin:before {\n  content: \"\\f237\";\n}\n.fa-train:before {\n  content: \"\\f238\";\n}\n.fa-subway:before {\n  content: \"\\f239\";\n}\n.fa-medium:before {\n  content: \"\\f23a\";\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: \"\\f23b\";\n}\n.fa-optin-monster:before {\n  content: \"\\f23c\";\n}\n.fa-opencart:before {\n  content: \"\\f23d\";\n}\n.fa-expeditedssl:before {\n  content: \"\\f23e\";\n}\n.fa-battery-4:before,\n.fa-battery-full:before {\n  content: \"\\f240\";\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: \"\\f241\";\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: \"\\f242\";\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: \"\\f243\";\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: \"\\f244\";\n}\n.fa-mouse-pointer:before {\n  content: \"\\f245\";\n}\n.fa-i-cursor:before {\n  content: \"\\f246\";\n}\n.fa-object-group:before {\n  content: \"\\f247\";\n}\n.fa-object-ungroup:before {\n  content: \"\\f248\";\n}\n.fa-sticky-note:before {\n  content: \"\\f249\";\n}\n.fa-sticky-note-o:before {\n  content: \"\\f24a\";\n}\n.fa-cc-jcb:before {\n  content: \"\\f24b\";\n}\n.fa-cc-diners-club:before {\n  content: \"\\f24c\";\n}\n.fa-clone:before {\n  content: \"\\f24d\";\n}\n.fa-balance-scale:before {\n  content: \"\\f24e\";\n}\n.fa-hourglass-o:before {\n  content: \"\\f250\";\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: \"\\f251\";\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: \"\\f252\";\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: \"\\f253\";\n}\n.fa-hourglass:before {\n  content: \"\\f254\";\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: \"\\f255\";\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: \"\\f256\";\n}\n.fa-hand-scissors-o:before {\n  content: \"\\f257\";\n}\n.fa-hand-lizard-o:before {\n  content: \"\\f258\";\n}\n.fa-hand-spock-o:before {\n  content: \"\\f259\";\n}\n.fa-hand-pointer-o:before {\n  content: \"\\f25a\";\n}\n.fa-hand-peace-o:before {\n  content: \"\\f25b\";\n}\n.fa-trademark:before {\n  content: \"\\f25c\";\n}\n.fa-registered:before {\n  content: \"\\f25d\";\n}\n.fa-creative-commons:before {\n  content: \"\\f25e\";\n}\n.fa-gg:before {\n  content: \"\\f260\";\n}\n.fa-gg-circle:before {\n  content: \"\\f261\";\n}\n.fa-tripadvisor:before {\n  content: \"\\f262\";\n}\n.fa-odnoklassniki:before {\n  content: \"\\f263\";\n}\n.fa-odnoklassniki-square:before {\n  content: \"\\f264\";\n}\n.fa-get-pocket:before {\n  content: \"\\f265\";\n}\n.fa-wikipedia-w:before {\n  content: \"\\f266\";\n}\n.fa-safari:before {\n  content: \"\\f267\";\n}\n.fa-chrome:before {\n  content: \"\\f268\";\n}\n.fa-firefox:before {\n  content: \"\\f269\";\n}\n.fa-opera:before {\n  content: \"\\f26a\";\n}\n.fa-internet-explorer:before {\n  content: \"\\f26b\";\n}\n.fa-tv:before,\n.fa-television:before {\n  content: \"\\f26c\";\n}\n.fa-contao:before {\n  content: \"\\f26d\";\n}\n.fa-500px:before {\n  content: \"\\f26e\";\n}\n.fa-amazon:before {\n  content: \"\\f270\";\n}\n.fa-calendar-plus-o:before {\n  content: \"\\f271\";\n}\n.fa-calendar-minus-o:before {\n  content: \"\\f272\";\n}\n.fa-calendar-times-o:before {\n  content: \"\\f273\";\n}\n.fa-calendar-check-o:before {\n  content: \"\\f274\";\n}\n.fa-industry:before {\n  content: \"\\f275\";\n}\n.fa-map-pin:before {\n  content: \"\\f276\";\n}\n.fa-map-signs:before {\n  content: \"\\f277\";\n}\n.fa-map-o:before {\n  content: \"\\f278\";\n}\n.fa-map:before {\n  content: \"\\f279\";\n}\n.fa-commenting:before {\n  content: \"\\f27a\";\n}\n.fa-commenting-o:before {\n  content: \"\\f27b\";\n}\n.fa-houzz:before {\n  content: \"\\f27c\";\n}\n.fa-vimeo:before {\n  content: \"\\f27d\";\n}\n.fa-black-tie:before {\n  content: \"\\f27e\";\n}\n.fa-fonticons:before {\n  content: \"\\f280\";\n}\n.fa-reddit-alien:before {\n  content: \"\\f281\";\n}\n.fa-edge:before {\n  content: \"\\f282\";\n}\n.fa-credit-card-alt:before {\n  content: \"\\f283\";\n}\n.fa-codiepie:before {\n  content: \"\\f284\";\n}\n.fa-modx:before {\n  content: \"\\f285\";\n}\n.fa-fort-awesome:before {\n  content: \"\\f286\";\n}\n.fa-usb:before {\n  content: \"\\f287\";\n}\n.fa-product-hunt:before {\n  content: \"\\f288\";\n}\n.fa-mixcloud:before {\n  content: \"\\f289\";\n}\n.fa-scribd:before {\n  content: \"\\f28a\";\n}\n.fa-pause-circle:before {\n  content: \"\\f28b\";\n}\n.fa-pause-circle-o:before {\n  content: \"\\f28c\";\n}\n.fa-stop-circle:before {\n  content: \"\\f28d\";\n}\n.fa-stop-circle-o:before {\n  content: \"\\f28e\";\n}\n.fa-shopping-bag:before {\n  content: \"\\f290\";\n}\n.fa-shopping-basket:before {\n  content: \"\\f291\";\n}\n.fa-hashtag:before {\n  content: \"\\f292\";\n}\n.fa-bluetooth:before {\n  content: \"\\f293\";\n}\n.fa-bluetooth-b:before {\n  content: \"\\f294\";\n}\n.fa-percent:before {\n  content: \"\\f295\";\n}\n","source":"about/font-awesome/css/font-awesome.css","raw":"/*!\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */\n/* FONT PATH\n * -------------------------- */\n@font-face {\n  font-family: 'FontAwesome';\n  src: url('../fonts/fontawesome-webfont.eot?v=4.5.0');\n  src: url('../fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'), url('../fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'), url('../fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'), url('../fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'), url('../fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n.fa {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n/* makes the font 33% larger relative to the icon container */\n.fa-lg {\n  font-size: 1.33333333em;\n  line-height: 0.75em;\n  vertical-align: -15%;\n}\n.fa-2x {\n  font-size: 2em;\n}\n.fa-3x {\n  font-size: 3em;\n}\n.fa-4x {\n  font-size: 4em;\n}\n.fa-5x {\n  font-size: 5em;\n}\n.fa-fw {\n  width: 1.28571429em;\n  text-align: center;\n}\n.fa-ul {\n  padding-left: 0;\n  margin-left: 2.14285714em;\n  list-style-type: none;\n}\n.fa-ul > li {\n  position: relative;\n}\n.fa-li {\n  position: absolute;\n  left: -2.14285714em;\n  width: 2.14285714em;\n  top: 0.14285714em;\n  text-align: center;\n}\n.fa-li.fa-lg {\n  left: -1.85714286em;\n}\n.fa-border {\n  padding: .2em .25em .15em;\n  border: solid 0.08em #eeeeee;\n  border-radius: .1em;\n}\n.fa-pull-left {\n  float: left;\n}\n.fa-pull-right {\n  float: right;\n}\n.fa.fa-pull-left {\n  margin-right: .3em;\n}\n.fa.fa-pull-right {\n  margin-left: .3em;\n}\n/* Deprecated as of 4.4.0 */\n.pull-right {\n  float: right;\n}\n.pull-left {\n  float: left;\n}\n.fa.pull-left {\n  margin-right: .3em;\n}\n.fa.pull-right {\n  margin-left: .3em;\n}\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n  animation: fa-spin 2s infinite linear;\n}\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n  animation: fa-spin 1s infinite steps(8);\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n.fa-rotate-90 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);\n  -webkit-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.fa-rotate-180 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n  -webkit-transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n  transform: rotate(180deg);\n}\n.fa-rotate-270 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);\n  -webkit-transform: rotate(270deg);\n  -ms-transform: rotate(270deg);\n  transform: rotate(270deg);\n}\n.fa-flip-horizontal {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);\n  -webkit-transform: scale(-1, 1);\n  -ms-transform: scale(-1, 1);\n  transform: scale(-1, 1);\n}\n.fa-flip-vertical {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);\n  -webkit-transform: scale(1, -1);\n  -ms-transform: scale(1, -1);\n  transform: scale(1, -1);\n}\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  filter: none;\n}\n.fa-stack {\n  position: relative;\n  display: inline-block;\n  width: 2em;\n  height: 2em;\n  line-height: 2em;\n  vertical-align: middle;\n}\n.fa-stack-1x,\n.fa-stack-2x {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n.fa-stack-1x {\n  line-height: inherit;\n}\n.fa-stack-2x {\n  font-size: 2em;\n}\n.fa-inverse {\n  color: #ffffff;\n}\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\n   readers do not read off random characters that represent icons */\n.fa-glass:before {\n  content: \"\\f000\";\n}\n.fa-music:before {\n  content: \"\\f001\";\n}\n.fa-search:before {\n  content: \"\\f002\";\n}\n.fa-envelope-o:before {\n  content: \"\\f003\";\n}\n.fa-heart:before {\n  content: \"\\f004\";\n}\n.fa-star:before {\n  content: \"\\f005\";\n}\n.fa-star-o:before {\n  content: \"\\f006\";\n}\n.fa-user:before {\n  content: \"\\f007\";\n}\n.fa-film:before {\n  content: \"\\f008\";\n}\n.fa-th-large:before {\n  content: \"\\f009\";\n}\n.fa-th:before {\n  content: \"\\f00a\";\n}\n.fa-th-list:before {\n  content: \"\\f00b\";\n}\n.fa-check:before {\n  content: \"\\f00c\";\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: \"\\f00d\";\n}\n.fa-search-plus:before {\n  content: \"\\f00e\";\n}\n.fa-search-minus:before {\n  content: \"\\f010\";\n}\n.fa-power-off:before {\n  content: \"\\f011\";\n}\n.fa-signal:before {\n  content: \"\\f012\";\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: \"\\f013\";\n}\n.fa-trash-o:before {\n  content: \"\\f014\";\n}\n.fa-home:before {\n  content: \"\\f015\";\n}\n.fa-file-o:before {\n  content: \"\\f016\";\n}\n.fa-clock-o:before {\n  content: \"\\f017\";\n}\n.fa-road:before {\n  content: \"\\f018\";\n}\n.fa-download:before {\n  content: \"\\f019\";\n}\n.fa-arrow-circle-o-down:before {\n  content: \"\\f01a\";\n}\n.fa-arrow-circle-o-up:before {\n  content: \"\\f01b\";\n}\n.fa-inbox:before {\n  content: \"\\f01c\";\n}\n.fa-play-circle-o:before {\n  content: \"\\f01d\";\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: \"\\f01e\";\n}\n.fa-refresh:before {\n  content: \"\\f021\";\n}\n.fa-list-alt:before {\n  content: \"\\f022\";\n}\n.fa-lock:before {\n  content: \"\\f023\";\n}\n.fa-flag:before {\n  content: \"\\f024\";\n}\n.fa-headphones:before {\n  content: \"\\f025\";\n}\n.fa-volume-off:before {\n  content: \"\\f026\";\n}\n.fa-volume-down:before {\n  content: \"\\f027\";\n}\n.fa-volume-up:before {\n  content: \"\\f028\";\n}\n.fa-qrcode:before {\n  content: \"\\f029\";\n}\n.fa-barcode:before {\n  content: \"\\f02a\";\n}\n.fa-tag:before {\n  content: \"\\f02b\";\n}\n.fa-tags:before {\n  content: \"\\f02c\";\n}\n.fa-book:before {\n  content: \"\\f02d\";\n}\n.fa-bookmark:before {\n  content: \"\\f02e\";\n}\n.fa-print:before {\n  content: \"\\f02f\";\n}\n.fa-camera:before {\n  content: \"\\f030\";\n}\n.fa-font:before {\n  content: \"\\f031\";\n}\n.fa-bold:before {\n  content: \"\\f032\";\n}\n.fa-italic:before {\n  content: \"\\f033\";\n}\n.fa-text-height:before {\n  content: \"\\f034\";\n}\n.fa-text-width:before {\n  content: \"\\f035\";\n}\n.fa-align-left:before {\n  content: \"\\f036\";\n}\n.fa-align-center:before {\n  content: \"\\f037\";\n}\n.fa-align-right:before {\n  content: \"\\f038\";\n}\n.fa-align-justify:before {\n  content: \"\\f039\";\n}\n.fa-list:before {\n  content: \"\\f03a\";\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: \"\\f03b\";\n}\n.fa-indent:before {\n  content: \"\\f03c\";\n}\n.fa-video-camera:before {\n  content: \"\\f03d\";\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: \"\\f03e\";\n}\n.fa-pencil:before {\n  content: \"\\f040\";\n}\n.fa-map-marker:before {\n  content: \"\\f041\";\n}\n.fa-adjust:before {\n  content: \"\\f042\";\n}\n.fa-tint:before {\n  content: \"\\f043\";\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: \"\\f044\";\n}\n.fa-share-square-o:before {\n  content: \"\\f045\";\n}\n.fa-check-square-o:before {\n  content: \"\\f046\";\n}\n.fa-arrows:before {\n  content: \"\\f047\";\n}\n.fa-step-backward:before {\n  content: \"\\f048\";\n}\n.fa-fast-backward:before {\n  content: \"\\f049\";\n}\n.fa-backward:before {\n  content: \"\\f04a\";\n}\n.fa-play:before {\n  content: \"\\f04b\";\n}\n.fa-pause:before {\n  content: \"\\f04c\";\n}\n.fa-stop:before {\n  content: \"\\f04d\";\n}\n.fa-forward:before {\n  content: \"\\f04e\";\n}\n.fa-fast-forward:before {\n  content: \"\\f050\";\n}\n.fa-step-forward:before {\n  content: \"\\f051\";\n}\n.fa-eject:before {\n  content: \"\\f052\";\n}\n.fa-chevron-left:before {\n  content: \"\\f053\";\n}\n.fa-chevron-right:before {\n  content: \"\\f054\";\n}\n.fa-plus-circle:before {\n  content: \"\\f055\";\n}\n.fa-minus-circle:before {\n  content: \"\\f056\";\n}\n.fa-times-circle:before {\n  content: \"\\f057\";\n}\n.fa-check-circle:before {\n  content: \"\\f058\";\n}\n.fa-question-circle:before {\n  content: \"\\f059\";\n}\n.fa-info-circle:before {\n  content: \"\\f05a\";\n}\n.fa-crosshairs:before {\n  content: \"\\f05b\";\n}\n.fa-times-circle-o:before {\n  content: \"\\f05c\";\n}\n.fa-check-circle-o:before {\n  content: \"\\f05d\";\n}\n.fa-ban:before {\n  content: \"\\f05e\";\n}\n.fa-arrow-left:before {\n  content: \"\\f060\";\n}\n.fa-arrow-right:before {\n  content: \"\\f061\";\n}\n.fa-arrow-up:before {\n  content: \"\\f062\";\n}\n.fa-arrow-down:before {\n  content: \"\\f063\";\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: \"\\f064\";\n}\n.fa-expand:before {\n  content: \"\\f065\";\n}\n.fa-compress:before {\n  content: \"\\f066\";\n}\n.fa-plus:before {\n  content: \"\\f067\";\n}\n.fa-minus:before {\n  content: \"\\f068\";\n}\n.fa-asterisk:before {\n  content: \"\\f069\";\n}\n.fa-exclamation-circle:before {\n  content: \"\\f06a\";\n}\n.fa-gift:before {\n  content: \"\\f06b\";\n}\n.fa-leaf:before {\n  content: \"\\f06c\";\n}\n.fa-fire:before {\n  content: \"\\f06d\";\n}\n.fa-eye:before {\n  content: \"\\f06e\";\n}\n.fa-eye-slash:before {\n  content: \"\\f070\";\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: \"\\f071\";\n}\n.fa-plane:before {\n  content: \"\\f072\";\n}\n.fa-calendar:before {\n  content: \"\\f073\";\n}\n.fa-random:before {\n  content: \"\\f074\";\n}\n.fa-comment:before {\n  content: \"\\f075\";\n}\n.fa-magnet:before {\n  content: \"\\f076\";\n}\n.fa-chevron-up:before {\n  content: \"\\f077\";\n}\n.fa-chevron-down:before {\n  content: \"\\f078\";\n}\n.fa-retweet:before {\n  content: \"\\f079\";\n}\n.fa-shopping-cart:before {\n  content: \"\\f07a\";\n}\n.fa-folder:before {\n  content: \"\\f07b\";\n}\n.fa-folder-open:before {\n  content: \"\\f07c\";\n}\n.fa-arrows-v:before {\n  content: \"\\f07d\";\n}\n.fa-arrows-h:before {\n  content: \"\\f07e\";\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: \"\\f080\";\n}\n.fa-twitter-square:before {\n  content: \"\\f081\";\n}\n.fa-facebook-square:before {\n  content: \"\\f082\";\n}\n.fa-camera-retro:before {\n  content: \"\\f083\";\n}\n.fa-key:before {\n  content: \"\\f084\";\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: \"\\f085\";\n}\n.fa-comments:before {\n  content: \"\\f086\";\n}\n.fa-thumbs-o-up:before {\n  content: \"\\f087\";\n}\n.fa-thumbs-o-down:before {\n  content: \"\\f088\";\n}\n.fa-star-half:before {\n  content: \"\\f089\";\n}\n.fa-heart-o:before {\n  content: \"\\f08a\";\n}\n.fa-sign-out:before {\n  content: \"\\f08b\";\n}\n.fa-linkedin-square:before {\n  content: \"\\f08c\";\n}\n.fa-thumb-tack:before {\n  content: \"\\f08d\";\n}\n.fa-external-link:before {\n  content: \"\\f08e\";\n}\n.fa-sign-in:before {\n  content: \"\\f090\";\n}\n.fa-trophy:before {\n  content: \"\\f091\";\n}\n.fa-github-square:before {\n  content: \"\\f092\";\n}\n.fa-upload:before {\n  content: \"\\f093\";\n}\n.fa-lemon-o:before {\n  content: \"\\f094\";\n}\n.fa-phone:before {\n  content: \"\\f095\";\n}\n.fa-square-o:before {\n  content: \"\\f096\";\n}\n.fa-bookmark-o:before {\n  content: \"\\f097\";\n}\n.fa-phone-square:before {\n  content: \"\\f098\";\n}\n.fa-twitter:before {\n  content: \"\\f099\";\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: \"\\f09a\";\n}\n.fa-github:before {\n  content: \"\\f09b\";\n}\n.fa-unlock:before {\n  content: \"\\f09c\";\n}\n.fa-credit-card:before {\n  content: \"\\f09d\";\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: \"\\f09e\";\n}\n.fa-hdd-o:before {\n  content: \"\\f0a0\";\n}\n.fa-bullhorn:before {\n  content: \"\\f0a1\";\n}\n.fa-bell:before {\n  content: \"\\f0f3\";\n}\n.fa-certificate:before {\n  content: \"\\f0a3\";\n}\n.fa-hand-o-right:before {\n  content: \"\\f0a4\";\n}\n.fa-hand-o-left:before {\n  content: \"\\f0a5\";\n}\n.fa-hand-o-up:before {\n  content: \"\\f0a6\";\n}\n.fa-hand-o-down:before {\n  content: \"\\f0a7\";\n}\n.fa-arrow-circle-left:before {\n  content: \"\\f0a8\";\n}\n.fa-arrow-circle-right:before {\n  content: \"\\f0a9\";\n}\n.fa-arrow-circle-up:before {\n  content: \"\\f0aa\";\n}\n.fa-arrow-circle-down:before {\n  content: \"\\f0ab\";\n}\n.fa-globe:before {\n  content: \"\\f0ac\";\n}\n.fa-wrench:before {\n  content: \"\\f0ad\";\n}\n.fa-tasks:before {\n  content: \"\\f0ae\";\n}\n.fa-filter:before {\n  content: \"\\f0b0\";\n}\n.fa-briefcase:before {\n  content: \"\\f0b1\";\n}\n.fa-arrows-alt:before {\n  content: \"\\f0b2\";\n}\n.fa-group:before,\n.fa-users:before {\n  content: \"\\f0c0\";\n}\n.fa-chain:before,\n.fa-link:before {\n  content: \"\\f0c1\";\n}\n.fa-cloud:before {\n  content: \"\\f0c2\";\n}\n.fa-flask:before {\n  content: \"\\f0c3\";\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: \"\\f0c4\";\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: \"\\f0c5\";\n}\n.fa-paperclip:before {\n  content: \"\\f0c6\";\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: \"\\f0c7\";\n}\n.fa-square:before {\n  content: \"\\f0c8\";\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: \"\\f0c9\";\n}\n.fa-list-ul:before {\n  content: \"\\f0ca\";\n}\n.fa-list-ol:before {\n  content: \"\\f0cb\";\n}\n.fa-strikethrough:before {\n  content: \"\\f0cc\";\n}\n.fa-underline:before {\n  content: \"\\f0cd\";\n}\n.fa-table:before {\n  content: \"\\f0ce\";\n}\n.fa-magic:before {\n  content: \"\\f0d0\";\n}\n.fa-truck:before {\n  content: \"\\f0d1\";\n}\n.fa-pinterest:before {\n  content: \"\\f0d2\";\n}\n.fa-pinterest-square:before {\n  content: \"\\f0d3\";\n}\n.fa-google-plus-square:before {\n  content: \"\\f0d4\";\n}\n.fa-google-plus:before {\n  content: \"\\f0d5\";\n}\n.fa-money:before {\n  content: \"\\f0d6\";\n}\n.fa-caret-down:before {\n  content: \"\\f0d7\";\n}\n.fa-caret-up:before {\n  content: \"\\f0d8\";\n}\n.fa-caret-left:before {\n  content: \"\\f0d9\";\n}\n.fa-caret-right:before {\n  content: \"\\f0da\";\n}\n.fa-columns:before {\n  content: \"\\f0db\";\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: \"\\f0dc\";\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: \"\\f0dd\";\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: \"\\f0de\";\n}\n.fa-envelope:before {\n  content: \"\\f0e0\";\n}\n.fa-linkedin:before {\n  content: \"\\f0e1\";\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: \"\\f0e2\";\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: \"\\f0e3\";\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: \"\\f0e4\";\n}\n.fa-comment-o:before {\n  content: \"\\f0e5\";\n}\n.fa-comments-o:before {\n  content: \"\\f0e6\";\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: \"\\f0e7\";\n}\n.fa-sitemap:before {\n  content: \"\\f0e8\";\n}\n.fa-umbrella:before {\n  content: \"\\f0e9\";\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: \"\\f0ea\";\n}\n.fa-lightbulb-o:before {\n  content: \"\\f0eb\";\n}\n.fa-exchange:before {\n  content: \"\\f0ec\";\n}\n.fa-cloud-download:before {\n  content: \"\\f0ed\";\n}\n.fa-cloud-upload:before {\n  content: \"\\f0ee\";\n}\n.fa-user-md:before {\n  content: \"\\f0f0\";\n}\n.fa-stethoscope:before {\n  content: \"\\f0f1\";\n}\n.fa-suitcase:before {\n  content: \"\\f0f2\";\n}\n.fa-bell-o:before {\n  content: \"\\f0a2\";\n}\n.fa-coffee:before {\n  content: \"\\f0f4\";\n}\n.fa-cutlery:before {\n  content: \"\\f0f5\";\n}\n.fa-file-text-o:before {\n  content: \"\\f0f6\";\n}\n.fa-building-o:before {\n  content: \"\\f0f7\";\n}\n.fa-hospital-o:before {\n  content: \"\\f0f8\";\n}\n.fa-ambulance:before {\n  content: \"\\f0f9\";\n}\n.fa-medkit:before {\n  content: \"\\f0fa\";\n}\n.fa-fighter-jet:before {\n  content: \"\\f0fb\";\n}\n.fa-beer:before {\n  content: \"\\f0fc\";\n}\n.fa-h-square:before {\n  content: \"\\f0fd\";\n}\n.fa-plus-square:before {\n  content: \"\\f0fe\";\n}\n.fa-angle-double-left:before {\n  content: \"\\f100\";\n}\n.fa-angle-double-right:before {\n  content: \"\\f101\";\n}\n.fa-angle-double-up:before {\n  content: \"\\f102\";\n}\n.fa-angle-double-down:before {\n  content: \"\\f103\";\n}\n.fa-angle-left:before {\n  content: \"\\f104\";\n}\n.fa-angle-right:before {\n  content: \"\\f105\";\n}\n.fa-angle-up:before {\n  content: \"\\f106\";\n}\n.fa-angle-down:before {\n  content: \"\\f107\";\n}\n.fa-desktop:before {\n  content: \"\\f108\";\n}\n.fa-laptop:before {\n  content: \"\\f109\";\n}\n.fa-tablet:before {\n  content: \"\\f10a\";\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: \"\\f10b\";\n}\n.fa-circle-o:before {\n  content: \"\\f10c\";\n}\n.fa-quote-left:before {\n  content: \"\\f10d\";\n}\n.fa-quote-right:before {\n  content: \"\\f10e\";\n}\n.fa-spinner:before {\n  content: \"\\f110\";\n}\n.fa-circle:before {\n  content: \"\\f111\";\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: \"\\f112\";\n}\n.fa-github-alt:before {\n  content: \"\\f113\";\n}\n.fa-folder-o:before {\n  content: \"\\f114\";\n}\n.fa-folder-open-o:before {\n  content: \"\\f115\";\n}\n.fa-smile-o:before {\n  content: \"\\f118\";\n}\n.fa-frown-o:before {\n  content: \"\\f119\";\n}\n.fa-meh-o:before {\n  content: \"\\f11a\";\n}\n.fa-gamepad:before {\n  content: \"\\f11b\";\n}\n.fa-keyboard-o:before {\n  content: \"\\f11c\";\n}\n.fa-flag-o:before {\n  content: \"\\f11d\";\n}\n.fa-flag-checkered:before {\n  content: \"\\f11e\";\n}\n.fa-terminal:before {\n  content: \"\\f120\";\n}\n.fa-code:before {\n  content: \"\\f121\";\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: \"\\f122\";\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: \"\\f123\";\n}\n.fa-location-arrow:before {\n  content: \"\\f124\";\n}\n.fa-crop:before {\n  content: \"\\f125\";\n}\n.fa-code-fork:before {\n  content: \"\\f126\";\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: \"\\f127\";\n}\n.fa-question:before {\n  content: \"\\f128\";\n}\n.fa-info:before {\n  content: \"\\f129\";\n}\n.fa-exclamation:before {\n  content: \"\\f12a\";\n}\n.fa-superscript:before {\n  content: \"\\f12b\";\n}\n.fa-subscript:before {\n  content: \"\\f12c\";\n}\n.fa-eraser:before {\n  content: \"\\f12d\";\n}\n.fa-puzzle-piece:before {\n  content: \"\\f12e\";\n}\n.fa-microphone:before {\n  content: \"\\f130\";\n}\n.fa-microphone-slash:before {\n  content: \"\\f131\";\n}\n.fa-shield:before {\n  content: \"\\f132\";\n}\n.fa-calendar-o:before {\n  content: \"\\f133\";\n}\n.fa-fire-extinguisher:before {\n  content: \"\\f134\";\n}\n.fa-rocket:before {\n  content: \"\\f135\";\n}\n.fa-maxcdn:before {\n  content: \"\\f136\";\n}\n.fa-chevron-circle-left:before {\n  content: \"\\f137\";\n}\n.fa-chevron-circle-right:before {\n  content: \"\\f138\";\n}\n.fa-chevron-circle-up:before {\n  content: \"\\f139\";\n}\n.fa-chevron-circle-down:before {\n  content: \"\\f13a\";\n}\n.fa-html5:before {\n  content: \"\\f13b\";\n}\n.fa-css3:before {\n  content: \"\\f13c\";\n}\n.fa-anchor:before {\n  content: \"\\f13d\";\n}\n.fa-unlock-alt:before {\n  content: \"\\f13e\";\n}\n.fa-bullseye:before {\n  content: \"\\f140\";\n}\n.fa-ellipsis-h:before {\n  content: \"\\f141\";\n}\n.fa-ellipsis-v:before {\n  content: \"\\f142\";\n}\n.fa-rss-square:before {\n  content: \"\\f143\";\n}\n.fa-play-circle:before {\n  content: \"\\f144\";\n}\n.fa-ticket:before {\n  content: \"\\f145\";\n}\n.fa-minus-square:before {\n  content: \"\\f146\";\n}\n.fa-minus-square-o:before {\n  content: \"\\f147\";\n}\n.fa-level-up:before {\n  content: \"\\f148\";\n}\n.fa-level-down:before {\n  content: \"\\f149\";\n}\n.fa-check-square:before {\n  content: \"\\f14a\";\n}\n.fa-pencil-square:before {\n  content: \"\\f14b\";\n}\n.fa-external-link-square:before {\n  content: \"\\f14c\";\n}\n.fa-share-square:before {\n  content: \"\\f14d\";\n}\n.fa-compass:before {\n  content: \"\\f14e\";\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: \"\\f150\";\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: \"\\f151\";\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: \"\\f152\";\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: \"\\f153\";\n}\n.fa-gbp:before {\n  content: \"\\f154\";\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: \"\\f155\";\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: \"\\f156\";\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: \"\\f157\";\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: \"\\f158\";\n}\n.fa-won:before,\n.fa-krw:before {\n  content: \"\\f159\";\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: \"\\f15a\";\n}\n.fa-file:before {\n  content: \"\\f15b\";\n}\n.fa-file-text:before {\n  content: \"\\f15c\";\n}\n.fa-sort-alpha-asc:before {\n  content: \"\\f15d\";\n}\n.fa-sort-alpha-desc:before {\n  content: \"\\f15e\";\n}\n.fa-sort-amount-asc:before {\n  content: \"\\f160\";\n}\n.fa-sort-amount-desc:before {\n  content: \"\\f161\";\n}\n.fa-sort-numeric-asc:before {\n  content: \"\\f162\";\n}\n.fa-sort-numeric-desc:before {\n  content: \"\\f163\";\n}\n.fa-thumbs-up:before {\n  content: \"\\f164\";\n}\n.fa-thumbs-down:before {\n  content: \"\\f165\";\n}\n.fa-youtube-square:before {\n  content: \"\\f166\";\n}\n.fa-youtube:before {\n  content: \"\\f167\";\n}\n.fa-xing:before {\n  content: \"\\f168\";\n}\n.fa-xing-square:before {\n  content: \"\\f169\";\n}\n.fa-youtube-play:before {\n  content: \"\\f16a\";\n}\n.fa-dropbox:before {\n  content: \"\\f16b\";\n}\n.fa-stack-overflow:before {\n  content: \"\\f16c\";\n}\n.fa-instagram:before {\n  content: \"\\f16d\";\n}\n.fa-flickr:before {\n  content: \"\\f16e\";\n}\n.fa-adn:before {\n  content: \"\\f170\";\n}\n.fa-bitbucket:before {\n  content: \"\\f171\";\n}\n.fa-bitbucket-square:before {\n  content: \"\\f172\";\n}\n.fa-tumblr:before {\n  content: \"\\f173\";\n}\n.fa-tumblr-square:before {\n  content: \"\\f174\";\n}\n.fa-long-arrow-down:before {\n  content: \"\\f175\";\n}\n.fa-long-arrow-up:before {\n  content: \"\\f176\";\n}\n.fa-long-arrow-left:before {\n  content: \"\\f177\";\n}\n.fa-long-arrow-right:before {\n  content: \"\\f178\";\n}\n.fa-apple:before {\n  content: \"\\f179\";\n}\n.fa-windows:before {\n  content: \"\\f17a\";\n}\n.fa-android:before {\n  content: \"\\f17b\";\n}\n.fa-linux:before {\n  content: \"\\f17c\";\n}\n.fa-dribbble:before {\n  content: \"\\f17d\";\n}\n.fa-skype:before {\n  content: \"\\f17e\";\n}\n.fa-foursquare:before {\n  content: \"\\f180\";\n}\n.fa-trello:before {\n  content: \"\\f181\";\n}\n.fa-female:before {\n  content: \"\\f182\";\n}\n.fa-male:before {\n  content: \"\\f183\";\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: \"\\f184\";\n}\n.fa-sun-o:before {\n  content: \"\\f185\";\n}\n.fa-moon-o:before {\n  content: \"\\f186\";\n}\n.fa-archive:before {\n  content: \"\\f187\";\n}\n.fa-bug:before {\n  content: \"\\f188\";\n}\n.fa-vk:before {\n  content: \"\\f189\";\n}\n.fa-weibo:before {\n  content: \"\\f18a\";\n}\n.fa-renren:before {\n  content: \"\\f18b\";\n}\n.fa-pagelines:before {\n  content: \"\\f18c\";\n}\n.fa-stack-exchange:before {\n  content: \"\\f18d\";\n}\n.fa-arrow-circle-o-right:before {\n  content: \"\\f18e\";\n}\n.fa-arrow-circle-o-left:before {\n  content: \"\\f190\";\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: \"\\f191\";\n}\n.fa-dot-circle-o:before {\n  content: \"\\f192\";\n}\n.fa-wheelchair:before {\n  content: \"\\f193\";\n}\n.fa-vimeo-square:before {\n  content: \"\\f194\";\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: \"\\f195\";\n}\n.fa-plus-square-o:before {\n  content: \"\\f196\";\n}\n.fa-space-shuttle:before {\n  content: \"\\f197\";\n}\n.fa-slack:before {\n  content: \"\\f198\";\n}\n.fa-envelope-square:before {\n  content: \"\\f199\";\n}\n.fa-wordpress:before {\n  content: \"\\f19a\";\n}\n.fa-openid:before {\n  content: \"\\f19b\";\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: \"\\f19c\";\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: \"\\f19d\";\n}\n.fa-yahoo:before {\n  content: \"\\f19e\";\n}\n.fa-google:before {\n  content: \"\\f1a0\";\n}\n.fa-reddit:before {\n  content: \"\\f1a1\";\n}\n.fa-reddit-square:before {\n  content: \"\\f1a2\";\n}\n.fa-stumbleupon-circle:before {\n  content: \"\\f1a3\";\n}\n.fa-stumbleupon:before {\n  content: \"\\f1a4\";\n}\n.fa-delicious:before {\n  content: \"\\f1a5\";\n}\n.fa-digg:before {\n  content: \"\\f1a6\";\n}\n.fa-pied-piper:before {\n  content: \"\\f1a7\";\n}\n.fa-pied-piper-alt:before {\n  content: \"\\f1a8\";\n}\n.fa-drupal:before {\n  content: \"\\f1a9\";\n}\n.fa-joomla:before {\n  content: \"\\f1aa\";\n}\n.fa-language:before {\n  content: \"\\f1ab\";\n}\n.fa-fax:before {\n  content: \"\\f1ac\";\n}\n.fa-building:before {\n  content: \"\\f1ad\";\n}\n.fa-child:before {\n  content: \"\\f1ae\";\n}\n.fa-paw:before {\n  content: \"\\f1b0\";\n}\n.fa-spoon:before {\n  content: \"\\f1b1\";\n}\n.fa-cube:before {\n  content: \"\\f1b2\";\n}\n.fa-cubes:before {\n  content: \"\\f1b3\";\n}\n.fa-behance:before {\n  content: \"\\f1b4\";\n}\n.fa-behance-square:before {\n  content: \"\\f1b5\";\n}\n.fa-steam:before {\n  content: \"\\f1b6\";\n}\n.fa-steam-square:before {\n  content: \"\\f1b7\";\n}\n.fa-recycle:before {\n  content: \"\\f1b8\";\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: \"\\f1b9\";\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: \"\\f1ba\";\n}\n.fa-tree:before {\n  content: \"\\f1bb\";\n}\n.fa-spotify:before {\n  content: \"\\f1bc\";\n}\n.fa-deviantart:before {\n  content: \"\\f1bd\";\n}\n.fa-soundcloud:before {\n  content: \"\\f1be\";\n}\n.fa-database:before {\n  content: \"\\f1c0\";\n}\n.fa-file-pdf-o:before {\n  content: \"\\f1c1\";\n}\n.fa-file-word-o:before {\n  content: \"\\f1c2\";\n}\n.fa-file-excel-o:before {\n  content: \"\\f1c3\";\n}\n.fa-file-powerpoint-o:before {\n  content: \"\\f1c4\";\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: \"\\f1c5\";\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: \"\\f1c6\";\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: \"\\f1c7\";\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: \"\\f1c8\";\n}\n.fa-file-code-o:before {\n  content: \"\\f1c9\";\n}\n.fa-vine:before {\n  content: \"\\f1ca\";\n}\n.fa-codepen:before {\n  content: \"\\f1cb\";\n}\n.fa-jsfiddle:before {\n  content: \"\\f1cc\";\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: \"\\f1cd\";\n}\n.fa-circle-o-notch:before {\n  content: \"\\f1ce\";\n}\n.fa-ra:before,\n.fa-rebel:before {\n  content: \"\\f1d0\";\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: \"\\f1d1\";\n}\n.fa-git-square:before {\n  content: \"\\f1d2\";\n}\n.fa-git:before {\n  content: \"\\f1d3\";\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: \"\\f1d4\";\n}\n.fa-tencent-weibo:before {\n  content: \"\\f1d5\";\n}\n.fa-qq:before {\n  content: \"\\f1d6\";\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: \"\\f1d7\";\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: \"\\f1d8\";\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: \"\\f1d9\";\n}\n.fa-history:before {\n  content: \"\\f1da\";\n}\n.fa-circle-thin:before {\n  content: \"\\f1db\";\n}\n.fa-header:before {\n  content: \"\\f1dc\";\n}\n.fa-paragraph:before {\n  content: \"\\f1dd\";\n}\n.fa-sliders:before {\n  content: \"\\f1de\";\n}\n.fa-share-alt:before {\n  content: \"\\f1e0\";\n}\n.fa-share-alt-square:before {\n  content: \"\\f1e1\";\n}\n.fa-bomb:before {\n  content: \"\\f1e2\";\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: \"\\f1e3\";\n}\n.fa-tty:before {\n  content: \"\\f1e4\";\n}\n.fa-binoculars:before {\n  content: \"\\f1e5\";\n}\n.fa-plug:before {\n  content: \"\\f1e6\";\n}\n.fa-slideshare:before {\n  content: \"\\f1e7\";\n}\n.fa-twitch:before {\n  content: \"\\f1e8\";\n}\n.fa-yelp:before {\n  content: \"\\f1e9\";\n}\n.fa-newspaper-o:before {\n  content: \"\\f1ea\";\n}\n.fa-wifi:before {\n  content: \"\\f1eb\";\n}\n.fa-calculator:before {\n  content: \"\\f1ec\";\n}\n.fa-paypal:before {\n  content: \"\\f1ed\";\n}\n.fa-google-wallet:before {\n  content: \"\\f1ee\";\n}\n.fa-cc-visa:before {\n  content: \"\\f1f0\";\n}\n.fa-cc-mastercard:before {\n  content: \"\\f1f1\";\n}\n.fa-cc-discover:before {\n  content: \"\\f1f2\";\n}\n.fa-cc-amex:before {\n  content: \"\\f1f3\";\n}\n.fa-cc-paypal:before {\n  content: \"\\f1f4\";\n}\n.fa-cc-stripe:before {\n  content: \"\\f1f5\";\n}\n.fa-bell-slash:before {\n  content: \"\\f1f6\";\n}\n.fa-bell-slash-o:before {\n  content: \"\\f1f7\";\n}\n.fa-trash:before {\n  content: \"\\f1f8\";\n}\n.fa-copyright:before {\n  content: \"\\f1f9\";\n}\n.fa-at:before {\n  content: \"\\f1fa\";\n}\n.fa-eyedropper:before {\n  content: \"\\f1fb\";\n}\n.fa-paint-brush:before {\n  content: \"\\f1fc\";\n}\n.fa-birthday-cake:before {\n  content: \"\\f1fd\";\n}\n.fa-area-chart:before {\n  content: \"\\f1fe\";\n}\n.fa-pie-chart:before {\n  content: \"\\f200\";\n}\n.fa-line-chart:before {\n  content: \"\\f201\";\n}\n.fa-lastfm:before {\n  content: \"\\f202\";\n}\n.fa-lastfm-square:before {\n  content: \"\\f203\";\n}\n.fa-toggle-off:before {\n  content: \"\\f204\";\n}\n.fa-toggle-on:before {\n  content: \"\\f205\";\n}\n.fa-bicycle:before {\n  content: \"\\f206\";\n}\n.fa-bus:before {\n  content: \"\\f207\";\n}\n.fa-ioxhost:before {\n  content: \"\\f208\";\n}\n.fa-angellist:before {\n  content: \"\\f209\";\n}\n.fa-cc:before {\n  content: \"\\f20a\";\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: \"\\f20b\";\n}\n.fa-meanpath:before {\n  content: \"\\f20c\";\n}\n.fa-buysellads:before {\n  content: \"\\f20d\";\n}\n.fa-connectdevelop:before {\n  content: \"\\f20e\";\n}\n.fa-dashcube:before {\n  content: \"\\f210\";\n}\n.fa-forumbee:before {\n  content: \"\\f211\";\n}\n.fa-leanpub:before {\n  content: \"\\f212\";\n}\n.fa-sellsy:before {\n  content: \"\\f213\";\n}\n.fa-shirtsinbulk:before {\n  content: \"\\f214\";\n}\n.fa-simplybuilt:before {\n  content: \"\\f215\";\n}\n.fa-skyatlas:before {\n  content: \"\\f216\";\n}\n.fa-cart-plus:before {\n  content: \"\\f217\";\n}\n.fa-cart-arrow-down:before {\n  content: \"\\f218\";\n}\n.fa-diamond:before {\n  content: \"\\f219\";\n}\n.fa-ship:before {\n  content: \"\\f21a\";\n}\n.fa-user-secret:before {\n  content: \"\\f21b\";\n}\n.fa-motorcycle:before {\n  content: \"\\f21c\";\n}\n.fa-street-view:before {\n  content: \"\\f21d\";\n}\n.fa-heartbeat:before {\n  content: \"\\f21e\";\n}\n.fa-venus:before {\n  content: \"\\f221\";\n}\n.fa-mars:before {\n  content: \"\\f222\";\n}\n.fa-mercury:before {\n  content: \"\\f223\";\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: \"\\f224\";\n}\n.fa-transgender-alt:before {\n  content: \"\\f225\";\n}\n.fa-venus-double:before {\n  content: \"\\f226\";\n}\n.fa-mars-double:before {\n  content: \"\\f227\";\n}\n.fa-venus-mars:before {\n  content: \"\\f228\";\n}\n.fa-mars-stroke:before {\n  content: \"\\f229\";\n}\n.fa-mars-stroke-v:before {\n  content: \"\\f22a\";\n}\n.fa-mars-stroke-h:before {\n  content: \"\\f22b\";\n}\n.fa-neuter:before {\n  content: \"\\f22c\";\n}\n.fa-genderless:before {\n  content: \"\\f22d\";\n}\n.fa-facebook-official:before {\n  content: \"\\f230\";\n}\n.fa-pinterest-p:before {\n  content: \"\\f231\";\n}\n.fa-whatsapp:before {\n  content: \"\\f232\";\n}\n.fa-server:before {\n  content: \"\\f233\";\n}\n.fa-user-plus:before {\n  content: \"\\f234\";\n}\n.fa-user-times:before {\n  content: \"\\f235\";\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: \"\\f236\";\n}\n.fa-viacoin:before {\n  content: \"\\f237\";\n}\n.fa-train:before {\n  content: \"\\f238\";\n}\n.fa-subway:before {\n  content: \"\\f239\";\n}\n.fa-medium:before {\n  content: \"\\f23a\";\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: \"\\f23b\";\n}\n.fa-optin-monster:before {\n  content: \"\\f23c\";\n}\n.fa-opencart:before {\n  content: \"\\f23d\";\n}\n.fa-expeditedssl:before {\n  content: \"\\f23e\";\n}\n.fa-battery-4:before,\n.fa-battery-full:before {\n  content: \"\\f240\";\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: \"\\f241\";\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: \"\\f242\";\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: \"\\f243\";\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: \"\\f244\";\n}\n.fa-mouse-pointer:before {\n  content: \"\\f245\";\n}\n.fa-i-cursor:before {\n  content: \"\\f246\";\n}\n.fa-object-group:before {\n  content: \"\\f247\";\n}\n.fa-object-ungroup:before {\n  content: \"\\f248\";\n}\n.fa-sticky-note:before {\n  content: \"\\f249\";\n}\n.fa-sticky-note-o:before {\n  content: \"\\f24a\";\n}\n.fa-cc-jcb:before {\n  content: \"\\f24b\";\n}\n.fa-cc-diners-club:before {\n  content: \"\\f24c\";\n}\n.fa-clone:before {\n  content: \"\\f24d\";\n}\n.fa-balance-scale:before {\n  content: \"\\f24e\";\n}\n.fa-hourglass-o:before {\n  content: \"\\f250\";\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: \"\\f251\";\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: \"\\f252\";\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: \"\\f253\";\n}\n.fa-hourglass:before {\n  content: \"\\f254\";\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: \"\\f255\";\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: \"\\f256\";\n}\n.fa-hand-scissors-o:before {\n  content: \"\\f257\";\n}\n.fa-hand-lizard-o:before {\n  content: \"\\f258\";\n}\n.fa-hand-spock-o:before {\n  content: \"\\f259\";\n}\n.fa-hand-pointer-o:before {\n  content: \"\\f25a\";\n}\n.fa-hand-peace-o:before {\n  content: \"\\f25b\";\n}\n.fa-trademark:before {\n  content: \"\\f25c\";\n}\n.fa-registered:before {\n  content: \"\\f25d\";\n}\n.fa-creative-commons:before {\n  content: \"\\f25e\";\n}\n.fa-gg:before {\n  content: \"\\f260\";\n}\n.fa-gg-circle:before {\n  content: \"\\f261\";\n}\n.fa-tripadvisor:before {\n  content: \"\\f262\";\n}\n.fa-odnoklassniki:before {\n  content: \"\\f263\";\n}\n.fa-odnoklassniki-square:before {\n  content: \"\\f264\";\n}\n.fa-get-pocket:before {\n  content: \"\\f265\";\n}\n.fa-wikipedia-w:before {\n  content: \"\\f266\";\n}\n.fa-safari:before {\n  content: \"\\f267\";\n}\n.fa-chrome:before {\n  content: \"\\f268\";\n}\n.fa-firefox:before {\n  content: \"\\f269\";\n}\n.fa-opera:before {\n  content: \"\\f26a\";\n}\n.fa-internet-explorer:before {\n  content: \"\\f26b\";\n}\n.fa-tv:before,\n.fa-television:before {\n  content: \"\\f26c\";\n}\n.fa-contao:before {\n  content: \"\\f26d\";\n}\n.fa-500px:before {\n  content: \"\\f26e\";\n}\n.fa-amazon:before {\n  content: \"\\f270\";\n}\n.fa-calendar-plus-o:before {\n  content: \"\\f271\";\n}\n.fa-calendar-minus-o:before {\n  content: \"\\f272\";\n}\n.fa-calendar-times-o:before {\n  content: \"\\f273\";\n}\n.fa-calendar-check-o:before {\n  content: \"\\f274\";\n}\n.fa-industry:before {\n  content: \"\\f275\";\n}\n.fa-map-pin:before {\n  content: \"\\f276\";\n}\n.fa-map-signs:before {\n  content: \"\\f277\";\n}\n.fa-map-o:before {\n  content: \"\\f278\";\n}\n.fa-map:before {\n  content: \"\\f279\";\n}\n.fa-commenting:before {\n  content: \"\\f27a\";\n}\n.fa-commenting-o:before {\n  content: \"\\f27b\";\n}\n.fa-houzz:before {\n  content: \"\\f27c\";\n}\n.fa-vimeo:before {\n  content: \"\\f27d\";\n}\n.fa-black-tie:before {\n  content: \"\\f27e\";\n}\n.fa-fonticons:before {\n  content: \"\\f280\";\n}\n.fa-reddit-alien:before {\n  content: \"\\f281\";\n}\n.fa-edge:before {\n  content: \"\\f282\";\n}\n.fa-credit-card-alt:before {\n  content: \"\\f283\";\n}\n.fa-codiepie:before {\n  content: \"\\f284\";\n}\n.fa-modx:before {\n  content: \"\\f285\";\n}\n.fa-fort-awesome:before {\n  content: \"\\f286\";\n}\n.fa-usb:before {\n  content: \"\\f287\";\n}\n.fa-product-hunt:before {\n  content: \"\\f288\";\n}\n.fa-mixcloud:before {\n  content: \"\\f289\";\n}\n.fa-scribd:before {\n  content: \"\\f28a\";\n}\n.fa-pause-circle:before {\n  content: \"\\f28b\";\n}\n.fa-pause-circle-o:before {\n  content: \"\\f28c\";\n}\n.fa-stop-circle:before {\n  content: \"\\f28d\";\n}\n.fa-stop-circle-o:before {\n  content: \"\\f28e\";\n}\n.fa-shopping-bag:before {\n  content: \"\\f290\";\n}\n.fa-shopping-basket:before {\n  content: \"\\f291\";\n}\n.fa-hashtag:before {\n  content: \"\\f292\";\n}\n.fa-bluetooth:before {\n  content: \"\\f293\";\n}\n.fa-bluetooth-b:before {\n  content: \"\\f294\";\n}\n.fa-percent:before {\n  content: \"\\f295\";\n}\n","date":"2016-09-08T05:01:57.000Z","updated":"2016-09-08T05:01:57.000Z","path":"about/font-awesome/css/font-awesome.css","layout":"false","title":"","comments":1,"_id":"cisu7431k002537rq948h7mg2","content":"/*!\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */\n/* FONT PATH\n * -------------------------- */\n@font-face {\n  font-family: 'FontAwesome';\n  src: url('../fonts/fontawesome-webfont.eot?v=4.5.0');\n  src: url('../fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'), url('../fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'), url('../fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'), url('../fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'), url('../fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n.fa {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n/* makes the font 33% larger relative to the icon container */\n.fa-lg {\n  font-size: 1.33333333em;\n  line-height: 0.75em;\n  vertical-align: -15%;\n}\n.fa-2x {\n  font-size: 2em;\n}\n.fa-3x {\n  font-size: 3em;\n}\n.fa-4x {\n  font-size: 4em;\n}\n.fa-5x {\n  font-size: 5em;\n}\n.fa-fw {\n  width: 1.28571429em;\n  text-align: center;\n}\n.fa-ul {\n  padding-left: 0;\n  margin-left: 2.14285714em;\n  list-style-type: none;\n}\n.fa-ul > li {\n  position: relative;\n}\n.fa-li {\n  position: absolute;\n  left: -2.14285714em;\n  width: 2.14285714em;\n  top: 0.14285714em;\n  text-align: center;\n}\n.fa-li.fa-lg {\n  left: -1.85714286em;\n}\n.fa-border {\n  padding: .2em .25em .15em;\n  border: solid 0.08em #eeeeee;\n  border-radius: .1em;\n}\n.fa-pull-left {\n  float: left;\n}\n.fa-pull-right {\n  float: right;\n}\n.fa.fa-pull-left {\n  margin-right: .3em;\n}\n.fa.fa-pull-right {\n  margin-left: .3em;\n}\n/* Deprecated as of 4.4.0 */\n.pull-right {\n  float: right;\n}\n.pull-left {\n  float: left;\n}\n.fa.pull-left {\n  margin-right: .3em;\n}\n.fa.pull-right {\n  margin-left: .3em;\n}\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n  animation: fa-spin 2s infinite linear;\n}\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n  animation: fa-spin 1s infinite steps(8);\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n.fa-rotate-90 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);\n  -webkit-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.fa-rotate-180 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n  -webkit-transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n  transform: rotate(180deg);\n}\n.fa-rotate-270 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);\n  -webkit-transform: rotate(270deg);\n  -ms-transform: rotate(270deg);\n  transform: rotate(270deg);\n}\n.fa-flip-horizontal {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);\n  -webkit-transform: scale(-1, 1);\n  -ms-transform: scale(-1, 1);\n  transform: scale(-1, 1);\n}\n.fa-flip-vertical {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);\n  -webkit-transform: scale(1, -1);\n  -ms-transform: scale(1, -1);\n  transform: scale(1, -1);\n}\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  filter: none;\n}\n.fa-stack {\n  position: relative;\n  display: inline-block;\n  width: 2em;\n  height: 2em;\n  line-height: 2em;\n  vertical-align: middle;\n}\n.fa-stack-1x,\n.fa-stack-2x {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n.fa-stack-1x {\n  line-height: inherit;\n}\n.fa-stack-2x {\n  font-size: 2em;\n}\n.fa-inverse {\n  color: #ffffff;\n}\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\n   readers do not read off random characters that represent icons */\n.fa-glass:before {\n  content: \"\\f000\";\n}\n.fa-music:before {\n  content: \"\\f001\";\n}\n.fa-search:before {\n  content: \"\\f002\";\n}\n.fa-envelope-o:before {\n  content: \"\\f003\";\n}\n.fa-heart:before {\n  content: \"\\f004\";\n}\n.fa-star:before {\n  content: \"\\f005\";\n}\n.fa-star-o:before {\n  content: \"\\f006\";\n}\n.fa-user:before {\n  content: \"\\f007\";\n}\n.fa-film:before {\n  content: \"\\f008\";\n}\n.fa-th-large:before {\n  content: \"\\f009\";\n}\n.fa-th:before {\n  content: \"\\f00a\";\n}\n.fa-th-list:before {\n  content: \"\\f00b\";\n}\n.fa-check:before {\n  content: \"\\f00c\";\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: \"\\f00d\";\n}\n.fa-search-plus:before {\n  content: \"\\f00e\";\n}\n.fa-search-minus:before {\n  content: \"\\f010\";\n}\n.fa-power-off:before {\n  content: \"\\f011\";\n}\n.fa-signal:before {\n  content: \"\\f012\";\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: \"\\f013\";\n}\n.fa-trash-o:before {\n  content: \"\\f014\";\n}\n.fa-home:before {\n  content: \"\\f015\";\n}\n.fa-file-o:before {\n  content: \"\\f016\";\n}\n.fa-clock-o:before {\n  content: \"\\f017\";\n}\n.fa-road:before {\n  content: \"\\f018\";\n}\n.fa-download:before {\n  content: \"\\f019\";\n}\n.fa-arrow-circle-o-down:before {\n  content: \"\\f01a\";\n}\n.fa-arrow-circle-o-up:before {\n  content: \"\\f01b\";\n}\n.fa-inbox:before {\n  content: \"\\f01c\";\n}\n.fa-play-circle-o:before {\n  content: \"\\f01d\";\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: \"\\f01e\";\n}\n.fa-refresh:before {\n  content: \"\\f021\";\n}\n.fa-list-alt:before {\n  content: \"\\f022\";\n}\n.fa-lock:before {\n  content: \"\\f023\";\n}\n.fa-flag:before {\n  content: \"\\f024\";\n}\n.fa-headphones:before {\n  content: \"\\f025\";\n}\n.fa-volume-off:before {\n  content: \"\\f026\";\n}\n.fa-volume-down:before {\n  content: \"\\f027\";\n}\n.fa-volume-up:before {\n  content: \"\\f028\";\n}\n.fa-qrcode:before {\n  content: \"\\f029\";\n}\n.fa-barcode:before {\n  content: \"\\f02a\";\n}\n.fa-tag:before {\n  content: \"\\f02b\";\n}\n.fa-tags:before {\n  content: \"\\f02c\";\n}\n.fa-book:before {\n  content: \"\\f02d\";\n}\n.fa-bookmark:before {\n  content: \"\\f02e\";\n}\n.fa-print:before {\n  content: \"\\f02f\";\n}\n.fa-camera:before {\n  content: \"\\f030\";\n}\n.fa-font:before {\n  content: \"\\f031\";\n}\n.fa-bold:before {\n  content: \"\\f032\";\n}\n.fa-italic:before {\n  content: \"\\f033\";\n}\n.fa-text-height:before {\n  content: \"\\f034\";\n}\n.fa-text-width:before {\n  content: \"\\f035\";\n}\n.fa-align-left:before {\n  content: \"\\f036\";\n}\n.fa-align-center:before {\n  content: \"\\f037\";\n}\n.fa-align-right:before {\n  content: \"\\f038\";\n}\n.fa-align-justify:before {\n  content: \"\\f039\";\n}\n.fa-list:before {\n  content: \"\\f03a\";\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: \"\\f03b\";\n}\n.fa-indent:before {\n  content: \"\\f03c\";\n}\n.fa-video-camera:before {\n  content: \"\\f03d\";\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: \"\\f03e\";\n}\n.fa-pencil:before {\n  content: \"\\f040\";\n}\n.fa-map-marker:before {\n  content: \"\\f041\";\n}\n.fa-adjust:before {\n  content: \"\\f042\";\n}\n.fa-tint:before {\n  content: \"\\f043\";\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: \"\\f044\";\n}\n.fa-share-square-o:before {\n  content: \"\\f045\";\n}\n.fa-check-square-o:before {\n  content: \"\\f046\";\n}\n.fa-arrows:before {\n  content: \"\\f047\";\n}\n.fa-step-backward:before {\n  content: \"\\f048\";\n}\n.fa-fast-backward:before {\n  content: \"\\f049\";\n}\n.fa-backward:before {\n  content: \"\\f04a\";\n}\n.fa-play:before {\n  content: \"\\f04b\";\n}\n.fa-pause:before {\n  content: \"\\f04c\";\n}\n.fa-stop:before {\n  content: \"\\f04d\";\n}\n.fa-forward:before {\n  content: \"\\f04e\";\n}\n.fa-fast-forward:before {\n  content: \"\\f050\";\n}\n.fa-step-forward:before {\n  content: \"\\f051\";\n}\n.fa-eject:before {\n  content: \"\\f052\";\n}\n.fa-chevron-left:before {\n  content: \"\\f053\";\n}\n.fa-chevron-right:before {\n  content: \"\\f054\";\n}\n.fa-plus-circle:before {\n  content: \"\\f055\";\n}\n.fa-minus-circle:before {\n  content: \"\\f056\";\n}\n.fa-times-circle:before {\n  content: \"\\f057\";\n}\n.fa-check-circle:before {\n  content: \"\\f058\";\n}\n.fa-question-circle:before {\n  content: \"\\f059\";\n}\n.fa-info-circle:before {\n  content: \"\\f05a\";\n}\n.fa-crosshairs:before {\n  content: \"\\f05b\";\n}\n.fa-times-circle-o:before {\n  content: \"\\f05c\";\n}\n.fa-check-circle-o:before {\n  content: \"\\f05d\";\n}\n.fa-ban:before {\n  content: \"\\f05e\";\n}\n.fa-arrow-left:before {\n  content: \"\\f060\";\n}\n.fa-arrow-right:before {\n  content: \"\\f061\";\n}\n.fa-arrow-up:before {\n  content: \"\\f062\";\n}\n.fa-arrow-down:before {\n  content: \"\\f063\";\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: \"\\f064\";\n}\n.fa-expand:before {\n  content: \"\\f065\";\n}\n.fa-compress:before {\n  content: \"\\f066\";\n}\n.fa-plus:before {\n  content: \"\\f067\";\n}\n.fa-minus:before {\n  content: \"\\f068\";\n}\n.fa-asterisk:before {\n  content: \"\\f069\";\n}\n.fa-exclamation-circle:before {\n  content: \"\\f06a\";\n}\n.fa-gift:before {\n  content: \"\\f06b\";\n}\n.fa-leaf:before {\n  content: \"\\f06c\";\n}\n.fa-fire:before {\n  content: \"\\f06d\";\n}\n.fa-eye:before {\n  content: \"\\f06e\";\n}\n.fa-eye-slash:before {\n  content: \"\\f070\";\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: \"\\f071\";\n}\n.fa-plane:before {\n  content: \"\\f072\";\n}\n.fa-calendar:before {\n  content: \"\\f073\";\n}\n.fa-random:before {\n  content: \"\\f074\";\n}\n.fa-comment:before {\n  content: \"\\f075\";\n}\n.fa-magnet:before {\n  content: \"\\f076\";\n}\n.fa-chevron-up:before {\n  content: \"\\f077\";\n}\n.fa-chevron-down:before {\n  content: \"\\f078\";\n}\n.fa-retweet:before {\n  content: \"\\f079\";\n}\n.fa-shopping-cart:before {\n  content: \"\\f07a\";\n}\n.fa-folder:before {\n  content: \"\\f07b\";\n}\n.fa-folder-open:before {\n  content: \"\\f07c\";\n}\n.fa-arrows-v:before {\n  content: \"\\f07d\";\n}\n.fa-arrows-h:before {\n  content: \"\\f07e\";\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: \"\\f080\";\n}\n.fa-twitter-square:before {\n  content: \"\\f081\";\n}\n.fa-facebook-square:before {\n  content: \"\\f082\";\n}\n.fa-camera-retro:before {\n  content: \"\\f083\";\n}\n.fa-key:before {\n  content: \"\\f084\";\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: \"\\f085\";\n}\n.fa-comments:before {\n  content: \"\\f086\";\n}\n.fa-thumbs-o-up:before {\n  content: \"\\f087\";\n}\n.fa-thumbs-o-down:before {\n  content: \"\\f088\";\n}\n.fa-star-half:before {\n  content: \"\\f089\";\n}\n.fa-heart-o:before {\n  content: \"\\f08a\";\n}\n.fa-sign-out:before {\n  content: \"\\f08b\";\n}\n.fa-linkedin-square:before {\n  content: \"\\f08c\";\n}\n.fa-thumb-tack:before {\n  content: \"\\f08d\";\n}\n.fa-external-link:before {\n  content: \"\\f08e\";\n}\n.fa-sign-in:before {\n  content: \"\\f090\";\n}\n.fa-trophy:before {\n  content: \"\\f091\";\n}\n.fa-github-square:before {\n  content: \"\\f092\";\n}\n.fa-upload:before {\n  content: \"\\f093\";\n}\n.fa-lemon-o:before {\n  content: \"\\f094\";\n}\n.fa-phone:before {\n  content: \"\\f095\";\n}\n.fa-square-o:before {\n  content: \"\\f096\";\n}\n.fa-bookmark-o:before {\n  content: \"\\f097\";\n}\n.fa-phone-square:before {\n  content: \"\\f098\";\n}\n.fa-twitter:before {\n  content: \"\\f099\";\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: \"\\f09a\";\n}\n.fa-github:before {\n  content: \"\\f09b\";\n}\n.fa-unlock:before {\n  content: \"\\f09c\";\n}\n.fa-credit-card:before {\n  content: \"\\f09d\";\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: \"\\f09e\";\n}\n.fa-hdd-o:before {\n  content: \"\\f0a0\";\n}\n.fa-bullhorn:before {\n  content: \"\\f0a1\";\n}\n.fa-bell:before {\n  content: \"\\f0f3\";\n}\n.fa-certificate:before {\n  content: \"\\f0a3\";\n}\n.fa-hand-o-right:before {\n  content: \"\\f0a4\";\n}\n.fa-hand-o-left:before {\n  content: \"\\f0a5\";\n}\n.fa-hand-o-up:before {\n  content: \"\\f0a6\";\n}\n.fa-hand-o-down:before {\n  content: \"\\f0a7\";\n}\n.fa-arrow-circle-left:before {\n  content: \"\\f0a8\";\n}\n.fa-arrow-circle-right:before {\n  content: \"\\f0a9\";\n}\n.fa-arrow-circle-up:before {\n  content: \"\\f0aa\";\n}\n.fa-arrow-circle-down:before {\n  content: \"\\f0ab\";\n}\n.fa-globe:before {\n  content: \"\\f0ac\";\n}\n.fa-wrench:before {\n  content: \"\\f0ad\";\n}\n.fa-tasks:before {\n  content: \"\\f0ae\";\n}\n.fa-filter:before {\n  content: \"\\f0b0\";\n}\n.fa-briefcase:before {\n  content: \"\\f0b1\";\n}\n.fa-arrows-alt:before {\n  content: \"\\f0b2\";\n}\n.fa-group:before,\n.fa-users:before {\n  content: \"\\f0c0\";\n}\n.fa-chain:before,\n.fa-link:before {\n  content: \"\\f0c1\";\n}\n.fa-cloud:before {\n  content: \"\\f0c2\";\n}\n.fa-flask:before {\n  content: \"\\f0c3\";\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: \"\\f0c4\";\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: \"\\f0c5\";\n}\n.fa-paperclip:before {\n  content: \"\\f0c6\";\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: \"\\f0c7\";\n}\n.fa-square:before {\n  content: \"\\f0c8\";\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: \"\\f0c9\";\n}\n.fa-list-ul:before {\n  content: \"\\f0ca\";\n}\n.fa-list-ol:before {\n  content: \"\\f0cb\";\n}\n.fa-strikethrough:before {\n  content: \"\\f0cc\";\n}\n.fa-underline:before {\n  content: \"\\f0cd\";\n}\n.fa-table:before {\n  content: \"\\f0ce\";\n}\n.fa-magic:before {\n  content: \"\\f0d0\";\n}\n.fa-truck:before {\n  content: \"\\f0d1\";\n}\n.fa-pinterest:before {\n  content: \"\\f0d2\";\n}\n.fa-pinterest-square:before {\n  content: \"\\f0d3\";\n}\n.fa-google-plus-square:before {\n  content: \"\\f0d4\";\n}\n.fa-google-plus:before {\n  content: \"\\f0d5\";\n}\n.fa-money:before {\n  content: \"\\f0d6\";\n}\n.fa-caret-down:before {\n  content: \"\\f0d7\";\n}\n.fa-caret-up:before {\n  content: \"\\f0d8\";\n}\n.fa-caret-left:before {\n  content: \"\\f0d9\";\n}\n.fa-caret-right:before {\n  content: \"\\f0da\";\n}\n.fa-columns:before {\n  content: \"\\f0db\";\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: \"\\f0dc\";\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: \"\\f0dd\";\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: \"\\f0de\";\n}\n.fa-envelope:before {\n  content: \"\\f0e0\";\n}\n.fa-linkedin:before {\n  content: \"\\f0e1\";\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: \"\\f0e2\";\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: \"\\f0e3\";\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: \"\\f0e4\";\n}\n.fa-comment-o:before {\n  content: \"\\f0e5\";\n}\n.fa-comments-o:before {\n  content: \"\\f0e6\";\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: \"\\f0e7\";\n}\n.fa-sitemap:before {\n  content: \"\\f0e8\";\n}\n.fa-umbrella:before {\n  content: \"\\f0e9\";\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: \"\\f0ea\";\n}\n.fa-lightbulb-o:before {\n  content: \"\\f0eb\";\n}\n.fa-exchange:before {\n  content: \"\\f0ec\";\n}\n.fa-cloud-download:before {\n  content: \"\\f0ed\";\n}\n.fa-cloud-upload:before {\n  content: \"\\f0ee\";\n}\n.fa-user-md:before {\n  content: \"\\f0f0\";\n}\n.fa-stethoscope:before {\n  content: \"\\f0f1\";\n}\n.fa-suitcase:before {\n  content: \"\\f0f2\";\n}\n.fa-bell-o:before {\n  content: \"\\f0a2\";\n}\n.fa-coffee:before {\n  content: \"\\f0f4\";\n}\n.fa-cutlery:before {\n  content: \"\\f0f5\";\n}\n.fa-file-text-o:before {\n  content: \"\\f0f6\";\n}\n.fa-building-o:before {\n  content: \"\\f0f7\";\n}\n.fa-hospital-o:before {\n  content: \"\\f0f8\";\n}\n.fa-ambulance:before {\n  content: \"\\f0f9\";\n}\n.fa-medkit:before {\n  content: \"\\f0fa\";\n}\n.fa-fighter-jet:before {\n  content: \"\\f0fb\";\n}\n.fa-beer:before {\n  content: \"\\f0fc\";\n}\n.fa-h-square:before {\n  content: \"\\f0fd\";\n}\n.fa-plus-square:before {\n  content: \"\\f0fe\";\n}\n.fa-angle-double-left:before {\n  content: \"\\f100\";\n}\n.fa-angle-double-right:before {\n  content: \"\\f101\";\n}\n.fa-angle-double-up:before {\n  content: \"\\f102\";\n}\n.fa-angle-double-down:before {\n  content: \"\\f103\";\n}\n.fa-angle-left:before {\n  content: \"\\f104\";\n}\n.fa-angle-right:before {\n  content: \"\\f105\";\n}\n.fa-angle-up:before {\n  content: \"\\f106\";\n}\n.fa-angle-down:before {\n  content: \"\\f107\";\n}\n.fa-desktop:before {\n  content: \"\\f108\";\n}\n.fa-laptop:before {\n  content: \"\\f109\";\n}\n.fa-tablet:before {\n  content: \"\\f10a\";\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: \"\\f10b\";\n}\n.fa-circle-o:before {\n  content: \"\\f10c\";\n}\n.fa-quote-left:before {\n  content: \"\\f10d\";\n}\n.fa-quote-right:before {\n  content: \"\\f10e\";\n}\n.fa-spinner:before {\n  content: \"\\f110\";\n}\n.fa-circle:before {\n  content: \"\\f111\";\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: \"\\f112\";\n}\n.fa-github-alt:before {\n  content: \"\\f113\";\n}\n.fa-folder-o:before {\n  content: \"\\f114\";\n}\n.fa-folder-open-o:before {\n  content: \"\\f115\";\n}\n.fa-smile-o:before {\n  content: \"\\f118\";\n}\n.fa-frown-o:before {\n  content: \"\\f119\";\n}\n.fa-meh-o:before {\n  content: \"\\f11a\";\n}\n.fa-gamepad:before {\n  content: \"\\f11b\";\n}\n.fa-keyboard-o:before {\n  content: \"\\f11c\";\n}\n.fa-flag-o:before {\n  content: \"\\f11d\";\n}\n.fa-flag-checkered:before {\n  content: \"\\f11e\";\n}\n.fa-terminal:before {\n  content: \"\\f120\";\n}\n.fa-code:before {\n  content: \"\\f121\";\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: \"\\f122\";\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: \"\\f123\";\n}\n.fa-location-arrow:before {\n  content: \"\\f124\";\n}\n.fa-crop:before {\n  content: \"\\f125\";\n}\n.fa-code-fork:before {\n  content: \"\\f126\";\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: \"\\f127\";\n}\n.fa-question:before {\n  content: \"\\f128\";\n}\n.fa-info:before {\n  content: \"\\f129\";\n}\n.fa-exclamation:before {\n  content: \"\\f12a\";\n}\n.fa-superscript:before {\n  content: \"\\f12b\";\n}\n.fa-subscript:before {\n  content: \"\\f12c\";\n}\n.fa-eraser:before {\n  content: \"\\f12d\";\n}\n.fa-puzzle-piece:before {\n  content: \"\\f12e\";\n}\n.fa-microphone:before {\n  content: \"\\f130\";\n}\n.fa-microphone-slash:before {\n  content: \"\\f131\";\n}\n.fa-shield:before {\n  content: \"\\f132\";\n}\n.fa-calendar-o:before {\n  content: \"\\f133\";\n}\n.fa-fire-extinguisher:before {\n  content: \"\\f134\";\n}\n.fa-rocket:before {\n  content: \"\\f135\";\n}\n.fa-maxcdn:before {\n  content: \"\\f136\";\n}\n.fa-chevron-circle-left:before {\n  content: \"\\f137\";\n}\n.fa-chevron-circle-right:before {\n  content: \"\\f138\";\n}\n.fa-chevron-circle-up:before {\n  content: \"\\f139\";\n}\n.fa-chevron-circle-down:before {\n  content: \"\\f13a\";\n}\n.fa-html5:before {\n  content: \"\\f13b\";\n}\n.fa-css3:before {\n  content: \"\\f13c\";\n}\n.fa-anchor:before {\n  content: \"\\f13d\";\n}\n.fa-unlock-alt:before {\n  content: \"\\f13e\";\n}\n.fa-bullseye:before {\n  content: \"\\f140\";\n}\n.fa-ellipsis-h:before {\n  content: \"\\f141\";\n}\n.fa-ellipsis-v:before {\n  content: \"\\f142\";\n}\n.fa-rss-square:before {\n  content: \"\\f143\";\n}\n.fa-play-circle:before {\n  content: \"\\f144\";\n}\n.fa-ticket:before {\n  content: \"\\f145\";\n}\n.fa-minus-square:before {\n  content: \"\\f146\";\n}\n.fa-minus-square-o:before {\n  content: \"\\f147\";\n}\n.fa-level-up:before {\n  content: \"\\f148\";\n}\n.fa-level-down:before {\n  content: \"\\f149\";\n}\n.fa-check-square:before {\n  content: \"\\f14a\";\n}\n.fa-pencil-square:before {\n  content: \"\\f14b\";\n}\n.fa-external-link-square:before {\n  content: \"\\f14c\";\n}\n.fa-share-square:before {\n  content: \"\\f14d\";\n}\n.fa-compass:before {\n  content: \"\\f14e\";\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: \"\\f150\";\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: \"\\f151\";\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: \"\\f152\";\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: \"\\f153\";\n}\n.fa-gbp:before {\n  content: \"\\f154\";\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: \"\\f155\";\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: \"\\f156\";\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: \"\\f157\";\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: \"\\f158\";\n}\n.fa-won:before,\n.fa-krw:before {\n  content: \"\\f159\";\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: \"\\f15a\";\n}\n.fa-file:before {\n  content: \"\\f15b\";\n}\n.fa-file-text:before {\n  content: \"\\f15c\";\n}\n.fa-sort-alpha-asc:before {\n  content: \"\\f15d\";\n}\n.fa-sort-alpha-desc:before {\n  content: \"\\f15e\";\n}\n.fa-sort-amount-asc:before {\n  content: \"\\f160\";\n}\n.fa-sort-amount-desc:before {\n  content: \"\\f161\";\n}\n.fa-sort-numeric-asc:before {\n  content: \"\\f162\";\n}\n.fa-sort-numeric-desc:before {\n  content: \"\\f163\";\n}\n.fa-thumbs-up:before {\n  content: \"\\f164\";\n}\n.fa-thumbs-down:before {\n  content: \"\\f165\";\n}\n.fa-youtube-square:before {\n  content: \"\\f166\";\n}\n.fa-youtube:before {\n  content: \"\\f167\";\n}\n.fa-xing:before {\n  content: \"\\f168\";\n}\n.fa-xing-square:before {\n  content: \"\\f169\";\n}\n.fa-youtube-play:before {\n  content: \"\\f16a\";\n}\n.fa-dropbox:before {\n  content: \"\\f16b\";\n}\n.fa-stack-overflow:before {\n  content: \"\\f16c\";\n}\n.fa-instagram:before {\n  content: \"\\f16d\";\n}\n.fa-flickr:before {\n  content: \"\\f16e\";\n}\n.fa-adn:before {\n  content: \"\\f170\";\n}\n.fa-bitbucket:before {\n  content: \"\\f171\";\n}\n.fa-bitbucket-square:before {\n  content: \"\\f172\";\n}\n.fa-tumblr:before {\n  content: \"\\f173\";\n}\n.fa-tumblr-square:before {\n  content: \"\\f174\";\n}\n.fa-long-arrow-down:before {\n  content: \"\\f175\";\n}\n.fa-long-arrow-up:before {\n  content: \"\\f176\";\n}\n.fa-long-arrow-left:before {\n  content: \"\\f177\";\n}\n.fa-long-arrow-right:before {\n  content: \"\\f178\";\n}\n.fa-apple:before {\n  content: \"\\f179\";\n}\n.fa-windows:before {\n  content: \"\\f17a\";\n}\n.fa-android:before {\n  content: \"\\f17b\";\n}\n.fa-linux:before {\n  content: \"\\f17c\";\n}\n.fa-dribbble:before {\n  content: \"\\f17d\";\n}\n.fa-skype:before {\n  content: \"\\f17e\";\n}\n.fa-foursquare:before {\n  content: \"\\f180\";\n}\n.fa-trello:before {\n  content: \"\\f181\";\n}\n.fa-female:before {\n  content: \"\\f182\";\n}\n.fa-male:before {\n  content: \"\\f183\";\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: \"\\f184\";\n}\n.fa-sun-o:before {\n  content: \"\\f185\";\n}\n.fa-moon-o:before {\n  content: \"\\f186\";\n}\n.fa-archive:before {\n  content: \"\\f187\";\n}\n.fa-bug:before {\n  content: \"\\f188\";\n}\n.fa-vk:before {\n  content: \"\\f189\";\n}\n.fa-weibo:before {\n  content: \"\\f18a\";\n}\n.fa-renren:before {\n  content: \"\\f18b\";\n}\n.fa-pagelines:before {\n  content: \"\\f18c\";\n}\n.fa-stack-exchange:before {\n  content: \"\\f18d\";\n}\n.fa-arrow-circle-o-right:before {\n  content: \"\\f18e\";\n}\n.fa-arrow-circle-o-left:before {\n  content: \"\\f190\";\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: \"\\f191\";\n}\n.fa-dot-circle-o:before {\n  content: \"\\f192\";\n}\n.fa-wheelchair:before {\n  content: \"\\f193\";\n}\n.fa-vimeo-square:before {\n  content: \"\\f194\";\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: \"\\f195\";\n}\n.fa-plus-square-o:before {\n  content: \"\\f196\";\n}\n.fa-space-shuttle:before {\n  content: \"\\f197\";\n}\n.fa-slack:before {\n  content: \"\\f198\";\n}\n.fa-envelope-square:before {\n  content: \"\\f199\";\n}\n.fa-wordpress:before {\n  content: \"\\f19a\";\n}\n.fa-openid:before {\n  content: \"\\f19b\";\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: \"\\f19c\";\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: \"\\f19d\";\n}\n.fa-yahoo:before {\n  content: \"\\f19e\";\n}\n.fa-google:before {\n  content: \"\\f1a0\";\n}\n.fa-reddit:before {\n  content: \"\\f1a1\";\n}\n.fa-reddit-square:before {\n  content: \"\\f1a2\";\n}\n.fa-stumbleupon-circle:before {\n  content: \"\\f1a3\";\n}\n.fa-stumbleupon:before {\n  content: \"\\f1a4\";\n}\n.fa-delicious:before {\n  content: \"\\f1a5\";\n}\n.fa-digg:before {\n  content: \"\\f1a6\";\n}\n.fa-pied-piper:before {\n  content: \"\\f1a7\";\n}\n.fa-pied-piper-alt:before {\n  content: \"\\f1a8\";\n}\n.fa-drupal:before {\n  content: \"\\f1a9\";\n}\n.fa-joomla:before {\n  content: \"\\f1aa\";\n}\n.fa-language:before {\n  content: \"\\f1ab\";\n}\n.fa-fax:before {\n  content: \"\\f1ac\";\n}\n.fa-building:before {\n  content: \"\\f1ad\";\n}\n.fa-child:before {\n  content: \"\\f1ae\";\n}\n.fa-paw:before {\n  content: \"\\f1b0\";\n}\n.fa-spoon:before {\n  content: \"\\f1b1\";\n}\n.fa-cube:before {\n  content: \"\\f1b2\";\n}\n.fa-cubes:before {\n  content: \"\\f1b3\";\n}\n.fa-behance:before {\n  content: \"\\f1b4\";\n}\n.fa-behance-square:before {\n  content: \"\\f1b5\";\n}\n.fa-steam:before {\n  content: \"\\f1b6\";\n}\n.fa-steam-square:before {\n  content: \"\\f1b7\";\n}\n.fa-recycle:before {\n  content: \"\\f1b8\";\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: \"\\f1b9\";\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: \"\\f1ba\";\n}\n.fa-tree:before {\n  content: \"\\f1bb\";\n}\n.fa-spotify:before {\n  content: \"\\f1bc\";\n}\n.fa-deviantart:before {\n  content: \"\\f1bd\";\n}\n.fa-soundcloud:before {\n  content: \"\\f1be\";\n}\n.fa-database:before {\n  content: \"\\f1c0\";\n}\n.fa-file-pdf-o:before {\n  content: \"\\f1c1\";\n}\n.fa-file-word-o:before {\n  content: \"\\f1c2\";\n}\n.fa-file-excel-o:before {\n  content: \"\\f1c3\";\n}\n.fa-file-powerpoint-o:before {\n  content: \"\\f1c4\";\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: \"\\f1c5\";\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: \"\\f1c6\";\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: \"\\f1c7\";\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: \"\\f1c8\";\n}\n.fa-file-code-o:before {\n  content: \"\\f1c9\";\n}\n.fa-vine:before {\n  content: \"\\f1ca\";\n}\n.fa-codepen:before {\n  content: \"\\f1cb\";\n}\n.fa-jsfiddle:before {\n  content: \"\\f1cc\";\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: \"\\f1cd\";\n}\n.fa-circle-o-notch:before {\n  content: \"\\f1ce\";\n}\n.fa-ra:before,\n.fa-rebel:before {\n  content: \"\\f1d0\";\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: \"\\f1d1\";\n}\n.fa-git-square:before {\n  content: \"\\f1d2\";\n}\n.fa-git:before {\n  content: \"\\f1d3\";\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: \"\\f1d4\";\n}\n.fa-tencent-weibo:before {\n  content: \"\\f1d5\";\n}\n.fa-qq:before {\n  content: \"\\f1d6\";\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: \"\\f1d7\";\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: \"\\f1d8\";\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: \"\\f1d9\";\n}\n.fa-history:before {\n  content: \"\\f1da\";\n}\n.fa-circle-thin:before {\n  content: \"\\f1db\";\n}\n.fa-header:before {\n  content: \"\\f1dc\";\n}\n.fa-paragraph:before {\n  content: \"\\f1dd\";\n}\n.fa-sliders:before {\n  content: \"\\f1de\";\n}\n.fa-share-alt:before {\n  content: \"\\f1e0\";\n}\n.fa-share-alt-square:before {\n  content: \"\\f1e1\";\n}\n.fa-bomb:before {\n  content: \"\\f1e2\";\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: \"\\f1e3\";\n}\n.fa-tty:before {\n  content: \"\\f1e4\";\n}\n.fa-binoculars:before {\n  content: \"\\f1e5\";\n}\n.fa-plug:before {\n  content: \"\\f1e6\";\n}\n.fa-slideshare:before {\n  content: \"\\f1e7\";\n}\n.fa-twitch:before {\n  content: \"\\f1e8\";\n}\n.fa-yelp:before {\n  content: \"\\f1e9\";\n}\n.fa-newspaper-o:before {\n  content: \"\\f1ea\";\n}\n.fa-wifi:before {\n  content: \"\\f1eb\";\n}\n.fa-calculator:before {\n  content: \"\\f1ec\";\n}\n.fa-paypal:before {\n  content: \"\\f1ed\";\n}\n.fa-google-wallet:before {\n  content: \"\\f1ee\";\n}\n.fa-cc-visa:before {\n  content: \"\\f1f0\";\n}\n.fa-cc-mastercard:before {\n  content: \"\\f1f1\";\n}\n.fa-cc-discover:before {\n  content: \"\\f1f2\";\n}\n.fa-cc-amex:before {\n  content: \"\\f1f3\";\n}\n.fa-cc-paypal:before {\n  content: \"\\f1f4\";\n}\n.fa-cc-stripe:before {\n  content: \"\\f1f5\";\n}\n.fa-bell-slash:before {\n  content: \"\\f1f6\";\n}\n.fa-bell-slash-o:before {\n  content: \"\\f1f7\";\n}\n.fa-trash:before {\n  content: \"\\f1f8\";\n}\n.fa-copyright:before {\n  content: \"\\f1f9\";\n}\n.fa-at:before {\n  content: \"\\f1fa\";\n}\n.fa-eyedropper:before {\n  content: \"\\f1fb\";\n}\n.fa-paint-brush:before {\n  content: \"\\f1fc\";\n}\n.fa-birthday-cake:before {\n  content: \"\\f1fd\";\n}\n.fa-area-chart:before {\n  content: \"\\f1fe\";\n}\n.fa-pie-chart:before {\n  content: \"\\f200\";\n}\n.fa-line-chart:before {\n  content: \"\\f201\";\n}\n.fa-lastfm:before {\n  content: \"\\f202\";\n}\n.fa-lastfm-square:before {\n  content: \"\\f203\";\n}\n.fa-toggle-off:before {\n  content: \"\\f204\";\n}\n.fa-toggle-on:before {\n  content: \"\\f205\";\n}\n.fa-bicycle:before {\n  content: \"\\f206\";\n}\n.fa-bus:before {\n  content: \"\\f207\";\n}\n.fa-ioxhost:before {\n  content: \"\\f208\";\n}\n.fa-angellist:before {\n  content: \"\\f209\";\n}\n.fa-cc:before {\n  content: \"\\f20a\";\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: \"\\f20b\";\n}\n.fa-meanpath:before {\n  content: \"\\f20c\";\n}\n.fa-buysellads:before {\n  content: \"\\f20d\";\n}\n.fa-connectdevelop:before {\n  content: \"\\f20e\";\n}\n.fa-dashcube:before {\n  content: \"\\f210\";\n}\n.fa-forumbee:before {\n  content: \"\\f211\";\n}\n.fa-leanpub:before {\n  content: \"\\f212\";\n}\n.fa-sellsy:before {\n  content: \"\\f213\";\n}\n.fa-shirtsinbulk:before {\n  content: \"\\f214\";\n}\n.fa-simplybuilt:before {\n  content: \"\\f215\";\n}\n.fa-skyatlas:before {\n  content: \"\\f216\";\n}\n.fa-cart-plus:before {\n  content: \"\\f217\";\n}\n.fa-cart-arrow-down:before {\n  content: \"\\f218\";\n}\n.fa-diamond:before {\n  content: \"\\f219\";\n}\n.fa-ship:before {\n  content: \"\\f21a\";\n}\n.fa-user-secret:before {\n  content: \"\\f21b\";\n}\n.fa-motorcycle:before {\n  content: \"\\f21c\";\n}\n.fa-street-view:before {\n  content: \"\\f21d\";\n}\n.fa-heartbeat:before {\n  content: \"\\f21e\";\n}\n.fa-venus:before {\n  content: \"\\f221\";\n}\n.fa-mars:before {\n  content: \"\\f222\";\n}\n.fa-mercury:before {\n  content: \"\\f223\";\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: \"\\f224\";\n}\n.fa-transgender-alt:before {\n  content: \"\\f225\";\n}\n.fa-venus-double:before {\n  content: \"\\f226\";\n}\n.fa-mars-double:before {\n  content: \"\\f227\";\n}\n.fa-venus-mars:before {\n  content: \"\\f228\";\n}\n.fa-mars-stroke:before {\n  content: \"\\f229\";\n}\n.fa-mars-stroke-v:before {\n  content: \"\\f22a\";\n}\n.fa-mars-stroke-h:before {\n  content: \"\\f22b\";\n}\n.fa-neuter:before {\n  content: \"\\f22c\";\n}\n.fa-genderless:before {\n  content: \"\\f22d\";\n}\n.fa-facebook-official:before {\n  content: \"\\f230\";\n}\n.fa-pinterest-p:before {\n  content: \"\\f231\";\n}\n.fa-whatsapp:before {\n  content: \"\\f232\";\n}\n.fa-server:before {\n  content: \"\\f233\";\n}\n.fa-user-plus:before {\n  content: \"\\f234\";\n}\n.fa-user-times:before {\n  content: \"\\f235\";\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: \"\\f236\";\n}\n.fa-viacoin:before {\n  content: \"\\f237\";\n}\n.fa-train:before {\n  content: \"\\f238\";\n}\n.fa-subway:before {\n  content: \"\\f239\";\n}\n.fa-medium:before {\n  content: \"\\f23a\";\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: \"\\f23b\";\n}\n.fa-optin-monster:before {\n  content: \"\\f23c\";\n}\n.fa-opencart:before {\n  content: \"\\f23d\";\n}\n.fa-expeditedssl:before {\n  content: \"\\f23e\";\n}\n.fa-battery-4:before,\n.fa-battery-full:before {\n  content: \"\\f240\";\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: \"\\f241\";\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: \"\\f242\";\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: \"\\f243\";\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: \"\\f244\";\n}\n.fa-mouse-pointer:before {\n  content: \"\\f245\";\n}\n.fa-i-cursor:before {\n  content: \"\\f246\";\n}\n.fa-object-group:before {\n  content: \"\\f247\";\n}\n.fa-object-ungroup:before {\n  content: \"\\f248\";\n}\n.fa-sticky-note:before {\n  content: \"\\f249\";\n}\n.fa-sticky-note-o:before {\n  content: \"\\f24a\";\n}\n.fa-cc-jcb:before {\n  content: \"\\f24b\";\n}\n.fa-cc-diners-club:before {\n  content: \"\\f24c\";\n}\n.fa-clone:before {\n  content: \"\\f24d\";\n}\n.fa-balance-scale:before {\n  content: \"\\f24e\";\n}\n.fa-hourglass-o:before {\n  content: \"\\f250\";\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: \"\\f251\";\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: \"\\f252\";\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: \"\\f253\";\n}\n.fa-hourglass:before {\n  content: \"\\f254\";\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: \"\\f255\";\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: \"\\f256\";\n}\n.fa-hand-scissors-o:before {\n  content: \"\\f257\";\n}\n.fa-hand-lizard-o:before {\n  content: \"\\f258\";\n}\n.fa-hand-spock-o:before {\n  content: \"\\f259\";\n}\n.fa-hand-pointer-o:before {\n  content: \"\\f25a\";\n}\n.fa-hand-peace-o:before {\n  content: \"\\f25b\";\n}\n.fa-trademark:before {\n  content: \"\\f25c\";\n}\n.fa-registered:before {\n  content: \"\\f25d\";\n}\n.fa-creative-commons:before {\n  content: \"\\f25e\";\n}\n.fa-gg:before {\n  content: \"\\f260\";\n}\n.fa-gg-circle:before {\n  content: \"\\f261\";\n}\n.fa-tripadvisor:before {\n  content: \"\\f262\";\n}\n.fa-odnoklassniki:before {\n  content: \"\\f263\";\n}\n.fa-odnoklassniki-square:before {\n  content: \"\\f264\";\n}\n.fa-get-pocket:before {\n  content: \"\\f265\";\n}\n.fa-wikipedia-w:before {\n  content: \"\\f266\";\n}\n.fa-safari:before {\n  content: \"\\f267\";\n}\n.fa-chrome:before {\n  content: \"\\f268\";\n}\n.fa-firefox:before {\n  content: \"\\f269\";\n}\n.fa-opera:before {\n  content: \"\\f26a\";\n}\n.fa-internet-explorer:before {\n  content: \"\\f26b\";\n}\n.fa-tv:before,\n.fa-television:before {\n  content: \"\\f26c\";\n}\n.fa-contao:before {\n  content: \"\\f26d\";\n}\n.fa-500px:before {\n  content: \"\\f26e\";\n}\n.fa-amazon:before {\n  content: \"\\f270\";\n}\n.fa-calendar-plus-o:before {\n  content: \"\\f271\";\n}\n.fa-calendar-minus-o:before {\n  content: \"\\f272\";\n}\n.fa-calendar-times-o:before {\n  content: \"\\f273\";\n}\n.fa-calendar-check-o:before {\n  content: \"\\f274\";\n}\n.fa-industry:before {\n  content: \"\\f275\";\n}\n.fa-map-pin:before {\n  content: \"\\f276\";\n}\n.fa-map-signs:before {\n  content: \"\\f277\";\n}\n.fa-map-o:before {\n  content: \"\\f278\";\n}\n.fa-map:before {\n  content: \"\\f279\";\n}\n.fa-commenting:before {\n  content: \"\\f27a\";\n}\n.fa-commenting-o:before {\n  content: \"\\f27b\";\n}\n.fa-houzz:before {\n  content: \"\\f27c\";\n}\n.fa-vimeo:before {\n  content: \"\\f27d\";\n}\n.fa-black-tie:before {\n  content: \"\\f27e\";\n}\n.fa-fonticons:before {\n  content: \"\\f280\";\n}\n.fa-reddit-alien:before {\n  content: \"\\f281\";\n}\n.fa-edge:before {\n  content: \"\\f282\";\n}\n.fa-credit-card-alt:before {\n  content: \"\\f283\";\n}\n.fa-codiepie:before {\n  content: \"\\f284\";\n}\n.fa-modx:before {\n  content: \"\\f285\";\n}\n.fa-fort-awesome:before {\n  content: \"\\f286\";\n}\n.fa-usb:before {\n  content: \"\\f287\";\n}\n.fa-product-hunt:before {\n  content: \"\\f288\";\n}\n.fa-mixcloud:before {\n  content: \"\\f289\";\n}\n.fa-scribd:before {\n  content: \"\\f28a\";\n}\n.fa-pause-circle:before {\n  content: \"\\f28b\";\n}\n.fa-pause-circle-o:before {\n  content: \"\\f28c\";\n}\n.fa-stop-circle:before {\n  content: \"\\f28d\";\n}\n.fa-stop-circle-o:before {\n  content: \"\\f28e\";\n}\n.fa-shopping-bag:before {\n  content: \"\\f290\";\n}\n.fa-shopping-basket:before {\n  content: \"\\f291\";\n}\n.fa-hashtag:before {\n  content: \"\\f292\";\n}\n.fa-bluetooth:before {\n  content: \"\\f293\";\n}\n.fa-bluetooth-b:before {\n  content: \"\\f294\";\n}\n.fa-percent:before {\n  content: \"\\f295\";\n}\n","excerpt":"","more":"/*!\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */\n/* FONT PATH\n * -------------------------- */\n@font-face {\n  font-family: 'FontAwesome';\n  src: url('../fonts/fontawesome-webfont.eot?v=4.5.0');\n  src: url('../fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'), url('../fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'), url('../fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'), url('../fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'), url('../fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n.fa {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n/* makes the font 33% larger relative to the icon container */\n.fa-lg {\n  font-size: 1.33333333em;\n  line-height: 0.75em;\n  vertical-align: -15%;\n}\n.fa-2x {\n  font-size: 2em;\n}\n.fa-3x {\n  font-size: 3em;\n}\n.fa-4x {\n  font-size: 4em;\n}\n.fa-5x {\n  font-size: 5em;\n}\n.fa-fw {\n  width: 1.28571429em;\n  text-align: center;\n}\n.fa-ul {\n  padding-left: 0;\n  margin-left: 2.14285714em;\n  list-style-type: none;\n}\n.fa-ul > li {\n  position: relative;\n}\n.fa-li {\n  position: absolute;\n  left: -2.14285714em;\n  width: 2.14285714em;\n  top: 0.14285714em;\n  text-align: center;\n}\n.fa-li.fa-lg {\n  left: -1.85714286em;\n}\n.fa-border {\n  padding: .2em .25em .15em;\n  border: solid 0.08em #eeeeee;\n  border-radius: .1em;\n}\n.fa-pull-left {\n  float: left;\n}\n.fa-pull-right {\n  float: right;\n}\n.fa.fa-pull-left {\n  margin-right: .3em;\n}\n.fa.fa-pull-right {\n  margin-left: .3em;\n}\n/* Deprecated as of 4.4.0 */\n.pull-right {\n  float: right;\n}\n.pull-left {\n  float: left;\n}\n.fa.pull-left {\n  margin-right: .3em;\n}\n.fa.pull-right {\n  margin-left: .3em;\n}\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n  animation: fa-spin 2s infinite linear;\n}\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n  animation: fa-spin 1s infinite steps(8);\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n.fa-rotate-90 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);\n  -webkit-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.fa-rotate-180 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n  -webkit-transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n  transform: rotate(180deg);\n}\n.fa-rotate-270 {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);\n  -webkit-transform: rotate(270deg);\n  -ms-transform: rotate(270deg);\n  transform: rotate(270deg);\n}\n.fa-flip-horizontal {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);\n  -webkit-transform: scale(-1, 1);\n  -ms-transform: scale(-1, 1);\n  transform: scale(-1, 1);\n}\n.fa-flip-vertical {\n  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);\n  -webkit-transform: scale(1, -1);\n  -ms-transform: scale(1, -1);\n  transform: scale(1, -1);\n}\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  filter: none;\n}\n.fa-stack {\n  position: relative;\n  display: inline-block;\n  width: 2em;\n  height: 2em;\n  line-height: 2em;\n  vertical-align: middle;\n}\n.fa-stack-1x,\n.fa-stack-2x {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n.fa-stack-1x {\n  line-height: inherit;\n}\n.fa-stack-2x {\n  font-size: 2em;\n}\n.fa-inverse {\n  color: #ffffff;\n}\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\n   readers do not read off random characters that represent icons */\n.fa-glass:before {\n  content: \"\\f000\";\n}\n.fa-music:before {\n  content: \"\\f001\";\n}\n.fa-search:before {\n  content: \"\\f002\";\n}\n.fa-envelope-o:before {\n  content: \"\\f003\";\n}\n.fa-heart:before {\n  content: \"\\f004\";\n}\n.fa-star:before {\n  content: \"\\f005\";\n}\n.fa-star-o:before {\n  content: \"\\f006\";\n}\n.fa-user:before {\n  content: \"\\f007\";\n}\n.fa-film:before {\n  content: \"\\f008\";\n}\n.fa-th-large:before {\n  content: \"\\f009\";\n}\n.fa-th:before {\n  content: \"\\f00a\";\n}\n.fa-th-list:before {\n  content: \"\\f00b\";\n}\n.fa-check:before {\n  content: \"\\f00c\";\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: \"\\f00d\";\n}\n.fa-search-plus:before {\n  content: \"\\f00e\";\n}\n.fa-search-minus:before {\n  content: \"\\f010\";\n}\n.fa-power-off:before {\n  content: \"\\f011\";\n}\n.fa-signal:before {\n  content: \"\\f012\";\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: \"\\f013\";\n}\n.fa-trash-o:before {\n  content: \"\\f014\";\n}\n.fa-home:before {\n  content: \"\\f015\";\n}\n.fa-file-o:before {\n  content: \"\\f016\";\n}\n.fa-clock-o:before {\n  content: \"\\f017\";\n}\n.fa-road:before {\n  content: \"\\f018\";\n}\n.fa-download:before {\n  content: \"\\f019\";\n}\n.fa-arrow-circle-o-down:before {\n  content: \"\\f01a\";\n}\n.fa-arrow-circle-o-up:before {\n  content: \"\\f01b\";\n}\n.fa-inbox:before {\n  content: \"\\f01c\";\n}\n.fa-play-circle-o:before {\n  content: \"\\f01d\";\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: \"\\f01e\";\n}\n.fa-refresh:before {\n  content: \"\\f021\";\n}\n.fa-list-alt:before {\n  content: \"\\f022\";\n}\n.fa-lock:before {\n  content: \"\\f023\";\n}\n.fa-flag:before {\n  content: \"\\f024\";\n}\n.fa-headphones:before {\n  content: \"\\f025\";\n}\n.fa-volume-off:before {\n  content: \"\\f026\";\n}\n.fa-volume-down:before {\n  content: \"\\f027\";\n}\n.fa-volume-up:before {\n  content: \"\\f028\";\n}\n.fa-qrcode:before {\n  content: \"\\f029\";\n}\n.fa-barcode:before {\n  content: \"\\f02a\";\n}\n.fa-tag:before {\n  content: \"\\f02b\";\n}\n.fa-tags:before {\n  content: \"\\f02c\";\n}\n.fa-book:before {\n  content: \"\\f02d\";\n}\n.fa-bookmark:before {\n  content: \"\\f02e\";\n}\n.fa-print:before {\n  content: \"\\f02f\";\n}\n.fa-camera:before {\n  content: \"\\f030\";\n}\n.fa-font:before {\n  content: \"\\f031\";\n}\n.fa-bold:before {\n  content: \"\\f032\";\n}\n.fa-italic:before {\n  content: \"\\f033\";\n}\n.fa-text-height:before {\n  content: \"\\f034\";\n}\n.fa-text-width:before {\n  content: \"\\f035\";\n}\n.fa-align-left:before {\n  content: \"\\f036\";\n}\n.fa-align-center:before {\n  content: \"\\f037\";\n}\n.fa-align-right:before {\n  content: \"\\f038\";\n}\n.fa-align-justify:before {\n  content: \"\\f039\";\n}\n.fa-list:before {\n  content: \"\\f03a\";\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: \"\\f03b\";\n}\n.fa-indent:before {\n  content: \"\\f03c\";\n}\n.fa-video-camera:before {\n  content: \"\\f03d\";\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: \"\\f03e\";\n}\n.fa-pencil:before {\n  content: \"\\f040\";\n}\n.fa-map-marker:before {\n  content: \"\\f041\";\n}\n.fa-adjust:before {\n  content: \"\\f042\";\n}\n.fa-tint:before {\n  content: \"\\f043\";\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: \"\\f044\";\n}\n.fa-share-square-o:before {\n  content: \"\\f045\";\n}\n.fa-check-square-o:before {\n  content: \"\\f046\";\n}\n.fa-arrows:before {\n  content: \"\\f047\";\n}\n.fa-step-backward:before {\n  content: \"\\f048\";\n}\n.fa-fast-backward:before {\n  content: \"\\f049\";\n}\n.fa-backward:before {\n  content: \"\\f04a\";\n}\n.fa-play:before {\n  content: \"\\f04b\";\n}\n.fa-pause:before {\n  content: \"\\f04c\";\n}\n.fa-stop:before {\n  content: \"\\f04d\";\n}\n.fa-forward:before {\n  content: \"\\f04e\";\n}\n.fa-fast-forward:before {\n  content: \"\\f050\";\n}\n.fa-step-forward:before {\n  content: \"\\f051\";\n}\n.fa-eject:before {\n  content: \"\\f052\";\n}\n.fa-chevron-left:before {\n  content: \"\\f053\";\n}\n.fa-chevron-right:before {\n  content: \"\\f054\";\n}\n.fa-plus-circle:before {\n  content: \"\\f055\";\n}\n.fa-minus-circle:before {\n  content: \"\\f056\";\n}\n.fa-times-circle:before {\n  content: \"\\f057\";\n}\n.fa-check-circle:before {\n  content: \"\\f058\";\n}\n.fa-question-circle:before {\n  content: \"\\f059\";\n}\n.fa-info-circle:before {\n  content: \"\\f05a\";\n}\n.fa-crosshairs:before {\n  content: \"\\f05b\";\n}\n.fa-times-circle-o:before {\n  content: \"\\f05c\";\n}\n.fa-check-circle-o:before {\n  content: \"\\f05d\";\n}\n.fa-ban:before {\n  content: \"\\f05e\";\n}\n.fa-arrow-left:before {\n  content: \"\\f060\";\n}\n.fa-arrow-right:before {\n  content: \"\\f061\";\n}\n.fa-arrow-up:before {\n  content: \"\\f062\";\n}\n.fa-arrow-down:before {\n  content: \"\\f063\";\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: \"\\f064\";\n}\n.fa-expand:before {\n  content: \"\\f065\";\n}\n.fa-compress:before {\n  content: \"\\f066\";\n}\n.fa-plus:before {\n  content: \"\\f067\";\n}\n.fa-minus:before {\n  content: \"\\f068\";\n}\n.fa-asterisk:before {\n  content: \"\\f069\";\n}\n.fa-exclamation-circle:before {\n  content: \"\\f06a\";\n}\n.fa-gift:before {\n  content: \"\\f06b\";\n}\n.fa-leaf:before {\n  content: \"\\f06c\";\n}\n.fa-fire:before {\n  content: \"\\f06d\";\n}\n.fa-eye:before {\n  content: \"\\f06e\";\n}\n.fa-eye-slash:before {\n  content: \"\\f070\";\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: \"\\f071\";\n}\n.fa-plane:before {\n  content: \"\\f072\";\n}\n.fa-calendar:before {\n  content: \"\\f073\";\n}\n.fa-random:before {\n  content: \"\\f074\";\n}\n.fa-comment:before {\n  content: \"\\f075\";\n}\n.fa-magnet:before {\n  content: \"\\f076\";\n}\n.fa-chevron-up:before {\n  content: \"\\f077\";\n}\n.fa-chevron-down:before {\n  content: \"\\f078\";\n}\n.fa-retweet:before {\n  content: \"\\f079\";\n}\n.fa-shopping-cart:before {\n  content: \"\\f07a\";\n}\n.fa-folder:before {\n  content: \"\\f07b\";\n}\n.fa-folder-open:before {\n  content: \"\\f07c\";\n}\n.fa-arrows-v:before {\n  content: \"\\f07d\";\n}\n.fa-arrows-h:before {\n  content: \"\\f07e\";\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: \"\\f080\";\n}\n.fa-twitter-square:before {\n  content: \"\\f081\";\n}\n.fa-facebook-square:before {\n  content: \"\\f082\";\n}\n.fa-camera-retro:before {\n  content: \"\\f083\";\n}\n.fa-key:before {\n  content: \"\\f084\";\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: \"\\f085\";\n}\n.fa-comments:before {\n  content: \"\\f086\";\n}\n.fa-thumbs-o-up:before {\n  content: \"\\f087\";\n}\n.fa-thumbs-o-down:before {\n  content: \"\\f088\";\n}\n.fa-star-half:before {\n  content: \"\\f089\";\n}\n.fa-heart-o:before {\n  content: \"\\f08a\";\n}\n.fa-sign-out:before {\n  content: \"\\f08b\";\n}\n.fa-linkedin-square:before {\n  content: \"\\f08c\";\n}\n.fa-thumb-tack:before {\n  content: \"\\f08d\";\n}\n.fa-external-link:before {\n  content: \"\\f08e\";\n}\n.fa-sign-in:before {\n  content: \"\\f090\";\n}\n.fa-trophy:before {\n  content: \"\\f091\";\n}\n.fa-github-square:before {\n  content: \"\\f092\";\n}\n.fa-upload:before {\n  content: \"\\f093\";\n}\n.fa-lemon-o:before {\n  content: \"\\f094\";\n}\n.fa-phone:before {\n  content: \"\\f095\";\n}\n.fa-square-o:before {\n  content: \"\\f096\";\n}\n.fa-bookmark-o:before {\n  content: \"\\f097\";\n}\n.fa-phone-square:before {\n  content: \"\\f098\";\n}\n.fa-twitter:before {\n  content: \"\\f099\";\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: \"\\f09a\";\n}\n.fa-github:before {\n  content: \"\\f09b\";\n}\n.fa-unlock:before {\n  content: \"\\f09c\";\n}\n.fa-credit-card:before {\n  content: \"\\f09d\";\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: \"\\f09e\";\n}\n.fa-hdd-o:before {\n  content: \"\\f0a0\";\n}\n.fa-bullhorn:before {\n  content: \"\\f0a1\";\n}\n.fa-bell:before {\n  content: \"\\f0f3\";\n}\n.fa-certificate:before {\n  content: \"\\f0a3\";\n}\n.fa-hand-o-right:before {\n  content: \"\\f0a4\";\n}\n.fa-hand-o-left:before {\n  content: \"\\f0a5\";\n}\n.fa-hand-o-up:before {\n  content: \"\\f0a6\";\n}\n.fa-hand-o-down:before {\n  content: \"\\f0a7\";\n}\n.fa-arrow-circle-left:before {\n  content: \"\\f0a8\";\n}\n.fa-arrow-circle-right:before {\n  content: \"\\f0a9\";\n}\n.fa-arrow-circle-up:before {\n  content: \"\\f0aa\";\n}\n.fa-arrow-circle-down:before {\n  content: \"\\f0ab\";\n}\n.fa-globe:before {\n  content: \"\\f0ac\";\n}\n.fa-wrench:before {\n  content: \"\\f0ad\";\n}\n.fa-tasks:before {\n  content: \"\\f0ae\";\n}\n.fa-filter:before {\n  content: \"\\f0b0\";\n}\n.fa-briefcase:before {\n  content: \"\\f0b1\";\n}\n.fa-arrows-alt:before {\n  content: \"\\f0b2\";\n}\n.fa-group:before,\n.fa-users:before {\n  content: \"\\f0c0\";\n}\n.fa-chain:before,\n.fa-link:before {\n  content: \"\\f0c1\";\n}\n.fa-cloud:before {\n  content: \"\\f0c2\";\n}\n.fa-flask:before {\n  content: \"\\f0c3\";\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: \"\\f0c4\";\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: \"\\f0c5\";\n}\n.fa-paperclip:before {\n  content: \"\\f0c6\";\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: \"\\f0c7\";\n}\n.fa-square:before {\n  content: \"\\f0c8\";\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: \"\\f0c9\";\n}\n.fa-list-ul:before {\n  content: \"\\f0ca\";\n}\n.fa-list-ol:before {\n  content: \"\\f0cb\";\n}\n.fa-strikethrough:before {\n  content: \"\\f0cc\";\n}\n.fa-underline:before {\n  content: \"\\f0cd\";\n}\n.fa-table:before {\n  content: \"\\f0ce\";\n}\n.fa-magic:before {\n  content: \"\\f0d0\";\n}\n.fa-truck:before {\n  content: \"\\f0d1\";\n}\n.fa-pinterest:before {\n  content: \"\\f0d2\";\n}\n.fa-pinterest-square:before {\n  content: \"\\f0d3\";\n}\n.fa-google-plus-square:before {\n  content: \"\\f0d4\";\n}\n.fa-google-plus:before {\n  content: \"\\f0d5\";\n}\n.fa-money:before {\n  content: \"\\f0d6\";\n}\n.fa-caret-down:before {\n  content: \"\\f0d7\";\n}\n.fa-caret-up:before {\n  content: \"\\f0d8\";\n}\n.fa-caret-left:before {\n  content: \"\\f0d9\";\n}\n.fa-caret-right:before {\n  content: \"\\f0da\";\n}\n.fa-columns:before {\n  content: \"\\f0db\";\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: \"\\f0dc\";\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: \"\\f0dd\";\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: \"\\f0de\";\n}\n.fa-envelope:before {\n  content: \"\\f0e0\";\n}\n.fa-linkedin:before {\n  content: \"\\f0e1\";\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: \"\\f0e2\";\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: \"\\f0e3\";\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: \"\\f0e4\";\n}\n.fa-comment-o:before {\n  content: \"\\f0e5\";\n}\n.fa-comments-o:before {\n  content: \"\\f0e6\";\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: \"\\f0e7\";\n}\n.fa-sitemap:before {\n  content: \"\\f0e8\";\n}\n.fa-umbrella:before {\n  content: \"\\f0e9\";\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: \"\\f0ea\";\n}\n.fa-lightbulb-o:before {\n  content: \"\\f0eb\";\n}\n.fa-exchange:before {\n  content: \"\\f0ec\";\n}\n.fa-cloud-download:before {\n  content: \"\\f0ed\";\n}\n.fa-cloud-upload:before {\n  content: \"\\f0ee\";\n}\n.fa-user-md:before {\n  content: \"\\f0f0\";\n}\n.fa-stethoscope:before {\n  content: \"\\f0f1\";\n}\n.fa-suitcase:before {\n  content: \"\\f0f2\";\n}\n.fa-bell-o:before {\n  content: \"\\f0a2\";\n}\n.fa-coffee:before {\n  content: \"\\f0f4\";\n}\n.fa-cutlery:before {\n  content: \"\\f0f5\";\n}\n.fa-file-text-o:before {\n  content: \"\\f0f6\";\n}\n.fa-building-o:before {\n  content: \"\\f0f7\";\n}\n.fa-hospital-o:before {\n  content: \"\\f0f8\";\n}\n.fa-ambulance:before {\n  content: \"\\f0f9\";\n}\n.fa-medkit:before {\n  content: \"\\f0fa\";\n}\n.fa-fighter-jet:before {\n  content: \"\\f0fb\";\n}\n.fa-beer:before {\n  content: \"\\f0fc\";\n}\n.fa-h-square:before {\n  content: \"\\f0fd\";\n}\n.fa-plus-square:before {\n  content: \"\\f0fe\";\n}\n.fa-angle-double-left:before {\n  content: \"\\f100\";\n}\n.fa-angle-double-right:before {\n  content: \"\\f101\";\n}\n.fa-angle-double-up:before {\n  content: \"\\f102\";\n}\n.fa-angle-double-down:before {\n  content: \"\\f103\";\n}\n.fa-angle-left:before {\n  content: \"\\f104\";\n}\n.fa-angle-right:before {\n  content: \"\\f105\";\n}\n.fa-angle-up:before {\n  content: \"\\f106\";\n}\n.fa-angle-down:before {\n  content: \"\\f107\";\n}\n.fa-desktop:before {\n  content: \"\\f108\";\n}\n.fa-laptop:before {\n  content: \"\\f109\";\n}\n.fa-tablet:before {\n  content: \"\\f10a\";\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: \"\\f10b\";\n}\n.fa-circle-o:before {\n  content: \"\\f10c\";\n}\n.fa-quote-left:before {\n  content: \"\\f10d\";\n}\n.fa-quote-right:before {\n  content: \"\\f10e\";\n}\n.fa-spinner:before {\n  content: \"\\f110\";\n}\n.fa-circle:before {\n  content: \"\\f111\";\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: \"\\f112\";\n}\n.fa-github-alt:before {\n  content: \"\\f113\";\n}\n.fa-folder-o:before {\n  content: \"\\f114\";\n}\n.fa-folder-open-o:before {\n  content: \"\\f115\";\n}\n.fa-smile-o:before {\n  content: \"\\f118\";\n}\n.fa-frown-o:before {\n  content: \"\\f119\";\n}\n.fa-meh-o:before {\n  content: \"\\f11a\";\n}\n.fa-gamepad:before {\n  content: \"\\f11b\";\n}\n.fa-keyboard-o:before {\n  content: \"\\f11c\";\n}\n.fa-flag-o:before {\n  content: \"\\f11d\";\n}\n.fa-flag-checkered:before {\n  content: \"\\f11e\";\n}\n.fa-terminal:before {\n  content: \"\\f120\";\n}\n.fa-code:before {\n  content: \"\\f121\";\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: \"\\f122\";\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: \"\\f123\";\n}\n.fa-location-arrow:before {\n  content: \"\\f124\";\n}\n.fa-crop:before {\n  content: \"\\f125\";\n}\n.fa-code-fork:before {\n  content: \"\\f126\";\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: \"\\f127\";\n}\n.fa-question:before {\n  content: \"\\f128\";\n}\n.fa-info:before {\n  content: \"\\f129\";\n}\n.fa-exclamation:before {\n  content: \"\\f12a\";\n}\n.fa-superscript:before {\n  content: \"\\f12b\";\n}\n.fa-subscript:before {\n  content: \"\\f12c\";\n}\n.fa-eraser:before {\n  content: \"\\f12d\";\n}\n.fa-puzzle-piece:before {\n  content: \"\\f12e\";\n}\n.fa-microphone:before {\n  content: \"\\f130\";\n}\n.fa-microphone-slash:before {\n  content: \"\\f131\";\n}\n.fa-shield:before {\n  content: \"\\f132\";\n}\n.fa-calendar-o:before {\n  content: \"\\f133\";\n}\n.fa-fire-extinguisher:before {\n  content: \"\\f134\";\n}\n.fa-rocket:before {\n  content: \"\\f135\";\n}\n.fa-maxcdn:before {\n  content: \"\\f136\";\n}\n.fa-chevron-circle-left:before {\n  content: \"\\f137\";\n}\n.fa-chevron-circle-right:before {\n  content: \"\\f138\";\n}\n.fa-chevron-circle-up:before {\n  content: \"\\f139\";\n}\n.fa-chevron-circle-down:before {\n  content: \"\\f13a\";\n}\n.fa-html5:before {\n  content: \"\\f13b\";\n}\n.fa-css3:before {\n  content: \"\\f13c\";\n}\n.fa-anchor:before {\n  content: \"\\f13d\";\n}\n.fa-unlock-alt:before {\n  content: \"\\f13e\";\n}\n.fa-bullseye:before {\n  content: \"\\f140\";\n}\n.fa-ellipsis-h:before {\n  content: \"\\f141\";\n}\n.fa-ellipsis-v:before {\n  content: \"\\f142\";\n}\n.fa-rss-square:before {\n  content: \"\\f143\";\n}\n.fa-play-circle:before {\n  content: \"\\f144\";\n}\n.fa-ticket:before {\n  content: \"\\f145\";\n}\n.fa-minus-square:before {\n  content: \"\\f146\";\n}\n.fa-minus-square-o:before {\n  content: \"\\f147\";\n}\n.fa-level-up:before {\n  content: \"\\f148\";\n}\n.fa-level-down:before {\n  content: \"\\f149\";\n}\n.fa-check-square:before {\n  content: \"\\f14a\";\n}\n.fa-pencil-square:before {\n  content: \"\\f14b\";\n}\n.fa-external-link-square:before {\n  content: \"\\f14c\";\n}\n.fa-share-square:before {\n  content: \"\\f14d\";\n}\n.fa-compass:before {\n  content: \"\\f14e\";\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: \"\\f150\";\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: \"\\f151\";\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: \"\\f152\";\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: \"\\f153\";\n}\n.fa-gbp:before {\n  content: \"\\f154\";\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: \"\\f155\";\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: \"\\f156\";\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: \"\\f157\";\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: \"\\f158\";\n}\n.fa-won:before,\n.fa-krw:before {\n  content: \"\\f159\";\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: \"\\f15a\";\n}\n.fa-file:before {\n  content: \"\\f15b\";\n}\n.fa-file-text:before {\n  content: \"\\f15c\";\n}\n.fa-sort-alpha-asc:before {\n  content: \"\\f15d\";\n}\n.fa-sort-alpha-desc:before {\n  content: \"\\f15e\";\n}\n.fa-sort-amount-asc:before {\n  content: \"\\f160\";\n}\n.fa-sort-amount-desc:before {\n  content: \"\\f161\";\n}\n.fa-sort-numeric-asc:before {\n  content: \"\\f162\";\n}\n.fa-sort-numeric-desc:before {\n  content: \"\\f163\";\n}\n.fa-thumbs-up:before {\n  content: \"\\f164\";\n}\n.fa-thumbs-down:before {\n  content: \"\\f165\";\n}\n.fa-youtube-square:before {\n  content: \"\\f166\";\n}\n.fa-youtube:before {\n  content: \"\\f167\";\n}\n.fa-xing:before {\n  content: \"\\f168\";\n}\n.fa-xing-square:before {\n  content: \"\\f169\";\n}\n.fa-youtube-play:before {\n  content: \"\\f16a\";\n}\n.fa-dropbox:before {\n  content: \"\\f16b\";\n}\n.fa-stack-overflow:before {\n  content: \"\\f16c\";\n}\n.fa-instagram:before {\n  content: \"\\f16d\";\n}\n.fa-flickr:before {\n  content: \"\\f16e\";\n}\n.fa-adn:before {\n  content: \"\\f170\";\n}\n.fa-bitbucket:before {\n  content: \"\\f171\";\n}\n.fa-bitbucket-square:before {\n  content: \"\\f172\";\n}\n.fa-tumblr:before {\n  content: \"\\f173\";\n}\n.fa-tumblr-square:before {\n  content: \"\\f174\";\n}\n.fa-long-arrow-down:before {\n  content: \"\\f175\";\n}\n.fa-long-arrow-up:before {\n  content: \"\\f176\";\n}\n.fa-long-arrow-left:before {\n  content: \"\\f177\";\n}\n.fa-long-arrow-right:before {\n  content: \"\\f178\";\n}\n.fa-apple:before {\n  content: \"\\f179\";\n}\n.fa-windows:before {\n  content: \"\\f17a\";\n}\n.fa-android:before {\n  content: \"\\f17b\";\n}\n.fa-linux:before {\n  content: \"\\f17c\";\n}\n.fa-dribbble:before {\n  content: \"\\f17d\";\n}\n.fa-skype:before {\n  content: \"\\f17e\";\n}\n.fa-foursquare:before {\n  content: \"\\f180\";\n}\n.fa-trello:before {\n  content: \"\\f181\";\n}\n.fa-female:before {\n  content: \"\\f182\";\n}\n.fa-male:before {\n  content: \"\\f183\";\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: \"\\f184\";\n}\n.fa-sun-o:before {\n  content: \"\\f185\";\n}\n.fa-moon-o:before {\n  content: \"\\f186\";\n}\n.fa-archive:before {\n  content: \"\\f187\";\n}\n.fa-bug:before {\n  content: \"\\f188\";\n}\n.fa-vk:before {\n  content: \"\\f189\";\n}\n.fa-weibo:before {\n  content: \"\\f18a\";\n}\n.fa-renren:before {\n  content: \"\\f18b\";\n}\n.fa-pagelines:before {\n  content: \"\\f18c\";\n}\n.fa-stack-exchange:before {\n  content: \"\\f18d\";\n}\n.fa-arrow-circle-o-right:before {\n  content: \"\\f18e\";\n}\n.fa-arrow-circle-o-left:before {\n  content: \"\\f190\";\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: \"\\f191\";\n}\n.fa-dot-circle-o:before {\n  content: \"\\f192\";\n}\n.fa-wheelchair:before {\n  content: \"\\f193\";\n}\n.fa-vimeo-square:before {\n  content: \"\\f194\";\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: \"\\f195\";\n}\n.fa-plus-square-o:before {\n  content: \"\\f196\";\n}\n.fa-space-shuttle:before {\n  content: \"\\f197\";\n}\n.fa-slack:before {\n  content: \"\\f198\";\n}\n.fa-envelope-square:before {\n  content: \"\\f199\";\n}\n.fa-wordpress:before {\n  content: \"\\f19a\";\n}\n.fa-openid:before {\n  content: \"\\f19b\";\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: \"\\f19c\";\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: \"\\f19d\";\n}\n.fa-yahoo:before {\n  content: \"\\f19e\";\n}\n.fa-google:before {\n  content: \"\\f1a0\";\n}\n.fa-reddit:before {\n  content: \"\\f1a1\";\n}\n.fa-reddit-square:before {\n  content: \"\\f1a2\";\n}\n.fa-stumbleupon-circle:before {\n  content: \"\\f1a3\";\n}\n.fa-stumbleupon:before {\n  content: \"\\f1a4\";\n}\n.fa-delicious:before {\n  content: \"\\f1a5\";\n}\n.fa-digg:before {\n  content: \"\\f1a6\";\n}\n.fa-pied-piper:before {\n  content: \"\\f1a7\";\n}\n.fa-pied-piper-alt:before {\n  content: \"\\f1a8\";\n}\n.fa-drupal:before {\n  content: \"\\f1a9\";\n}\n.fa-joomla:before {\n  content: \"\\f1aa\";\n}\n.fa-language:before {\n  content: \"\\f1ab\";\n}\n.fa-fax:before {\n  content: \"\\f1ac\";\n}\n.fa-building:before {\n  content: \"\\f1ad\";\n}\n.fa-child:before {\n  content: \"\\f1ae\";\n}\n.fa-paw:before {\n  content: \"\\f1b0\";\n}\n.fa-spoon:before {\n  content: \"\\f1b1\";\n}\n.fa-cube:before {\n  content: \"\\f1b2\";\n}\n.fa-cubes:before {\n  content: \"\\f1b3\";\n}\n.fa-behance:before {\n  content: \"\\f1b4\";\n}\n.fa-behance-square:before {\n  content: \"\\f1b5\";\n}\n.fa-steam:before {\n  content: \"\\f1b6\";\n}\n.fa-steam-square:before {\n  content: \"\\f1b7\";\n}\n.fa-recycle:before {\n  content: \"\\f1b8\";\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: \"\\f1b9\";\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: \"\\f1ba\";\n}\n.fa-tree:before {\n  content: \"\\f1bb\";\n}\n.fa-spotify:before {\n  content: \"\\f1bc\";\n}\n.fa-deviantart:before {\n  content: \"\\f1bd\";\n}\n.fa-soundcloud:before {\n  content: \"\\f1be\";\n}\n.fa-database:before {\n  content: \"\\f1c0\";\n}\n.fa-file-pdf-o:before {\n  content: \"\\f1c1\";\n}\n.fa-file-word-o:before {\n  content: \"\\f1c2\";\n}\n.fa-file-excel-o:before {\n  content: \"\\f1c3\";\n}\n.fa-file-powerpoint-o:before {\n  content: \"\\f1c4\";\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: \"\\f1c5\";\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: \"\\f1c6\";\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: \"\\f1c7\";\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: \"\\f1c8\";\n}\n.fa-file-code-o:before {\n  content: \"\\f1c9\";\n}\n.fa-vine:before {\n  content: \"\\f1ca\";\n}\n.fa-codepen:before {\n  content: \"\\f1cb\";\n}\n.fa-jsfiddle:before {\n  content: \"\\f1cc\";\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: \"\\f1cd\";\n}\n.fa-circle-o-notch:before {\n  content: \"\\f1ce\";\n}\n.fa-ra:before,\n.fa-rebel:before {\n  content: \"\\f1d0\";\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: \"\\f1d1\";\n}\n.fa-git-square:before {\n  content: \"\\f1d2\";\n}\n.fa-git:before {\n  content: \"\\f1d3\";\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: \"\\f1d4\";\n}\n.fa-tencent-weibo:before {\n  content: \"\\f1d5\";\n}\n.fa-qq:before {\n  content: \"\\f1d6\";\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: \"\\f1d7\";\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: \"\\f1d8\";\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: \"\\f1d9\";\n}\n.fa-history:before {\n  content: \"\\f1da\";\n}\n.fa-circle-thin:before {\n  content: \"\\f1db\";\n}\n.fa-header:before {\n  content: \"\\f1dc\";\n}\n.fa-paragraph:before {\n  content: \"\\f1dd\";\n}\n.fa-sliders:before {\n  content: \"\\f1de\";\n}\n.fa-share-alt:before {\n  content: \"\\f1e0\";\n}\n.fa-share-alt-square:before {\n  content: \"\\f1e1\";\n}\n.fa-bomb:before {\n  content: \"\\f1e2\";\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: \"\\f1e3\";\n}\n.fa-tty:before {\n  content: \"\\f1e4\";\n}\n.fa-binoculars:before {\n  content: \"\\f1e5\";\n}\n.fa-plug:before {\n  content: \"\\f1e6\";\n}\n.fa-slideshare:before {\n  content: \"\\f1e7\";\n}\n.fa-twitch:before {\n  content: \"\\f1e8\";\n}\n.fa-yelp:before {\n  content: \"\\f1e9\";\n}\n.fa-newspaper-o:before {\n  content: \"\\f1ea\";\n}\n.fa-wifi:before {\n  content: \"\\f1eb\";\n}\n.fa-calculator:before {\n  content: \"\\f1ec\";\n}\n.fa-paypal:before {\n  content: \"\\f1ed\";\n}\n.fa-google-wallet:before {\n  content: \"\\f1ee\";\n}\n.fa-cc-visa:before {\n  content: \"\\f1f0\";\n}\n.fa-cc-mastercard:before {\n  content: \"\\f1f1\";\n}\n.fa-cc-discover:before {\n  content: \"\\f1f2\";\n}\n.fa-cc-amex:before {\n  content: \"\\f1f3\";\n}\n.fa-cc-paypal:before {\n  content: \"\\f1f4\";\n}\n.fa-cc-stripe:before {\n  content: \"\\f1f5\";\n}\n.fa-bell-slash:before {\n  content: \"\\f1f6\";\n}\n.fa-bell-slash-o:before {\n  content: \"\\f1f7\";\n}\n.fa-trash:before {\n  content: \"\\f1f8\";\n}\n.fa-copyright:before {\n  content: \"\\f1f9\";\n}\n.fa-at:before {\n  content: \"\\f1fa\";\n}\n.fa-eyedropper:before {\n  content: \"\\f1fb\";\n}\n.fa-paint-brush:before {\n  content: \"\\f1fc\";\n}\n.fa-birthday-cake:before {\n  content: \"\\f1fd\";\n}\n.fa-area-chart:before {\n  content: \"\\f1fe\";\n}\n.fa-pie-chart:before {\n  content: \"\\f200\";\n}\n.fa-line-chart:before {\n  content: \"\\f201\";\n}\n.fa-lastfm:before {\n  content: \"\\f202\";\n}\n.fa-lastfm-square:before {\n  content: \"\\f203\";\n}\n.fa-toggle-off:before {\n  content: \"\\f204\";\n}\n.fa-toggle-on:before {\n  content: \"\\f205\";\n}\n.fa-bicycle:before {\n  content: \"\\f206\";\n}\n.fa-bus:before {\n  content: \"\\f207\";\n}\n.fa-ioxhost:before {\n  content: \"\\f208\";\n}\n.fa-angellist:before {\n  content: \"\\f209\";\n}\n.fa-cc:before {\n  content: \"\\f20a\";\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: \"\\f20b\";\n}\n.fa-meanpath:before {\n  content: \"\\f20c\";\n}\n.fa-buysellads:before {\n  content: \"\\f20d\";\n}\n.fa-connectdevelop:before {\n  content: \"\\f20e\";\n}\n.fa-dashcube:before {\n  content: \"\\f210\";\n}\n.fa-forumbee:before {\n  content: \"\\f211\";\n}\n.fa-leanpub:before {\n  content: \"\\f212\";\n}\n.fa-sellsy:before {\n  content: \"\\f213\";\n}\n.fa-shirtsinbulk:before {\n  content: \"\\f214\";\n}\n.fa-simplybuilt:before {\n  content: \"\\f215\";\n}\n.fa-skyatlas:before {\n  content: \"\\f216\";\n}\n.fa-cart-plus:before {\n  content: \"\\f217\";\n}\n.fa-cart-arrow-down:before {\n  content: \"\\f218\";\n}\n.fa-diamond:before {\n  content: \"\\f219\";\n}\n.fa-ship:before {\n  content: \"\\f21a\";\n}\n.fa-user-secret:before {\n  content: \"\\f21b\";\n}\n.fa-motorcycle:before {\n  content: \"\\f21c\";\n}\n.fa-street-view:before {\n  content: \"\\f21d\";\n}\n.fa-heartbeat:before {\n  content: \"\\f21e\";\n}\n.fa-venus:before {\n  content: \"\\f221\";\n}\n.fa-mars:before {\n  content: \"\\f222\";\n}\n.fa-mercury:before {\n  content: \"\\f223\";\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: \"\\f224\";\n}\n.fa-transgender-alt:before {\n  content: \"\\f225\";\n}\n.fa-venus-double:before {\n  content: \"\\f226\";\n}\n.fa-mars-double:before {\n  content: \"\\f227\";\n}\n.fa-venus-mars:before {\n  content: \"\\f228\";\n}\n.fa-mars-stroke:before {\n  content: \"\\f229\";\n}\n.fa-mars-stroke-v:before {\n  content: \"\\f22a\";\n}\n.fa-mars-stroke-h:before {\n  content: \"\\f22b\";\n}\n.fa-neuter:before {\n  content: \"\\f22c\";\n}\n.fa-genderless:before {\n  content: \"\\f22d\";\n}\n.fa-facebook-official:before {\n  content: \"\\f230\";\n}\n.fa-pinterest-p:before {\n  content: \"\\f231\";\n}\n.fa-whatsapp:before {\n  content: \"\\f232\";\n}\n.fa-server:before {\n  content: \"\\f233\";\n}\n.fa-user-plus:before {\n  content: \"\\f234\";\n}\n.fa-user-times:before {\n  content: \"\\f235\";\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: \"\\f236\";\n}\n.fa-viacoin:before {\n  content: \"\\f237\";\n}\n.fa-train:before {\n  content: \"\\f238\";\n}\n.fa-subway:before {\n  content: \"\\f239\";\n}\n.fa-medium:before {\n  content: \"\\f23a\";\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: \"\\f23b\";\n}\n.fa-optin-monster:before {\n  content: \"\\f23c\";\n}\n.fa-opencart:before {\n  content: \"\\f23d\";\n}\n.fa-expeditedssl:before {\n  content: \"\\f23e\";\n}\n.fa-battery-4:before,\n.fa-battery-full:before {\n  content: \"\\f240\";\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: \"\\f241\";\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: \"\\f242\";\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: \"\\f243\";\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: \"\\f244\";\n}\n.fa-mouse-pointer:before {\n  content: \"\\f245\";\n}\n.fa-i-cursor:before {\n  content: \"\\f246\";\n}\n.fa-object-group:before {\n  content: \"\\f247\";\n}\n.fa-object-ungroup:before {\n  content: \"\\f248\";\n}\n.fa-sticky-note:before {\n  content: \"\\f249\";\n}\n.fa-sticky-note-o:before {\n  content: \"\\f24a\";\n}\n.fa-cc-jcb:before {\n  content: \"\\f24b\";\n}\n.fa-cc-diners-club:before {\n  content: \"\\f24c\";\n}\n.fa-clone:before {\n  content: \"\\f24d\";\n}\n.fa-balance-scale:before {\n  content: \"\\f24e\";\n}\n.fa-hourglass-o:before {\n  content: \"\\f250\";\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: \"\\f251\";\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: \"\\f252\";\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: \"\\f253\";\n}\n.fa-hourglass:before {\n  content: \"\\f254\";\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: \"\\f255\";\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: \"\\f256\";\n}\n.fa-hand-scissors-o:before {\n  content: \"\\f257\";\n}\n.fa-hand-lizard-o:before {\n  content: \"\\f258\";\n}\n.fa-hand-spock-o:before {\n  content: \"\\f259\";\n}\n.fa-hand-pointer-o:before {\n  content: \"\\f25a\";\n}\n.fa-hand-peace-o:before {\n  content: \"\\f25b\";\n}\n.fa-trademark:before {\n  content: \"\\f25c\";\n}\n.fa-registered:before {\n  content: \"\\f25d\";\n}\n.fa-creative-commons:before {\n  content: \"\\f25e\";\n}\n.fa-gg:before {\n  content: \"\\f260\";\n}\n.fa-gg-circle:before {\n  content: \"\\f261\";\n}\n.fa-tripadvisor:before {\n  content: \"\\f262\";\n}\n.fa-odnoklassniki:before {\n  content: \"\\f263\";\n}\n.fa-odnoklassniki-square:before {\n  content: \"\\f264\";\n}\n.fa-get-pocket:before {\n  content: \"\\f265\";\n}\n.fa-wikipedia-w:before {\n  content: \"\\f266\";\n}\n.fa-safari:before {\n  content: \"\\f267\";\n}\n.fa-chrome:before {\n  content: \"\\f268\";\n}\n.fa-firefox:before {\n  content: \"\\f269\";\n}\n.fa-opera:before {\n  content: \"\\f26a\";\n}\n.fa-internet-explorer:before {\n  content: \"\\f26b\";\n}\n.fa-tv:before,\n.fa-television:before {\n  content: \"\\f26c\";\n}\n.fa-contao:before {\n  content: \"\\f26d\";\n}\n.fa-500px:before {\n  content: \"\\f26e\";\n}\n.fa-amazon:before {\n  content: \"\\f270\";\n}\n.fa-calendar-plus-o:before {\n  content: \"\\f271\";\n}\n.fa-calendar-minus-o:before {\n  content: \"\\f272\";\n}\n.fa-calendar-times-o:before {\n  content: \"\\f273\";\n}\n.fa-calendar-check-o:before {\n  content: \"\\f274\";\n}\n.fa-industry:before {\n  content: \"\\f275\";\n}\n.fa-map-pin:before {\n  content: \"\\f276\";\n}\n.fa-map-signs:before {\n  content: \"\\f277\";\n}\n.fa-map-o:before {\n  content: \"\\f278\";\n}\n.fa-map:before {\n  content: \"\\f279\";\n}\n.fa-commenting:before {\n  content: \"\\f27a\";\n}\n.fa-commenting-o:before {\n  content: \"\\f27b\";\n}\n.fa-houzz:before {\n  content: \"\\f27c\";\n}\n.fa-vimeo:before {\n  content: \"\\f27d\";\n}\n.fa-black-tie:before {\n  content: \"\\f27e\";\n}\n.fa-fonticons:before {\n  content: \"\\f280\";\n}\n.fa-reddit-alien:before {\n  content: \"\\f281\";\n}\n.fa-edge:before {\n  content: \"\\f282\";\n}\n.fa-credit-card-alt:before {\n  content: \"\\f283\";\n}\n.fa-codiepie:before {\n  content: \"\\f284\";\n}\n.fa-modx:before {\n  content: \"\\f285\";\n}\n.fa-fort-awesome:before {\n  content: \"\\f286\";\n}\n.fa-usb:before {\n  content: \"\\f287\";\n}\n.fa-product-hunt:before {\n  content: \"\\f288\";\n}\n.fa-mixcloud:before {\n  content: \"\\f289\";\n}\n.fa-scribd:before {\n  content: \"\\f28a\";\n}\n.fa-pause-circle:before {\n  content: \"\\f28b\";\n}\n.fa-pause-circle-o:before {\n  content: \"\\f28c\";\n}\n.fa-stop-circle:before {\n  content: \"\\f28d\";\n}\n.fa-stop-circle-o:before {\n  content: \"\\f28e\";\n}\n.fa-shopping-bag:before {\n  content: \"\\f290\";\n}\n.fa-shopping-basket:before {\n  content: \"\\f291\";\n}\n.fa-hashtag:before {\n  content: \"\\f292\";\n}\n.fa-bluetooth:before {\n  content: \"\\f293\";\n}\n.fa-bluetooth-b:before {\n  content: \"\\f294\";\n}\n.fa-percent:before {\n  content: \"\\f295\";\n}\n"},{"_content":"/*!\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:'FontAwesome';src:url('../fonts/fontawesome-webfont.eot?v=4.5.0');src:url('../fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'),url('../fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'),url('../fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'),url('../fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'),url('../fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');font-weight:normal;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1, 1);-ms-transform:scale(-1, 1);transform:scale(-1, 1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1, -1);-ms-transform:scale(1, -1);transform:scale(1, -1)}:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-flip-horizontal,:root .fa-flip-vertical{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:\"\\f000\"}.fa-music:before{content:\"\\f001\"}.fa-search:before{content:\"\\f002\"}.fa-envelope-o:before{content:\"\\f003\"}.fa-heart:before{content:\"\\f004\"}.fa-star:before{content:\"\\f005\"}.fa-star-o:before{content:\"\\f006\"}.fa-user:before{content:\"\\f007\"}.fa-film:before{content:\"\\f008\"}.fa-th-large:before{content:\"\\f009\"}.fa-th:before{content:\"\\f00a\"}.fa-th-list:before{content:\"\\f00b\"}.fa-check:before{content:\"\\f00c\"}.fa-remove:before,.fa-close:before,.fa-times:before{content:\"\\f00d\"}.fa-search-plus:before{content:\"\\f00e\"}.fa-search-minus:before{content:\"\\f010\"}.fa-power-off:before{content:\"\\f011\"}.fa-signal:before{content:\"\\f012\"}.fa-gear:before,.fa-cog:before{content:\"\\f013\"}.fa-trash-o:before{content:\"\\f014\"}.fa-home:before{content:\"\\f015\"}.fa-file-o:before{content:\"\\f016\"}.fa-clock-o:before{content:\"\\f017\"}.fa-road:before{content:\"\\f018\"}.fa-download:before{content:\"\\f019\"}.fa-arrow-circle-o-down:before{content:\"\\f01a\"}.fa-arrow-circle-o-up:before{content:\"\\f01b\"}.fa-inbox:before{content:\"\\f01c\"}.fa-play-circle-o:before{content:\"\\f01d\"}.fa-rotate-right:before,.fa-repeat:before{content:\"\\f01e\"}.fa-refresh:before{content:\"\\f021\"}.fa-list-alt:before{content:\"\\f022\"}.fa-lock:before{content:\"\\f023\"}.fa-flag:before{content:\"\\f024\"}.fa-headphones:before{content:\"\\f025\"}.fa-volume-off:before{content:\"\\f026\"}.fa-volume-down:before{content:\"\\f027\"}.fa-volume-up:before{content:\"\\f028\"}.fa-qrcode:before{content:\"\\f029\"}.fa-barcode:before{content:\"\\f02a\"}.fa-tag:before{content:\"\\f02b\"}.fa-tags:before{content:\"\\f02c\"}.fa-book:before{content:\"\\f02d\"}.fa-bookmark:before{content:\"\\f02e\"}.fa-print:before{content:\"\\f02f\"}.fa-camera:before{content:\"\\f030\"}.fa-font:before{content:\"\\f031\"}.fa-bold:before{content:\"\\f032\"}.fa-italic:before{content:\"\\f033\"}.fa-text-height:before{content:\"\\f034\"}.fa-text-width:before{content:\"\\f035\"}.fa-align-left:before{content:\"\\f036\"}.fa-align-center:before{content:\"\\f037\"}.fa-align-right:before{content:\"\\f038\"}.fa-align-justify:before{content:\"\\f039\"}.fa-list:before{content:\"\\f03a\"}.fa-dedent:before,.fa-outdent:before{content:\"\\f03b\"}.fa-indent:before{content:\"\\f03c\"}.fa-video-camera:before{content:\"\\f03d\"}.fa-photo:before,.fa-image:before,.fa-picture-o:before{content:\"\\f03e\"}.fa-pencil:before{content:\"\\f040\"}.fa-map-marker:before{content:\"\\f041\"}.fa-adjust:before{content:\"\\f042\"}.fa-tint:before{content:\"\\f043\"}.fa-edit:before,.fa-pencil-square-o:before{content:\"\\f044\"}.fa-share-square-o:before{content:\"\\f045\"}.fa-check-square-o:before{content:\"\\f046\"}.fa-arrows:before{content:\"\\f047\"}.fa-step-backward:before{content:\"\\f048\"}.fa-fast-backward:before{content:\"\\f049\"}.fa-backward:before{content:\"\\f04a\"}.fa-play:before{content:\"\\f04b\"}.fa-pause:before{content:\"\\f04c\"}.fa-stop:before{content:\"\\f04d\"}.fa-forward:before{content:\"\\f04e\"}.fa-fast-forward:before{content:\"\\f050\"}.fa-step-forward:before{content:\"\\f051\"}.fa-eject:before{content:\"\\f052\"}.fa-chevron-left:before{content:\"\\f053\"}.fa-chevron-right:before{content:\"\\f054\"}.fa-plus-circle:before{content:\"\\f055\"}.fa-minus-circle:before{content:\"\\f056\"}.fa-times-circle:before{content:\"\\f057\"}.fa-check-circle:before{content:\"\\f058\"}.fa-question-circle:before{content:\"\\f059\"}.fa-info-circle:before{content:\"\\f05a\"}.fa-crosshairs:before{content:\"\\f05b\"}.fa-times-circle-o:before{content:\"\\f05c\"}.fa-check-circle-o:before{content:\"\\f05d\"}.fa-ban:before{content:\"\\f05e\"}.fa-arrow-left:before{content:\"\\f060\"}.fa-arrow-right:before{content:\"\\f061\"}.fa-arrow-up:before{content:\"\\f062\"}.fa-arrow-down:before{content:\"\\f063\"}.fa-mail-forward:before,.fa-share:before{content:\"\\f064\"}.fa-expand:before{content:\"\\f065\"}.fa-compress:before{content:\"\\f066\"}.fa-plus:before{content:\"\\f067\"}.fa-minus:before{content:\"\\f068\"}.fa-asterisk:before{content:\"\\f069\"}.fa-exclamation-circle:before{content:\"\\f06a\"}.fa-gift:before{content:\"\\f06b\"}.fa-leaf:before{content:\"\\f06c\"}.fa-fire:before{content:\"\\f06d\"}.fa-eye:before{content:\"\\f06e\"}.fa-eye-slash:before{content:\"\\f070\"}.fa-warning:before,.fa-exclamation-triangle:before{content:\"\\f071\"}.fa-plane:before{content:\"\\f072\"}.fa-calendar:before{content:\"\\f073\"}.fa-random:before{content:\"\\f074\"}.fa-comment:before{content:\"\\f075\"}.fa-magnet:before{content:\"\\f076\"}.fa-chevron-up:before{content:\"\\f077\"}.fa-chevron-down:before{content:\"\\f078\"}.fa-retweet:before{content:\"\\f079\"}.fa-shopping-cart:before{content:\"\\f07a\"}.fa-folder:before{content:\"\\f07b\"}.fa-folder-open:before{content:\"\\f07c\"}.fa-arrows-v:before{content:\"\\f07d\"}.fa-arrows-h:before{content:\"\\f07e\"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:\"\\f080\"}.fa-twitter-square:before{content:\"\\f081\"}.fa-facebook-square:before{content:\"\\f082\"}.fa-camera-retro:before{content:\"\\f083\"}.fa-key:before{content:\"\\f084\"}.fa-gears:before,.fa-cogs:before{content:\"\\f085\"}.fa-comments:before{content:\"\\f086\"}.fa-thumbs-o-up:before{content:\"\\f087\"}.fa-thumbs-o-down:before{content:\"\\f088\"}.fa-star-half:before{content:\"\\f089\"}.fa-heart-o:before{content:\"\\f08a\"}.fa-sign-out:before{content:\"\\f08b\"}.fa-linkedin-square:before{content:\"\\f08c\"}.fa-thumb-tack:before{content:\"\\f08d\"}.fa-external-link:before{content:\"\\f08e\"}.fa-sign-in:before{content:\"\\f090\"}.fa-trophy:before{content:\"\\f091\"}.fa-github-square:before{content:\"\\f092\"}.fa-upload:before{content:\"\\f093\"}.fa-lemon-o:before{content:\"\\f094\"}.fa-phone:before{content:\"\\f095\"}.fa-square-o:before{content:\"\\f096\"}.fa-bookmark-o:before{content:\"\\f097\"}.fa-phone-square:before{content:\"\\f098\"}.fa-twitter:before{content:\"\\f099\"}.fa-facebook-f:before,.fa-facebook:before{content:\"\\f09a\"}.fa-github:before{content:\"\\f09b\"}.fa-unlock:before{content:\"\\f09c\"}.fa-credit-card:before{content:\"\\f09d\"}.fa-feed:before,.fa-rss:before{content:\"\\f09e\"}.fa-hdd-o:before{content:\"\\f0a0\"}.fa-bullhorn:before{content:\"\\f0a1\"}.fa-bell:before{content:\"\\f0f3\"}.fa-certificate:before{content:\"\\f0a3\"}.fa-hand-o-right:before{content:\"\\f0a4\"}.fa-hand-o-left:before{content:\"\\f0a5\"}.fa-hand-o-up:before{content:\"\\f0a6\"}.fa-hand-o-down:before{content:\"\\f0a7\"}.fa-arrow-circle-left:before{content:\"\\f0a8\"}.fa-arrow-circle-right:before{content:\"\\f0a9\"}.fa-arrow-circle-up:before{content:\"\\f0aa\"}.fa-arrow-circle-down:before{content:\"\\f0ab\"}.fa-globe:before{content:\"\\f0ac\"}.fa-wrench:before{content:\"\\f0ad\"}.fa-tasks:before{content:\"\\f0ae\"}.fa-filter:before{content:\"\\f0b0\"}.fa-briefcase:before{content:\"\\f0b1\"}.fa-arrows-alt:before{content:\"\\f0b2\"}.fa-group:before,.fa-users:before{content:\"\\f0c0\"}.fa-chain:before,.fa-link:before{content:\"\\f0c1\"}.fa-cloud:before{content:\"\\f0c2\"}.fa-flask:before{content:\"\\f0c3\"}.fa-cut:before,.fa-scissors:before{content:\"\\f0c4\"}.fa-copy:before,.fa-files-o:before{content:\"\\f0c5\"}.fa-paperclip:before{content:\"\\f0c6\"}.fa-save:before,.fa-floppy-o:before{content:\"\\f0c7\"}.fa-square:before{content:\"\\f0c8\"}.fa-navicon:before,.fa-reorder:before,.fa-bars:before{content:\"\\f0c9\"}.fa-list-ul:before{content:\"\\f0ca\"}.fa-list-ol:before{content:\"\\f0cb\"}.fa-strikethrough:before{content:\"\\f0cc\"}.fa-underline:before{content:\"\\f0cd\"}.fa-table:before{content:\"\\f0ce\"}.fa-magic:before{content:\"\\f0d0\"}.fa-truck:before{content:\"\\f0d1\"}.fa-pinterest:before{content:\"\\f0d2\"}.fa-pinterest-square:before{content:\"\\f0d3\"}.fa-google-plus-square:before{content:\"\\f0d4\"}.fa-google-plus:before{content:\"\\f0d5\"}.fa-money:before{content:\"\\f0d6\"}.fa-caret-down:before{content:\"\\f0d7\"}.fa-caret-up:before{content:\"\\f0d8\"}.fa-caret-left:before{content:\"\\f0d9\"}.fa-caret-right:before{content:\"\\f0da\"}.fa-columns:before{content:\"\\f0db\"}.fa-unsorted:before,.fa-sort:before{content:\"\\f0dc\"}.fa-sort-down:before,.fa-sort-desc:before{content:\"\\f0dd\"}.fa-sort-up:before,.fa-sort-asc:before{content:\"\\f0de\"}.fa-envelope:before{content:\"\\f0e0\"}.fa-linkedin:before{content:\"\\f0e1\"}.fa-rotate-left:before,.fa-undo:before{content:\"\\f0e2\"}.fa-legal:before,.fa-gavel:before{content:\"\\f0e3\"}.fa-dashboard:before,.fa-tachometer:before{content:\"\\f0e4\"}.fa-comment-o:before{content:\"\\f0e5\"}.fa-comments-o:before{content:\"\\f0e6\"}.fa-flash:before,.fa-bolt:before{content:\"\\f0e7\"}.fa-sitemap:before{content:\"\\f0e8\"}.fa-umbrella:before{content:\"\\f0e9\"}.fa-paste:before,.fa-clipboard:before{content:\"\\f0ea\"}.fa-lightbulb-o:before{content:\"\\f0eb\"}.fa-exchange:before{content:\"\\f0ec\"}.fa-cloud-download:before{content:\"\\f0ed\"}.fa-cloud-upload:before{content:\"\\f0ee\"}.fa-user-md:before{content:\"\\f0f0\"}.fa-stethoscope:before{content:\"\\f0f1\"}.fa-suitcase:before{content:\"\\f0f2\"}.fa-bell-o:before{content:\"\\f0a2\"}.fa-coffee:before{content:\"\\f0f4\"}.fa-cutlery:before{content:\"\\f0f5\"}.fa-file-text-o:before{content:\"\\f0f6\"}.fa-building-o:before{content:\"\\f0f7\"}.fa-hospital-o:before{content:\"\\f0f8\"}.fa-ambulance:before{content:\"\\f0f9\"}.fa-medkit:before{content:\"\\f0fa\"}.fa-fighter-jet:before{content:\"\\f0fb\"}.fa-beer:before{content:\"\\f0fc\"}.fa-h-square:before{content:\"\\f0fd\"}.fa-plus-square:before{content:\"\\f0fe\"}.fa-angle-double-left:before{content:\"\\f100\"}.fa-angle-double-right:before{content:\"\\f101\"}.fa-angle-double-up:before{content:\"\\f102\"}.fa-angle-double-down:before{content:\"\\f103\"}.fa-angle-left:before{content:\"\\f104\"}.fa-angle-right:before{content:\"\\f105\"}.fa-angle-up:before{content:\"\\f106\"}.fa-angle-down:before{content:\"\\f107\"}.fa-desktop:before{content:\"\\f108\"}.fa-laptop:before{content:\"\\f109\"}.fa-tablet:before{content:\"\\f10a\"}.fa-mobile-phone:before,.fa-mobile:before{content:\"\\f10b\"}.fa-circle-o:before{content:\"\\f10c\"}.fa-quote-left:before{content:\"\\f10d\"}.fa-quote-right:before{content:\"\\f10e\"}.fa-spinner:before{content:\"\\f110\"}.fa-circle:before{content:\"\\f111\"}.fa-mail-reply:before,.fa-reply:before{content:\"\\f112\"}.fa-github-alt:before{content:\"\\f113\"}.fa-folder-o:before{content:\"\\f114\"}.fa-folder-open-o:before{content:\"\\f115\"}.fa-smile-o:before{content:\"\\f118\"}.fa-frown-o:before{content:\"\\f119\"}.fa-meh-o:before{content:\"\\f11a\"}.fa-gamepad:before{content:\"\\f11b\"}.fa-keyboard-o:before{content:\"\\f11c\"}.fa-flag-o:before{content:\"\\f11d\"}.fa-flag-checkered:before{content:\"\\f11e\"}.fa-terminal:before{content:\"\\f120\"}.fa-code:before{content:\"\\f121\"}.fa-mail-reply-all:before,.fa-reply-all:before{content:\"\\f122\"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:\"\\f123\"}.fa-location-arrow:before{content:\"\\f124\"}.fa-crop:before{content:\"\\f125\"}.fa-code-fork:before{content:\"\\f126\"}.fa-unlink:before,.fa-chain-broken:before{content:\"\\f127\"}.fa-question:before{content:\"\\f128\"}.fa-info:before{content:\"\\f129\"}.fa-exclamation:before{content:\"\\f12a\"}.fa-superscript:before{content:\"\\f12b\"}.fa-subscript:before{content:\"\\f12c\"}.fa-eraser:before{content:\"\\f12d\"}.fa-puzzle-piece:before{content:\"\\f12e\"}.fa-microphone:before{content:\"\\f130\"}.fa-microphone-slash:before{content:\"\\f131\"}.fa-shield:before{content:\"\\f132\"}.fa-calendar-o:before{content:\"\\f133\"}.fa-fire-extinguisher:before{content:\"\\f134\"}.fa-rocket:before{content:\"\\f135\"}.fa-maxcdn:before{content:\"\\f136\"}.fa-chevron-circle-left:before{content:\"\\f137\"}.fa-chevron-circle-right:before{content:\"\\f138\"}.fa-chevron-circle-up:before{content:\"\\f139\"}.fa-chevron-circle-down:before{content:\"\\f13a\"}.fa-html5:before{content:\"\\f13b\"}.fa-css3:before{content:\"\\f13c\"}.fa-anchor:before{content:\"\\f13d\"}.fa-unlock-alt:before{content:\"\\f13e\"}.fa-bullseye:before{content:\"\\f140\"}.fa-ellipsis-h:before{content:\"\\f141\"}.fa-ellipsis-v:before{content:\"\\f142\"}.fa-rss-square:before{content:\"\\f143\"}.fa-play-circle:before{content:\"\\f144\"}.fa-ticket:before{content:\"\\f145\"}.fa-minus-square:before{content:\"\\f146\"}.fa-minus-square-o:before{content:\"\\f147\"}.fa-level-up:before{content:\"\\f148\"}.fa-level-down:before{content:\"\\f149\"}.fa-check-square:before{content:\"\\f14a\"}.fa-pencil-square:before{content:\"\\f14b\"}.fa-external-link-square:before{content:\"\\f14c\"}.fa-share-square:before{content:\"\\f14d\"}.fa-compass:before{content:\"\\f14e\"}.fa-toggle-down:before,.fa-caret-square-o-down:before{content:\"\\f150\"}.fa-toggle-up:before,.fa-caret-square-o-up:before{content:\"\\f151\"}.fa-toggle-right:before,.fa-caret-square-o-right:before{content:\"\\f152\"}.fa-euro:before,.fa-eur:before{content:\"\\f153\"}.fa-gbp:before{content:\"\\f154\"}.fa-dollar:before,.fa-usd:before{content:\"\\f155\"}.fa-rupee:before,.fa-inr:before{content:\"\\f156\"}.fa-cny:before,.fa-rmb:before,.fa-yen:before,.fa-jpy:before{content:\"\\f157\"}.fa-ruble:before,.fa-rouble:before,.fa-rub:before{content:\"\\f158\"}.fa-won:before,.fa-krw:before{content:\"\\f159\"}.fa-bitcoin:before,.fa-btc:before{content:\"\\f15a\"}.fa-file:before{content:\"\\f15b\"}.fa-file-text:before{content:\"\\f15c\"}.fa-sort-alpha-asc:before{content:\"\\f15d\"}.fa-sort-alpha-desc:before{content:\"\\f15e\"}.fa-sort-amount-asc:before{content:\"\\f160\"}.fa-sort-amount-desc:before{content:\"\\f161\"}.fa-sort-numeric-asc:before{content:\"\\f162\"}.fa-sort-numeric-desc:before{content:\"\\f163\"}.fa-thumbs-up:before{content:\"\\f164\"}.fa-thumbs-down:before{content:\"\\f165\"}.fa-youtube-square:before{content:\"\\f166\"}.fa-youtube:before{content:\"\\f167\"}.fa-xing:before{content:\"\\f168\"}.fa-xing-square:before{content:\"\\f169\"}.fa-youtube-play:before{content:\"\\f16a\"}.fa-dropbox:before{content:\"\\f16b\"}.fa-stack-overflow:before{content:\"\\f16c\"}.fa-instagram:before{content:\"\\f16d\"}.fa-flickr:before{content:\"\\f16e\"}.fa-adn:before{content:\"\\f170\"}.fa-bitbucket:before{content:\"\\f171\"}.fa-bitbucket-square:before{content:\"\\f172\"}.fa-tumblr:before{content:\"\\f173\"}.fa-tumblr-square:before{content:\"\\f174\"}.fa-long-arrow-down:before{content:\"\\f175\"}.fa-long-arrow-up:before{content:\"\\f176\"}.fa-long-arrow-left:before{content:\"\\f177\"}.fa-long-arrow-right:before{content:\"\\f178\"}.fa-apple:before{content:\"\\f179\"}.fa-windows:before{content:\"\\f17a\"}.fa-android:before{content:\"\\f17b\"}.fa-linux:before{content:\"\\f17c\"}.fa-dribbble:before{content:\"\\f17d\"}.fa-skype:before{content:\"\\f17e\"}.fa-foursquare:before{content:\"\\f180\"}.fa-trello:before{content:\"\\f181\"}.fa-female:before{content:\"\\f182\"}.fa-male:before{content:\"\\f183\"}.fa-gittip:before,.fa-gratipay:before{content:\"\\f184\"}.fa-sun-o:before{content:\"\\f185\"}.fa-moon-o:before{content:\"\\f186\"}.fa-archive:before{content:\"\\f187\"}.fa-bug:before{content:\"\\f188\"}.fa-vk:before{content:\"\\f189\"}.fa-weibo:before{content:\"\\f18a\"}.fa-renren:before{content:\"\\f18b\"}.fa-pagelines:before{content:\"\\f18c\"}.fa-stack-exchange:before{content:\"\\f18d\"}.fa-arrow-circle-o-right:before{content:\"\\f18e\"}.fa-arrow-circle-o-left:before{content:\"\\f190\"}.fa-toggle-left:before,.fa-caret-square-o-left:before{content:\"\\f191\"}.fa-dot-circle-o:before{content:\"\\f192\"}.fa-wheelchair:before{content:\"\\f193\"}.fa-vimeo-square:before{content:\"\\f194\"}.fa-turkish-lira:before,.fa-try:before{content:\"\\f195\"}.fa-plus-square-o:before{content:\"\\f196\"}.fa-space-shuttle:before{content:\"\\f197\"}.fa-slack:before{content:\"\\f198\"}.fa-envelope-square:before{content:\"\\f199\"}.fa-wordpress:before{content:\"\\f19a\"}.fa-openid:before{content:\"\\f19b\"}.fa-institution:before,.fa-bank:before,.fa-university:before{content:\"\\f19c\"}.fa-mortar-board:before,.fa-graduation-cap:before{content:\"\\f19d\"}.fa-yahoo:before{content:\"\\f19e\"}.fa-google:before{content:\"\\f1a0\"}.fa-reddit:before{content:\"\\f1a1\"}.fa-reddit-square:before{content:\"\\f1a2\"}.fa-stumbleupon-circle:before{content:\"\\f1a3\"}.fa-stumbleupon:before{content:\"\\f1a4\"}.fa-delicious:before{content:\"\\f1a5\"}.fa-digg:before{content:\"\\f1a6\"}.fa-pied-piper:before{content:\"\\f1a7\"}.fa-pied-piper-alt:before{content:\"\\f1a8\"}.fa-drupal:before{content:\"\\f1a9\"}.fa-joomla:before{content:\"\\f1aa\"}.fa-language:before{content:\"\\f1ab\"}.fa-fax:before{content:\"\\f1ac\"}.fa-building:before{content:\"\\f1ad\"}.fa-child:before{content:\"\\f1ae\"}.fa-paw:before{content:\"\\f1b0\"}.fa-spoon:before{content:\"\\f1b1\"}.fa-cube:before{content:\"\\f1b2\"}.fa-cubes:before{content:\"\\f1b3\"}.fa-behance:before{content:\"\\f1b4\"}.fa-behance-square:before{content:\"\\f1b5\"}.fa-steam:before{content:\"\\f1b6\"}.fa-steam-square:before{content:\"\\f1b7\"}.fa-recycle:before{content:\"\\f1b8\"}.fa-automobile:before,.fa-car:before{content:\"\\f1b9\"}.fa-cab:before,.fa-taxi:before{content:\"\\f1ba\"}.fa-tree:before{content:\"\\f1bb\"}.fa-spotify:before{content:\"\\f1bc\"}.fa-deviantart:before{content:\"\\f1bd\"}.fa-soundcloud:before{content:\"\\f1be\"}.fa-database:before{content:\"\\f1c0\"}.fa-file-pdf-o:before{content:\"\\f1c1\"}.fa-file-word-o:before{content:\"\\f1c2\"}.fa-file-excel-o:before{content:\"\\f1c3\"}.fa-file-powerpoint-o:before{content:\"\\f1c4\"}.fa-file-photo-o:before,.fa-file-picture-o:before,.fa-file-image-o:before{content:\"\\f1c5\"}.fa-file-zip-o:before,.fa-file-archive-o:before{content:\"\\f1c6\"}.fa-file-sound-o:before,.fa-file-audio-o:before{content:\"\\f1c7\"}.fa-file-movie-o:before,.fa-file-video-o:before{content:\"\\f1c8\"}.fa-file-code-o:before{content:\"\\f1c9\"}.fa-vine:before{content:\"\\f1ca\"}.fa-codepen:before{content:\"\\f1cb\"}.fa-jsfiddle:before{content:\"\\f1cc\"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-saver:before,.fa-support:before,.fa-life-ring:before{content:\"\\f1cd\"}.fa-circle-o-notch:before{content:\"\\f1ce\"}.fa-ra:before,.fa-rebel:before{content:\"\\f1d0\"}.fa-ge:before,.fa-empire:before{content:\"\\f1d1\"}.fa-git-square:before{content:\"\\f1d2\"}.fa-git:before{content:\"\\f1d3\"}.fa-y-combinator-square:before,.fa-yc-square:before,.fa-hacker-news:before{content:\"\\f1d4\"}.fa-tencent-weibo:before{content:\"\\f1d5\"}.fa-qq:before{content:\"\\f1d6\"}.fa-wechat:before,.fa-weixin:before{content:\"\\f1d7\"}.fa-send:before,.fa-paper-plane:before{content:\"\\f1d8\"}.fa-send-o:before,.fa-paper-plane-o:before{content:\"\\f1d9\"}.fa-history:before{content:\"\\f1da\"}.fa-circle-thin:before{content:\"\\f1db\"}.fa-header:before{content:\"\\f1dc\"}.fa-paragraph:before{content:\"\\f1dd\"}.fa-sliders:before{content:\"\\f1de\"}.fa-share-alt:before{content:\"\\f1e0\"}.fa-share-alt-square:before{content:\"\\f1e1\"}.fa-bomb:before{content:\"\\f1e2\"}.fa-soccer-ball-o:before,.fa-futbol-o:before{content:\"\\f1e3\"}.fa-tty:before{content:\"\\f1e4\"}.fa-binoculars:before{content:\"\\f1e5\"}.fa-plug:before{content:\"\\f1e6\"}.fa-slideshare:before{content:\"\\f1e7\"}.fa-twitch:before{content:\"\\f1e8\"}.fa-yelp:before{content:\"\\f1e9\"}.fa-newspaper-o:before{content:\"\\f1ea\"}.fa-wifi:before{content:\"\\f1eb\"}.fa-calculator:before{content:\"\\f1ec\"}.fa-paypal:before{content:\"\\f1ed\"}.fa-google-wallet:before{content:\"\\f1ee\"}.fa-cc-visa:before{content:\"\\f1f0\"}.fa-cc-mastercard:before{content:\"\\f1f1\"}.fa-cc-discover:before{content:\"\\f1f2\"}.fa-cc-amex:before{content:\"\\f1f3\"}.fa-cc-paypal:before{content:\"\\f1f4\"}.fa-cc-stripe:before{content:\"\\f1f5\"}.fa-bell-slash:before{content:\"\\f1f6\"}.fa-bell-slash-o:before{content:\"\\f1f7\"}.fa-trash:before{content:\"\\f1f8\"}.fa-copyright:before{content:\"\\f1f9\"}.fa-at:before{content:\"\\f1fa\"}.fa-eyedropper:before{content:\"\\f1fb\"}.fa-paint-brush:before{content:\"\\f1fc\"}.fa-birthday-cake:before{content:\"\\f1fd\"}.fa-area-chart:before{content:\"\\f1fe\"}.fa-pie-chart:before{content:\"\\f200\"}.fa-line-chart:before{content:\"\\f201\"}.fa-lastfm:before{content:\"\\f202\"}.fa-lastfm-square:before{content:\"\\f203\"}.fa-toggle-off:before{content:\"\\f204\"}.fa-toggle-on:before{content:\"\\f205\"}.fa-bicycle:before{content:\"\\f206\"}.fa-bus:before{content:\"\\f207\"}.fa-ioxhost:before{content:\"\\f208\"}.fa-angellist:before{content:\"\\f209\"}.fa-cc:before{content:\"\\f20a\"}.fa-shekel:before,.fa-sheqel:before,.fa-ils:before{content:\"\\f20b\"}.fa-meanpath:before{content:\"\\f20c\"}.fa-buysellads:before{content:\"\\f20d\"}.fa-connectdevelop:before{content:\"\\f20e\"}.fa-dashcube:before{content:\"\\f210\"}.fa-forumbee:before{content:\"\\f211\"}.fa-leanpub:before{content:\"\\f212\"}.fa-sellsy:before{content:\"\\f213\"}.fa-shirtsinbulk:before{content:\"\\f214\"}.fa-simplybuilt:before{content:\"\\f215\"}.fa-skyatlas:before{content:\"\\f216\"}.fa-cart-plus:before{content:\"\\f217\"}.fa-cart-arrow-down:before{content:\"\\f218\"}.fa-diamond:before{content:\"\\f219\"}.fa-ship:before{content:\"\\f21a\"}.fa-user-secret:before{content:\"\\f21b\"}.fa-motorcycle:before{content:\"\\f21c\"}.fa-street-view:before{content:\"\\f21d\"}.fa-heartbeat:before{content:\"\\f21e\"}.fa-venus:before{content:\"\\f221\"}.fa-mars:before{content:\"\\f222\"}.fa-mercury:before{content:\"\\f223\"}.fa-intersex:before,.fa-transgender:before{content:\"\\f224\"}.fa-transgender-alt:before{content:\"\\f225\"}.fa-venus-double:before{content:\"\\f226\"}.fa-mars-double:before{content:\"\\f227\"}.fa-venus-mars:before{content:\"\\f228\"}.fa-mars-stroke:before{content:\"\\f229\"}.fa-mars-stroke-v:before{content:\"\\f22a\"}.fa-mars-stroke-h:before{content:\"\\f22b\"}.fa-neuter:before{content:\"\\f22c\"}.fa-genderless:before{content:\"\\f22d\"}.fa-facebook-official:before{content:\"\\f230\"}.fa-pinterest-p:before{content:\"\\f231\"}.fa-whatsapp:before{content:\"\\f232\"}.fa-server:before{content:\"\\f233\"}.fa-user-plus:before{content:\"\\f234\"}.fa-user-times:before{content:\"\\f235\"}.fa-hotel:before,.fa-bed:before{content:\"\\f236\"}.fa-viacoin:before{content:\"\\f237\"}.fa-train:before{content:\"\\f238\"}.fa-subway:before{content:\"\\f239\"}.fa-medium:before{content:\"\\f23a\"}.fa-yc:before,.fa-y-combinator:before{content:\"\\f23b\"}.fa-optin-monster:before{content:\"\\f23c\"}.fa-opencart:before{content:\"\\f23d\"}.fa-expeditedssl:before{content:\"\\f23e\"}.fa-battery-4:before,.fa-battery-full:before{content:\"\\f240\"}.fa-battery-3:before,.fa-battery-three-quarters:before{content:\"\\f241\"}.fa-battery-2:before,.fa-battery-half:before{content:\"\\f242\"}.fa-battery-1:before,.fa-battery-quarter:before{content:\"\\f243\"}.fa-battery-0:before,.fa-battery-empty:before{content:\"\\f244\"}.fa-mouse-pointer:before{content:\"\\f245\"}.fa-i-cursor:before{content:\"\\f246\"}.fa-object-group:before{content:\"\\f247\"}.fa-object-ungroup:before{content:\"\\f248\"}.fa-sticky-note:before{content:\"\\f249\"}.fa-sticky-note-o:before{content:\"\\f24a\"}.fa-cc-jcb:before{content:\"\\f24b\"}.fa-cc-diners-club:before{content:\"\\f24c\"}.fa-clone:before{content:\"\\f24d\"}.fa-balance-scale:before{content:\"\\f24e\"}.fa-hourglass-o:before{content:\"\\f250\"}.fa-hourglass-1:before,.fa-hourglass-start:before{content:\"\\f251\"}.fa-hourglass-2:before,.fa-hourglass-half:before{content:\"\\f252\"}.fa-hourglass-3:before,.fa-hourglass-end:before{content:\"\\f253\"}.fa-hourglass:before{content:\"\\f254\"}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:\"\\f255\"}.fa-hand-stop-o:before,.fa-hand-paper-o:before{content:\"\\f256\"}.fa-hand-scissors-o:before{content:\"\\f257\"}.fa-hand-lizard-o:before{content:\"\\f258\"}.fa-hand-spock-o:before{content:\"\\f259\"}.fa-hand-pointer-o:before{content:\"\\f25a\"}.fa-hand-peace-o:before{content:\"\\f25b\"}.fa-trademark:before{content:\"\\f25c\"}.fa-registered:before{content:\"\\f25d\"}.fa-creative-commons:before{content:\"\\f25e\"}.fa-gg:before{content:\"\\f260\"}.fa-gg-circle:before{content:\"\\f261\"}.fa-tripadvisor:before{content:\"\\f262\"}.fa-odnoklassniki:before{content:\"\\f263\"}.fa-odnoklassniki-square:before{content:\"\\f264\"}.fa-get-pocket:before{content:\"\\f265\"}.fa-wikipedia-w:before{content:\"\\f266\"}.fa-safari:before{content:\"\\f267\"}.fa-chrome:before{content:\"\\f268\"}.fa-firefox:before{content:\"\\f269\"}.fa-opera:before{content:\"\\f26a\"}.fa-internet-explorer:before{content:\"\\f26b\"}.fa-tv:before,.fa-television:before{content:\"\\f26c\"}.fa-contao:before{content:\"\\f26d\"}.fa-500px:before{content:\"\\f26e\"}.fa-amazon:before{content:\"\\f270\"}.fa-calendar-plus-o:before{content:\"\\f271\"}.fa-calendar-minus-o:before{content:\"\\f272\"}.fa-calendar-times-o:before{content:\"\\f273\"}.fa-calendar-check-o:before{content:\"\\f274\"}.fa-industry:before{content:\"\\f275\"}.fa-map-pin:before{content:\"\\f276\"}.fa-map-signs:before{content:\"\\f277\"}.fa-map-o:before{content:\"\\f278\"}.fa-map:before{content:\"\\f279\"}.fa-commenting:before{content:\"\\f27a\"}.fa-commenting-o:before{content:\"\\f27b\"}.fa-houzz:before{content:\"\\f27c\"}.fa-vimeo:before{content:\"\\f27d\"}.fa-black-tie:before{content:\"\\f27e\"}.fa-fonticons:before{content:\"\\f280\"}.fa-reddit-alien:before{content:\"\\f281\"}.fa-edge:before{content:\"\\f282\"}.fa-credit-card-alt:before{content:\"\\f283\"}.fa-codiepie:before{content:\"\\f284\"}.fa-modx:before{content:\"\\f285\"}.fa-fort-awesome:before{content:\"\\f286\"}.fa-usb:before{content:\"\\f287\"}.fa-product-hunt:before{content:\"\\f288\"}.fa-mixcloud:before{content:\"\\f289\"}.fa-scribd:before{content:\"\\f28a\"}.fa-pause-circle:before{content:\"\\f28b\"}.fa-pause-circle-o:before{content:\"\\f28c\"}.fa-stop-circle:before{content:\"\\f28d\"}.fa-stop-circle-o:before{content:\"\\f28e\"}.fa-shopping-bag:before{content:\"\\f290\"}.fa-shopping-basket:before{content:\"\\f291\"}.fa-hashtag:before{content:\"\\f292\"}.fa-bluetooth:before{content:\"\\f293\"}.fa-bluetooth-b:before{content:\"\\f294\"}.fa-percent:before{content:\"\\f295\"}\n","source":"about/font-awesome/css/font-awesome.min.css","raw":"/*!\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:'FontAwesome';src:url('../fonts/fontawesome-webfont.eot?v=4.5.0');src:url('../fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'),url('../fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'),url('../fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'),url('../fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'),url('../fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');font-weight:normal;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1, 1);-ms-transform:scale(-1, 1);transform:scale(-1, 1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1, -1);-ms-transform:scale(1, -1);transform:scale(1, -1)}:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-flip-horizontal,:root .fa-flip-vertical{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:\"\\f000\"}.fa-music:before{content:\"\\f001\"}.fa-search:before{content:\"\\f002\"}.fa-envelope-o:before{content:\"\\f003\"}.fa-heart:before{content:\"\\f004\"}.fa-star:before{content:\"\\f005\"}.fa-star-o:before{content:\"\\f006\"}.fa-user:before{content:\"\\f007\"}.fa-film:before{content:\"\\f008\"}.fa-th-large:before{content:\"\\f009\"}.fa-th:before{content:\"\\f00a\"}.fa-th-list:before{content:\"\\f00b\"}.fa-check:before{content:\"\\f00c\"}.fa-remove:before,.fa-close:before,.fa-times:before{content:\"\\f00d\"}.fa-search-plus:before{content:\"\\f00e\"}.fa-search-minus:before{content:\"\\f010\"}.fa-power-off:before{content:\"\\f011\"}.fa-signal:before{content:\"\\f012\"}.fa-gear:before,.fa-cog:before{content:\"\\f013\"}.fa-trash-o:before{content:\"\\f014\"}.fa-home:before{content:\"\\f015\"}.fa-file-o:before{content:\"\\f016\"}.fa-clock-o:before{content:\"\\f017\"}.fa-road:before{content:\"\\f018\"}.fa-download:before{content:\"\\f019\"}.fa-arrow-circle-o-down:before{content:\"\\f01a\"}.fa-arrow-circle-o-up:before{content:\"\\f01b\"}.fa-inbox:before{content:\"\\f01c\"}.fa-play-circle-o:before{content:\"\\f01d\"}.fa-rotate-right:before,.fa-repeat:before{content:\"\\f01e\"}.fa-refresh:before{content:\"\\f021\"}.fa-list-alt:before{content:\"\\f022\"}.fa-lock:before{content:\"\\f023\"}.fa-flag:before{content:\"\\f024\"}.fa-headphones:before{content:\"\\f025\"}.fa-volume-off:before{content:\"\\f026\"}.fa-volume-down:before{content:\"\\f027\"}.fa-volume-up:before{content:\"\\f028\"}.fa-qrcode:before{content:\"\\f029\"}.fa-barcode:before{content:\"\\f02a\"}.fa-tag:before{content:\"\\f02b\"}.fa-tags:before{content:\"\\f02c\"}.fa-book:before{content:\"\\f02d\"}.fa-bookmark:before{content:\"\\f02e\"}.fa-print:before{content:\"\\f02f\"}.fa-camera:before{content:\"\\f030\"}.fa-font:before{content:\"\\f031\"}.fa-bold:before{content:\"\\f032\"}.fa-italic:before{content:\"\\f033\"}.fa-text-height:before{content:\"\\f034\"}.fa-text-width:before{content:\"\\f035\"}.fa-align-left:before{content:\"\\f036\"}.fa-align-center:before{content:\"\\f037\"}.fa-align-right:before{content:\"\\f038\"}.fa-align-justify:before{content:\"\\f039\"}.fa-list:before{content:\"\\f03a\"}.fa-dedent:before,.fa-outdent:before{content:\"\\f03b\"}.fa-indent:before{content:\"\\f03c\"}.fa-video-camera:before{content:\"\\f03d\"}.fa-photo:before,.fa-image:before,.fa-picture-o:before{content:\"\\f03e\"}.fa-pencil:before{content:\"\\f040\"}.fa-map-marker:before{content:\"\\f041\"}.fa-adjust:before{content:\"\\f042\"}.fa-tint:before{content:\"\\f043\"}.fa-edit:before,.fa-pencil-square-o:before{content:\"\\f044\"}.fa-share-square-o:before{content:\"\\f045\"}.fa-check-square-o:before{content:\"\\f046\"}.fa-arrows:before{content:\"\\f047\"}.fa-step-backward:before{content:\"\\f048\"}.fa-fast-backward:before{content:\"\\f049\"}.fa-backward:before{content:\"\\f04a\"}.fa-play:before{content:\"\\f04b\"}.fa-pause:before{content:\"\\f04c\"}.fa-stop:before{content:\"\\f04d\"}.fa-forward:before{content:\"\\f04e\"}.fa-fast-forward:before{content:\"\\f050\"}.fa-step-forward:before{content:\"\\f051\"}.fa-eject:before{content:\"\\f052\"}.fa-chevron-left:before{content:\"\\f053\"}.fa-chevron-right:before{content:\"\\f054\"}.fa-plus-circle:before{content:\"\\f055\"}.fa-minus-circle:before{content:\"\\f056\"}.fa-times-circle:before{content:\"\\f057\"}.fa-check-circle:before{content:\"\\f058\"}.fa-question-circle:before{content:\"\\f059\"}.fa-info-circle:before{content:\"\\f05a\"}.fa-crosshairs:before{content:\"\\f05b\"}.fa-times-circle-o:before{content:\"\\f05c\"}.fa-check-circle-o:before{content:\"\\f05d\"}.fa-ban:before{content:\"\\f05e\"}.fa-arrow-left:before{content:\"\\f060\"}.fa-arrow-right:before{content:\"\\f061\"}.fa-arrow-up:before{content:\"\\f062\"}.fa-arrow-down:before{content:\"\\f063\"}.fa-mail-forward:before,.fa-share:before{content:\"\\f064\"}.fa-expand:before{content:\"\\f065\"}.fa-compress:before{content:\"\\f066\"}.fa-plus:before{content:\"\\f067\"}.fa-minus:before{content:\"\\f068\"}.fa-asterisk:before{content:\"\\f069\"}.fa-exclamation-circle:before{content:\"\\f06a\"}.fa-gift:before{content:\"\\f06b\"}.fa-leaf:before{content:\"\\f06c\"}.fa-fire:before{content:\"\\f06d\"}.fa-eye:before{content:\"\\f06e\"}.fa-eye-slash:before{content:\"\\f070\"}.fa-warning:before,.fa-exclamation-triangle:before{content:\"\\f071\"}.fa-plane:before{content:\"\\f072\"}.fa-calendar:before{content:\"\\f073\"}.fa-random:before{content:\"\\f074\"}.fa-comment:before{content:\"\\f075\"}.fa-magnet:before{content:\"\\f076\"}.fa-chevron-up:before{content:\"\\f077\"}.fa-chevron-down:before{content:\"\\f078\"}.fa-retweet:before{content:\"\\f079\"}.fa-shopping-cart:before{content:\"\\f07a\"}.fa-folder:before{content:\"\\f07b\"}.fa-folder-open:before{content:\"\\f07c\"}.fa-arrows-v:before{content:\"\\f07d\"}.fa-arrows-h:before{content:\"\\f07e\"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:\"\\f080\"}.fa-twitter-square:before{content:\"\\f081\"}.fa-facebook-square:before{content:\"\\f082\"}.fa-camera-retro:before{content:\"\\f083\"}.fa-key:before{content:\"\\f084\"}.fa-gears:before,.fa-cogs:before{content:\"\\f085\"}.fa-comments:before{content:\"\\f086\"}.fa-thumbs-o-up:before{content:\"\\f087\"}.fa-thumbs-o-down:before{content:\"\\f088\"}.fa-star-half:before{content:\"\\f089\"}.fa-heart-o:before{content:\"\\f08a\"}.fa-sign-out:before{content:\"\\f08b\"}.fa-linkedin-square:before{content:\"\\f08c\"}.fa-thumb-tack:before{content:\"\\f08d\"}.fa-external-link:before{content:\"\\f08e\"}.fa-sign-in:before{content:\"\\f090\"}.fa-trophy:before{content:\"\\f091\"}.fa-github-square:before{content:\"\\f092\"}.fa-upload:before{content:\"\\f093\"}.fa-lemon-o:before{content:\"\\f094\"}.fa-phone:before{content:\"\\f095\"}.fa-square-o:before{content:\"\\f096\"}.fa-bookmark-o:before{content:\"\\f097\"}.fa-phone-square:before{content:\"\\f098\"}.fa-twitter:before{content:\"\\f099\"}.fa-facebook-f:before,.fa-facebook:before{content:\"\\f09a\"}.fa-github:before{content:\"\\f09b\"}.fa-unlock:before{content:\"\\f09c\"}.fa-credit-card:before{content:\"\\f09d\"}.fa-feed:before,.fa-rss:before{content:\"\\f09e\"}.fa-hdd-o:before{content:\"\\f0a0\"}.fa-bullhorn:before{content:\"\\f0a1\"}.fa-bell:before{content:\"\\f0f3\"}.fa-certificate:before{content:\"\\f0a3\"}.fa-hand-o-right:before{content:\"\\f0a4\"}.fa-hand-o-left:before{content:\"\\f0a5\"}.fa-hand-o-up:before{content:\"\\f0a6\"}.fa-hand-o-down:before{content:\"\\f0a7\"}.fa-arrow-circle-left:before{content:\"\\f0a8\"}.fa-arrow-circle-right:before{content:\"\\f0a9\"}.fa-arrow-circle-up:before{content:\"\\f0aa\"}.fa-arrow-circle-down:before{content:\"\\f0ab\"}.fa-globe:before{content:\"\\f0ac\"}.fa-wrench:before{content:\"\\f0ad\"}.fa-tasks:before{content:\"\\f0ae\"}.fa-filter:before{content:\"\\f0b0\"}.fa-briefcase:before{content:\"\\f0b1\"}.fa-arrows-alt:before{content:\"\\f0b2\"}.fa-group:before,.fa-users:before{content:\"\\f0c0\"}.fa-chain:before,.fa-link:before{content:\"\\f0c1\"}.fa-cloud:before{content:\"\\f0c2\"}.fa-flask:before{content:\"\\f0c3\"}.fa-cut:before,.fa-scissors:before{content:\"\\f0c4\"}.fa-copy:before,.fa-files-o:before{content:\"\\f0c5\"}.fa-paperclip:before{content:\"\\f0c6\"}.fa-save:before,.fa-floppy-o:before{content:\"\\f0c7\"}.fa-square:before{content:\"\\f0c8\"}.fa-navicon:before,.fa-reorder:before,.fa-bars:before{content:\"\\f0c9\"}.fa-list-ul:before{content:\"\\f0ca\"}.fa-list-ol:before{content:\"\\f0cb\"}.fa-strikethrough:before{content:\"\\f0cc\"}.fa-underline:before{content:\"\\f0cd\"}.fa-table:before{content:\"\\f0ce\"}.fa-magic:before{content:\"\\f0d0\"}.fa-truck:before{content:\"\\f0d1\"}.fa-pinterest:before{content:\"\\f0d2\"}.fa-pinterest-square:before{content:\"\\f0d3\"}.fa-google-plus-square:before{content:\"\\f0d4\"}.fa-google-plus:before{content:\"\\f0d5\"}.fa-money:before{content:\"\\f0d6\"}.fa-caret-down:before{content:\"\\f0d7\"}.fa-caret-up:before{content:\"\\f0d8\"}.fa-caret-left:before{content:\"\\f0d9\"}.fa-caret-right:before{content:\"\\f0da\"}.fa-columns:before{content:\"\\f0db\"}.fa-unsorted:before,.fa-sort:before{content:\"\\f0dc\"}.fa-sort-down:before,.fa-sort-desc:before{content:\"\\f0dd\"}.fa-sort-up:before,.fa-sort-asc:before{content:\"\\f0de\"}.fa-envelope:before{content:\"\\f0e0\"}.fa-linkedin:before{content:\"\\f0e1\"}.fa-rotate-left:before,.fa-undo:before{content:\"\\f0e2\"}.fa-legal:before,.fa-gavel:before{content:\"\\f0e3\"}.fa-dashboard:before,.fa-tachometer:before{content:\"\\f0e4\"}.fa-comment-o:before{content:\"\\f0e5\"}.fa-comments-o:before{content:\"\\f0e6\"}.fa-flash:before,.fa-bolt:before{content:\"\\f0e7\"}.fa-sitemap:before{content:\"\\f0e8\"}.fa-umbrella:before{content:\"\\f0e9\"}.fa-paste:before,.fa-clipboard:before{content:\"\\f0ea\"}.fa-lightbulb-o:before{content:\"\\f0eb\"}.fa-exchange:before{content:\"\\f0ec\"}.fa-cloud-download:before{content:\"\\f0ed\"}.fa-cloud-upload:before{content:\"\\f0ee\"}.fa-user-md:before{content:\"\\f0f0\"}.fa-stethoscope:before{content:\"\\f0f1\"}.fa-suitcase:before{content:\"\\f0f2\"}.fa-bell-o:before{content:\"\\f0a2\"}.fa-coffee:before{content:\"\\f0f4\"}.fa-cutlery:before{content:\"\\f0f5\"}.fa-file-text-o:before{content:\"\\f0f6\"}.fa-building-o:before{content:\"\\f0f7\"}.fa-hospital-o:before{content:\"\\f0f8\"}.fa-ambulance:before{content:\"\\f0f9\"}.fa-medkit:before{content:\"\\f0fa\"}.fa-fighter-jet:before{content:\"\\f0fb\"}.fa-beer:before{content:\"\\f0fc\"}.fa-h-square:before{content:\"\\f0fd\"}.fa-plus-square:before{content:\"\\f0fe\"}.fa-angle-double-left:before{content:\"\\f100\"}.fa-angle-double-right:before{content:\"\\f101\"}.fa-angle-double-up:before{content:\"\\f102\"}.fa-angle-double-down:before{content:\"\\f103\"}.fa-angle-left:before{content:\"\\f104\"}.fa-angle-right:before{content:\"\\f105\"}.fa-angle-up:before{content:\"\\f106\"}.fa-angle-down:before{content:\"\\f107\"}.fa-desktop:before{content:\"\\f108\"}.fa-laptop:before{content:\"\\f109\"}.fa-tablet:before{content:\"\\f10a\"}.fa-mobile-phone:before,.fa-mobile:before{content:\"\\f10b\"}.fa-circle-o:before{content:\"\\f10c\"}.fa-quote-left:before{content:\"\\f10d\"}.fa-quote-right:before{content:\"\\f10e\"}.fa-spinner:before{content:\"\\f110\"}.fa-circle:before{content:\"\\f111\"}.fa-mail-reply:before,.fa-reply:before{content:\"\\f112\"}.fa-github-alt:before{content:\"\\f113\"}.fa-folder-o:before{content:\"\\f114\"}.fa-folder-open-o:before{content:\"\\f115\"}.fa-smile-o:before{content:\"\\f118\"}.fa-frown-o:before{content:\"\\f119\"}.fa-meh-o:before{content:\"\\f11a\"}.fa-gamepad:before{content:\"\\f11b\"}.fa-keyboard-o:before{content:\"\\f11c\"}.fa-flag-o:before{content:\"\\f11d\"}.fa-flag-checkered:before{content:\"\\f11e\"}.fa-terminal:before{content:\"\\f120\"}.fa-code:before{content:\"\\f121\"}.fa-mail-reply-all:before,.fa-reply-all:before{content:\"\\f122\"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:\"\\f123\"}.fa-location-arrow:before{content:\"\\f124\"}.fa-crop:before{content:\"\\f125\"}.fa-code-fork:before{content:\"\\f126\"}.fa-unlink:before,.fa-chain-broken:before{content:\"\\f127\"}.fa-question:before{content:\"\\f128\"}.fa-info:before{content:\"\\f129\"}.fa-exclamation:before{content:\"\\f12a\"}.fa-superscript:before{content:\"\\f12b\"}.fa-subscript:before{content:\"\\f12c\"}.fa-eraser:before{content:\"\\f12d\"}.fa-puzzle-piece:before{content:\"\\f12e\"}.fa-microphone:before{content:\"\\f130\"}.fa-microphone-slash:before{content:\"\\f131\"}.fa-shield:before{content:\"\\f132\"}.fa-calendar-o:before{content:\"\\f133\"}.fa-fire-extinguisher:before{content:\"\\f134\"}.fa-rocket:before{content:\"\\f135\"}.fa-maxcdn:before{content:\"\\f136\"}.fa-chevron-circle-left:before{content:\"\\f137\"}.fa-chevron-circle-right:before{content:\"\\f138\"}.fa-chevron-circle-up:before{content:\"\\f139\"}.fa-chevron-circle-down:before{content:\"\\f13a\"}.fa-html5:before{content:\"\\f13b\"}.fa-css3:before{content:\"\\f13c\"}.fa-anchor:before{content:\"\\f13d\"}.fa-unlock-alt:before{content:\"\\f13e\"}.fa-bullseye:before{content:\"\\f140\"}.fa-ellipsis-h:before{content:\"\\f141\"}.fa-ellipsis-v:before{content:\"\\f142\"}.fa-rss-square:before{content:\"\\f143\"}.fa-play-circle:before{content:\"\\f144\"}.fa-ticket:before{content:\"\\f145\"}.fa-minus-square:before{content:\"\\f146\"}.fa-minus-square-o:before{content:\"\\f147\"}.fa-level-up:before{content:\"\\f148\"}.fa-level-down:before{content:\"\\f149\"}.fa-check-square:before{content:\"\\f14a\"}.fa-pencil-square:before{content:\"\\f14b\"}.fa-external-link-square:before{content:\"\\f14c\"}.fa-share-square:before{content:\"\\f14d\"}.fa-compass:before{content:\"\\f14e\"}.fa-toggle-down:before,.fa-caret-square-o-down:before{content:\"\\f150\"}.fa-toggle-up:before,.fa-caret-square-o-up:before{content:\"\\f151\"}.fa-toggle-right:before,.fa-caret-square-o-right:before{content:\"\\f152\"}.fa-euro:before,.fa-eur:before{content:\"\\f153\"}.fa-gbp:before{content:\"\\f154\"}.fa-dollar:before,.fa-usd:before{content:\"\\f155\"}.fa-rupee:before,.fa-inr:before{content:\"\\f156\"}.fa-cny:before,.fa-rmb:before,.fa-yen:before,.fa-jpy:before{content:\"\\f157\"}.fa-ruble:before,.fa-rouble:before,.fa-rub:before{content:\"\\f158\"}.fa-won:before,.fa-krw:before{content:\"\\f159\"}.fa-bitcoin:before,.fa-btc:before{content:\"\\f15a\"}.fa-file:before{content:\"\\f15b\"}.fa-file-text:before{content:\"\\f15c\"}.fa-sort-alpha-asc:before{content:\"\\f15d\"}.fa-sort-alpha-desc:before{content:\"\\f15e\"}.fa-sort-amount-asc:before{content:\"\\f160\"}.fa-sort-amount-desc:before{content:\"\\f161\"}.fa-sort-numeric-asc:before{content:\"\\f162\"}.fa-sort-numeric-desc:before{content:\"\\f163\"}.fa-thumbs-up:before{content:\"\\f164\"}.fa-thumbs-down:before{content:\"\\f165\"}.fa-youtube-square:before{content:\"\\f166\"}.fa-youtube:before{content:\"\\f167\"}.fa-xing:before{content:\"\\f168\"}.fa-xing-square:before{content:\"\\f169\"}.fa-youtube-play:before{content:\"\\f16a\"}.fa-dropbox:before{content:\"\\f16b\"}.fa-stack-overflow:before{content:\"\\f16c\"}.fa-instagram:before{content:\"\\f16d\"}.fa-flickr:before{content:\"\\f16e\"}.fa-adn:before{content:\"\\f170\"}.fa-bitbucket:before{content:\"\\f171\"}.fa-bitbucket-square:before{content:\"\\f172\"}.fa-tumblr:before{content:\"\\f173\"}.fa-tumblr-square:before{content:\"\\f174\"}.fa-long-arrow-down:before{content:\"\\f175\"}.fa-long-arrow-up:before{content:\"\\f176\"}.fa-long-arrow-left:before{content:\"\\f177\"}.fa-long-arrow-right:before{content:\"\\f178\"}.fa-apple:before{content:\"\\f179\"}.fa-windows:before{content:\"\\f17a\"}.fa-android:before{content:\"\\f17b\"}.fa-linux:before{content:\"\\f17c\"}.fa-dribbble:before{content:\"\\f17d\"}.fa-skype:before{content:\"\\f17e\"}.fa-foursquare:before{content:\"\\f180\"}.fa-trello:before{content:\"\\f181\"}.fa-female:before{content:\"\\f182\"}.fa-male:before{content:\"\\f183\"}.fa-gittip:before,.fa-gratipay:before{content:\"\\f184\"}.fa-sun-o:before{content:\"\\f185\"}.fa-moon-o:before{content:\"\\f186\"}.fa-archive:before{content:\"\\f187\"}.fa-bug:before{content:\"\\f188\"}.fa-vk:before{content:\"\\f189\"}.fa-weibo:before{content:\"\\f18a\"}.fa-renren:before{content:\"\\f18b\"}.fa-pagelines:before{content:\"\\f18c\"}.fa-stack-exchange:before{content:\"\\f18d\"}.fa-arrow-circle-o-right:before{content:\"\\f18e\"}.fa-arrow-circle-o-left:before{content:\"\\f190\"}.fa-toggle-left:before,.fa-caret-square-o-left:before{content:\"\\f191\"}.fa-dot-circle-o:before{content:\"\\f192\"}.fa-wheelchair:before{content:\"\\f193\"}.fa-vimeo-square:before{content:\"\\f194\"}.fa-turkish-lira:before,.fa-try:before{content:\"\\f195\"}.fa-plus-square-o:before{content:\"\\f196\"}.fa-space-shuttle:before{content:\"\\f197\"}.fa-slack:before{content:\"\\f198\"}.fa-envelope-square:before{content:\"\\f199\"}.fa-wordpress:before{content:\"\\f19a\"}.fa-openid:before{content:\"\\f19b\"}.fa-institution:before,.fa-bank:before,.fa-university:before{content:\"\\f19c\"}.fa-mortar-board:before,.fa-graduation-cap:before{content:\"\\f19d\"}.fa-yahoo:before{content:\"\\f19e\"}.fa-google:before{content:\"\\f1a0\"}.fa-reddit:before{content:\"\\f1a1\"}.fa-reddit-square:before{content:\"\\f1a2\"}.fa-stumbleupon-circle:before{content:\"\\f1a3\"}.fa-stumbleupon:before{content:\"\\f1a4\"}.fa-delicious:before{content:\"\\f1a5\"}.fa-digg:before{content:\"\\f1a6\"}.fa-pied-piper:before{content:\"\\f1a7\"}.fa-pied-piper-alt:before{content:\"\\f1a8\"}.fa-drupal:before{content:\"\\f1a9\"}.fa-joomla:before{content:\"\\f1aa\"}.fa-language:before{content:\"\\f1ab\"}.fa-fax:before{content:\"\\f1ac\"}.fa-building:before{content:\"\\f1ad\"}.fa-child:before{content:\"\\f1ae\"}.fa-paw:before{content:\"\\f1b0\"}.fa-spoon:before{content:\"\\f1b1\"}.fa-cube:before{content:\"\\f1b2\"}.fa-cubes:before{content:\"\\f1b3\"}.fa-behance:before{content:\"\\f1b4\"}.fa-behance-square:before{content:\"\\f1b5\"}.fa-steam:before{content:\"\\f1b6\"}.fa-steam-square:before{content:\"\\f1b7\"}.fa-recycle:before{content:\"\\f1b8\"}.fa-automobile:before,.fa-car:before{content:\"\\f1b9\"}.fa-cab:before,.fa-taxi:before{content:\"\\f1ba\"}.fa-tree:before{content:\"\\f1bb\"}.fa-spotify:before{content:\"\\f1bc\"}.fa-deviantart:before{content:\"\\f1bd\"}.fa-soundcloud:before{content:\"\\f1be\"}.fa-database:before{content:\"\\f1c0\"}.fa-file-pdf-o:before{content:\"\\f1c1\"}.fa-file-word-o:before{content:\"\\f1c2\"}.fa-file-excel-o:before{content:\"\\f1c3\"}.fa-file-powerpoint-o:before{content:\"\\f1c4\"}.fa-file-photo-o:before,.fa-file-picture-o:before,.fa-file-image-o:before{content:\"\\f1c5\"}.fa-file-zip-o:before,.fa-file-archive-o:before{content:\"\\f1c6\"}.fa-file-sound-o:before,.fa-file-audio-o:before{content:\"\\f1c7\"}.fa-file-movie-o:before,.fa-file-video-o:before{content:\"\\f1c8\"}.fa-file-code-o:before{content:\"\\f1c9\"}.fa-vine:before{content:\"\\f1ca\"}.fa-codepen:before{content:\"\\f1cb\"}.fa-jsfiddle:before{content:\"\\f1cc\"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-saver:before,.fa-support:before,.fa-life-ring:before{content:\"\\f1cd\"}.fa-circle-o-notch:before{content:\"\\f1ce\"}.fa-ra:before,.fa-rebel:before{content:\"\\f1d0\"}.fa-ge:before,.fa-empire:before{content:\"\\f1d1\"}.fa-git-square:before{content:\"\\f1d2\"}.fa-git:before{content:\"\\f1d3\"}.fa-y-combinator-square:before,.fa-yc-square:before,.fa-hacker-news:before{content:\"\\f1d4\"}.fa-tencent-weibo:before{content:\"\\f1d5\"}.fa-qq:before{content:\"\\f1d6\"}.fa-wechat:before,.fa-weixin:before{content:\"\\f1d7\"}.fa-send:before,.fa-paper-plane:before{content:\"\\f1d8\"}.fa-send-o:before,.fa-paper-plane-o:before{content:\"\\f1d9\"}.fa-history:before{content:\"\\f1da\"}.fa-circle-thin:before{content:\"\\f1db\"}.fa-header:before{content:\"\\f1dc\"}.fa-paragraph:before{content:\"\\f1dd\"}.fa-sliders:before{content:\"\\f1de\"}.fa-share-alt:before{content:\"\\f1e0\"}.fa-share-alt-square:before{content:\"\\f1e1\"}.fa-bomb:before{content:\"\\f1e2\"}.fa-soccer-ball-o:before,.fa-futbol-o:before{content:\"\\f1e3\"}.fa-tty:before{content:\"\\f1e4\"}.fa-binoculars:before{content:\"\\f1e5\"}.fa-plug:before{content:\"\\f1e6\"}.fa-slideshare:before{content:\"\\f1e7\"}.fa-twitch:before{content:\"\\f1e8\"}.fa-yelp:before{content:\"\\f1e9\"}.fa-newspaper-o:before{content:\"\\f1ea\"}.fa-wifi:before{content:\"\\f1eb\"}.fa-calculator:before{content:\"\\f1ec\"}.fa-paypal:before{content:\"\\f1ed\"}.fa-google-wallet:before{content:\"\\f1ee\"}.fa-cc-visa:before{content:\"\\f1f0\"}.fa-cc-mastercard:before{content:\"\\f1f1\"}.fa-cc-discover:before{content:\"\\f1f2\"}.fa-cc-amex:before{content:\"\\f1f3\"}.fa-cc-paypal:before{content:\"\\f1f4\"}.fa-cc-stripe:before{content:\"\\f1f5\"}.fa-bell-slash:before{content:\"\\f1f6\"}.fa-bell-slash-o:before{content:\"\\f1f7\"}.fa-trash:before{content:\"\\f1f8\"}.fa-copyright:before{content:\"\\f1f9\"}.fa-at:before{content:\"\\f1fa\"}.fa-eyedropper:before{content:\"\\f1fb\"}.fa-paint-brush:before{content:\"\\f1fc\"}.fa-birthday-cake:before{content:\"\\f1fd\"}.fa-area-chart:before{content:\"\\f1fe\"}.fa-pie-chart:before{content:\"\\f200\"}.fa-line-chart:before{content:\"\\f201\"}.fa-lastfm:before{content:\"\\f202\"}.fa-lastfm-square:before{content:\"\\f203\"}.fa-toggle-off:before{content:\"\\f204\"}.fa-toggle-on:before{content:\"\\f205\"}.fa-bicycle:before{content:\"\\f206\"}.fa-bus:before{content:\"\\f207\"}.fa-ioxhost:before{content:\"\\f208\"}.fa-angellist:before{content:\"\\f209\"}.fa-cc:before{content:\"\\f20a\"}.fa-shekel:before,.fa-sheqel:before,.fa-ils:before{content:\"\\f20b\"}.fa-meanpath:before{content:\"\\f20c\"}.fa-buysellads:before{content:\"\\f20d\"}.fa-connectdevelop:before{content:\"\\f20e\"}.fa-dashcube:before{content:\"\\f210\"}.fa-forumbee:before{content:\"\\f211\"}.fa-leanpub:before{content:\"\\f212\"}.fa-sellsy:before{content:\"\\f213\"}.fa-shirtsinbulk:before{content:\"\\f214\"}.fa-simplybuilt:before{content:\"\\f215\"}.fa-skyatlas:before{content:\"\\f216\"}.fa-cart-plus:before{content:\"\\f217\"}.fa-cart-arrow-down:before{content:\"\\f218\"}.fa-diamond:before{content:\"\\f219\"}.fa-ship:before{content:\"\\f21a\"}.fa-user-secret:before{content:\"\\f21b\"}.fa-motorcycle:before{content:\"\\f21c\"}.fa-street-view:before{content:\"\\f21d\"}.fa-heartbeat:before{content:\"\\f21e\"}.fa-venus:before{content:\"\\f221\"}.fa-mars:before{content:\"\\f222\"}.fa-mercury:before{content:\"\\f223\"}.fa-intersex:before,.fa-transgender:before{content:\"\\f224\"}.fa-transgender-alt:before{content:\"\\f225\"}.fa-venus-double:before{content:\"\\f226\"}.fa-mars-double:before{content:\"\\f227\"}.fa-venus-mars:before{content:\"\\f228\"}.fa-mars-stroke:before{content:\"\\f229\"}.fa-mars-stroke-v:before{content:\"\\f22a\"}.fa-mars-stroke-h:before{content:\"\\f22b\"}.fa-neuter:before{content:\"\\f22c\"}.fa-genderless:before{content:\"\\f22d\"}.fa-facebook-official:before{content:\"\\f230\"}.fa-pinterest-p:before{content:\"\\f231\"}.fa-whatsapp:before{content:\"\\f232\"}.fa-server:before{content:\"\\f233\"}.fa-user-plus:before{content:\"\\f234\"}.fa-user-times:before{content:\"\\f235\"}.fa-hotel:before,.fa-bed:before{content:\"\\f236\"}.fa-viacoin:before{content:\"\\f237\"}.fa-train:before{content:\"\\f238\"}.fa-subway:before{content:\"\\f239\"}.fa-medium:before{content:\"\\f23a\"}.fa-yc:before,.fa-y-combinator:before{content:\"\\f23b\"}.fa-optin-monster:before{content:\"\\f23c\"}.fa-opencart:before{content:\"\\f23d\"}.fa-expeditedssl:before{content:\"\\f23e\"}.fa-battery-4:before,.fa-battery-full:before{content:\"\\f240\"}.fa-battery-3:before,.fa-battery-three-quarters:before{content:\"\\f241\"}.fa-battery-2:before,.fa-battery-half:before{content:\"\\f242\"}.fa-battery-1:before,.fa-battery-quarter:before{content:\"\\f243\"}.fa-battery-0:before,.fa-battery-empty:before{content:\"\\f244\"}.fa-mouse-pointer:before{content:\"\\f245\"}.fa-i-cursor:before{content:\"\\f246\"}.fa-object-group:before{content:\"\\f247\"}.fa-object-ungroup:before{content:\"\\f248\"}.fa-sticky-note:before{content:\"\\f249\"}.fa-sticky-note-o:before{content:\"\\f24a\"}.fa-cc-jcb:before{content:\"\\f24b\"}.fa-cc-diners-club:before{content:\"\\f24c\"}.fa-clone:before{content:\"\\f24d\"}.fa-balance-scale:before{content:\"\\f24e\"}.fa-hourglass-o:before{content:\"\\f250\"}.fa-hourglass-1:before,.fa-hourglass-start:before{content:\"\\f251\"}.fa-hourglass-2:before,.fa-hourglass-half:before{content:\"\\f252\"}.fa-hourglass-3:before,.fa-hourglass-end:before{content:\"\\f253\"}.fa-hourglass:before{content:\"\\f254\"}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:\"\\f255\"}.fa-hand-stop-o:before,.fa-hand-paper-o:before{content:\"\\f256\"}.fa-hand-scissors-o:before{content:\"\\f257\"}.fa-hand-lizard-o:before{content:\"\\f258\"}.fa-hand-spock-o:before{content:\"\\f259\"}.fa-hand-pointer-o:before{content:\"\\f25a\"}.fa-hand-peace-o:before{content:\"\\f25b\"}.fa-trademark:before{content:\"\\f25c\"}.fa-registered:before{content:\"\\f25d\"}.fa-creative-commons:before{content:\"\\f25e\"}.fa-gg:before{content:\"\\f260\"}.fa-gg-circle:before{content:\"\\f261\"}.fa-tripadvisor:before{content:\"\\f262\"}.fa-odnoklassniki:before{content:\"\\f263\"}.fa-odnoklassniki-square:before{content:\"\\f264\"}.fa-get-pocket:before{content:\"\\f265\"}.fa-wikipedia-w:before{content:\"\\f266\"}.fa-safari:before{content:\"\\f267\"}.fa-chrome:before{content:\"\\f268\"}.fa-firefox:before{content:\"\\f269\"}.fa-opera:before{content:\"\\f26a\"}.fa-internet-explorer:before{content:\"\\f26b\"}.fa-tv:before,.fa-television:before{content:\"\\f26c\"}.fa-contao:before{content:\"\\f26d\"}.fa-500px:before{content:\"\\f26e\"}.fa-amazon:before{content:\"\\f270\"}.fa-calendar-plus-o:before{content:\"\\f271\"}.fa-calendar-minus-o:before{content:\"\\f272\"}.fa-calendar-times-o:before{content:\"\\f273\"}.fa-calendar-check-o:before{content:\"\\f274\"}.fa-industry:before{content:\"\\f275\"}.fa-map-pin:before{content:\"\\f276\"}.fa-map-signs:before{content:\"\\f277\"}.fa-map-o:before{content:\"\\f278\"}.fa-map:before{content:\"\\f279\"}.fa-commenting:before{content:\"\\f27a\"}.fa-commenting-o:before{content:\"\\f27b\"}.fa-houzz:before{content:\"\\f27c\"}.fa-vimeo:before{content:\"\\f27d\"}.fa-black-tie:before{content:\"\\f27e\"}.fa-fonticons:before{content:\"\\f280\"}.fa-reddit-alien:before{content:\"\\f281\"}.fa-edge:before{content:\"\\f282\"}.fa-credit-card-alt:before{content:\"\\f283\"}.fa-codiepie:before{content:\"\\f284\"}.fa-modx:before{content:\"\\f285\"}.fa-fort-awesome:before{content:\"\\f286\"}.fa-usb:before{content:\"\\f287\"}.fa-product-hunt:before{content:\"\\f288\"}.fa-mixcloud:before{content:\"\\f289\"}.fa-scribd:before{content:\"\\f28a\"}.fa-pause-circle:before{content:\"\\f28b\"}.fa-pause-circle-o:before{content:\"\\f28c\"}.fa-stop-circle:before{content:\"\\f28d\"}.fa-stop-circle-o:before{content:\"\\f28e\"}.fa-shopping-bag:before{content:\"\\f290\"}.fa-shopping-basket:before{content:\"\\f291\"}.fa-hashtag:before{content:\"\\f292\"}.fa-bluetooth:before{content:\"\\f293\"}.fa-bluetooth-b:before{content:\"\\f294\"}.fa-percent:before{content:\"\\f295\"}\n","date":"2016-09-08T05:01:57.000Z","updated":"2016-09-08T05:01:57.000Z","path":"about/font-awesome/css/font-awesome.min.css","layout":"false","title":"","comments":1,"_id":"cisu7431n002637rqy8eqxbn2","content":"/*!\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:'FontAwesome';src:url('../fonts/fontawesome-webfont.eot?v=4.5.0');src:url('../fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'),url('../fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'),url('../fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'),url('../fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'),url('../fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');font-weight:normal;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1, 1);-ms-transform:scale(-1, 1);transform:scale(-1, 1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1, -1);-ms-transform:scale(1, -1);transform:scale(1, -1)}:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-flip-horizontal,:root .fa-flip-vertical{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:\"\\f000\"}.fa-music:before{content:\"\\f001\"}.fa-search:before{content:\"\\f002\"}.fa-envelope-o:before{content:\"\\f003\"}.fa-heart:before{content:\"\\f004\"}.fa-star:before{content:\"\\f005\"}.fa-star-o:before{content:\"\\f006\"}.fa-user:before{content:\"\\f007\"}.fa-film:before{content:\"\\f008\"}.fa-th-large:before{content:\"\\f009\"}.fa-th:before{content:\"\\f00a\"}.fa-th-list:before{content:\"\\f00b\"}.fa-check:before{content:\"\\f00c\"}.fa-remove:before,.fa-close:before,.fa-times:before{content:\"\\f00d\"}.fa-search-plus:before{content:\"\\f00e\"}.fa-search-minus:before{content:\"\\f010\"}.fa-power-off:before{content:\"\\f011\"}.fa-signal:before{content:\"\\f012\"}.fa-gear:before,.fa-cog:before{content:\"\\f013\"}.fa-trash-o:before{content:\"\\f014\"}.fa-home:before{content:\"\\f015\"}.fa-file-o:before{content:\"\\f016\"}.fa-clock-o:before{content:\"\\f017\"}.fa-road:before{content:\"\\f018\"}.fa-download:before{content:\"\\f019\"}.fa-arrow-circle-o-down:before{content:\"\\f01a\"}.fa-arrow-circle-o-up:before{content:\"\\f01b\"}.fa-inbox:before{content:\"\\f01c\"}.fa-play-circle-o:before{content:\"\\f01d\"}.fa-rotate-right:before,.fa-repeat:before{content:\"\\f01e\"}.fa-refresh:before{content:\"\\f021\"}.fa-list-alt:before{content:\"\\f022\"}.fa-lock:before{content:\"\\f023\"}.fa-flag:before{content:\"\\f024\"}.fa-headphones:before{content:\"\\f025\"}.fa-volume-off:before{content:\"\\f026\"}.fa-volume-down:before{content:\"\\f027\"}.fa-volume-up:before{content:\"\\f028\"}.fa-qrcode:before{content:\"\\f029\"}.fa-barcode:before{content:\"\\f02a\"}.fa-tag:before{content:\"\\f02b\"}.fa-tags:before{content:\"\\f02c\"}.fa-book:before{content:\"\\f02d\"}.fa-bookmark:before{content:\"\\f02e\"}.fa-print:before{content:\"\\f02f\"}.fa-camera:before{content:\"\\f030\"}.fa-font:before{content:\"\\f031\"}.fa-bold:before{content:\"\\f032\"}.fa-italic:before{content:\"\\f033\"}.fa-text-height:before{content:\"\\f034\"}.fa-text-width:before{content:\"\\f035\"}.fa-align-left:before{content:\"\\f036\"}.fa-align-center:before{content:\"\\f037\"}.fa-align-right:before{content:\"\\f038\"}.fa-align-justify:before{content:\"\\f039\"}.fa-list:before{content:\"\\f03a\"}.fa-dedent:before,.fa-outdent:before{content:\"\\f03b\"}.fa-indent:before{content:\"\\f03c\"}.fa-video-camera:before{content:\"\\f03d\"}.fa-photo:before,.fa-image:before,.fa-picture-o:before{content:\"\\f03e\"}.fa-pencil:before{content:\"\\f040\"}.fa-map-marker:before{content:\"\\f041\"}.fa-adjust:before{content:\"\\f042\"}.fa-tint:before{content:\"\\f043\"}.fa-edit:before,.fa-pencil-square-o:before{content:\"\\f044\"}.fa-share-square-o:before{content:\"\\f045\"}.fa-check-square-o:before{content:\"\\f046\"}.fa-arrows:before{content:\"\\f047\"}.fa-step-backward:before{content:\"\\f048\"}.fa-fast-backward:before{content:\"\\f049\"}.fa-backward:before{content:\"\\f04a\"}.fa-play:before{content:\"\\f04b\"}.fa-pause:before{content:\"\\f04c\"}.fa-stop:before{content:\"\\f04d\"}.fa-forward:before{content:\"\\f04e\"}.fa-fast-forward:before{content:\"\\f050\"}.fa-step-forward:before{content:\"\\f051\"}.fa-eject:before{content:\"\\f052\"}.fa-chevron-left:before{content:\"\\f053\"}.fa-chevron-right:before{content:\"\\f054\"}.fa-plus-circle:before{content:\"\\f055\"}.fa-minus-circle:before{content:\"\\f056\"}.fa-times-circle:before{content:\"\\f057\"}.fa-check-circle:before{content:\"\\f058\"}.fa-question-circle:before{content:\"\\f059\"}.fa-info-circle:before{content:\"\\f05a\"}.fa-crosshairs:before{content:\"\\f05b\"}.fa-times-circle-o:before{content:\"\\f05c\"}.fa-check-circle-o:before{content:\"\\f05d\"}.fa-ban:before{content:\"\\f05e\"}.fa-arrow-left:before{content:\"\\f060\"}.fa-arrow-right:before{content:\"\\f061\"}.fa-arrow-up:before{content:\"\\f062\"}.fa-arrow-down:before{content:\"\\f063\"}.fa-mail-forward:before,.fa-share:before{content:\"\\f064\"}.fa-expand:before{content:\"\\f065\"}.fa-compress:before{content:\"\\f066\"}.fa-plus:before{content:\"\\f067\"}.fa-minus:before{content:\"\\f068\"}.fa-asterisk:before{content:\"\\f069\"}.fa-exclamation-circle:before{content:\"\\f06a\"}.fa-gift:before{content:\"\\f06b\"}.fa-leaf:before{content:\"\\f06c\"}.fa-fire:before{content:\"\\f06d\"}.fa-eye:before{content:\"\\f06e\"}.fa-eye-slash:before{content:\"\\f070\"}.fa-warning:before,.fa-exclamation-triangle:before{content:\"\\f071\"}.fa-plane:before{content:\"\\f072\"}.fa-calendar:before{content:\"\\f073\"}.fa-random:before{content:\"\\f074\"}.fa-comment:before{content:\"\\f075\"}.fa-magnet:before{content:\"\\f076\"}.fa-chevron-up:before{content:\"\\f077\"}.fa-chevron-down:before{content:\"\\f078\"}.fa-retweet:before{content:\"\\f079\"}.fa-shopping-cart:before{content:\"\\f07a\"}.fa-folder:before{content:\"\\f07b\"}.fa-folder-open:before{content:\"\\f07c\"}.fa-arrows-v:before{content:\"\\f07d\"}.fa-arrows-h:before{content:\"\\f07e\"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:\"\\f080\"}.fa-twitter-square:before{content:\"\\f081\"}.fa-facebook-square:before{content:\"\\f082\"}.fa-camera-retro:before{content:\"\\f083\"}.fa-key:before{content:\"\\f084\"}.fa-gears:before,.fa-cogs:before{content:\"\\f085\"}.fa-comments:before{content:\"\\f086\"}.fa-thumbs-o-up:before{content:\"\\f087\"}.fa-thumbs-o-down:before{content:\"\\f088\"}.fa-star-half:before{content:\"\\f089\"}.fa-heart-o:before{content:\"\\f08a\"}.fa-sign-out:before{content:\"\\f08b\"}.fa-linkedin-square:before{content:\"\\f08c\"}.fa-thumb-tack:before{content:\"\\f08d\"}.fa-external-link:before{content:\"\\f08e\"}.fa-sign-in:before{content:\"\\f090\"}.fa-trophy:before{content:\"\\f091\"}.fa-github-square:before{content:\"\\f092\"}.fa-upload:before{content:\"\\f093\"}.fa-lemon-o:before{content:\"\\f094\"}.fa-phone:before{content:\"\\f095\"}.fa-square-o:before{content:\"\\f096\"}.fa-bookmark-o:before{content:\"\\f097\"}.fa-phone-square:before{content:\"\\f098\"}.fa-twitter:before{content:\"\\f099\"}.fa-facebook-f:before,.fa-facebook:before{content:\"\\f09a\"}.fa-github:before{content:\"\\f09b\"}.fa-unlock:before{content:\"\\f09c\"}.fa-credit-card:before{content:\"\\f09d\"}.fa-feed:before,.fa-rss:before{content:\"\\f09e\"}.fa-hdd-o:before{content:\"\\f0a0\"}.fa-bullhorn:before{content:\"\\f0a1\"}.fa-bell:before{content:\"\\f0f3\"}.fa-certificate:before{content:\"\\f0a3\"}.fa-hand-o-right:before{content:\"\\f0a4\"}.fa-hand-o-left:before{content:\"\\f0a5\"}.fa-hand-o-up:before{content:\"\\f0a6\"}.fa-hand-o-down:before{content:\"\\f0a7\"}.fa-arrow-circle-left:before{content:\"\\f0a8\"}.fa-arrow-circle-right:before{content:\"\\f0a9\"}.fa-arrow-circle-up:before{content:\"\\f0aa\"}.fa-arrow-circle-down:before{content:\"\\f0ab\"}.fa-globe:before{content:\"\\f0ac\"}.fa-wrench:before{content:\"\\f0ad\"}.fa-tasks:before{content:\"\\f0ae\"}.fa-filter:before{content:\"\\f0b0\"}.fa-briefcase:before{content:\"\\f0b1\"}.fa-arrows-alt:before{content:\"\\f0b2\"}.fa-group:before,.fa-users:before{content:\"\\f0c0\"}.fa-chain:before,.fa-link:before{content:\"\\f0c1\"}.fa-cloud:before{content:\"\\f0c2\"}.fa-flask:before{content:\"\\f0c3\"}.fa-cut:before,.fa-scissors:before{content:\"\\f0c4\"}.fa-copy:before,.fa-files-o:before{content:\"\\f0c5\"}.fa-paperclip:before{content:\"\\f0c6\"}.fa-save:before,.fa-floppy-o:before{content:\"\\f0c7\"}.fa-square:before{content:\"\\f0c8\"}.fa-navicon:before,.fa-reorder:before,.fa-bars:before{content:\"\\f0c9\"}.fa-list-ul:before{content:\"\\f0ca\"}.fa-list-ol:before{content:\"\\f0cb\"}.fa-strikethrough:before{content:\"\\f0cc\"}.fa-underline:before{content:\"\\f0cd\"}.fa-table:before{content:\"\\f0ce\"}.fa-magic:before{content:\"\\f0d0\"}.fa-truck:before{content:\"\\f0d1\"}.fa-pinterest:before{content:\"\\f0d2\"}.fa-pinterest-square:before{content:\"\\f0d3\"}.fa-google-plus-square:before{content:\"\\f0d4\"}.fa-google-plus:before{content:\"\\f0d5\"}.fa-money:before{content:\"\\f0d6\"}.fa-caret-down:before{content:\"\\f0d7\"}.fa-caret-up:before{content:\"\\f0d8\"}.fa-caret-left:before{content:\"\\f0d9\"}.fa-caret-right:before{content:\"\\f0da\"}.fa-columns:before{content:\"\\f0db\"}.fa-unsorted:before,.fa-sort:before{content:\"\\f0dc\"}.fa-sort-down:before,.fa-sort-desc:before{content:\"\\f0dd\"}.fa-sort-up:before,.fa-sort-asc:before{content:\"\\f0de\"}.fa-envelope:before{content:\"\\f0e0\"}.fa-linkedin:before{content:\"\\f0e1\"}.fa-rotate-left:before,.fa-undo:before{content:\"\\f0e2\"}.fa-legal:before,.fa-gavel:before{content:\"\\f0e3\"}.fa-dashboard:before,.fa-tachometer:before{content:\"\\f0e4\"}.fa-comment-o:before{content:\"\\f0e5\"}.fa-comments-o:before{content:\"\\f0e6\"}.fa-flash:before,.fa-bolt:before{content:\"\\f0e7\"}.fa-sitemap:before{content:\"\\f0e8\"}.fa-umbrella:before{content:\"\\f0e9\"}.fa-paste:before,.fa-clipboard:before{content:\"\\f0ea\"}.fa-lightbulb-o:before{content:\"\\f0eb\"}.fa-exchange:before{content:\"\\f0ec\"}.fa-cloud-download:before{content:\"\\f0ed\"}.fa-cloud-upload:before{content:\"\\f0ee\"}.fa-user-md:before{content:\"\\f0f0\"}.fa-stethoscope:before{content:\"\\f0f1\"}.fa-suitcase:before{content:\"\\f0f2\"}.fa-bell-o:before{content:\"\\f0a2\"}.fa-coffee:before{content:\"\\f0f4\"}.fa-cutlery:before{content:\"\\f0f5\"}.fa-file-text-o:before{content:\"\\f0f6\"}.fa-building-o:before{content:\"\\f0f7\"}.fa-hospital-o:before{content:\"\\f0f8\"}.fa-ambulance:before{content:\"\\f0f9\"}.fa-medkit:before{content:\"\\f0fa\"}.fa-fighter-jet:before{content:\"\\f0fb\"}.fa-beer:before{content:\"\\f0fc\"}.fa-h-square:before{content:\"\\f0fd\"}.fa-plus-square:before{content:\"\\f0fe\"}.fa-angle-double-left:before{content:\"\\f100\"}.fa-angle-double-right:before{content:\"\\f101\"}.fa-angle-double-up:before{content:\"\\f102\"}.fa-angle-double-down:before{content:\"\\f103\"}.fa-angle-left:before{content:\"\\f104\"}.fa-angle-right:before{content:\"\\f105\"}.fa-angle-up:before{content:\"\\f106\"}.fa-angle-down:before{content:\"\\f107\"}.fa-desktop:before{content:\"\\f108\"}.fa-laptop:before{content:\"\\f109\"}.fa-tablet:before{content:\"\\f10a\"}.fa-mobile-phone:before,.fa-mobile:before{content:\"\\f10b\"}.fa-circle-o:before{content:\"\\f10c\"}.fa-quote-left:before{content:\"\\f10d\"}.fa-quote-right:before{content:\"\\f10e\"}.fa-spinner:before{content:\"\\f110\"}.fa-circle:before{content:\"\\f111\"}.fa-mail-reply:before,.fa-reply:before{content:\"\\f112\"}.fa-github-alt:before{content:\"\\f113\"}.fa-folder-o:before{content:\"\\f114\"}.fa-folder-open-o:before{content:\"\\f115\"}.fa-smile-o:before{content:\"\\f118\"}.fa-frown-o:before{content:\"\\f119\"}.fa-meh-o:before{content:\"\\f11a\"}.fa-gamepad:before{content:\"\\f11b\"}.fa-keyboard-o:before{content:\"\\f11c\"}.fa-flag-o:before{content:\"\\f11d\"}.fa-flag-checkered:before{content:\"\\f11e\"}.fa-terminal:before{content:\"\\f120\"}.fa-code:before{content:\"\\f121\"}.fa-mail-reply-all:before,.fa-reply-all:before{content:\"\\f122\"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:\"\\f123\"}.fa-location-arrow:before{content:\"\\f124\"}.fa-crop:before{content:\"\\f125\"}.fa-code-fork:before{content:\"\\f126\"}.fa-unlink:before,.fa-chain-broken:before{content:\"\\f127\"}.fa-question:before{content:\"\\f128\"}.fa-info:before{content:\"\\f129\"}.fa-exclamation:before{content:\"\\f12a\"}.fa-superscript:before{content:\"\\f12b\"}.fa-subscript:before{content:\"\\f12c\"}.fa-eraser:before{content:\"\\f12d\"}.fa-puzzle-piece:before{content:\"\\f12e\"}.fa-microphone:before{content:\"\\f130\"}.fa-microphone-slash:before{content:\"\\f131\"}.fa-shield:before{content:\"\\f132\"}.fa-calendar-o:before{content:\"\\f133\"}.fa-fire-extinguisher:before{content:\"\\f134\"}.fa-rocket:before{content:\"\\f135\"}.fa-maxcdn:before{content:\"\\f136\"}.fa-chevron-circle-left:before{content:\"\\f137\"}.fa-chevron-circle-right:before{content:\"\\f138\"}.fa-chevron-circle-up:before{content:\"\\f139\"}.fa-chevron-circle-down:before{content:\"\\f13a\"}.fa-html5:before{content:\"\\f13b\"}.fa-css3:before{content:\"\\f13c\"}.fa-anchor:before{content:\"\\f13d\"}.fa-unlock-alt:before{content:\"\\f13e\"}.fa-bullseye:before{content:\"\\f140\"}.fa-ellipsis-h:before{content:\"\\f141\"}.fa-ellipsis-v:before{content:\"\\f142\"}.fa-rss-square:before{content:\"\\f143\"}.fa-play-circle:before{content:\"\\f144\"}.fa-ticket:before{content:\"\\f145\"}.fa-minus-square:before{content:\"\\f146\"}.fa-minus-square-o:before{content:\"\\f147\"}.fa-level-up:before{content:\"\\f148\"}.fa-level-down:before{content:\"\\f149\"}.fa-check-square:before{content:\"\\f14a\"}.fa-pencil-square:before{content:\"\\f14b\"}.fa-external-link-square:before{content:\"\\f14c\"}.fa-share-square:before{content:\"\\f14d\"}.fa-compass:before{content:\"\\f14e\"}.fa-toggle-down:before,.fa-caret-square-o-down:before{content:\"\\f150\"}.fa-toggle-up:before,.fa-caret-square-o-up:before{content:\"\\f151\"}.fa-toggle-right:before,.fa-caret-square-o-right:before{content:\"\\f152\"}.fa-euro:before,.fa-eur:before{content:\"\\f153\"}.fa-gbp:before{content:\"\\f154\"}.fa-dollar:before,.fa-usd:before{content:\"\\f155\"}.fa-rupee:before,.fa-inr:before{content:\"\\f156\"}.fa-cny:before,.fa-rmb:before,.fa-yen:before,.fa-jpy:before{content:\"\\f157\"}.fa-ruble:before,.fa-rouble:before,.fa-rub:before{content:\"\\f158\"}.fa-won:before,.fa-krw:before{content:\"\\f159\"}.fa-bitcoin:before,.fa-btc:before{content:\"\\f15a\"}.fa-file:before{content:\"\\f15b\"}.fa-file-text:before{content:\"\\f15c\"}.fa-sort-alpha-asc:before{content:\"\\f15d\"}.fa-sort-alpha-desc:before{content:\"\\f15e\"}.fa-sort-amount-asc:before{content:\"\\f160\"}.fa-sort-amount-desc:before{content:\"\\f161\"}.fa-sort-numeric-asc:before{content:\"\\f162\"}.fa-sort-numeric-desc:before{content:\"\\f163\"}.fa-thumbs-up:before{content:\"\\f164\"}.fa-thumbs-down:before{content:\"\\f165\"}.fa-youtube-square:before{content:\"\\f166\"}.fa-youtube:before{content:\"\\f167\"}.fa-xing:before{content:\"\\f168\"}.fa-xing-square:before{content:\"\\f169\"}.fa-youtube-play:before{content:\"\\f16a\"}.fa-dropbox:before{content:\"\\f16b\"}.fa-stack-overflow:before{content:\"\\f16c\"}.fa-instagram:before{content:\"\\f16d\"}.fa-flickr:before{content:\"\\f16e\"}.fa-adn:before{content:\"\\f170\"}.fa-bitbucket:before{content:\"\\f171\"}.fa-bitbucket-square:before{content:\"\\f172\"}.fa-tumblr:before{content:\"\\f173\"}.fa-tumblr-square:before{content:\"\\f174\"}.fa-long-arrow-down:before{content:\"\\f175\"}.fa-long-arrow-up:before{content:\"\\f176\"}.fa-long-arrow-left:before{content:\"\\f177\"}.fa-long-arrow-right:before{content:\"\\f178\"}.fa-apple:before{content:\"\\f179\"}.fa-windows:before{content:\"\\f17a\"}.fa-android:before{content:\"\\f17b\"}.fa-linux:before{content:\"\\f17c\"}.fa-dribbble:before{content:\"\\f17d\"}.fa-skype:before{content:\"\\f17e\"}.fa-foursquare:before{content:\"\\f180\"}.fa-trello:before{content:\"\\f181\"}.fa-female:before{content:\"\\f182\"}.fa-male:before{content:\"\\f183\"}.fa-gittip:before,.fa-gratipay:before{content:\"\\f184\"}.fa-sun-o:before{content:\"\\f185\"}.fa-moon-o:before{content:\"\\f186\"}.fa-archive:before{content:\"\\f187\"}.fa-bug:before{content:\"\\f188\"}.fa-vk:before{content:\"\\f189\"}.fa-weibo:before{content:\"\\f18a\"}.fa-renren:before{content:\"\\f18b\"}.fa-pagelines:before{content:\"\\f18c\"}.fa-stack-exchange:before{content:\"\\f18d\"}.fa-arrow-circle-o-right:before{content:\"\\f18e\"}.fa-arrow-circle-o-left:before{content:\"\\f190\"}.fa-toggle-left:before,.fa-caret-square-o-left:before{content:\"\\f191\"}.fa-dot-circle-o:before{content:\"\\f192\"}.fa-wheelchair:before{content:\"\\f193\"}.fa-vimeo-square:before{content:\"\\f194\"}.fa-turkish-lira:before,.fa-try:before{content:\"\\f195\"}.fa-plus-square-o:before{content:\"\\f196\"}.fa-space-shuttle:before{content:\"\\f197\"}.fa-slack:before{content:\"\\f198\"}.fa-envelope-square:before{content:\"\\f199\"}.fa-wordpress:before{content:\"\\f19a\"}.fa-openid:before{content:\"\\f19b\"}.fa-institution:before,.fa-bank:before,.fa-university:before{content:\"\\f19c\"}.fa-mortar-board:before,.fa-graduation-cap:before{content:\"\\f19d\"}.fa-yahoo:before{content:\"\\f19e\"}.fa-google:before{content:\"\\f1a0\"}.fa-reddit:before{content:\"\\f1a1\"}.fa-reddit-square:before{content:\"\\f1a2\"}.fa-stumbleupon-circle:before{content:\"\\f1a3\"}.fa-stumbleupon:before{content:\"\\f1a4\"}.fa-delicious:before{content:\"\\f1a5\"}.fa-digg:before{content:\"\\f1a6\"}.fa-pied-piper:before{content:\"\\f1a7\"}.fa-pied-piper-alt:before{content:\"\\f1a8\"}.fa-drupal:before{content:\"\\f1a9\"}.fa-joomla:before{content:\"\\f1aa\"}.fa-language:before{content:\"\\f1ab\"}.fa-fax:before{content:\"\\f1ac\"}.fa-building:before{content:\"\\f1ad\"}.fa-child:before{content:\"\\f1ae\"}.fa-paw:before{content:\"\\f1b0\"}.fa-spoon:before{content:\"\\f1b1\"}.fa-cube:before{content:\"\\f1b2\"}.fa-cubes:before{content:\"\\f1b3\"}.fa-behance:before{content:\"\\f1b4\"}.fa-behance-square:before{content:\"\\f1b5\"}.fa-steam:before{content:\"\\f1b6\"}.fa-steam-square:before{content:\"\\f1b7\"}.fa-recycle:before{content:\"\\f1b8\"}.fa-automobile:before,.fa-car:before{content:\"\\f1b9\"}.fa-cab:before,.fa-taxi:before{content:\"\\f1ba\"}.fa-tree:before{content:\"\\f1bb\"}.fa-spotify:before{content:\"\\f1bc\"}.fa-deviantart:before{content:\"\\f1bd\"}.fa-soundcloud:before{content:\"\\f1be\"}.fa-database:before{content:\"\\f1c0\"}.fa-file-pdf-o:before{content:\"\\f1c1\"}.fa-file-word-o:before{content:\"\\f1c2\"}.fa-file-excel-o:before{content:\"\\f1c3\"}.fa-file-powerpoint-o:before{content:\"\\f1c4\"}.fa-file-photo-o:before,.fa-file-picture-o:before,.fa-file-image-o:before{content:\"\\f1c5\"}.fa-file-zip-o:before,.fa-file-archive-o:before{content:\"\\f1c6\"}.fa-file-sound-o:before,.fa-file-audio-o:before{content:\"\\f1c7\"}.fa-file-movie-o:before,.fa-file-video-o:before{content:\"\\f1c8\"}.fa-file-code-o:before{content:\"\\f1c9\"}.fa-vine:before{content:\"\\f1ca\"}.fa-codepen:before{content:\"\\f1cb\"}.fa-jsfiddle:before{content:\"\\f1cc\"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-saver:before,.fa-support:before,.fa-life-ring:before{content:\"\\f1cd\"}.fa-circle-o-notch:before{content:\"\\f1ce\"}.fa-ra:before,.fa-rebel:before{content:\"\\f1d0\"}.fa-ge:before,.fa-empire:before{content:\"\\f1d1\"}.fa-git-square:before{content:\"\\f1d2\"}.fa-git:before{content:\"\\f1d3\"}.fa-y-combinator-square:before,.fa-yc-square:before,.fa-hacker-news:before{content:\"\\f1d4\"}.fa-tencent-weibo:before{content:\"\\f1d5\"}.fa-qq:before{content:\"\\f1d6\"}.fa-wechat:before,.fa-weixin:before{content:\"\\f1d7\"}.fa-send:before,.fa-paper-plane:before{content:\"\\f1d8\"}.fa-send-o:before,.fa-paper-plane-o:before{content:\"\\f1d9\"}.fa-history:before{content:\"\\f1da\"}.fa-circle-thin:before{content:\"\\f1db\"}.fa-header:before{content:\"\\f1dc\"}.fa-paragraph:before{content:\"\\f1dd\"}.fa-sliders:before{content:\"\\f1de\"}.fa-share-alt:before{content:\"\\f1e0\"}.fa-share-alt-square:before{content:\"\\f1e1\"}.fa-bomb:before{content:\"\\f1e2\"}.fa-soccer-ball-o:before,.fa-futbol-o:before{content:\"\\f1e3\"}.fa-tty:before{content:\"\\f1e4\"}.fa-binoculars:before{content:\"\\f1e5\"}.fa-plug:before{content:\"\\f1e6\"}.fa-slideshare:before{content:\"\\f1e7\"}.fa-twitch:before{content:\"\\f1e8\"}.fa-yelp:before{content:\"\\f1e9\"}.fa-newspaper-o:before{content:\"\\f1ea\"}.fa-wifi:before{content:\"\\f1eb\"}.fa-calculator:before{content:\"\\f1ec\"}.fa-paypal:before{content:\"\\f1ed\"}.fa-google-wallet:before{content:\"\\f1ee\"}.fa-cc-visa:before{content:\"\\f1f0\"}.fa-cc-mastercard:before{content:\"\\f1f1\"}.fa-cc-discover:before{content:\"\\f1f2\"}.fa-cc-amex:before{content:\"\\f1f3\"}.fa-cc-paypal:before{content:\"\\f1f4\"}.fa-cc-stripe:before{content:\"\\f1f5\"}.fa-bell-slash:before{content:\"\\f1f6\"}.fa-bell-slash-o:before{content:\"\\f1f7\"}.fa-trash:before{content:\"\\f1f8\"}.fa-copyright:before{content:\"\\f1f9\"}.fa-at:before{content:\"\\f1fa\"}.fa-eyedropper:before{content:\"\\f1fb\"}.fa-paint-brush:before{content:\"\\f1fc\"}.fa-birthday-cake:before{content:\"\\f1fd\"}.fa-area-chart:before{content:\"\\f1fe\"}.fa-pie-chart:before{content:\"\\f200\"}.fa-line-chart:before{content:\"\\f201\"}.fa-lastfm:before{content:\"\\f202\"}.fa-lastfm-square:before{content:\"\\f203\"}.fa-toggle-off:before{content:\"\\f204\"}.fa-toggle-on:before{content:\"\\f205\"}.fa-bicycle:before{content:\"\\f206\"}.fa-bus:before{content:\"\\f207\"}.fa-ioxhost:before{content:\"\\f208\"}.fa-angellist:before{content:\"\\f209\"}.fa-cc:before{content:\"\\f20a\"}.fa-shekel:before,.fa-sheqel:before,.fa-ils:before{content:\"\\f20b\"}.fa-meanpath:before{content:\"\\f20c\"}.fa-buysellads:before{content:\"\\f20d\"}.fa-connectdevelop:before{content:\"\\f20e\"}.fa-dashcube:before{content:\"\\f210\"}.fa-forumbee:before{content:\"\\f211\"}.fa-leanpub:before{content:\"\\f212\"}.fa-sellsy:before{content:\"\\f213\"}.fa-shirtsinbulk:before{content:\"\\f214\"}.fa-simplybuilt:before{content:\"\\f215\"}.fa-skyatlas:before{content:\"\\f216\"}.fa-cart-plus:before{content:\"\\f217\"}.fa-cart-arrow-down:before{content:\"\\f218\"}.fa-diamond:before{content:\"\\f219\"}.fa-ship:before{content:\"\\f21a\"}.fa-user-secret:before{content:\"\\f21b\"}.fa-motorcycle:before{content:\"\\f21c\"}.fa-street-view:before{content:\"\\f21d\"}.fa-heartbeat:before{content:\"\\f21e\"}.fa-venus:before{content:\"\\f221\"}.fa-mars:before{content:\"\\f222\"}.fa-mercury:before{content:\"\\f223\"}.fa-intersex:before,.fa-transgender:before{content:\"\\f224\"}.fa-transgender-alt:before{content:\"\\f225\"}.fa-venus-double:before{content:\"\\f226\"}.fa-mars-double:before{content:\"\\f227\"}.fa-venus-mars:before{content:\"\\f228\"}.fa-mars-stroke:before{content:\"\\f229\"}.fa-mars-stroke-v:before{content:\"\\f22a\"}.fa-mars-stroke-h:before{content:\"\\f22b\"}.fa-neuter:before{content:\"\\f22c\"}.fa-genderless:before{content:\"\\f22d\"}.fa-facebook-official:before{content:\"\\f230\"}.fa-pinterest-p:before{content:\"\\f231\"}.fa-whatsapp:before{content:\"\\f232\"}.fa-server:before{content:\"\\f233\"}.fa-user-plus:before{content:\"\\f234\"}.fa-user-times:before{content:\"\\f235\"}.fa-hotel:before,.fa-bed:before{content:\"\\f236\"}.fa-viacoin:before{content:\"\\f237\"}.fa-train:before{content:\"\\f238\"}.fa-subway:before{content:\"\\f239\"}.fa-medium:before{content:\"\\f23a\"}.fa-yc:before,.fa-y-combinator:before{content:\"\\f23b\"}.fa-optin-monster:before{content:\"\\f23c\"}.fa-opencart:before{content:\"\\f23d\"}.fa-expeditedssl:before{content:\"\\f23e\"}.fa-battery-4:before,.fa-battery-full:before{content:\"\\f240\"}.fa-battery-3:before,.fa-battery-three-quarters:before{content:\"\\f241\"}.fa-battery-2:before,.fa-battery-half:before{content:\"\\f242\"}.fa-battery-1:before,.fa-battery-quarter:before{content:\"\\f243\"}.fa-battery-0:before,.fa-battery-empty:before{content:\"\\f244\"}.fa-mouse-pointer:before{content:\"\\f245\"}.fa-i-cursor:before{content:\"\\f246\"}.fa-object-group:before{content:\"\\f247\"}.fa-object-ungroup:before{content:\"\\f248\"}.fa-sticky-note:before{content:\"\\f249\"}.fa-sticky-note-o:before{content:\"\\f24a\"}.fa-cc-jcb:before{content:\"\\f24b\"}.fa-cc-diners-club:before{content:\"\\f24c\"}.fa-clone:before{content:\"\\f24d\"}.fa-balance-scale:before{content:\"\\f24e\"}.fa-hourglass-o:before{content:\"\\f250\"}.fa-hourglass-1:before,.fa-hourglass-start:before{content:\"\\f251\"}.fa-hourglass-2:before,.fa-hourglass-half:before{content:\"\\f252\"}.fa-hourglass-3:before,.fa-hourglass-end:before{content:\"\\f253\"}.fa-hourglass:before{content:\"\\f254\"}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:\"\\f255\"}.fa-hand-stop-o:before,.fa-hand-paper-o:before{content:\"\\f256\"}.fa-hand-scissors-o:before{content:\"\\f257\"}.fa-hand-lizard-o:before{content:\"\\f258\"}.fa-hand-spock-o:before{content:\"\\f259\"}.fa-hand-pointer-o:before{content:\"\\f25a\"}.fa-hand-peace-o:before{content:\"\\f25b\"}.fa-trademark:before{content:\"\\f25c\"}.fa-registered:before{content:\"\\f25d\"}.fa-creative-commons:before{content:\"\\f25e\"}.fa-gg:before{content:\"\\f260\"}.fa-gg-circle:before{content:\"\\f261\"}.fa-tripadvisor:before{content:\"\\f262\"}.fa-odnoklassniki:before{content:\"\\f263\"}.fa-odnoklassniki-square:before{content:\"\\f264\"}.fa-get-pocket:before{content:\"\\f265\"}.fa-wikipedia-w:before{content:\"\\f266\"}.fa-safari:before{content:\"\\f267\"}.fa-chrome:before{content:\"\\f268\"}.fa-firefox:before{content:\"\\f269\"}.fa-opera:before{content:\"\\f26a\"}.fa-internet-explorer:before{content:\"\\f26b\"}.fa-tv:before,.fa-television:before{content:\"\\f26c\"}.fa-contao:before{content:\"\\f26d\"}.fa-500px:before{content:\"\\f26e\"}.fa-amazon:before{content:\"\\f270\"}.fa-calendar-plus-o:before{content:\"\\f271\"}.fa-calendar-minus-o:before{content:\"\\f272\"}.fa-calendar-times-o:before{content:\"\\f273\"}.fa-calendar-check-o:before{content:\"\\f274\"}.fa-industry:before{content:\"\\f275\"}.fa-map-pin:before{content:\"\\f276\"}.fa-map-signs:before{content:\"\\f277\"}.fa-map-o:before{content:\"\\f278\"}.fa-map:before{content:\"\\f279\"}.fa-commenting:before{content:\"\\f27a\"}.fa-commenting-o:before{content:\"\\f27b\"}.fa-houzz:before{content:\"\\f27c\"}.fa-vimeo:before{content:\"\\f27d\"}.fa-black-tie:before{content:\"\\f27e\"}.fa-fonticons:before{content:\"\\f280\"}.fa-reddit-alien:before{content:\"\\f281\"}.fa-edge:before{content:\"\\f282\"}.fa-credit-card-alt:before{content:\"\\f283\"}.fa-codiepie:before{content:\"\\f284\"}.fa-modx:before{content:\"\\f285\"}.fa-fort-awesome:before{content:\"\\f286\"}.fa-usb:before{content:\"\\f287\"}.fa-product-hunt:before{content:\"\\f288\"}.fa-mixcloud:before{content:\"\\f289\"}.fa-scribd:before{content:\"\\f28a\"}.fa-pause-circle:before{content:\"\\f28b\"}.fa-pause-circle-o:before{content:\"\\f28c\"}.fa-stop-circle:before{content:\"\\f28d\"}.fa-stop-circle-o:before{content:\"\\f28e\"}.fa-shopping-bag:before{content:\"\\f290\"}.fa-shopping-basket:before{content:\"\\f291\"}.fa-hashtag:before{content:\"\\f292\"}.fa-bluetooth:before{content:\"\\f293\"}.fa-bluetooth-b:before{content:\"\\f294\"}.fa-percent:before{content:\"\\f295\"}\n","excerpt":"","more":"/*!\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:'FontAwesome';src:url('../fonts/fontawesome-webfont.eot?v=4.5.0');src:url('../fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'),url('../fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'),url('../fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'),url('../fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'),url('../fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');font-weight:normal;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1, 1);-ms-transform:scale(-1, 1);transform:scale(-1, 1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1, -1);-ms-transform:scale(1, -1);transform:scale(1, -1)}:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-flip-horizontal,:root .fa-flip-vertical{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:\"\\f000\"}.fa-music:before{content:\"\\f001\"}.fa-search:before{content:\"\\f002\"}.fa-envelope-o:before{content:\"\\f003\"}.fa-heart:before{content:\"\\f004\"}.fa-star:before{content:\"\\f005\"}.fa-star-o:before{content:\"\\f006\"}.fa-user:before{content:\"\\f007\"}.fa-film:before{content:\"\\f008\"}.fa-th-large:before{content:\"\\f009\"}.fa-th:before{content:\"\\f00a\"}.fa-th-list:before{content:\"\\f00b\"}.fa-check:before{content:\"\\f00c\"}.fa-remove:before,.fa-close:before,.fa-times:before{content:\"\\f00d\"}.fa-search-plus:before{content:\"\\f00e\"}.fa-search-minus:before{content:\"\\f010\"}.fa-power-off:before{content:\"\\f011\"}.fa-signal:before{content:\"\\f012\"}.fa-gear:before,.fa-cog:before{content:\"\\f013\"}.fa-trash-o:before{content:\"\\f014\"}.fa-home:before{content:\"\\f015\"}.fa-file-o:before{content:\"\\f016\"}.fa-clock-o:before{content:\"\\f017\"}.fa-road:before{content:\"\\f018\"}.fa-download:before{content:\"\\f019\"}.fa-arrow-circle-o-down:before{content:\"\\f01a\"}.fa-arrow-circle-o-up:before{content:\"\\f01b\"}.fa-inbox:before{content:\"\\f01c\"}.fa-play-circle-o:before{content:\"\\f01d\"}.fa-rotate-right:before,.fa-repeat:before{content:\"\\f01e\"}.fa-refresh:before{content:\"\\f021\"}.fa-list-alt:before{content:\"\\f022\"}.fa-lock:before{content:\"\\f023\"}.fa-flag:before{content:\"\\f024\"}.fa-headphones:before{content:\"\\f025\"}.fa-volume-off:before{content:\"\\f026\"}.fa-volume-down:before{content:\"\\f027\"}.fa-volume-up:before{content:\"\\f028\"}.fa-qrcode:before{content:\"\\f029\"}.fa-barcode:before{content:\"\\f02a\"}.fa-tag:before{content:\"\\f02b\"}.fa-tags:before{content:\"\\f02c\"}.fa-book:before{content:\"\\f02d\"}.fa-bookmark:before{content:\"\\f02e\"}.fa-print:before{content:\"\\f02f\"}.fa-camera:before{content:\"\\f030\"}.fa-font:before{content:\"\\f031\"}.fa-bold:before{content:\"\\f032\"}.fa-italic:before{content:\"\\f033\"}.fa-text-height:before{content:\"\\f034\"}.fa-text-width:before{content:\"\\f035\"}.fa-align-left:before{content:\"\\f036\"}.fa-align-center:before{content:\"\\f037\"}.fa-align-right:before{content:\"\\f038\"}.fa-align-justify:before{content:\"\\f039\"}.fa-list:before{content:\"\\f03a\"}.fa-dedent:before,.fa-outdent:before{content:\"\\f03b\"}.fa-indent:before{content:\"\\f03c\"}.fa-video-camera:before{content:\"\\f03d\"}.fa-photo:before,.fa-image:before,.fa-picture-o:before{content:\"\\f03e\"}.fa-pencil:before{content:\"\\f040\"}.fa-map-marker:before{content:\"\\f041\"}.fa-adjust:before{content:\"\\f042\"}.fa-tint:before{content:\"\\f043\"}.fa-edit:before,.fa-pencil-square-o:before{content:\"\\f044\"}.fa-share-square-o:before{content:\"\\f045\"}.fa-check-square-o:before{content:\"\\f046\"}.fa-arrows:before{content:\"\\f047\"}.fa-step-backward:before{content:\"\\f048\"}.fa-fast-backward:before{content:\"\\f049\"}.fa-backward:before{content:\"\\f04a\"}.fa-play:before{content:\"\\f04b\"}.fa-pause:before{content:\"\\f04c\"}.fa-stop:before{content:\"\\f04d\"}.fa-forward:before{content:\"\\f04e\"}.fa-fast-forward:before{content:\"\\f050\"}.fa-step-forward:before{content:\"\\f051\"}.fa-eject:before{content:\"\\f052\"}.fa-chevron-left:before{content:\"\\f053\"}.fa-chevron-right:before{content:\"\\f054\"}.fa-plus-circle:before{content:\"\\f055\"}.fa-minus-circle:before{content:\"\\f056\"}.fa-times-circle:before{content:\"\\f057\"}.fa-check-circle:before{content:\"\\f058\"}.fa-question-circle:before{content:\"\\f059\"}.fa-info-circle:before{content:\"\\f05a\"}.fa-crosshairs:before{content:\"\\f05b\"}.fa-times-circle-o:before{content:\"\\f05c\"}.fa-check-circle-o:before{content:\"\\f05d\"}.fa-ban:before{content:\"\\f05e\"}.fa-arrow-left:before{content:\"\\f060\"}.fa-arrow-right:before{content:\"\\f061\"}.fa-arrow-up:before{content:\"\\f062\"}.fa-arrow-down:before{content:\"\\f063\"}.fa-mail-forward:before,.fa-share:before{content:\"\\f064\"}.fa-expand:before{content:\"\\f065\"}.fa-compress:before{content:\"\\f066\"}.fa-plus:before{content:\"\\f067\"}.fa-minus:before{content:\"\\f068\"}.fa-asterisk:before{content:\"\\f069\"}.fa-exclamation-circle:before{content:\"\\f06a\"}.fa-gift:before{content:\"\\f06b\"}.fa-leaf:before{content:\"\\f06c\"}.fa-fire:before{content:\"\\f06d\"}.fa-eye:before{content:\"\\f06e\"}.fa-eye-slash:before{content:\"\\f070\"}.fa-warning:before,.fa-exclamation-triangle:before{content:\"\\f071\"}.fa-plane:before{content:\"\\f072\"}.fa-calendar:before{content:\"\\f073\"}.fa-random:before{content:\"\\f074\"}.fa-comment:before{content:\"\\f075\"}.fa-magnet:before{content:\"\\f076\"}.fa-chevron-up:before{content:\"\\f077\"}.fa-chevron-down:before{content:\"\\f078\"}.fa-retweet:before{content:\"\\f079\"}.fa-shopping-cart:before{content:\"\\f07a\"}.fa-folder:before{content:\"\\f07b\"}.fa-folder-open:before{content:\"\\f07c\"}.fa-arrows-v:before{content:\"\\f07d\"}.fa-arrows-h:before{content:\"\\f07e\"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:\"\\f080\"}.fa-twitter-square:before{content:\"\\f081\"}.fa-facebook-square:before{content:\"\\f082\"}.fa-camera-retro:before{content:\"\\f083\"}.fa-key:before{content:\"\\f084\"}.fa-gears:before,.fa-cogs:before{content:\"\\f085\"}.fa-comments:before{content:\"\\f086\"}.fa-thumbs-o-up:before{content:\"\\f087\"}.fa-thumbs-o-down:before{content:\"\\f088\"}.fa-star-half:before{content:\"\\f089\"}.fa-heart-o:before{content:\"\\f08a\"}.fa-sign-out:before{content:\"\\f08b\"}.fa-linkedin-square:before{content:\"\\f08c\"}.fa-thumb-tack:before{content:\"\\f08d\"}.fa-external-link:before{content:\"\\f08e\"}.fa-sign-in:before{content:\"\\f090\"}.fa-trophy:before{content:\"\\f091\"}.fa-github-square:before{content:\"\\f092\"}.fa-upload:before{content:\"\\f093\"}.fa-lemon-o:before{content:\"\\f094\"}.fa-phone:before{content:\"\\f095\"}.fa-square-o:before{content:\"\\f096\"}.fa-bookmark-o:before{content:\"\\f097\"}.fa-phone-square:before{content:\"\\f098\"}.fa-twitter:before{content:\"\\f099\"}.fa-facebook-f:before,.fa-facebook:before{content:\"\\f09a\"}.fa-github:before{content:\"\\f09b\"}.fa-unlock:before{content:\"\\f09c\"}.fa-credit-card:before{content:\"\\f09d\"}.fa-feed:before,.fa-rss:before{content:\"\\f09e\"}.fa-hdd-o:before{content:\"\\f0a0\"}.fa-bullhorn:before{content:\"\\f0a1\"}.fa-bell:before{content:\"\\f0f3\"}.fa-certificate:before{content:\"\\f0a3\"}.fa-hand-o-right:before{content:\"\\f0a4\"}.fa-hand-o-left:before{content:\"\\f0a5\"}.fa-hand-o-up:before{content:\"\\f0a6\"}.fa-hand-o-down:before{content:\"\\f0a7\"}.fa-arrow-circle-left:before{content:\"\\f0a8\"}.fa-arrow-circle-right:before{content:\"\\f0a9\"}.fa-arrow-circle-up:before{content:\"\\f0aa\"}.fa-arrow-circle-down:before{content:\"\\f0ab\"}.fa-globe:before{content:\"\\f0ac\"}.fa-wrench:before{content:\"\\f0ad\"}.fa-tasks:before{content:\"\\f0ae\"}.fa-filter:before{content:\"\\f0b0\"}.fa-briefcase:before{content:\"\\f0b1\"}.fa-arrows-alt:before{content:\"\\f0b2\"}.fa-group:before,.fa-users:before{content:\"\\f0c0\"}.fa-chain:before,.fa-link:before{content:\"\\f0c1\"}.fa-cloud:before{content:\"\\f0c2\"}.fa-flask:before{content:\"\\f0c3\"}.fa-cut:before,.fa-scissors:before{content:\"\\f0c4\"}.fa-copy:before,.fa-files-o:before{content:\"\\f0c5\"}.fa-paperclip:before{content:\"\\f0c6\"}.fa-save:before,.fa-floppy-o:before{content:\"\\f0c7\"}.fa-square:before{content:\"\\f0c8\"}.fa-navicon:before,.fa-reorder:before,.fa-bars:before{content:\"\\f0c9\"}.fa-list-ul:before{content:\"\\f0ca\"}.fa-list-ol:before{content:\"\\f0cb\"}.fa-strikethrough:before{content:\"\\f0cc\"}.fa-underline:before{content:\"\\f0cd\"}.fa-table:before{content:\"\\f0ce\"}.fa-magic:before{content:\"\\f0d0\"}.fa-truck:before{content:\"\\f0d1\"}.fa-pinterest:before{content:\"\\f0d2\"}.fa-pinterest-square:before{content:\"\\f0d3\"}.fa-google-plus-square:before{content:\"\\f0d4\"}.fa-google-plus:before{content:\"\\f0d5\"}.fa-money:before{content:\"\\f0d6\"}.fa-caret-down:before{content:\"\\f0d7\"}.fa-caret-up:before{content:\"\\f0d8\"}.fa-caret-left:before{content:\"\\f0d9\"}.fa-caret-right:before{content:\"\\f0da\"}.fa-columns:before{content:\"\\f0db\"}.fa-unsorted:before,.fa-sort:before{content:\"\\f0dc\"}.fa-sort-down:before,.fa-sort-desc:before{content:\"\\f0dd\"}.fa-sort-up:before,.fa-sort-asc:before{content:\"\\f0de\"}.fa-envelope:before{content:\"\\f0e0\"}.fa-linkedin:before{content:\"\\f0e1\"}.fa-rotate-left:before,.fa-undo:before{content:\"\\f0e2\"}.fa-legal:before,.fa-gavel:before{content:\"\\f0e3\"}.fa-dashboard:before,.fa-tachometer:before{content:\"\\f0e4\"}.fa-comment-o:before{content:\"\\f0e5\"}.fa-comments-o:before{content:\"\\f0e6\"}.fa-flash:before,.fa-bolt:before{content:\"\\f0e7\"}.fa-sitemap:before{content:\"\\f0e8\"}.fa-umbrella:before{content:\"\\f0e9\"}.fa-paste:before,.fa-clipboard:before{content:\"\\f0ea\"}.fa-lightbulb-o:before{content:\"\\f0eb\"}.fa-exchange:before{content:\"\\f0ec\"}.fa-cloud-download:before{content:\"\\f0ed\"}.fa-cloud-upload:before{content:\"\\f0ee\"}.fa-user-md:before{content:\"\\f0f0\"}.fa-stethoscope:before{content:\"\\f0f1\"}.fa-suitcase:before{content:\"\\f0f2\"}.fa-bell-o:before{content:\"\\f0a2\"}.fa-coffee:before{content:\"\\f0f4\"}.fa-cutlery:before{content:\"\\f0f5\"}.fa-file-text-o:before{content:\"\\f0f6\"}.fa-building-o:before{content:\"\\f0f7\"}.fa-hospital-o:before{content:\"\\f0f8\"}.fa-ambulance:before{content:\"\\f0f9\"}.fa-medkit:before{content:\"\\f0fa\"}.fa-fighter-jet:before{content:\"\\f0fb\"}.fa-beer:before{content:\"\\f0fc\"}.fa-h-square:before{content:\"\\f0fd\"}.fa-plus-square:before{content:\"\\f0fe\"}.fa-angle-double-left:before{content:\"\\f100\"}.fa-angle-double-right:before{content:\"\\f101\"}.fa-angle-double-up:before{content:\"\\f102\"}.fa-angle-double-down:before{content:\"\\f103\"}.fa-angle-left:before{content:\"\\f104\"}.fa-angle-right:before{content:\"\\f105\"}.fa-angle-up:before{content:\"\\f106\"}.fa-angle-down:before{content:\"\\f107\"}.fa-desktop:before{content:\"\\f108\"}.fa-laptop:before{content:\"\\f109\"}.fa-tablet:before{content:\"\\f10a\"}.fa-mobile-phone:before,.fa-mobile:before{content:\"\\f10b\"}.fa-circle-o:before{content:\"\\f10c\"}.fa-quote-left:before{content:\"\\f10d\"}.fa-quote-right:before{content:\"\\f10e\"}.fa-spinner:before{content:\"\\f110\"}.fa-circle:before{content:\"\\f111\"}.fa-mail-reply:before,.fa-reply:before{content:\"\\f112\"}.fa-github-alt:before{content:\"\\f113\"}.fa-folder-o:before{content:\"\\f114\"}.fa-folder-open-o:before{content:\"\\f115\"}.fa-smile-o:before{content:\"\\f118\"}.fa-frown-o:before{content:\"\\f119\"}.fa-meh-o:before{content:\"\\f11a\"}.fa-gamepad:before{content:\"\\f11b\"}.fa-keyboard-o:before{content:\"\\f11c\"}.fa-flag-o:before{content:\"\\f11d\"}.fa-flag-checkered:before{content:\"\\f11e\"}.fa-terminal:before{content:\"\\f120\"}.fa-code:before{content:\"\\f121\"}.fa-mail-reply-all:before,.fa-reply-all:before{content:\"\\f122\"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:\"\\f123\"}.fa-location-arrow:before{content:\"\\f124\"}.fa-crop:before{content:\"\\f125\"}.fa-code-fork:before{content:\"\\f126\"}.fa-unlink:before,.fa-chain-broken:before{content:\"\\f127\"}.fa-question:before{content:\"\\f128\"}.fa-info:before{content:\"\\f129\"}.fa-exclamation:before{content:\"\\f12a\"}.fa-superscript:before{content:\"\\f12b\"}.fa-subscript:before{content:\"\\f12c\"}.fa-eraser:before{content:\"\\f12d\"}.fa-puzzle-piece:before{content:\"\\f12e\"}.fa-microphone:before{content:\"\\f130\"}.fa-microphone-slash:before{content:\"\\f131\"}.fa-shield:before{content:\"\\f132\"}.fa-calendar-o:before{content:\"\\f133\"}.fa-fire-extinguisher:before{content:\"\\f134\"}.fa-rocket:before{content:\"\\f135\"}.fa-maxcdn:before{content:\"\\f136\"}.fa-chevron-circle-left:before{content:\"\\f137\"}.fa-chevron-circle-right:before{content:\"\\f138\"}.fa-chevron-circle-up:before{content:\"\\f139\"}.fa-chevron-circle-down:before{content:\"\\f13a\"}.fa-html5:before{content:\"\\f13b\"}.fa-css3:before{content:\"\\f13c\"}.fa-anchor:before{content:\"\\f13d\"}.fa-unlock-alt:before{content:\"\\f13e\"}.fa-bullseye:before{content:\"\\f140\"}.fa-ellipsis-h:before{content:\"\\f141\"}.fa-ellipsis-v:before{content:\"\\f142\"}.fa-rss-square:before{content:\"\\f143\"}.fa-play-circle:before{content:\"\\f144\"}.fa-ticket:before{content:\"\\f145\"}.fa-minus-square:before{content:\"\\f146\"}.fa-minus-square-o:before{content:\"\\f147\"}.fa-level-up:before{content:\"\\f148\"}.fa-level-down:before{content:\"\\f149\"}.fa-check-square:before{content:\"\\f14a\"}.fa-pencil-square:before{content:\"\\f14b\"}.fa-external-link-square:before{content:\"\\f14c\"}.fa-share-square:before{content:\"\\f14d\"}.fa-compass:before{content:\"\\f14e\"}.fa-toggle-down:before,.fa-caret-square-o-down:before{content:\"\\f150\"}.fa-toggle-up:before,.fa-caret-square-o-up:before{content:\"\\f151\"}.fa-toggle-right:before,.fa-caret-square-o-right:before{content:\"\\f152\"}.fa-euro:before,.fa-eur:before{content:\"\\f153\"}.fa-gbp:before{content:\"\\f154\"}.fa-dollar:before,.fa-usd:before{content:\"\\f155\"}.fa-rupee:before,.fa-inr:before{content:\"\\f156\"}.fa-cny:before,.fa-rmb:before,.fa-yen:before,.fa-jpy:before{content:\"\\f157\"}.fa-ruble:before,.fa-rouble:before,.fa-rub:before{content:\"\\f158\"}.fa-won:before,.fa-krw:before{content:\"\\f159\"}.fa-bitcoin:before,.fa-btc:before{content:\"\\f15a\"}.fa-file:before{content:\"\\f15b\"}.fa-file-text:before{content:\"\\f15c\"}.fa-sort-alpha-asc:before{content:\"\\f15d\"}.fa-sort-alpha-desc:before{content:\"\\f15e\"}.fa-sort-amount-asc:before{content:\"\\f160\"}.fa-sort-amount-desc:before{content:\"\\f161\"}.fa-sort-numeric-asc:before{content:\"\\f162\"}.fa-sort-numeric-desc:before{content:\"\\f163\"}.fa-thumbs-up:before{content:\"\\f164\"}.fa-thumbs-down:before{content:\"\\f165\"}.fa-youtube-square:before{content:\"\\f166\"}.fa-youtube:before{content:\"\\f167\"}.fa-xing:before{content:\"\\f168\"}.fa-xing-square:before{content:\"\\f169\"}.fa-youtube-play:before{content:\"\\f16a\"}.fa-dropbox:before{content:\"\\f16b\"}.fa-stack-overflow:before{content:\"\\f16c\"}.fa-instagram:before{content:\"\\f16d\"}.fa-flickr:before{content:\"\\f16e\"}.fa-adn:before{content:\"\\f170\"}.fa-bitbucket:before{content:\"\\f171\"}.fa-bitbucket-square:before{content:\"\\f172\"}.fa-tumblr:before{content:\"\\f173\"}.fa-tumblr-square:before{content:\"\\f174\"}.fa-long-arrow-down:before{content:\"\\f175\"}.fa-long-arrow-up:before{content:\"\\f176\"}.fa-long-arrow-left:before{content:\"\\f177\"}.fa-long-arrow-right:before{content:\"\\f178\"}.fa-apple:before{content:\"\\f179\"}.fa-windows:before{content:\"\\f17a\"}.fa-android:before{content:\"\\f17b\"}.fa-linux:before{content:\"\\f17c\"}.fa-dribbble:before{content:\"\\f17d\"}.fa-skype:before{content:\"\\f17e\"}.fa-foursquare:before{content:\"\\f180\"}.fa-trello:before{content:\"\\f181\"}.fa-female:before{content:\"\\f182\"}.fa-male:before{content:\"\\f183\"}.fa-gittip:before,.fa-gratipay:before{content:\"\\f184\"}.fa-sun-o:before{content:\"\\f185\"}.fa-moon-o:before{content:\"\\f186\"}.fa-archive:before{content:\"\\f187\"}.fa-bug:before{content:\"\\f188\"}.fa-vk:before{content:\"\\f189\"}.fa-weibo:before{content:\"\\f18a\"}.fa-renren:before{content:\"\\f18b\"}.fa-pagelines:before{content:\"\\f18c\"}.fa-stack-exchange:before{content:\"\\f18d\"}.fa-arrow-circle-o-right:before{content:\"\\f18e\"}.fa-arrow-circle-o-left:before{content:\"\\f190\"}.fa-toggle-left:before,.fa-caret-square-o-left:before{content:\"\\f191\"}.fa-dot-circle-o:before{content:\"\\f192\"}.fa-wheelchair:before{content:\"\\f193\"}.fa-vimeo-square:before{content:\"\\f194\"}.fa-turkish-lira:before,.fa-try:before{content:\"\\f195\"}.fa-plus-square-o:before{content:\"\\f196\"}.fa-space-shuttle:before{content:\"\\f197\"}.fa-slack:before{content:\"\\f198\"}.fa-envelope-square:before{content:\"\\f199\"}.fa-wordpress:before{content:\"\\f19a\"}.fa-openid:before{content:\"\\f19b\"}.fa-institution:before,.fa-bank:before,.fa-university:before{content:\"\\f19c\"}.fa-mortar-board:before,.fa-graduation-cap:before{content:\"\\f19d\"}.fa-yahoo:before{content:\"\\f19e\"}.fa-google:before{content:\"\\f1a0\"}.fa-reddit:before{content:\"\\f1a1\"}.fa-reddit-square:before{content:\"\\f1a2\"}.fa-stumbleupon-circle:before{content:\"\\f1a3\"}.fa-stumbleupon:before{content:\"\\f1a4\"}.fa-delicious:before{content:\"\\f1a5\"}.fa-digg:before{content:\"\\f1a6\"}.fa-pied-piper:before{content:\"\\f1a7\"}.fa-pied-piper-alt:before{content:\"\\f1a8\"}.fa-drupal:before{content:\"\\f1a9\"}.fa-joomla:before{content:\"\\f1aa\"}.fa-language:before{content:\"\\f1ab\"}.fa-fax:before{content:\"\\f1ac\"}.fa-building:before{content:\"\\f1ad\"}.fa-child:before{content:\"\\f1ae\"}.fa-paw:before{content:\"\\f1b0\"}.fa-spoon:before{content:\"\\f1b1\"}.fa-cube:before{content:\"\\f1b2\"}.fa-cubes:before{content:\"\\f1b3\"}.fa-behance:before{content:\"\\f1b4\"}.fa-behance-square:before{content:\"\\f1b5\"}.fa-steam:before{content:\"\\f1b6\"}.fa-steam-square:before{content:\"\\f1b7\"}.fa-recycle:before{content:\"\\f1b8\"}.fa-automobile:before,.fa-car:before{content:\"\\f1b9\"}.fa-cab:before,.fa-taxi:before{content:\"\\f1ba\"}.fa-tree:before{content:\"\\f1bb\"}.fa-spotify:before{content:\"\\f1bc\"}.fa-deviantart:before{content:\"\\f1bd\"}.fa-soundcloud:before{content:\"\\f1be\"}.fa-database:before{content:\"\\f1c0\"}.fa-file-pdf-o:before{content:\"\\f1c1\"}.fa-file-word-o:before{content:\"\\f1c2\"}.fa-file-excel-o:before{content:\"\\f1c3\"}.fa-file-powerpoint-o:before{content:\"\\f1c4\"}.fa-file-photo-o:before,.fa-file-picture-o:before,.fa-file-image-o:before{content:\"\\f1c5\"}.fa-file-zip-o:before,.fa-file-archive-o:before{content:\"\\f1c6\"}.fa-file-sound-o:before,.fa-file-audio-o:before{content:\"\\f1c7\"}.fa-file-movie-o:before,.fa-file-video-o:before{content:\"\\f1c8\"}.fa-file-code-o:before{content:\"\\f1c9\"}.fa-vine:before{content:\"\\f1ca\"}.fa-codepen:before{content:\"\\f1cb\"}.fa-jsfiddle:before{content:\"\\f1cc\"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-saver:before,.fa-support:before,.fa-life-ring:before{content:\"\\f1cd\"}.fa-circle-o-notch:before{content:\"\\f1ce\"}.fa-ra:before,.fa-rebel:before{content:\"\\f1d0\"}.fa-ge:before,.fa-empire:before{content:\"\\f1d1\"}.fa-git-square:before{content:\"\\f1d2\"}.fa-git:before{content:\"\\f1d3\"}.fa-y-combinator-square:before,.fa-yc-square:before,.fa-hacker-news:before{content:\"\\f1d4\"}.fa-tencent-weibo:before{content:\"\\f1d5\"}.fa-qq:before{content:\"\\f1d6\"}.fa-wechat:before,.fa-weixin:before{content:\"\\f1d7\"}.fa-send:before,.fa-paper-plane:before{content:\"\\f1d8\"}.fa-send-o:before,.fa-paper-plane-o:before{content:\"\\f1d9\"}.fa-history:before{content:\"\\f1da\"}.fa-circle-thin:before{content:\"\\f1db\"}.fa-header:before{content:\"\\f1dc\"}.fa-paragraph:before{content:\"\\f1dd\"}.fa-sliders:before{content:\"\\f1de\"}.fa-share-alt:before{content:\"\\f1e0\"}.fa-share-alt-square:before{content:\"\\f1e1\"}.fa-bomb:before{content:\"\\f1e2\"}.fa-soccer-ball-o:before,.fa-futbol-o:before{content:\"\\f1e3\"}.fa-tty:before{content:\"\\f1e4\"}.fa-binoculars:before{content:\"\\f1e5\"}.fa-plug:before{content:\"\\f1e6\"}.fa-slideshare:before{content:\"\\f1e7\"}.fa-twitch:before{content:\"\\f1e8\"}.fa-yelp:before{content:\"\\f1e9\"}.fa-newspaper-o:before{content:\"\\f1ea\"}.fa-wifi:before{content:\"\\f1eb\"}.fa-calculator:before{content:\"\\f1ec\"}.fa-paypal:before{content:\"\\f1ed\"}.fa-google-wallet:before{content:\"\\f1ee\"}.fa-cc-visa:before{content:\"\\f1f0\"}.fa-cc-mastercard:before{content:\"\\f1f1\"}.fa-cc-discover:before{content:\"\\f1f2\"}.fa-cc-amex:before{content:\"\\f1f3\"}.fa-cc-paypal:before{content:\"\\f1f4\"}.fa-cc-stripe:before{content:\"\\f1f5\"}.fa-bell-slash:before{content:\"\\f1f6\"}.fa-bell-slash-o:before{content:\"\\f1f7\"}.fa-trash:before{content:\"\\f1f8\"}.fa-copyright:before{content:\"\\f1f9\"}.fa-at:before{content:\"\\f1fa\"}.fa-eyedropper:before{content:\"\\f1fb\"}.fa-paint-brush:before{content:\"\\f1fc\"}.fa-birthday-cake:before{content:\"\\f1fd\"}.fa-area-chart:before{content:\"\\f1fe\"}.fa-pie-chart:before{content:\"\\f200\"}.fa-line-chart:before{content:\"\\f201\"}.fa-lastfm:before{content:\"\\f202\"}.fa-lastfm-square:before{content:\"\\f203\"}.fa-toggle-off:before{content:\"\\f204\"}.fa-toggle-on:before{content:\"\\f205\"}.fa-bicycle:before{content:\"\\f206\"}.fa-bus:before{content:\"\\f207\"}.fa-ioxhost:before{content:\"\\f208\"}.fa-angellist:before{content:\"\\f209\"}.fa-cc:before{content:\"\\f20a\"}.fa-shekel:before,.fa-sheqel:before,.fa-ils:before{content:\"\\f20b\"}.fa-meanpath:before{content:\"\\f20c\"}.fa-buysellads:before{content:\"\\f20d\"}.fa-connectdevelop:before{content:\"\\f20e\"}.fa-dashcube:before{content:\"\\f210\"}.fa-forumbee:before{content:\"\\f211\"}.fa-leanpub:before{content:\"\\f212\"}.fa-sellsy:before{content:\"\\f213\"}.fa-shirtsinbulk:before{content:\"\\f214\"}.fa-simplybuilt:before{content:\"\\f215\"}.fa-skyatlas:before{content:\"\\f216\"}.fa-cart-plus:before{content:\"\\f217\"}.fa-cart-arrow-down:before{content:\"\\f218\"}.fa-diamond:before{content:\"\\f219\"}.fa-ship:before{content:\"\\f21a\"}.fa-user-secret:before{content:\"\\f21b\"}.fa-motorcycle:before{content:\"\\f21c\"}.fa-street-view:before{content:\"\\f21d\"}.fa-heartbeat:before{content:\"\\f21e\"}.fa-venus:before{content:\"\\f221\"}.fa-mars:before{content:\"\\f222\"}.fa-mercury:before{content:\"\\f223\"}.fa-intersex:before,.fa-transgender:before{content:\"\\f224\"}.fa-transgender-alt:before{content:\"\\f225\"}.fa-venus-double:before{content:\"\\f226\"}.fa-mars-double:before{content:\"\\f227\"}.fa-venus-mars:before{content:\"\\f228\"}.fa-mars-stroke:before{content:\"\\f229\"}.fa-mars-stroke-v:before{content:\"\\f22a\"}.fa-mars-stroke-h:before{content:\"\\f22b\"}.fa-neuter:before{content:\"\\f22c\"}.fa-genderless:before{content:\"\\f22d\"}.fa-facebook-official:before{content:\"\\f230\"}.fa-pinterest-p:before{content:\"\\f231\"}.fa-whatsapp:before{content:\"\\f232\"}.fa-server:before{content:\"\\f233\"}.fa-user-plus:before{content:\"\\f234\"}.fa-user-times:before{content:\"\\f235\"}.fa-hotel:before,.fa-bed:before{content:\"\\f236\"}.fa-viacoin:before{content:\"\\f237\"}.fa-train:before{content:\"\\f238\"}.fa-subway:before{content:\"\\f239\"}.fa-medium:before{content:\"\\f23a\"}.fa-yc:before,.fa-y-combinator:before{content:\"\\f23b\"}.fa-optin-monster:before{content:\"\\f23c\"}.fa-opencart:before{content:\"\\f23d\"}.fa-expeditedssl:before{content:\"\\f23e\"}.fa-battery-4:before,.fa-battery-full:before{content:\"\\f240\"}.fa-battery-3:before,.fa-battery-three-quarters:before{content:\"\\f241\"}.fa-battery-2:before,.fa-battery-half:before{content:\"\\f242\"}.fa-battery-1:before,.fa-battery-quarter:before{content:\"\\f243\"}.fa-battery-0:before,.fa-battery-empty:before{content:\"\\f244\"}.fa-mouse-pointer:before{content:\"\\f245\"}.fa-i-cursor:before{content:\"\\f246\"}.fa-object-group:before{content:\"\\f247\"}.fa-object-ungroup:before{content:\"\\f248\"}.fa-sticky-note:before{content:\"\\f249\"}.fa-sticky-note-o:before{content:\"\\f24a\"}.fa-cc-jcb:before{content:\"\\f24b\"}.fa-cc-diners-club:before{content:\"\\f24c\"}.fa-clone:before{content:\"\\f24d\"}.fa-balance-scale:before{content:\"\\f24e\"}.fa-hourglass-o:before{content:\"\\f250\"}.fa-hourglass-1:before,.fa-hourglass-start:before{content:\"\\f251\"}.fa-hourglass-2:before,.fa-hourglass-half:before{content:\"\\f252\"}.fa-hourglass-3:before,.fa-hourglass-end:before{content:\"\\f253\"}.fa-hourglass:before{content:\"\\f254\"}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:\"\\f255\"}.fa-hand-stop-o:before,.fa-hand-paper-o:before{content:\"\\f256\"}.fa-hand-scissors-o:before{content:\"\\f257\"}.fa-hand-lizard-o:before{content:\"\\f258\"}.fa-hand-spock-o:before{content:\"\\f259\"}.fa-hand-pointer-o:before{content:\"\\f25a\"}.fa-hand-peace-o:before{content:\"\\f25b\"}.fa-trademark:before{content:\"\\f25c\"}.fa-registered:before{content:\"\\f25d\"}.fa-creative-commons:before{content:\"\\f25e\"}.fa-gg:before{content:\"\\f260\"}.fa-gg-circle:before{content:\"\\f261\"}.fa-tripadvisor:before{content:\"\\f262\"}.fa-odnoklassniki:before{content:\"\\f263\"}.fa-odnoklassniki-square:before{content:\"\\f264\"}.fa-get-pocket:before{content:\"\\f265\"}.fa-wikipedia-w:before{content:\"\\f266\"}.fa-safari:before{content:\"\\f267\"}.fa-chrome:before{content:\"\\f268\"}.fa-firefox:before{content:\"\\f269\"}.fa-opera:before{content:\"\\f26a\"}.fa-internet-explorer:before{content:\"\\f26b\"}.fa-tv:before,.fa-television:before{content:\"\\f26c\"}.fa-contao:before{content:\"\\f26d\"}.fa-500px:before{content:\"\\f26e\"}.fa-amazon:before{content:\"\\f270\"}.fa-calendar-plus-o:before{content:\"\\f271\"}.fa-calendar-minus-o:before{content:\"\\f272\"}.fa-calendar-times-o:before{content:\"\\f273\"}.fa-calendar-check-o:before{content:\"\\f274\"}.fa-industry:before{content:\"\\f275\"}.fa-map-pin:before{content:\"\\f276\"}.fa-map-signs:before{content:\"\\f277\"}.fa-map-o:before{content:\"\\f278\"}.fa-map:before{content:\"\\f279\"}.fa-commenting:before{content:\"\\f27a\"}.fa-commenting-o:before{content:\"\\f27b\"}.fa-houzz:before{content:\"\\f27c\"}.fa-vimeo:before{content:\"\\f27d\"}.fa-black-tie:before{content:\"\\f27e\"}.fa-fonticons:before{content:\"\\f280\"}.fa-reddit-alien:before{content:\"\\f281\"}.fa-edge:before{content:\"\\f282\"}.fa-credit-card-alt:before{content:\"\\f283\"}.fa-codiepie:before{content:\"\\f284\"}.fa-modx:before{content:\"\\f285\"}.fa-fort-awesome:before{content:\"\\f286\"}.fa-usb:before{content:\"\\f287\"}.fa-product-hunt:before{content:\"\\f288\"}.fa-mixcloud:before{content:\"\\f289\"}.fa-scribd:before{content:\"\\f28a\"}.fa-pause-circle:before{content:\"\\f28b\"}.fa-pause-circle-o:before{content:\"\\f28c\"}.fa-stop-circle:before{content:\"\\f28d\"}.fa-stop-circle-o:before{content:\"\\f28e\"}.fa-shopping-bag:before{content:\"\\f290\"}.fa-shopping-basket:before{content:\"\\f291\"}.fa-hashtag:before{content:\"\\f292\"}.fa-bluetooth:before{content:\"\\f293\"}.fa-bluetooth-b:before{content:\"\\f294\"}.fa-percent:before{content:\"\\f295\"}\n"}],"Post":[{"title":"let's-learn-RxJS","author":"Drake Leung","date":"2016-04-23T14:08:44.000Z","foreword":null,"_content":"\n## Observable 和 Generator 的区别\n\n我们先来看一下 Generator 的例子：\n\n```javascript\n// Producer\nfunction* baz () {\n  console.log('Hello')\n  yield 42\n  yield 100\n  yield 200\n}\n\n// Consumer\nconst interator = baz()\ncosole.log(interator.next().value)\ncosole.log(interator.next().value)\ncosole.log(interator.next().value)\n```\n\n可以发现，**Consumer 决定了什么时候返回值**。这种风格叫做 *PULL* 。\n\n在回头看看我们的 Observable ：\n**Producer 决定了什么时候返回值**。这种风格叫做 *PUSH* 。\n\n```javascript\n// Producer\nconst bar = Rx.Observable.create(observer => {\n  console.log('Hello')\n  observer.next(42)\n  observer.next(100)\n  observer.next(200)\n  setTimeout(() => {\n    observer.next(3000)\n  }, 1000)\n})\n\n// Comsumer\nbar.subscribe(x => console.log(x))\n```\n\n## Observable 也可以抛出错误\n\n为了提高代码的健壮性，我们通常需要 `try-catch` 我们代码可能发生的错误。\n\n```javascript\nfunction foo () {\n  console.log('Hello')\n  throw new Error('invalid something')\n  return 42\n}\n\ntry {\n  console.log(foo.call())\n} catch (err) {\n  console.log(`Something wrong happened: ${err}`)\n}\n\nconsole.log('This here still runs')\n```\n\n那么我们怎么在 Observable 里面抛出以及捕捉错误呢？\n很简单。\n\n```javascript\nconst bar = Rx.Observable.create(observer => {\n  try {\n    console.log('Hello')\n    observer.next(42)\n    observer.next(100)\n    observer.next(200)\n    setTimeout(() => {\n      observer.next(3000)\n    }, 1000)\n  } catch (err) {\n    observer.error(new Error('bad')) // 抛出错误\n  }\n})\n\n// Comsumer\nbar.subscribe(\n  x => console.log(x),\n  err => console.log(`Something went wrong ${err}`) // 捕捉错误\n)\n```\n\n## Observable can complete\n\n我们知道，Observable 可以返回一个值，也可以抛出捕捉错误。\n现在我告诉你，我们还可以指定 Observable 什么时候 complete(结束)。complete 之后，就不能再返回任何值了。\n\n```javascript\nconst bar = Rx.Observable.create(observer => {\n  try {\n    console.log('Hello')\n    observer.next(42)\n    observer.complete() // complete observable\n    \n    // the following will not emit, \n    // because the Observable has complete\n    setTimeout(() => {\n      observer.next(3000)\n    }, 1000)\n  } catch (err) {\n    observer.error(new Error('bad')) \n  }\n})\n\nbar.subscribe(\n  x => console.log(x),\n  err => console.log(`Something went wrong ${err}`),\n  () => console.log('done') // complete callback\n)\n\n// 'Hello'\n// 42\n// 'done'\n```\n\n上面的例子中，并没有在 log `3000` ，因为在此之间我们的 Observable 已经 complete 了。\n\n","source":"_drafts/let-us-learn-RxJS.md","raw":"---\ntitle: \"let's-learn-RxJS\"\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-04-23 22:08:44\nforeword:\n---\n\n## Observable 和 Generator 的区别\n\n我们先来看一下 Generator 的例子：\n\n```javascript\n// Producer\nfunction* baz () {\n  console.log('Hello')\n  yield 42\n  yield 100\n  yield 200\n}\n\n// Consumer\nconst interator = baz()\ncosole.log(interator.next().value)\ncosole.log(interator.next().value)\ncosole.log(interator.next().value)\n```\n\n可以发现，**Consumer 决定了什么时候返回值**。这种风格叫做 *PULL* 。\n\n在回头看看我们的 Observable ：\n**Producer 决定了什么时候返回值**。这种风格叫做 *PUSH* 。\n\n```javascript\n// Producer\nconst bar = Rx.Observable.create(observer => {\n  console.log('Hello')\n  observer.next(42)\n  observer.next(100)\n  observer.next(200)\n  setTimeout(() => {\n    observer.next(3000)\n  }, 1000)\n})\n\n// Comsumer\nbar.subscribe(x => console.log(x))\n```\n\n## Observable 也可以抛出错误\n\n为了提高代码的健壮性，我们通常需要 `try-catch` 我们代码可能发生的错误。\n\n```javascript\nfunction foo () {\n  console.log('Hello')\n  throw new Error('invalid something')\n  return 42\n}\n\ntry {\n  console.log(foo.call())\n} catch (err) {\n  console.log(`Something wrong happened: ${err}`)\n}\n\nconsole.log('This here still runs')\n```\n\n那么我们怎么在 Observable 里面抛出以及捕捉错误呢？\n很简单。\n\n```javascript\nconst bar = Rx.Observable.create(observer => {\n  try {\n    console.log('Hello')\n    observer.next(42)\n    observer.next(100)\n    observer.next(200)\n    setTimeout(() => {\n      observer.next(3000)\n    }, 1000)\n  } catch (err) {\n    observer.error(new Error('bad')) // 抛出错误\n  }\n})\n\n// Comsumer\nbar.subscribe(\n  x => console.log(x),\n  err => console.log(`Something went wrong ${err}`) // 捕捉错误\n)\n```\n\n## Observable can complete\n\n我们知道，Observable 可以返回一个值，也可以抛出捕捉错误。\n现在我告诉你，我们还可以指定 Observable 什么时候 complete(结束)。complete 之后，就不能再返回任何值了。\n\n```javascript\nconst bar = Rx.Observable.create(observer => {\n  try {\n    console.log('Hello')\n    observer.next(42)\n    observer.complete() // complete observable\n    \n    // the following will not emit, \n    // because the Observable has complete\n    setTimeout(() => {\n      observer.next(3000)\n    }, 1000)\n  } catch (err) {\n    observer.error(new Error('bad')) \n  }\n})\n\nbar.subscribe(\n  x => console.log(x),\n  err => console.log(`Something went wrong ${err}`),\n  () => console.log('done') // complete callback\n)\n\n// 'Hello'\n// 42\n// 'done'\n```\n\n上面的例子中，并没有在 log `3000` ，因为在此之间我们的 Observable 已经 complete 了。\n\n","slug":"let-us-learn-RxJS","published":0,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742y8000137rq3mzbfzlj","content":"<h2>Observable 和 Generator 的区别</h2>\n<p>我们先来看一下 Generator 的例子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Producer</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">baz</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">42</span></div><div class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">100</span></div><div class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">200</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Consumer</span></div><div class=\"line\"><span class=\"keyword\">const</span> interator = baz()</div><div class=\"line\">cosole.log(interator.next().value)</div><div class=\"line\">cosole.log(interator.next().value)</div><div class=\"line\">cosole.log(interator.next().value)</div></pre></td></tr></table></figure>\n<p>可以发现，<strong>Consumer 决定了什么时候返回值</strong>。这种风格叫做 <em>PULL</em> 。</p>\n<p>在回头看看我们的 Observable ：<br>\n<strong>Producer 决定了什么时候返回值</strong>。这种风格叫做 <em>PUSH</em> 。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Producer</span></div><div class=\"line\"><span class=\"keyword\">const</span> bar = Rx.Observable.create(observer =&gt; &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">  observer.next(<span class=\"number\">42</span>)</div><div class=\"line\">  observer.next(<span class=\"number\">100</span>)</div><div class=\"line\">  observer.next(<span class=\"number\">200</span>)</div><div class=\"line\">  setTimeout(() =&gt; &#123;</div><div class=\"line\">    observer.next(<span class=\"number\">3000</span>)</div><div class=\"line\">  &#125;, <span class=\"number\">1000</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Comsumer</span></div><div class=\"line\">bar.subscribe(x =&gt; <span class=\"built_in\">console</span>.log(x))</div></pre></td></tr></table></figure>\n<h2>Observable 也可以抛出错误</h2>\n<p>为了提高代码的健壮性，我们通常需要 <code>try-catch</code> 我们代码可能发生的错误。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'invalid something'</span>)</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">42</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">try</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(foo.call())</div><div class=\"line\">&#125; <span class=\"keyword\">catch</span> (err) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Something wrong happened: <span class=\"subst\">$&#123;err&#125;</span>`</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'This here still runs'</span>)</div></pre></td></tr></table></figure>\n<p>那么我们怎么在 Observable 里面抛出以及捕捉错误呢？<br>\n很简单。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> bar = Rx.Observable.create(observer =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">    observer.next(<span class=\"number\">42</span>)</div><div class=\"line\">    observer.next(<span class=\"number\">100</span>)</div><div class=\"line\">    observer.next(<span class=\"number\">200</span>)</div><div class=\"line\">    setTimeout(() =&gt; &#123;</div><div class=\"line\">      observer.next(<span class=\"number\">3000</span>)</div><div class=\"line\">    &#125;, <span class=\"number\">1000</span>)</div><div class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</div><div class=\"line\">    observer.error(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'bad'</span>)) <span class=\"comment\">// 抛出错误</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Comsumer</span></div><div class=\"line\">bar.subscribe(</div><div class=\"line\">  x =&gt; <span class=\"built_in\">console</span>.log(x),</div><div class=\"line\">  err =&gt; <span class=\"built_in\">console</span>.log(<span class=\"string\">`Something went wrong <span class=\"subst\">$&#123;err&#125;</span>`</span>) <span class=\"comment\">// 捕捉错误</span></div><div class=\"line\">)</div></pre></td></tr></table></figure>\n<h2>Observable can complete</h2>\n<p>我们知道，Observable 可以返回一个值，也可以抛出捕捉错误。<br>\n现在我告诉你，我们还可以指定 Observable 什么时候 complete(结束)。complete 之后，就不能再返回任何值了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> bar = Rx.Observable.create(observer =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">    observer.next(<span class=\"number\">42</span>)</div><div class=\"line\">    observer.complete() <span class=\"comment\">// complete observable</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">// the following will not emit, </span></div><div class=\"line\">    <span class=\"comment\">// because the Observable has complete</span></div><div class=\"line\">    setTimeout(() =&gt; &#123;</div><div class=\"line\">      observer.next(<span class=\"number\">3000</span>)</div><div class=\"line\">    &#125;, <span class=\"number\">1000</span>)</div><div class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</div><div class=\"line\">    observer.error(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'bad'</span>)) </div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">bar.subscribe(</div><div class=\"line\">  x =&gt; <span class=\"built_in\">console</span>.log(x),</div><div class=\"line\">  err =&gt; <span class=\"built_in\">console</span>.log(<span class=\"string\">`Something went wrong <span class=\"subst\">$&#123;err&#125;</span>`</span>),</div><div class=\"line\">  () =&gt; <span class=\"built_in\">console</span>.log(<span class=\"string\">'done'</span>) <span class=\"comment\">// complete callback</span></div><div class=\"line\">)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 'Hello'</span></div><div class=\"line\"><span class=\"comment\">// 42</span></div><div class=\"line\"><span class=\"comment\">// 'done'</span></div></pre></td></tr></table></figure>\n<p>上面的例子中，并没有在 log <code>3000</code> ，因为在此之间我们的 Observable 已经 complete 了。</p>\n","excerpt":"","more":"<h2>Observable 和 Generator 的区别</h2>\n<p>我们先来看一下 Generator 的例子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Producer</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">baz</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">42</span></div><div class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">100</span></div><div class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">200</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Consumer</span></div><div class=\"line\"><span class=\"keyword\">const</span> interator = baz()</div><div class=\"line\">cosole.log(interator.next().value)</div><div class=\"line\">cosole.log(interator.next().value)</div><div class=\"line\">cosole.log(interator.next().value)</div></pre></td></tr></table></figure>\n<p>可以发现，<strong>Consumer 决定了什么时候返回值</strong>。这种风格叫做 <em>PULL</em> 。</p>\n<p>在回头看看我们的 Observable ：<br>\n<strong>Producer 决定了什么时候返回值</strong>。这种风格叫做 <em>PUSH</em> 。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Producer</span></div><div class=\"line\"><span class=\"keyword\">const</span> bar = Rx.Observable.create(observer =&gt; &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">  observer.next(<span class=\"number\">42</span>)</div><div class=\"line\">  observer.next(<span class=\"number\">100</span>)</div><div class=\"line\">  observer.next(<span class=\"number\">200</span>)</div><div class=\"line\">  setTimeout(() =&gt; &#123;</div><div class=\"line\">    observer.next(<span class=\"number\">3000</span>)</div><div class=\"line\">  &#125;, <span class=\"number\">1000</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Comsumer</span></div><div class=\"line\">bar.subscribe(x =&gt; <span class=\"built_in\">console</span>.log(x))</div></pre></td></tr></table></figure>\n<h2>Observable 也可以抛出错误</h2>\n<p>为了提高代码的健壮性，我们通常需要 <code>try-catch</code> 我们代码可能发生的错误。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'invalid something'</span>)</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">42</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">try</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(foo.call())</div><div class=\"line\">&#125; <span class=\"keyword\">catch</span> (err) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Something wrong happened: <span class=\"subst\">$&#123;err&#125;</span>`</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'This here still runs'</span>)</div></pre></td></tr></table></figure>\n<p>那么我们怎么在 Observable 里面抛出以及捕捉错误呢？<br>\n很简单。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> bar = Rx.Observable.create(observer =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">    observer.next(<span class=\"number\">42</span>)</div><div class=\"line\">    observer.next(<span class=\"number\">100</span>)</div><div class=\"line\">    observer.next(<span class=\"number\">200</span>)</div><div class=\"line\">    setTimeout(() =&gt; &#123;</div><div class=\"line\">      observer.next(<span class=\"number\">3000</span>)</div><div class=\"line\">    &#125;, <span class=\"number\">1000</span>)</div><div class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</div><div class=\"line\">    observer.error(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'bad'</span>)) <span class=\"comment\">// 抛出错误</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Comsumer</span></div><div class=\"line\">bar.subscribe(</div><div class=\"line\">  x =&gt; <span class=\"built_in\">console</span>.log(x),</div><div class=\"line\">  err =&gt; <span class=\"built_in\">console</span>.log(<span class=\"string\">`Something went wrong <span class=\"subst\">$&#123;err&#125;</span>`</span>) <span class=\"comment\">// 捕捉错误</span></div><div class=\"line\">)</div></pre></td></tr></table></figure>\n<h2>Observable can complete</h2>\n<p>我们知道，Observable 可以返回一个值，也可以抛出捕捉错误。<br>\n现在我告诉你，我们还可以指定 Observable 什么时候 complete(结束)。complete 之后，就不能再返回任何值了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> bar = Rx.Observable.create(observer =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello'</span>)</div><div class=\"line\">    observer.next(<span class=\"number\">42</span>)</div><div class=\"line\">    observer.complete() <span class=\"comment\">// complete observable</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">// the following will not emit, </span></div><div class=\"line\">    <span class=\"comment\">// because the Observable has complete</span></div><div class=\"line\">    setTimeout(() =&gt; &#123;</div><div class=\"line\">      observer.next(<span class=\"number\">3000</span>)</div><div class=\"line\">    &#125;, <span class=\"number\">1000</span>)</div><div class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</div><div class=\"line\">    observer.error(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'bad'</span>)) </div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">bar.subscribe(</div><div class=\"line\">  x =&gt; <span class=\"built_in\">console</span>.log(x),</div><div class=\"line\">  err =&gt; <span class=\"built_in\">console</span>.log(<span class=\"string\">`Something went wrong <span class=\"subst\">$&#123;err&#125;</span>`</span>),</div><div class=\"line\">  () =&gt; <span class=\"built_in\">console</span>.log(<span class=\"string\">'done'</span>) <span class=\"comment\">// complete callback</span></div><div class=\"line\">)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 'Hello'</span></div><div class=\"line\"><span class=\"comment\">// 42</span></div><div class=\"line\"><span class=\"comment\">// 'done'</span></div></pre></td></tr></table></figure>\n<p>上面的例子中，并没有在 log <code>3000</code> ，因为在此之间我们的 Observable 已经 complete 了。</p>\n"},{"title":"5 Ways To Make A Sticky Footer","author":"Drake Leung","date":"2016-01-20T07:19:06.000Z","foreword":"总结一下创建Sticky Footer的5种方法。","_content":"\n*Sticky Footer*在内容展示的网站都会用到。比如blog，xx的主页等等。\n\n## What is Sticky Footer\n\n为了简单起见，我们不妨假设我们的`index.html`是这样的:\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Ways to make a sticky foote</title>\n</head>\n<body>\n  <main></main>\n  <footer></footer>\n</body>\n</html>\n```\n\n那么，如下面的图所示，图`a`和`b`都不是*Sticky Footer*.\n\n![](http://ww2.sinaimg.cn/large/7f85b91egw1f0asb7siypj20go088q4x.jpg)\n\n因为图`a`的页脚的后面还有空白部分。我们想要的应该是页脚就是在页面的最底部。\n\n那么图`b`为什么不是呢？他不是在页面的最底部吗？没错，但是我们想要的是只有当**scroller bar**滑到最底部的时候，才会出现页脚。\n\n像下面的图`c`和`d`才是我们的*Sticky Footer*:\n![](http://ww2.sinaimg.cn/large/7f85b91egw1f0asq75p07j20gl09i0vh.jpg)\n\n## Ways to Sticky Footer\n废话少说，下面会介绍几种创建*Sticky Footer*的方法。\n\n我们会从最简单的方法开始，但最简单的不一定是最好的，符合自己的使用场景才是最好的。最后总结每种方法的优缺点。\n\n(P.S. 假设我们都使用上面的`index.html`所示结构)\n\n### Flexbox\n*[方法来源](https://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/)*\n\n```css\n/* #0 */\nbody {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  margin: 0;\n}\n\n/* #1 */\nmain {\n  flex: 1;\n}\n```\n\n`#0`是中的`min-height: 100vh`是为了让`<main>`的高度没有大于屏幕的高度时，使得`footer`可以在页面的底部。而，`margin: 0`是去掉原本浏览器自带的`<body>`的样式。\n\n`#1`的`flex: 1`是为了让`<main>`占满多余的空间。\n\n### Modern Way\n*[方法来源](http://mystrd.at/modern-clean-css-sticky-footer/)*\n\n```css\n/* #0 */\nhtml {\n  position: relative;\n  min-height: 100%;\n}\n\n/* #1 */\nbody {\n  margin: 0;\n  margin-bottom: 100px; /* same to footer height */\n}\n\n/* #2 */\nfooter {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  height: 100px;\n}\n```\n\n`#0`中的`position: relative`很显然是为了让`<html>`变成*containning block*，\n这个在`#2`会说到。同样地，`min-height: 100%`和上面的*flexbox*方法中的`#0`一样。\n\n`#1`的`margin-bottom`设为`100px`是和`<footer>`的高度一样的。目的是当`<body>`的内容溢出\n的时候，防止`<footer>`的内容蹿到`<body>`里面。\n\n`#2`设置了`position: absolute`，这样，`left`和`bottom`的值都是相对于`<footer>`的*containning block*来说的。\n由于在`#0`设置了`<html>`的`position`为`relative`，所以`<html>`就是`<footer>`的*containning block*。\n\n### Table Way\n*[方法来源](http://codepen.io/anon/pen/zrRLVW)或者[这个](https://gist.github.com/goldsky/7322156)*\n\n```css\nhtml,\nbody {\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n  display: table; /* #0 */\n}\nmain,\nfooter {\n  display: table-row;\n}\n\n/* #1\nmain {\n  height: 100%;\n}\n*/\n\nfooter {\n  height: 1px; /* #2 */\n}\n```\n\n其实这个方法就是利用了`table`布局，然后设置`<footer>`的高度为`1px`(如`#2`所示)。但是我并不知道为什么。\n并且，如果我把`#2`注释掉，把`#1`的注释去掉，也是work的。所以不知道设置`1px`有什么用。\n\n### Old Way\n*[方法来源](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)*\n\n这种方法需要我们改变一下我们的`index.html`，给我们的`<main>`添加一个空白的`<div>`。\n他其实是`<footer>`的*placeholder*。\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Ways to make a sticky foote</title>\n</head>\n<body>\n  <main>\n    <div class=\"push\"></div> <!-- new -->\n  </main>\n  <footer></footer>\n</body>\n<html>\n```\n那么，对应的CSS是这样的：\n\n```css\nhtml, body {\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n}\n\nmain {\n  min-height: 100%;\n  margin-bottom: -100px; /* #0 */\n}\n\nfooter,\n.push {\n  height: 100px; /* #1 */\n}\n```\n\n`#0`给`<main>`设置了`margin-bottom: -100px`。这是`<footer>`的高度的相反数。\n他是为了让`<footer>`可以蹿到`<div class=\"push\"></div>`的位置。\n\n因为`.push`就是`<footer>`的placeholder, 显然他们的`height`必须是一样的，如`#1`所示。\n\n其实我们还可以使用为了`:after`改进一下。因为`.push`存在的意义只是为了样式而样式，并不是页面的结构，所以也没有必要出现在`index.html`里面。因此，我们有了下面的*Old Way Plus*。\n\n### Old Way Plus\n*[方法来源](https://css-tricks.com/snippets/css/sticky-footer/)*\n\n(注意，这个时候我们并不需要给`<main>`添加一个`<div class=\"push\"></div>`)\n\n```css\nhtml, body {\n  height: 100%;\n}\n\nmain {\n  min-height: 100%;\n  /* equal to footer height */\n  margin-bottom: -100px;\n}\n\n/* #0 */\nmain:after {\n  content: \"\";\n  display: block;\n  height: 100px;\n}\n\nfooter {\n  height: 100px;\n}\n```\n`#0`, 我们利用伪类`:after`来替代上面的*Old Way*的`.push`，这样就不需要给`index.html`\n添加不必要的标签。\n\n## To Sum Up\n方法  | 难度   | Footer需要固定高度 | 浏览器兼容\n----    | ----  | -------            |  ------\nFlexbox | +  | No                 |   +\nModern way | ++ | Yes                 |  +++\nTable way | ++   | No             | ++?\nOld way | +++     | Yes |     +++\nOld way Plus | ++ | Yes |   ++\n","source":"_posts/5-Ways-to-Make-a-Sticky-Footer.md","raw":"title: 5 Ways To Make A Sticky Footer\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-01-20 15:19:06\nforeword: 总结一下创建Sticky Footer的5种方法。\n---\n\n*Sticky Footer*在内容展示的网站都会用到。比如blog，xx的主页等等。\n\n## What is Sticky Footer\n\n为了简单起见，我们不妨假设我们的`index.html`是这样的:\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Ways to make a sticky foote</title>\n</head>\n<body>\n  <main></main>\n  <footer></footer>\n</body>\n</html>\n```\n\n那么，如下面的图所示，图`a`和`b`都不是*Sticky Footer*.\n\n![](http://ww2.sinaimg.cn/large/7f85b91egw1f0asb7siypj20go088q4x.jpg)\n\n因为图`a`的页脚的后面还有空白部分。我们想要的应该是页脚就是在页面的最底部。\n\n那么图`b`为什么不是呢？他不是在页面的最底部吗？没错，但是我们想要的是只有当**scroller bar**滑到最底部的时候，才会出现页脚。\n\n像下面的图`c`和`d`才是我们的*Sticky Footer*:\n![](http://ww2.sinaimg.cn/large/7f85b91egw1f0asq75p07j20gl09i0vh.jpg)\n\n## Ways to Sticky Footer\n废话少说，下面会介绍几种创建*Sticky Footer*的方法。\n\n我们会从最简单的方法开始，但最简单的不一定是最好的，符合自己的使用场景才是最好的。最后总结每种方法的优缺点。\n\n(P.S. 假设我们都使用上面的`index.html`所示结构)\n\n### Flexbox\n*[方法来源](https://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/)*\n\n```css\n/* #0 */\nbody {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  margin: 0;\n}\n\n/* #1 */\nmain {\n  flex: 1;\n}\n```\n\n`#0`是中的`min-height: 100vh`是为了让`<main>`的高度没有大于屏幕的高度时，使得`footer`可以在页面的底部。而，`margin: 0`是去掉原本浏览器自带的`<body>`的样式。\n\n`#1`的`flex: 1`是为了让`<main>`占满多余的空间。\n\n### Modern Way\n*[方法来源](http://mystrd.at/modern-clean-css-sticky-footer/)*\n\n```css\n/* #0 */\nhtml {\n  position: relative;\n  min-height: 100%;\n}\n\n/* #1 */\nbody {\n  margin: 0;\n  margin-bottom: 100px; /* same to footer height */\n}\n\n/* #2 */\nfooter {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  height: 100px;\n}\n```\n\n`#0`中的`position: relative`很显然是为了让`<html>`变成*containning block*，\n这个在`#2`会说到。同样地，`min-height: 100%`和上面的*flexbox*方法中的`#0`一样。\n\n`#1`的`margin-bottom`设为`100px`是和`<footer>`的高度一样的。目的是当`<body>`的内容溢出\n的时候，防止`<footer>`的内容蹿到`<body>`里面。\n\n`#2`设置了`position: absolute`，这样，`left`和`bottom`的值都是相对于`<footer>`的*containning block*来说的。\n由于在`#0`设置了`<html>`的`position`为`relative`，所以`<html>`就是`<footer>`的*containning block*。\n\n### Table Way\n*[方法来源](http://codepen.io/anon/pen/zrRLVW)或者[这个](https://gist.github.com/goldsky/7322156)*\n\n```css\nhtml,\nbody {\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n  display: table; /* #0 */\n}\nmain,\nfooter {\n  display: table-row;\n}\n\n/* #1\nmain {\n  height: 100%;\n}\n*/\n\nfooter {\n  height: 1px; /* #2 */\n}\n```\n\n其实这个方法就是利用了`table`布局，然后设置`<footer>`的高度为`1px`(如`#2`所示)。但是我并不知道为什么。\n并且，如果我把`#2`注释掉，把`#1`的注释去掉，也是work的。所以不知道设置`1px`有什么用。\n\n### Old Way\n*[方法来源](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)*\n\n这种方法需要我们改变一下我们的`index.html`，给我们的`<main>`添加一个空白的`<div>`。\n他其实是`<footer>`的*placeholder*。\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Ways to make a sticky foote</title>\n</head>\n<body>\n  <main>\n    <div class=\"push\"></div> <!-- new -->\n  </main>\n  <footer></footer>\n</body>\n<html>\n```\n那么，对应的CSS是这样的：\n\n```css\nhtml, body {\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n}\n\nmain {\n  min-height: 100%;\n  margin-bottom: -100px; /* #0 */\n}\n\nfooter,\n.push {\n  height: 100px; /* #1 */\n}\n```\n\n`#0`给`<main>`设置了`margin-bottom: -100px`。这是`<footer>`的高度的相反数。\n他是为了让`<footer>`可以蹿到`<div class=\"push\"></div>`的位置。\n\n因为`.push`就是`<footer>`的placeholder, 显然他们的`height`必须是一样的，如`#1`所示。\n\n其实我们还可以使用为了`:after`改进一下。因为`.push`存在的意义只是为了样式而样式，并不是页面的结构，所以也没有必要出现在`index.html`里面。因此，我们有了下面的*Old Way Plus*。\n\n### Old Way Plus\n*[方法来源](https://css-tricks.com/snippets/css/sticky-footer/)*\n\n(注意，这个时候我们并不需要给`<main>`添加一个`<div class=\"push\"></div>`)\n\n```css\nhtml, body {\n  height: 100%;\n}\n\nmain {\n  min-height: 100%;\n  /* equal to footer height */\n  margin-bottom: -100px;\n}\n\n/* #0 */\nmain:after {\n  content: \"\";\n  display: block;\n  height: 100px;\n}\n\nfooter {\n  height: 100px;\n}\n```\n`#0`, 我们利用伪类`:after`来替代上面的*Old Way*的`.push`，这样就不需要给`index.html`\n添加不必要的标签。\n\n## To Sum Up\n方法  | 难度   | Footer需要固定高度 | 浏览器兼容\n----    | ----  | -------            |  ------\nFlexbox | +  | No                 |   +\nModern way | ++ | Yes                 |  +++\nTable way | ++   | No             | ++?\nOld way | +++     | Yes |     +++\nOld way Plus | ++ | Yes |   ++\n","slug":"5-Ways-to-Make-a-Sticky-Footer","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742ye000337rqdog7ppf1","content":"<p><em>Sticky Footer</em>在内容展示的网站都会用到。比如blog，xx的主页等等。</p>\n<h2>What is Sticky Footer</h2>\n<p>为了简单起见，我们不妨假设我们的<code>index.html</code>是这样的:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Ways to make a sticky foote<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>那么，如下面的图所示，图<code>a</code>和<code>b</code>都不是<em>Sticky Footer</em>.</p>\n<p><img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1f0asb7siypj20go088q4x.jpg\" alt=\"\"></p>\n<p>因为图<code>a</code>的页脚的后面还有空白部分。我们想要的应该是页脚就是在页面的最底部。</p>\n<p>那么图<code>b</code>为什么不是呢？他不是在页面的最底部吗？没错，但是我们想要的是只有当<strong>scroller bar</strong>滑到最底部的时候，才会出现页脚。</p>\n<p>像下面的图<code>c</code>和<code>d</code>才是我们的<em>Sticky Footer</em>:<br>\n<img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1f0asq75p07j20gl09i0vh.jpg\" alt=\"\"></p>\n<h2>Ways to Sticky Footer</h2>\n<p>废话少说，下面会介绍几种创建<em>Sticky Footer</em>的方法。</p>\n<p>我们会从最简单的方法开始，但最简单的不一定是最好的，符合自己的使用场景才是最好的。最后总结每种方法的优缺点。</p>\n<p>(P.S. 假设我们都使用上面的<code>index.html</code>所示结构)</p>\n<h3>Flexbox</h3>\n<p><em><a href=\"https://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/\" target=\"_blank\" rel=\"external\">方法来源</a></em></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* #0 */</span></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">display</span>: flex;</div><div class=\"line\">  <span class=\"attribute\">flex-direction</span>: column;</div><div class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">100vh</span>;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #1 */</span></div><div class=\"line\"><span class=\"selector-tag\">main</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">flex</span>: <span class=\"number\">1</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>是中的<code>min-height: 100vh</code>是为了让<code>&lt;main&gt;</code>的高度没有大于屏幕的高度时，使得<code>footer</code>可以在页面的底部。而，<code>margin: 0</code>是去掉原本浏览器自带的<code>&lt;body&gt;</code>的样式。</p>\n<p><code>#1</code>的<code>flex: 1</code>是为了让<code>&lt;main&gt;</code>占满多余的空间。</p>\n<h3>Modern Way</h3>\n<p><em><a href=\"http://mystrd.at/modern-clean-css-sticky-footer/\" target=\"_blank\" rel=\"external\">方法来源</a></em></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* #0 */</span></div><div class=\"line\"><span class=\"selector-tag\">html</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: relative;</div><div class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #1 */</span></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">100px</span>; <span class=\"comment\">/* same to footer height */</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #2 */</span></div><div class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>中的<code>position: relative</code>很显然是为了让<code>&lt;html&gt;</code>变成<em>containning block</em>，<br>\n这个在<code>#2</code>会说到。同样地，<code>min-height: 100%</code>和上面的<em>flexbox</em>方法中的<code>#0</code>一样。</p>\n<p><code>#1</code>的<code>margin-bottom</code>设为<code>100px</code>是和<code>&lt;footer&gt;</code>的高度一样的。目的是当<code>&lt;body&gt;</code>的内容溢出<br>\n的时候，防止<code>&lt;footer&gt;</code>的内容蹿到<code>&lt;body&gt;</code>里面。</p>\n<p><code>#2</code>设置了<code>position: absolute</code>，这样，<code>left</code>和<code>bottom</code>的值都是相对于<code>&lt;footer&gt;</code>的<em>containning block</em>来说的。<br>\n由于在<code>#0</code>设置了<code>&lt;html&gt;</code>的<code>position</code>为<code>relative</code>，所以<code>&lt;html&gt;</code>就是<code>&lt;footer&gt;</code>的<em>containning block</em>。</p>\n<h3>Table Way</h3>\n<p><em><a href=\"http://codepen.io/anon/pen/zrRLVW\" target=\"_blank\" rel=\"external\">方法来源</a>或者<a href=\"https://gist.github.com/goldsky/7322156\" target=\"_blank\" rel=\"external\">这个</a></em></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">html</span>,</div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">display</span>: table; <span class=\"comment\">/* #0 */</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"selector-tag\">main</span>,</div><div class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">display</span>: table-row;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #1</span></div><div class=\"line\">main &#123;</div><div class=\"line\">  height: 100%;</div><div class=\"line\">&#125;</div><div class=\"line\">*/</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">1px</span>; <span class=\"comment\">/* #2 */</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>其实这个方法就是利用了<code>table</code>布局，然后设置<code>&lt;footer&gt;</code>的高度为<code>1px</code>(如<code>#2</code>所示)。但是我并不知道为什么。<br>\n并且，如果我把<code>#2</code>注释掉，把<code>#1</code>的注释去掉，也是work的。所以不知道设置<code>1px</code>有什么用。</p>\n<h3>Old Way</h3>\n<p><em><a href=\"http://ryanfait.com/resources/footer-stick-to-bottom-of-page/\" target=\"_blank\" rel=\"external\">方法来源</a></em></p>\n<p>这种方法需要我们改变一下我们的<code>index.html</code>，给我们的<code>&lt;main&gt;</code>添加一个空白的<code>&lt;div&gt;</code>。<br>\n他其实是<code>&lt;footer&gt;</code>的<em>placeholder</em>。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Ways to make a sticky foote<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"push\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> <span class=\"comment\">&lt;!-- new --&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>那么，对应的CSS是这样的：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">html</span>, <span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">main</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">  <span class=\"attribute\">margin-bottom</span>: -<span class=\"number\">100px</span>; <span class=\"comment\">/* #0 */</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">footer</span>,</div><div class=\"line\"><span class=\"selector-class\">.push</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>; <span class=\"comment\">/* #1 */</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>给<code>&lt;main&gt;</code>设置了<code>margin-bottom: -100px</code>。这是<code>&lt;footer&gt;</code>的高度的相反数。<br>\n他是为了让<code>&lt;footer&gt;</code>可以蹿到<code>&lt;div class=&quot;push&quot;&gt;&lt;/div&gt;</code>的位置。</p>\n<p>因为<code>.push</code>就是<code>&lt;footer&gt;</code>的placeholder, 显然他们的<code>height</code>必须是一样的，如<code>#1</code>所示。</p>\n<p>其实我们还可以使用为了<code>:after</code>改进一下。因为<code>.push</code>存在的意义只是为了样式而样式，并不是页面的结构，所以也没有必要出现在<code>index.html</code>里面。因此，我们有了下面的<em>Old Way Plus</em>。</p>\n<h3>Old Way Plus</h3>\n<p><em><a href=\"https://css-tricks.com/snippets/css/sticky-footer/\" target=\"_blank\" rel=\"external\">方法来源</a></em></p>\n<p>(注意，这个时候我们并不需要给<code>&lt;main&gt;</code>添加一个<code>&lt;div class=&quot;push&quot;&gt;&lt;/div&gt;</code>)</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">html</span>, <span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">main</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">  <span class=\"comment\">/* equal to footer height */</span></div><div class=\"line\">  <span class=\"attribute\">margin-bottom</span>: -<span class=\"number\">100px</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #0 */</span></div><div class=\"line\"><span class=\"selector-tag\">main</span><span class=\"selector-pseudo\">:after</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">\"\"</span>;</div><div class=\"line\">  <span class=\"attribute\">display</span>: block;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>, 我们利用伪类<code>:after</code>来替代上面的<em>Old Way</em>的<code>.push</code>，这样就不需要给<code>index.html</code><br>\n添加不必要的标签。</p>\n<h2>To Sum Up</h2>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>难度</th>\n<th>Footer需要固定高度</th>\n<th>浏览器兼容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Flexbox</td>\n<td>+</td>\n<td>No</td>\n<td>+</td>\n</tr>\n<tr>\n<td>Modern way</td>\n<td>++</td>\n<td>Yes</td>\n<td>+++</td>\n</tr>\n<tr>\n<td>Table way</td>\n<td>++</td>\n<td>No</td>\n<td>++?</td>\n</tr>\n<tr>\n<td>Old way</td>\n<td>+++</td>\n<td>Yes</td>\n<td>+++</td>\n</tr>\n<tr>\n<td>Old way Plus</td>\n<td>++</td>\n<td>Yes</td>\n<td>++</td>\n</tr>\n</tbody>\n</table>\n","excerpt":"","more":"<p><em>Sticky Footer</em>在内容展示的网站都会用到。比如blog，xx的主页等等。</p>\n<h2>What is Sticky Footer</h2>\n<p>为了简单起见，我们不妨假设我们的<code>index.html</code>是这样的:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Ways to make a sticky foote<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>那么，如下面的图所示，图<code>a</code>和<code>b</code>都不是<em>Sticky Footer</em>.</p>\n<p><img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1f0asb7siypj20go088q4x.jpg\" alt=\"\"></p>\n<p>因为图<code>a</code>的页脚的后面还有空白部分。我们想要的应该是页脚就是在页面的最底部。</p>\n<p>那么图<code>b</code>为什么不是呢？他不是在页面的最底部吗？没错，但是我们想要的是只有当<strong>scroller bar</strong>滑到最底部的时候，才会出现页脚。</p>\n<p>像下面的图<code>c</code>和<code>d</code>才是我们的<em>Sticky Footer</em>:<br>\n<img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1f0asq75p07j20gl09i0vh.jpg\" alt=\"\"></p>\n<h2>Ways to Sticky Footer</h2>\n<p>废话少说，下面会介绍几种创建<em>Sticky Footer</em>的方法。</p>\n<p>我们会从最简单的方法开始，但最简单的不一定是最好的，符合自己的使用场景才是最好的。最后总结每种方法的优缺点。</p>\n<p>(P.S. 假设我们都使用上面的<code>index.html</code>所示结构)</p>\n<h3>Flexbox</h3>\n<p><em><a href=\"https://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/\">方法来源</a></em></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* #0 */</span></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">display</span>: flex;</div><div class=\"line\">  <span class=\"attribute\">flex-direction</span>: column;</div><div class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">100vh</span>;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #1 */</span></div><div class=\"line\"><span class=\"selector-tag\">main</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">flex</span>: <span class=\"number\">1</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>是中的<code>min-height: 100vh</code>是为了让<code>&lt;main&gt;</code>的高度没有大于屏幕的高度时，使得<code>footer</code>可以在页面的底部。而，<code>margin: 0</code>是去掉原本浏览器自带的<code>&lt;body&gt;</code>的样式。</p>\n<p><code>#1</code>的<code>flex: 1</code>是为了让<code>&lt;main&gt;</code>占满多余的空间。</p>\n<h3>Modern Way</h3>\n<p><em><a href=\"http://mystrd.at/modern-clean-css-sticky-footer/\">方法来源</a></em></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* #0 */</span></div><div class=\"line\"><span class=\"selector-tag\">html</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: relative;</div><div class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #1 */</span></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">100px</span>; <span class=\"comment\">/* same to footer height */</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #2 */</span></div><div class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>中的<code>position: relative</code>很显然是为了让<code>&lt;html&gt;</code>变成<em>containning block</em>，<br>\n这个在<code>#2</code>会说到。同样地，<code>min-height: 100%</code>和上面的<em>flexbox</em>方法中的<code>#0</code>一样。</p>\n<p><code>#1</code>的<code>margin-bottom</code>设为<code>100px</code>是和<code>&lt;footer&gt;</code>的高度一样的。目的是当<code>&lt;body&gt;</code>的内容溢出<br>\n的时候，防止<code>&lt;footer&gt;</code>的内容蹿到<code>&lt;body&gt;</code>里面。</p>\n<p><code>#2</code>设置了<code>position: absolute</code>，这样，<code>left</code>和<code>bottom</code>的值都是相对于<code>&lt;footer&gt;</code>的<em>containning block</em>来说的。<br>\n由于在<code>#0</code>设置了<code>&lt;html&gt;</code>的<code>position</code>为<code>relative</code>，所以<code>&lt;html&gt;</code>就是<code>&lt;footer&gt;</code>的<em>containning block</em>。</p>\n<h3>Table Way</h3>\n<p><em><a href=\"http://codepen.io/anon/pen/zrRLVW\">方法来源</a>或者<a href=\"https://gist.github.com/goldsky/7322156\">这个</a></em></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">html</span>,</div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">display</span>: table; <span class=\"comment\">/* #0 */</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"selector-tag\">main</span>,</div><div class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">display</span>: table-row;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #1</div><div class=\"line\">main &#123;</div><div class=\"line\">  height: 100%;</div><div class=\"line\">&#125;</div><div class=\"line\">*/</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">1px</span>; <span class=\"comment\">/* #2 */</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>其实这个方法就是利用了<code>table</code>布局，然后设置<code>&lt;footer&gt;</code>的高度为<code>1px</code>(如<code>#2</code>所示)。但是我并不知道为什么。<br>\n并且，如果我把<code>#2</code>注释掉，把<code>#1</code>的注释去掉，也是work的。所以不知道设置<code>1px</code>有什么用。</p>\n<h3>Old Way</h3>\n<p><em><a href=\"http://ryanfait.com/resources/footer-stick-to-bottom-of-page/\">方法来源</a></em></p>\n<p>这种方法需要我们改变一下我们的<code>index.html</code>，给我们的<code>&lt;main&gt;</code>添加一个空白的<code>&lt;div&gt;</code>。<br>\n他其实是<code>&lt;footer&gt;</code>的<em>placeholder</em>。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Ways to make a sticky foote<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"push\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> <span class=\"comment\">&lt;!-- new --&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>那么，对应的CSS是这样的：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">html</span>, <span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">main</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">  <span class=\"attribute\">margin-bottom</span>: -<span class=\"number\">100px</span>; <span class=\"comment\">/* #0 */</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">footer</span>,</div><div class=\"line\"><span class=\"selector-class\">.push</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>; <span class=\"comment\">/* #1 */</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>给<code>&lt;main&gt;</code>设置了<code>margin-bottom: -100px</code>。这是<code>&lt;footer&gt;</code>的高度的相反数。<br>\n他是为了让<code>&lt;footer&gt;</code>可以蹿到<code>&lt;div class=&quot;push&quot;&gt;&lt;/div&gt;</code>的位置。</p>\n<p>因为<code>.push</code>就是<code>&lt;footer&gt;</code>的placeholder, 显然他们的<code>height</code>必须是一样的，如<code>#1</code>所示。</p>\n<p>其实我们还可以使用为了<code>:after</code>改进一下。因为<code>.push</code>存在的意义只是为了样式而样式，并不是页面的结构，所以也没有必要出现在<code>index.html</code>里面。因此，我们有了下面的<em>Old Way Plus</em>。</p>\n<h3>Old Way Plus</h3>\n<p><em><a href=\"https://css-tricks.com/snippets/css/sticky-footer/\">方法来源</a></em></p>\n<p>(注意，这个时候我们并不需要给<code>&lt;main&gt;</code>添加一个<code>&lt;div class=&quot;push&quot;&gt;&lt;/div&gt;</code>)</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">html</span>, <span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">main</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">  <span class=\"comment\">/* equal to footer height */</span></div><div class=\"line\">  <span class=\"attribute\">margin-bottom</span>: -<span class=\"number\">100px</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* #0 */</span></div><div class=\"line\"><span class=\"selector-tag\">main</span><span class=\"selector-pseudo\">:after</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">\"\"</span>;</div><div class=\"line\">  <span class=\"attribute\">display</span>: block;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>, 我们利用伪类<code>:after</code>来替代上面的<em>Old Way</em>的<code>.push</code>，这样就不需要给<code>index.html</code><br>\n添加不必要的标签。</p>\n<h2>To Sum Up</h2>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>难度</th>\n<th>Footer需要固定高度</th>\n<th>浏览器兼容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Flexbox</td>\n<td>+</td>\n<td>No</td>\n<td>+</td>\n</tr>\n<tr>\n<td>Modern way</td>\n<td>++</td>\n<td>Yes</td>\n<td>+++</td>\n</tr>\n<tr>\n<td>Table way</td>\n<td>++</td>\n<td>No</td>\n<td>++?</td>\n</tr>\n<tr>\n<td>Old way</td>\n<td>+++</td>\n<td>Yes</td>\n<td>+++</td>\n</tr>\n<tr>\n<td>Old way Plus</td>\n<td>++</td>\n<td>Yes</td>\n<td>++</td>\n</tr>\n</tbody>\n</table>\n"},{"title":"ES6 In Practice(0) - watch a demo","author":"Drake Leung","date":"2015-06-18T08:02:11.000Z","foreword":"通过视频JavaScript 2015来实践一个demo, 利用的包管理器是jspm.","_content":"\n吃完半个西瓜，太饱。于是上yutube，然后搜了`es6 tutorial`，发现了一个30k+ views的[JavaScript In 2015](https://youtu.be/iukBMY4apvI)视频。遂看，**收货良多**。\n\n## live-server\n[live-server](https://www.npmjs.com/package/live-server)这个package，可以帮助我们快速建立一个可以**live reload**的静态服务器。\n\n## jspm\n[jspm](http://jspm.io/)是一个package manager，可以帮助我们快速建立ES6的使用环境。让我们来看一下官方文档的[getting start](https://github.com/jspm/jspm-cli/wiki/Getting-Started)\n\n```html\n <!doctype html>\n  // 需要引入这2个js文件\n  <script src=\"jspm_packages/system.js\"></script>\n  <script src=\"config.js\"></script>\n\n  // 下面是我们自己的js文件\n  <script>\n    System.import('lib/main');\n  </script>\n```\n\n## reddit api\n这里用了一个[jsonp](https://www.npmjs.com/package/jsonp) package，来发起jsonp请求。我们使用`jspm install npm:jsonp`来安装。\n\n**使用reddit api**: 只要在每个`r`后面加`.json`。比如: `https://www.reddit.com/r/pics.json`。然后还要传`param: 'jsonp'`的参数。\n\n```javascript\nclass RedditApi {\n  constructor() {\n    this.redditURL = 'https://www.reddit.com/r/pics.json';\n  }\n\n  load() {\n    return new Promise((resolve, reject) => {\n      jsonp(this.redditURL, {param: 'jsonp'}, (err, data) => {\n        err ? reject(err) : resolve(data.data.children);\n      });\n    });\n  }\n}\n```\n说到API，突然想起[codeacademy](http://www.codecademy.com/learn)上面好像又好多教学，赶紧去一下先。\n\n## Extract Pictures\n利用`Array.map`和`Array.filter`来获取和过滤图片。以前一直不知道这２个函数怎么用。\n```javascript\nexport default (posts) => {\n  return posts\n    .map(post => post.data.url)\n    .filter(url => /png$/.exec(url));\n}\n```\n\n## Display Picture\n利用了`Array.map`和`Array.json`来生成要插入的HTML string。如果我写的话，可以会用循环 = =　果然看多别人的代码还是好的。\n\n```javascript\nexport default (urls) => {\n  var pics = document.querySelector('.pics');\n  pics.innerHTML = urls.map(url => `<img src=${url}>`).join('\\n');\n}\n```\n","source":"_posts/ES6-In-Practice-0-watch-a-demo.md","raw":"title: ES6 In Practice(0) - watch a demo\nauthor: Drake Leung\ndate: 2015-06-18 16:02:11\ntags: ES6\ncategories: JavaScript\nforeword:\n  通过视频JavaScript 2015来实践一个demo, 利用的包管理器是jspm.\n---\n\n吃完半个西瓜，太饱。于是上yutube，然后搜了`es6 tutorial`，发现了一个30k+ views的[JavaScript In 2015](https://youtu.be/iukBMY4apvI)视频。遂看，**收货良多**。\n\n## live-server\n[live-server](https://www.npmjs.com/package/live-server)这个package，可以帮助我们快速建立一个可以**live reload**的静态服务器。\n\n## jspm\n[jspm](http://jspm.io/)是一个package manager，可以帮助我们快速建立ES6的使用环境。让我们来看一下官方文档的[getting start](https://github.com/jspm/jspm-cli/wiki/Getting-Started)\n\n```html\n <!doctype html>\n  // 需要引入这2个js文件\n  <script src=\"jspm_packages/system.js\"></script>\n  <script src=\"config.js\"></script>\n\n  // 下面是我们自己的js文件\n  <script>\n    System.import('lib/main');\n  </script>\n```\n\n## reddit api\n这里用了一个[jsonp](https://www.npmjs.com/package/jsonp) package，来发起jsonp请求。我们使用`jspm install npm:jsonp`来安装。\n\n**使用reddit api**: 只要在每个`r`后面加`.json`。比如: `https://www.reddit.com/r/pics.json`。然后还要传`param: 'jsonp'`的参数。\n\n```javascript\nclass RedditApi {\n  constructor() {\n    this.redditURL = 'https://www.reddit.com/r/pics.json';\n  }\n\n  load() {\n    return new Promise((resolve, reject) => {\n      jsonp(this.redditURL, {param: 'jsonp'}, (err, data) => {\n        err ? reject(err) : resolve(data.data.children);\n      });\n    });\n  }\n}\n```\n说到API，突然想起[codeacademy](http://www.codecademy.com/learn)上面好像又好多教学，赶紧去一下先。\n\n## Extract Pictures\n利用`Array.map`和`Array.filter`来获取和过滤图片。以前一直不知道这２个函数怎么用。\n```javascript\nexport default (posts) => {\n  return posts\n    .map(post => post.data.url)\n    .filter(url => /png$/.exec(url));\n}\n```\n\n## Display Picture\n利用了`Array.map`和`Array.json`来生成要插入的HTML string。如果我写的话，可以会用循环 = =　果然看多别人的代码还是好的。\n\n```javascript\nexport default (urls) => {\n  var pics = document.querySelector('.pics');\n  pics.innerHTML = urls.map(url => `<img src=${url}>`).join('\\n');\n}\n```\n","slug":"ES6-In-Practice-0-watch-a-demo","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742yh000537rq0bih3auz","content":"<p>吃完半个西瓜，太饱。于是上yutube，然后搜了<code>es6 tutorial</code>，发现了一个30k+ views的<a href=\"https://youtu.be/iukBMY4apvI\" target=\"_blank\" rel=\"external\">JavaScript In 2015</a>视频。遂看，<strong>收货良多</strong>。</p>\n<h2>live-server</h2>\n<p><a href=\"https://www.npmjs.com/package/live-server\" target=\"_blank\" rel=\"external\">live-server</a>这个package，可以帮助我们快速建立一个可以<strong>live reload</strong>的静态服务器。</p>\n<h2>jspm</h2>\n<p><a href=\"http://jspm.io/\" target=\"_blank\" rel=\"external\">jspm</a>是一个package manager，可以帮助我们快速建立ES6的使用环境。让我们来看一下官方文档的<a href=\"https://github.com/jspm/jspm-cli/wiki/Getting-Started\" target=\"_blank\" rel=\"external\">getting start</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!doctype html&gt;</span></div><div class=\"line\"> // 需要引入这2个js文件</div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"jspm_packages/system.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"config.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"> // 下面是我们自己的js文件</div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">   System.import(<span class=\"string\">'lib/main'</span>);</div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2>reddit api</h2>\n<p>这里用了一个<a href=\"https://www.npmjs.com/package/jsonp\" target=\"_blank\" rel=\"external\">jsonp</a> package，来发起jsonp请求。我们使用<code>jspm install npm:jsonp</code>来安装。</p>\n<p><strong>使用reddit api</strong>: 只要在每个<code>r</code>后面加<code>.json</code>。比如: <code>https://www.reddit.com/r/pics.json</code>。然后还要传<code>param: 'jsonp'</code>的参数。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedditApi</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.redditURL = <span class=\"string\">'https://www.reddit.com/r/pics.json'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  load() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject) =&gt; &#123;</div><div class=\"line\">      jsonp(<span class=\"keyword\">this</span>.redditURL, &#123;param: <span class=\"string\">'jsonp'</span>&#125;, (err, data) =&gt; &#123;</div><div class=\"line\">        err ? reject(err) : resolve(data.data.children);</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>说到API，突然想起<a href=\"http://www.codecademy.com/learn\" target=\"_blank\" rel=\"external\">codeacademy</a>上面好像又好多教学，赶紧去一下先。</p>\n<h2>Extract Pictures</h2>\n<p>利用<code>Array.map</code>和<code>Array.filter</code>来获取和过滤图片。以前一直不知道这２个函数怎么用。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (posts) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> posts</div><div class=\"line\">    .map(post =&gt; post.data.url)</div><div class=\"line\">    .filter(url =&gt; <span class=\"regexp\">/png$/</span>.exec(url));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Display Picture</h2>\n<p>利用了<code>Array.map</code>和<code>Array.json</code>来生成要插入的HTML string。如果我写的话，可以会用循环 = =　果然看多别人的代码还是好的。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (urls) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> pics = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.pics'</span>);</div><div class=\"line\">  pics.innerHTML = urls.map(url =&gt; <span class=\"string\">`&lt;img src=<span class=\"subst\">$&#123;url&#125;</span>&gt;`</span>).join(<span class=\"string\">'\\n'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>吃完半个西瓜，太饱。于是上yutube，然后搜了<code>es6 tutorial</code>，发现了一个30k+ views的<a href=\"https://youtu.be/iukBMY4apvI\">JavaScript In 2015</a>视频。遂看，<strong>收货良多</strong>。</p>\n<h2>live-server</h2>\n<p><a href=\"https://www.npmjs.com/package/live-server\">live-server</a>这个package，可以帮助我们快速建立一个可以<strong>live reload</strong>的静态服务器。</p>\n<h2>jspm</h2>\n<p><a href=\"http://jspm.io/\">jspm</a>是一个package manager，可以帮助我们快速建立ES6的使用环境。让我们来看一下官方文档的<a href=\"https://github.com/jspm/jspm-cli/wiki/Getting-Started\">getting start</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!doctype html&gt;</span></div><div class=\"line\"> // 需要引入这2个js文件</div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"jspm_packages/system.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"config.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"> // 下面是我们自己的js文件</div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></div><div class=\"line\">   System.import(<span class=\"string\">'lib/main'</span>);</div><div class=\"line\"> </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2>reddit api</h2>\n<p>这里用了一个<a href=\"https://www.npmjs.com/package/jsonp\">jsonp</a> package，来发起jsonp请求。我们使用<code>jspm install npm:jsonp</code>来安装。</p>\n<p><strong>使用reddit api</strong>: 只要在每个<code>r</code>后面加<code>.json</code>。比如: <code>https://www.reddit.com/r/pics.json</code>。然后还要传<code>param: 'jsonp'</code>的参数。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedditApi</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.redditURL = <span class=\"string\">'https://www.reddit.com/r/pics.json'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  load() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject) =&gt; &#123;</div><div class=\"line\">      jsonp(<span class=\"keyword\">this</span>.redditURL, &#123;param: <span class=\"string\">'jsonp'</span>&#125;, (err, data) =&gt; &#123;</div><div class=\"line\">        err ? reject(err) : resolve(data.data.children);</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>说到API，突然想起<a href=\"http://www.codecademy.com/learn\">codeacademy</a>上面好像又好多教学，赶紧去一下先。</p>\n<h2>Extract Pictures</h2>\n<p>利用<code>Array.map</code>和<code>Array.filter</code>来获取和过滤图片。以前一直不知道这２个函数怎么用。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (posts) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> posts</div><div class=\"line\">    .map(post =&gt; post.data.url)</div><div class=\"line\">    .filter(url =&gt; <span class=\"regexp\">/png$/</span>.exec(url));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Display Picture</h2>\n<p>利用了<code>Array.map</code>和<code>Array.json</code>来生成要插入的HTML string。如果我写的话，可以会用循环 = =　果然看多别人的代码还是好的。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (urls) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> pics = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.pics'</span>);</div><div class=\"line\">  pics.innerHTML = urls.map(url =&gt; <span class=\"string\">`&lt;img src=<span class=\"subst\">$&#123;url&#125;</span>&gt;`</span>).join(<span class=\"string\">'\\n'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"title":"BFC in CSS(0) - WTF","author":"Drake Leung","date":"2015-07-24T17:21:40.000Z","foreword":"BFC？听起来很高大上的样子~","_content":"\n看了[Understanding Block Formatting Contexts in CSS](http://www.sitepoint.com/understanding-block-formatting-contexts-in-css/)这篇文章，终于有点明白什么是BFC(Block Formatting Context)了。\n\n## Normal Flow\n**下面这句话不要忽略啊。要不然很多事情就想不通**。\n> Boxes in the normal flow belong to a formatting context, which may be block or inline, but not both simultaneously. Block-level boxes participate in a block formatting context. Inline-level boxes participate in an inline formatting context.\n\n在normal flow中的盒子都是属于formatting context的！！什么意思？\n```html\n<body>\n  <p> I am in the formatting context</p>\n  <div> I also belong to the formatting context</div>\n</body>\n```\n\n在上面的例子，`p`和`div`都是在*normal flow*里面的。并且，他们都是块级元素，所以他们参与了block formatting contexts。\n\n那么，参与了BFC又会怎么样呢？\n\n## Block Formatting Contexts\n下面的[文档](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)定义了*在BFC中盒子是怎么排版的*:\n\n> In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the 'margin' properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse.\n\n在BFC中，盒子都是按垂直方向一个挨着一个排版的，从*containing block*的顶部开始。2个sibing boxed的\n垂直方向的距离是由`margin`来决定的，但此时的2个盒子的`margin`是会**collapse**(坍塌？折叠？)\n\n那到底是怎么collapse法，我们要怎样才能解决。\n\n## BFC引起的Collapse Margins\n```html\n<style>\n  p {\n    margin: 10px;\n    background-color: lightgreen;\n  }\n</style>\n\n<p> Sibling 1 </p>\n<p> Sibling 2 </p>\n```\n\n上面的例子中，2个`p`的之间的`margin`只有`10px`而不是`20px(10 + 10)`。为什么？因为前面说过，\n\n2个`p`都是在*normal flow*中，并且，他们是块级元素，所以他们会参与block formatting contexts。\n\n又因为在BFC中，2个sibling element的垂直方面的`margin`会collapse！于是，结果取2者较大的那个。\n\n```css\nP:last-child {\n  margin: 20px;\n}\n```\n\n这样一来，2个`p`垂直方向的`margin`就取`20`。因为20比10大。\n\n那么，我们如何解决margin collapse呢？答案就是**创建一个新的bfc**。\n\n为什么可以？因为前面的文档说过: *In a block formatting....*才会发生margin collapse。\n也就是说，如果**不在同一个bfc**的话，那么就不会有margin collapse。因此，我们创建新的bfc就行了。\n\n那么，怎样才能创建新的bfc呢？\n\n## Create a New BFC\n> Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with 'overflow' other than 'visible' (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.\n\n通过上面的[文档](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)，我们可以总结出以下的情况会创建出新的BFC:\n\n- `float`的值不为`none`\n- `position`的值不为`static`或者`relative`。\n- `display`的值为`table-cell`, `table-caption`, `inline-block`\n- `overflow`的值不为`visible`。\n\n举个例子:\n```html\n<style>\n  .newBFC {\n    overflow: hidden;\n  }\n</style>\n\n<div class=\"newBFC\">\n  <p>I am in the BFC created by my parent tag</p>\n</div>\n```\n上面例子中的`div`就创建了一个新的bfc。\n\n所以，我们就可以解决margin collapse:\n\n```html\n<style>\n  p {\n    margin: 10px;\n    background-color: lightgreen;\n  }\n  .newBFC {\n    overflow: hidden;\n  }\n</style>\n\n<p> Sibling 1 </p>\n<div class=\"newBFC\">\n  <p> Sibling 2 </p>\n</div>\n```\n\n## Wrap up\n总的来说，BFC就是定义了块级元素是如何排版的。\n\n另外，创建新的BFC可以解决一些问题。比如上面的*margin collapse*，还有更多的例子，我们下篇再说。\n","source":"_posts/BFC-in-CSS-0-WTF.md","raw":"title: BFC in CSS(0) - WTF\nauthor: Drake Leung\ntags: [BFC]\ncategories: [CSS]\ndate: 2015-07-25 01:21:40\nforeword: BFC？听起来很高大上的样子~\n---\n\n看了[Understanding Block Formatting Contexts in CSS](http://www.sitepoint.com/understanding-block-formatting-contexts-in-css/)这篇文章，终于有点明白什么是BFC(Block Formatting Context)了。\n\n## Normal Flow\n**下面这句话不要忽略啊。要不然很多事情就想不通**。\n> Boxes in the normal flow belong to a formatting context, which may be block or inline, but not both simultaneously. Block-level boxes participate in a block formatting context. Inline-level boxes participate in an inline formatting context.\n\n在normal flow中的盒子都是属于formatting context的！！什么意思？\n```html\n<body>\n  <p> I am in the formatting context</p>\n  <div> I also belong to the formatting context</div>\n</body>\n```\n\n在上面的例子，`p`和`div`都是在*normal flow*里面的。并且，他们都是块级元素，所以他们参与了block formatting contexts。\n\n那么，参与了BFC又会怎么样呢？\n\n## Block Formatting Contexts\n下面的[文档](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)定义了*在BFC中盒子是怎么排版的*:\n\n> In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the 'margin' properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse.\n\n在BFC中，盒子都是按垂直方向一个挨着一个排版的，从*containing block*的顶部开始。2个sibing boxed的\n垂直方向的距离是由`margin`来决定的，但此时的2个盒子的`margin`是会**collapse**(坍塌？折叠？)\n\n那到底是怎么collapse法，我们要怎样才能解决。\n\n## BFC引起的Collapse Margins\n```html\n<style>\n  p {\n    margin: 10px;\n    background-color: lightgreen;\n  }\n</style>\n\n<p> Sibling 1 </p>\n<p> Sibling 2 </p>\n```\n\n上面的例子中，2个`p`的之间的`margin`只有`10px`而不是`20px(10 + 10)`。为什么？因为前面说过，\n\n2个`p`都是在*normal flow*中，并且，他们是块级元素，所以他们会参与block formatting contexts。\n\n又因为在BFC中，2个sibling element的垂直方面的`margin`会collapse！于是，结果取2者较大的那个。\n\n```css\nP:last-child {\n  margin: 20px;\n}\n```\n\n这样一来，2个`p`垂直方向的`margin`就取`20`。因为20比10大。\n\n那么，我们如何解决margin collapse呢？答案就是**创建一个新的bfc**。\n\n为什么可以？因为前面的文档说过: *In a block formatting....*才会发生margin collapse。\n也就是说，如果**不在同一个bfc**的话，那么就不会有margin collapse。因此，我们创建新的bfc就行了。\n\n那么，怎样才能创建新的bfc呢？\n\n## Create a New BFC\n> Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with 'overflow' other than 'visible' (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.\n\n通过上面的[文档](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)，我们可以总结出以下的情况会创建出新的BFC:\n\n- `float`的值不为`none`\n- `position`的值不为`static`或者`relative`。\n- `display`的值为`table-cell`, `table-caption`, `inline-block`\n- `overflow`的值不为`visible`。\n\n举个例子:\n```html\n<style>\n  .newBFC {\n    overflow: hidden;\n  }\n</style>\n\n<div class=\"newBFC\">\n  <p>I am in the BFC created by my parent tag</p>\n</div>\n```\n上面例子中的`div`就创建了一个新的bfc。\n\n所以，我们就可以解决margin collapse:\n\n```html\n<style>\n  p {\n    margin: 10px;\n    background-color: lightgreen;\n  }\n  .newBFC {\n    overflow: hidden;\n  }\n</style>\n\n<p> Sibling 1 </p>\n<div class=\"newBFC\">\n  <p> Sibling 2 </p>\n</div>\n```\n\n## Wrap up\n总的来说，BFC就是定义了块级元素是如何排版的。\n\n另外，创建新的BFC可以解决一些问题。比如上面的*margin collapse*，还有更多的例子，我们下篇再说。\n","slug":"BFC-in-CSS-0-WTF","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742yn000637rqz9zz8zjm","content":"<p>看了<a href=\"http://www.sitepoint.com/understanding-block-formatting-contexts-in-css/\" target=\"_blank\" rel=\"external\">Understanding Block Formatting Contexts in CSS</a>这篇文章，终于有点明白什么是BFC(Block Formatting Context)了。</p>\n<h2>Normal Flow</h2>\n<p><strong>下面这句话不要忽略啊。要不然很多事情就想不通</strong>。</p>\n<blockquote>\n<p>Boxes in the normal flow belong to a formatting context, which may be block or inline, but not both simultaneously. Block-level boxes participate in a block formatting context. Inline-level boxes participate in an inline formatting context.</p>\n</blockquote>\n<p>在normal flow中的盒子都是属于formatting context的！！什么意思？</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> I am in the formatting context<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> I also belong to the formatting context<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>在上面的例子，<code>p</code>和<code>div</code>都是在<em>normal flow</em>里面的。并且，他们都是块级元素，所以他们参与了block formatting contexts。</p>\n<p>那么，参与了BFC又会怎么样呢？</p>\n<h2>Block Formatting Contexts</h2>\n<p>下面的<a href=\"http://www.w3.org/TR/CSS21/visuren.html#block-formatting\" target=\"_blank\" rel=\"external\">文档</a>定义了<em>在BFC中盒子是怎么排版的</em>:</p>\n<blockquote>\n<p>In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the ‘margin’ properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse.</p>\n</blockquote>\n<p>在BFC中，盒子都是按垂直方向一个挨着一个排版的，从<em>containing block</em>的顶部开始。2个sibing boxed的<br>\n垂直方向的距离是由<code>margin</code>来决定的，但此时的2个盒子的<code>margin</code>是会<strong>collapse</strong>(坍塌？折叠？)</p>\n<p>那到底是怎么collapse法，我们要怎样才能解决。</p>\n<h2>BFC引起的Collapse Margins</h2>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></div><div class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: lightgreen;</div><div class=\"line\">  &#125;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> Sibling 1 <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> Sibling 2 <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>上面的例子中，2个<code>p</code>的之间的<code>margin</code>只有<code>10px</code>而不是<code>20px(10 + 10)</code>。为什么？因为前面说过，</p>\n<p>2个<code>p</code>都是在<em>normal flow</em>中，并且，他们是块级元素，所以他们会参与block formatting contexts。</p>\n<p>又因为在BFC中，2个sibling element的垂直方面的<code>margin</code>会collapse！于是，结果取2者较大的那个。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">P</span><span class=\"selector-pseudo\">:last-child</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这样一来，2个<code>p</code>垂直方向的<code>margin</code>就取<code>20</code>。因为20比10大。</p>\n<p>那么，我们如何解决margin collapse呢？答案就是<strong>创建一个新的bfc</strong>。</p>\n<p>为什么可以？因为前面的文档说过: <em>In a block formatting…<em>才会发生margin collapse。<br>\n也就是说，如果</em></em>不在同一个bfc**的话，那么就不会有margin collapse。因此，我们创建新的bfc就行了。</p>\n<p>那么，怎样才能创建新的bfc呢？</p>\n<h2>Create a New BFC</h2>\n<blockquote>\n<p>Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with ‘overflow’ other than ‘visible’ (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.</p>\n</blockquote>\n<p>通过上面的<a href=\"http://www.w3.org/TR/CSS21/visuren.html#block-formatting\" target=\"_blank\" rel=\"external\">文档</a>，我们可以总结出以下的情况会创建出新的BFC:</p>\n<ul>\n<li><code>float</code>的值不为<code>none</code></li>\n<li><code>position</code>的值不为<code>static</code>或者<code>relative</code>。</li>\n<li><code>display</code>的值为<code>table-cell</code>, <code>table-caption</code>, <code>inline-block</code></li>\n<li><code>overflow</code>的值不为<code>visible</code>。</li>\n</ul>\n<p>举个例子:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></div><div class=\"line\">  <span class=\"selector-class\">.newBFC</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">  &#125;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"newBFC\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>I am in the BFC created by my parent tag<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>上面例子中的<code>div</code>就创建了一个新的bfc。</p>\n<p>所以，我们就可以解决margin collapse:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></div><div class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: lightgreen;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"selector-class\">.newBFC</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">  &#125;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> Sibling 1 <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"newBFC\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> Sibling 2 <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2>Wrap up</h2>\n<p>总的来说，BFC就是定义了块级元素是如何排版的。</p>\n<p>另外，创建新的BFC可以解决一些问题。比如上面的<em>margin collapse</em>，还有更多的例子，我们下篇再说。</p>\n","excerpt":"","more":"<p>看了<a href=\"http://www.sitepoint.com/understanding-block-formatting-contexts-in-css/\">Understanding Block Formatting Contexts in CSS</a>这篇文章，终于有点明白什么是BFC(Block Formatting Context)了。</p>\n<h2>Normal Flow</h2>\n<p><strong>下面这句话不要忽略啊。要不然很多事情就想不通</strong>。</p>\n<blockquote>\n<p>Boxes in the normal flow belong to a formatting context, which may be block or inline, but not both simultaneously. Block-level boxes participate in a block formatting context. Inline-level boxes participate in an inline formatting context.</p>\n</blockquote>\n<p>在normal flow中的盒子都是属于formatting context的！！什么意思？</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> I am in the formatting context<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> I also belong to the formatting context<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>在上面的例子，<code>p</code>和<code>div</code>都是在<em>normal flow</em>里面的。并且，他们都是块级元素，所以他们参与了block formatting contexts。</p>\n<p>那么，参与了BFC又会怎么样呢？</p>\n<h2>Block Formatting Contexts</h2>\n<p>下面的<a href=\"http://www.w3.org/TR/CSS21/visuren.html#block-formatting\">文档</a>定义了<em>在BFC中盒子是怎么排版的</em>:</p>\n<blockquote>\n<p>In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the ‘margin’ properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse.</p>\n</blockquote>\n<p>在BFC中，盒子都是按垂直方向一个挨着一个排版的，从<em>containing block</em>的顶部开始。2个sibing boxed的<br>\n垂直方向的距离是由<code>margin</code>来决定的，但此时的2个盒子的<code>margin</code>是会<strong>collapse</strong>(坍塌？折叠？)</p>\n<p>那到底是怎么collapse法，我们要怎样才能解决。</p>\n<h2>BFC引起的Collapse Margins</h2>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></div><div class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: lightgreen;</div><div class=\"line\">  &#125;</div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> Sibling 1 <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> Sibling 2 <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>上面的例子中，2个<code>p</code>的之间的<code>margin</code>只有<code>10px</code>而不是<code>20px(10 + 10)</code>。为什么？因为前面说过，</p>\n<p>2个<code>p</code>都是在<em>normal flow</em>中，并且，他们是块级元素，所以他们会参与block formatting contexts。</p>\n<p>又因为在BFC中，2个sibling element的垂直方面的<code>margin</code>会collapse！于是，结果取2者较大的那个。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">P</span><span class=\"selector-pseudo\">:last-child</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这样一来，2个<code>p</code>垂直方向的<code>margin</code>就取<code>20</code>。因为20比10大。</p>\n<p>那么，我们如何解决margin collapse呢？答案就是<strong>创建一个新的bfc</strong>。</p>\n<p>为什么可以？因为前面的文档说过: <em>In a block formatting…<em>才会发生margin collapse。<br>\n也就是说，如果</em></em>不在同一个bfc**的话，那么就不会有margin collapse。因此，我们创建新的bfc就行了。</p>\n<p>那么，怎样才能创建新的bfc呢？</p>\n<h2>Create a New BFC</h2>\n<blockquote>\n<p>Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with ‘overflow’ other than ‘visible’ (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.</p>\n</blockquote>\n<p>通过上面的<a href=\"http://www.w3.org/TR/CSS21/visuren.html#block-formatting\">文档</a>，我们可以总结出以下的情况会创建出新的BFC:</p>\n<ul>\n<li><code>float</code>的值不为<code>none</code></li>\n<li><code>position</code>的值不为<code>static</code>或者<code>relative</code>。</li>\n<li><code>display</code>的值为<code>table-cell</code>, <code>table-caption</code>, <code>inline-block</code></li>\n<li><code>overflow</code>的值不为<code>visible</code>。</li>\n</ul>\n<p>举个例子:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></div><div class=\"line\">  <span class=\"selector-class\">.newBFC</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">  &#125;</div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"newBFC\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>I am in the BFC created by my parent tag<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>上面例子中的<code>div</code>就创建了一个新的bfc。</p>\n<p>所以，我们就可以解决margin collapse:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></div><div class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: lightgreen;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"selector-class\">.newBFC</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">  &#125;</div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> Sibling 1 <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"newBFC\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span> Sibling 2 <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2>Wrap up</h2>\n<p>总的来说，BFC就是定义了块级元素是如何排版的。</p>\n<p>另外，创建新的BFC可以解决一些问题。比如上面的<em>margin collapse</em>，还有更多的例子，我们下篇再说。</p>\n"},{"title":"Medium 是如何加载图片的？","author":"Drake Leung","date":"2016-03-01T09:11:29.000Z","foreword":"分析及实现 Medium 加载图片的效果。","_content":"\n\n## What\n\n首先，我们来看看 Medium 加载图片的效果是怎样子的：\n\n{% vimeo 157258221 %}\n\n我的[博客首页](http://drakeleung.github.io/blog/)也实现了这种效果。下面我们就分析如何实现。\n\n## How\n我们随便打开 Medium 中有图片的[页面](https://medium.com/tag/javascript)，然后 *审查元素*，就可以得到：\n\n{% asset_img inspect.png %}\n\n简化之后得到：\n\n```html\n<section>\n  <div class=\"placeholder\"></div>\n  <div class=\"prossiveMedia\">\n    <img class=\"img-samll\">\n    <canvas></canvas>\n    <img class=\"img-large\">\n  </div>\n</section>\n```\n\n实现的过程大致如下：\n\n1. 使用一个 `placeholder` 来防止图片 *collapse*。\n2. 先加载一个很小的图片\n3. 当这个小图片加载完毕之后，把他画在 `<canvas>` 里面，然后把图片弄模糊。\n4. 当大图片加载完毕之后，显示他。\n\n\n## Do it\n\n首先，HTML 结构如下：\n\n```html\n<section class=\"banner\">\n  <div class=\"placeholder\"></div>\n  <img\n    class=\"img-small\"\n    src=\"https://cdn-images-1.medium.com/freeze/max/27/1*sg-uLNm73whmdOgKlrQdZA.jpeg?q=20\"\n    data-large=\"https://cdn-images-1.medium.com/max/1800/1*sg-uLNm73whmdOgKlrQdZA.jpeg\"\n   >\n</section>\n```\n\n`.placeholder` 是用来撑起 `.banner` 的高度。因为如果我们想要让两张图片重叠的话，会用到 `position: absolute`，定位元素会脱离文档流，那么 `.banner` 的高度就会为 `0`。\n\n`.img-small` 首先加载的是小图片。大图片的 URL 放在了 `data-large` 属性里面。\n\n接下来是，CSS部分：\n\n```CSS\n.banner {\n  position: relative;\n  overflow: hidden;\n}\n\n.placeholder {\n  padding-bottom: 66.6%;\n}\n\nimg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  opacity: 0;\n  transition: opacity 1s linear;\n}\n\nimg.loaded {\n  opacity: 1;\n}\n\n.img-small {\n  filter: blur(50px);\n  -webkit-filter: blur(50px);\n}\n```\n\n`.banner` 设置了 `relative`，所以他成为了他 children (`.placeholder`, `img`) 的 *containning block* 了。\n\n注意到，`.placeholder` 设置了 `padding-bottom: 66.6%`。`66.6%` 是相对于他的 *containning block* 的宽度，也就是 `.banner` 的宽度。\n这个值应该和 `img` 的高度一样，这样一来，`.banner` 的高度就是 `img` 的高度了。\n\n利用 `transition` 让透明度变化有个渐变效果。\n\n实现模糊效果是使用了 `filter: blur()`，而没有使用 `<canvas>`。\n\n然后，JavaScript 代码部分比较简单：\n\n```javascript\nconst app = (() => {\n  const imgSmall = document.querySelector('.img-small')\n\n  const loadImage = () => {\n    const img = new Image()\n\n    img.src = imgSmall.src\n    img.addEventListener('load', (e) => {\n      imgSmall.classList.add('loaded')\n    }, false)\n\n    const imgLarge = new Image()\n\n    imgLarge.src = imgSmall.dataset.large\n    imgLarge.addEventListener('load', (e) => {\n      imgLarge.classList.add('loaded')\n    }, false)\n\n    imgSmall.parentNode.appendChild(imgLarge)\n  }\n\n  return {\n    loadImage\n  }\n\n})()\n\napp.loadImage()\n```\n\n需要注意的是，我们不能直接监听 `.img-small` 的 `load` 事件，要 `new Image`，然后赋予其 `src`，然后我们就可以监听他的 `load` 事件了。\n\n最后，为了凸显效果，我们要禁止缓存和设置较差的网络环境。具体做法如图：\n\n{% asset_img network.png %}\n\n实际效果如下：\n{% jsfiddle 5sLzjk99 %}\n\n## Resources\n- [How Medium does progressive image loading](https://jmperezperez.com/medium-image-progressive-loading-placeholder/)\n","source":"_posts/How-Medium-Load-Images.md","raw":"---\ntitle: Medium 是如何加载图片的？\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-03-01 17:11:29\nforeword: 分析及实现 Medium 加载图片的效果。\n---\n\n\n## What\n\n首先，我们来看看 Medium 加载图片的效果是怎样子的：\n\n{% vimeo 157258221 %}\n\n我的[博客首页](http://drakeleung.github.io/blog/)也实现了这种效果。下面我们就分析如何实现。\n\n## How\n我们随便打开 Medium 中有图片的[页面](https://medium.com/tag/javascript)，然后 *审查元素*，就可以得到：\n\n{% asset_img inspect.png %}\n\n简化之后得到：\n\n```html\n<section>\n  <div class=\"placeholder\"></div>\n  <div class=\"prossiveMedia\">\n    <img class=\"img-samll\">\n    <canvas></canvas>\n    <img class=\"img-large\">\n  </div>\n</section>\n```\n\n实现的过程大致如下：\n\n1. 使用一个 `placeholder` 来防止图片 *collapse*。\n2. 先加载一个很小的图片\n3. 当这个小图片加载完毕之后，把他画在 `<canvas>` 里面，然后把图片弄模糊。\n4. 当大图片加载完毕之后，显示他。\n\n\n## Do it\n\n首先，HTML 结构如下：\n\n```html\n<section class=\"banner\">\n  <div class=\"placeholder\"></div>\n  <img\n    class=\"img-small\"\n    src=\"https://cdn-images-1.medium.com/freeze/max/27/1*sg-uLNm73whmdOgKlrQdZA.jpeg?q=20\"\n    data-large=\"https://cdn-images-1.medium.com/max/1800/1*sg-uLNm73whmdOgKlrQdZA.jpeg\"\n   >\n</section>\n```\n\n`.placeholder` 是用来撑起 `.banner` 的高度。因为如果我们想要让两张图片重叠的话，会用到 `position: absolute`，定位元素会脱离文档流，那么 `.banner` 的高度就会为 `0`。\n\n`.img-small` 首先加载的是小图片。大图片的 URL 放在了 `data-large` 属性里面。\n\n接下来是，CSS部分：\n\n```CSS\n.banner {\n  position: relative;\n  overflow: hidden;\n}\n\n.placeholder {\n  padding-bottom: 66.6%;\n}\n\nimg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  opacity: 0;\n  transition: opacity 1s linear;\n}\n\nimg.loaded {\n  opacity: 1;\n}\n\n.img-small {\n  filter: blur(50px);\n  -webkit-filter: blur(50px);\n}\n```\n\n`.banner` 设置了 `relative`，所以他成为了他 children (`.placeholder`, `img`) 的 *containning block* 了。\n\n注意到，`.placeholder` 设置了 `padding-bottom: 66.6%`。`66.6%` 是相对于他的 *containning block* 的宽度，也就是 `.banner` 的宽度。\n这个值应该和 `img` 的高度一样，这样一来，`.banner` 的高度就是 `img` 的高度了。\n\n利用 `transition` 让透明度变化有个渐变效果。\n\n实现模糊效果是使用了 `filter: blur()`，而没有使用 `<canvas>`。\n\n然后，JavaScript 代码部分比较简单：\n\n```javascript\nconst app = (() => {\n  const imgSmall = document.querySelector('.img-small')\n\n  const loadImage = () => {\n    const img = new Image()\n\n    img.src = imgSmall.src\n    img.addEventListener('load', (e) => {\n      imgSmall.classList.add('loaded')\n    }, false)\n\n    const imgLarge = new Image()\n\n    imgLarge.src = imgSmall.dataset.large\n    imgLarge.addEventListener('load', (e) => {\n      imgLarge.classList.add('loaded')\n    }, false)\n\n    imgSmall.parentNode.appendChild(imgLarge)\n  }\n\n  return {\n    loadImage\n  }\n\n})()\n\napp.loadImage()\n```\n\n需要注意的是，我们不能直接监听 `.img-small` 的 `load` 事件，要 `new Image`，然后赋予其 `src`，然后我们就可以监听他的 `load` 事件了。\n\n最后，为了凸显效果，我们要禁止缓存和设置较差的网络环境。具体做法如图：\n\n{% asset_img network.png %}\n\n实际效果如下：\n{% jsfiddle 5sLzjk99 %}\n\n## Resources\n- [How Medium does progressive image loading](https://jmperezperez.com/medium-image-progressive-loading-placeholder/)\n","slug":"How-Medium-Load-Images","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742yv000937rqzqi7crol","content":"<h2>What</h2>\n<p>首先，我们来看看 Medium 加载图片的效果是怎样子的：</p>\n<div class=\"video-container\"><iframe src=\"//player.vimeo.com/video/157258221\" frameborder=\"0\" allowfullscreen></iframe></div>\n<p>我的<a href=\"http://drakeleung.github.io/blog/\">博客首页</a>也实现了这种效果。下面我们就分析如何实现。</p>\n<h2>How</h2>\n<p>我们随便打开 Medium 中有图片的<a href=\"https://medium.com/tag/javascript\" target=\"_blank\" rel=\"external\">页面</a>，然后 <em>审查元素</em>，就可以得到：</p>\n<img src=\"/2016/03/01/How-Medium-Load-Images/inspect.png\" alt=\"inspect.png\" title=\"\">\n<p>简化之后得到：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"placeholder\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"prossiveMedia\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img-samll\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">canvas</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img-large\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>实现的过程大致如下：</p>\n<ol>\n<li>使用一个 <code>placeholder</code> 来防止图片 <em>collapse</em>。</li>\n<li>先加载一个很小的图片</li>\n<li>当这个小图片加载完毕之后，把他画在 <code>&lt;canvas&gt;</code> 里面，然后把图片弄模糊。</li>\n<li>当大图片加载完毕之后，显示他。</li>\n</ol>\n<h2>Do it</h2>\n<p>首先，HTML 结构如下：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">class</span>=<span class=\"string\">\"banner\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"placeholder\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span></span></div><div class=\"line\">    <span class=\"attr\">class</span>=<span class=\"string\">\"img-small\"</span></div><div class=\"line\">    <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn-images-1.medium.com/freeze/max/27/1*sg-uLNm73whmdOgKlrQdZA.jpeg?q=20\"</span></div><div class=\"line\">    <span class=\"attr\">data-large</span>=<span class=\"string\">\"https://cdn-images-1.medium.com/max/1800/1*sg-uLNm73whmdOgKlrQdZA.jpeg\"</span></div><div class=\"line\">   &gt;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>.placeholder</code> 是用来撑起 <code>.banner</code> 的高度。因为如果我们想要让两张图片重叠的话，会用到 <code>position: absolute</code>，定位元素会脱离文档流，那么 <code>.banner</code> 的高度就会为 <code>0</code>。</p>\n<p><code>.img-small</code> 首先加载的是小图片。大图片的 URL 放在了 <code>data-large</code> 属性里面。</p>\n<p>接下来是，CSS部分：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.banner</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: relative;</div><div class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.placeholder</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">66.6%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">img</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">transition</span>: opacity <span class=\"number\">1s</span> linear;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">img</span><span class=\"selector-class\">.loaded</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.img-small</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">filter</span>: <span class=\"built_in\">blur</span>(50px);</div><div class=\"line\">  <span class=\"attribute\">-webkit-filter</span>: <span class=\"built_in\">blur</span>(50px);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>.banner</code> 设置了 <code>relative</code>，所以他成为了他 children (<code>.placeholder</code>, <code>img</code>) 的 <em>containning block</em> 了。</p>\n<p>注意到，<code>.placeholder</code> 设置了 <code>padding-bottom: 66.6%</code>。<code>66.6%</code> 是相对于他的 <em>containning block</em> 的宽度，也就是 <code>.banner</code> 的宽度。<br>\n这个值应该和 <code>img</code> 的高度一样，这样一来，<code>.banner</code> 的高度就是 <code>img</code> 的高度了。</p>\n<p>利用 <code>transition</code> 让透明度变化有个渐变效果。</p>\n<p>实现模糊效果是使用了 <code>filter: blur()</code>，而没有使用 <code>&lt;canvas&gt;</code>。</p>\n<p>然后，JavaScript 代码部分比较简单：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> app = (() =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> imgSmall = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.img-small'</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">const</span> loadImage = () =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> img = <span class=\"keyword\">new</span> Image()</div><div class=\"line\"></div><div class=\"line\">    img.src = imgSmall.src</div><div class=\"line\">    img.addEventListener(<span class=\"string\">'load'</span>, (e) =&gt; &#123;</div><div class=\"line\">      imgSmall.classList.add(<span class=\"string\">'loaded'</span>)</div><div class=\"line\">    &#125;, <span class=\"literal\">false</span>)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">const</span> imgLarge = <span class=\"keyword\">new</span> Image()</div><div class=\"line\"></div><div class=\"line\">    imgLarge.src = imgSmall.dataset.large</div><div class=\"line\">    imgLarge.addEventListener(<span class=\"string\">'load'</span>, (e) =&gt; &#123;</div><div class=\"line\">      imgLarge.classList.add(<span class=\"string\">'loaded'</span>)</div><div class=\"line\">    &#125;, <span class=\"literal\">false</span>)</div><div class=\"line\"></div><div class=\"line\">    imgSmall.parentNode.appendChild(imgLarge)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    loadImage</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;)()</div><div class=\"line\"></div><div class=\"line\">app.loadImage()</div></pre></td></tr></table></figure>\n<p>需要注意的是，我们不能直接监听 <code>.img-small</code> 的 <code>load</code> 事件，要 <code>new Image</code>，然后赋予其 <code>src</code>，然后我们就可以监听他的 <code>load</code> 事件了。</p>\n<p>最后，为了凸显效果，我们要禁止缓存和设置较差的网络环境。具体做法如图：</p>\n<img src=\"/2016/03/01/How-Medium-Load-Images/network.png\" alt=\"network.png\" title=\"\">\n<p>实际效果如下：</p>\n<iframe scrolling=\"no\" width=\"100%\" height=\"300\" src=\"http://jsfiddle.net/5sLzjk99/embedded/js,resources,html,css,result/light\" frameborder=\"0\" allowfullscreen></iframe>\n<h2>Resources</h2>\n<ul>\n<li><a href=\"https://jmperezperez.com/medium-image-progressive-loading-placeholder/\" target=\"_blank\" rel=\"external\">How Medium does progressive image loading</a></li>\n</ul>\n","excerpt":"","more":"<h2>What</h2>\n<p>首先，我们来看看 Medium 加载图片的效果是怎样子的：</p>\n<div class=\"video-container\"><iframe src=\"//player.vimeo.com/video/157258221\" frameborder=\"0\" allowfullscreen></iframe></div>\n<p>我的<a href=\"http://drakeleung.github.io/blog/\">博客首页</a>也实现了这种效果。下面我们就分析如何实现。</p>\n<h2>How</h2>\n<p>我们随便打开 Medium 中有图片的<a href=\"https://medium.com/tag/javascript\">页面</a>，然后 <em>审查元素</em>，就可以得到：</p>\n<img src=\"/2016/03/01/How-Medium-Load-Images/inspect.png\" alt=\"inspect.png\" title=\"\">\n<p>简化之后得到：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"placeholder\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"prossiveMedia\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img-samll\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">canvas</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img-large\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>实现的过程大致如下：</p>\n<ol>\n<li>使用一个 <code>placeholder</code> 来防止图片 <em>collapse</em>。</li>\n<li>先加载一个很小的图片</li>\n<li>当这个小图片加载完毕之后，把他画在 <code>&lt;canvas&gt;</code> 里面，然后把图片弄模糊。</li>\n<li>当大图片加载完毕之后，显示他。</li>\n</ol>\n<h2>Do it</h2>\n<p>首先，HTML 结构如下：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">class</span>=<span class=\"string\">\"banner\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"placeholder\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span></div><div class=\"line\">    <span class=\"attr\">class</span>=<span class=\"string\">\"img-small\"</span></div><div class=\"line\">    <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn-images-1.medium.com/freeze/max/27/1*sg-uLNm73whmdOgKlrQdZA.jpeg?q=20\"</span></div><div class=\"line\">    <span class=\"attr\">data-large</span>=<span class=\"string\">\"https://cdn-images-1.medium.com/max/1800/1*sg-uLNm73whmdOgKlrQdZA.jpeg\"</span></div><div class=\"line\">   &gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>.placeholder</code> 是用来撑起 <code>.banner</code> 的高度。因为如果我们想要让两张图片重叠的话，会用到 <code>position: absolute</code>，定位元素会脱离文档流，那么 <code>.banner</code> 的高度就会为 <code>0</code>。</p>\n<p><code>.img-small</code> 首先加载的是小图片。大图片的 URL 放在了 <code>data-large</code> 属性里面。</p>\n<p>接下来是，CSS部分：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.banner</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: relative;</div><div class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.placeholder</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">66.6%</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">img</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"attribute\">transition</span>: opacity <span class=\"number\">1s</span> linear;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">img</span><span class=\"selector-class\">.loaded</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.img-small</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">filter</span>: <span class=\"built_in\">blur</span>(50px);</div><div class=\"line\">  <span class=\"attribute\">-webkit-filter</span>: <span class=\"built_in\">blur</span>(50px);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>.banner</code> 设置了 <code>relative</code>，所以他成为了他 children (<code>.placeholder</code>, <code>img</code>) 的 <em>containning block</em> 了。</p>\n<p>注意到，<code>.placeholder</code> 设置了 <code>padding-bottom: 66.6%</code>。<code>66.6%</code> 是相对于他的 <em>containning block</em> 的宽度，也就是 <code>.banner</code> 的宽度。<br>\n这个值应该和 <code>img</code> 的高度一样，这样一来，<code>.banner</code> 的高度就是 <code>img</code> 的高度了。</p>\n<p>利用 <code>transition</code> 让透明度变化有个渐变效果。</p>\n<p>实现模糊效果是使用了 <code>filter: blur()</code>，而没有使用 <code>&lt;canvas&gt;</code>。</p>\n<p>然后，JavaScript 代码部分比较简单：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> app = (() =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> imgSmall = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.img-small'</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">const</span> loadImage = () =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> img = <span class=\"keyword\">new</span> Image()</div><div class=\"line\"></div><div class=\"line\">    img.src = imgSmall.src</div><div class=\"line\">    img.addEventListener(<span class=\"string\">'load'</span>, (e) =&gt; &#123;</div><div class=\"line\">      imgSmall.classList.add(<span class=\"string\">'loaded'</span>)</div><div class=\"line\">    &#125;, <span class=\"literal\">false</span>)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">const</span> imgLarge = <span class=\"keyword\">new</span> Image()</div><div class=\"line\"></div><div class=\"line\">    imgLarge.src = imgSmall.dataset.large</div><div class=\"line\">    imgLarge.addEventListener(<span class=\"string\">'load'</span>, (e) =&gt; &#123;</div><div class=\"line\">      imgLarge.classList.add(<span class=\"string\">'loaded'</span>)</div><div class=\"line\">    &#125;, <span class=\"literal\">false</span>)</div><div class=\"line\"></div><div class=\"line\">    imgSmall.parentNode.appendChild(imgLarge)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    loadImage</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;)()</div><div class=\"line\"></div><div class=\"line\">app.loadImage()</div></pre></td></tr></table></figure>\n<p>需要注意的是，我们不能直接监听 <code>.img-small</code> 的 <code>load</code> 事件，要 <code>new Image</code>，然后赋予其 <code>src</code>，然后我们就可以监听他的 <code>load</code> 事件了。</p>\n<p>最后，为了凸显效果，我们要禁止缓存和设置较差的网络环境。具体做法如图：</p>\n<img src=\"/2016/03/01/How-Medium-Load-Images/network.png\" alt=\"network.png\" title=\"\">\n<p>实际效果如下：</p>\n<iframe scrolling=\"no\" width=\"100%\" height=\"300\" src=\"http://jsfiddle.net/5sLzjk99/embedded/js,resources,html,css,result/light\" frameborder=\"0\" allowfullscreen></iframe>\n<h2>Resources</h2>\n<ul>\n<li><a href=\"https://jmperezperez.com/medium-image-progressive-loading-placeholder/\">How Medium does progressive image loading</a></li>\n</ul>\n"},{"title":"笨方法学 JavaScript - This 关键字","date":"2015-06-09T07:09:05.000Z","author":"Drake Leung","foreword":"this系列第一篇, 主要讲解了this在5种模式下的不同取值.","_content":"\n## 2 个常见的误解\n第一个普遍错误就是认为`this`是指向这个`function`本身。举个例子:\n```javascript\nfunction foo() {\n  this.count++;\n}\n\nfoo.count = 0;\nfor (var i = 0; i < 5; i++) {\n  foo();\n}\n\nconsole.log(foo.count); // not 5 but 0\n```\n\n这样的话，有没有其他办法可以解决呢？如果不用`this`的话，我们可以新创建一个对象。\n```javascript\nfunction foo() {\n  data.count++;\n}\nvar data = {\n  count: 0;\n};\n\n// same to the example above\n```\n还有一个解决方法,直接用`foo`他本身。\n```javascript\nfunction foo() {\n  foo.count++;\n}\n```\n虽然上面２种方法都解决了问题，但是他们都逃避了`this`。这不是我们想要的。　　\n再来看下面的解决方法: 使用`call`。\n```javascript\nfor (var i = 0; i < 5; i++) {\n  foo.call(foo);\n}\n```\n\n### Its Scope\n还有一个误解就是认为`this`指向这个函数的作用域。\n```javascript\nfunction foo() {\n  var loved = true;\n  bar();\n}\n\nfunction bar() {\n  console.log(this.loved);\n}\n\nfoo(); // ReferenceError: loved is not defined\n```\n\n## What is this\n事实上`this`并不是在函数定义的就绑定好的(**author-time binding**)，而是在函数调用的时候才绑定好(**runtime binding**)\n\n也就是说，`this`的值跟函数的定义一毛钱的关系都没有，而是取决于函数是在哪里被调用的(**call-site**)\n```javascript\nfunction foo() {\n  bar() // call-site for bar\n}\n\nfoo()  // call-site for 'foo'\n```\n\n## 4 Rules\n上面说了`this`的值取决与函数的call-site。因此，我们总结了４种**invoke pattern**(not define pattern)\n\n### Default Binding\n```javascript\nfunction foo() {\n  console.log(this.loved);\n}\n\nvar loved = true;\n\nfoo(); // true\n```\n从上面的例子可以看出，`this`是指向`global object`(or `window`)。也就是说，当一个函数以**函数名加括号**(`foo()`)的这个形式被调用的话，他的`this`就指向`globol object`。\n\nP.S.如果在严格模式下, `this`的值会是`undefined`而不是`global object`。\n\n### Implicit Binding\n```javascript\nfunction foo() {\n  console.log(this.loved);\n}\n\nvar ex = {\n  loved: true,\n  foo: foo\n};\n\nex.foo();  // true\n```\n如果是调用一个对象的方法的话，`this`就隐式地指向这个对象本身。所以上面的`this`指向`ex`对象。并且是指向离他最近的对象，就近原则。所以下面的例子`this`是指向`next`而不是`ex`。\n```javascript\nvar ex = {\n  loved: true,\n  next: {\n    loved: false,\n    foo: foo\n  }\n};\n\nex.next.foo(); // not true but false\n```\n**但，这个隐式绑定有可能会出现意外**。尤其是传给一个callback function的时候。\n```javascript\nfunction foo() {\n  console.log(this.loved);\n}\n\nvar ex = {\n  loved: true,\n  foo: foo\n};\n\nwindow.loved = false;\nsetTimeout(ex.foo, 100); // false\n```\n其实`setTiemout`的函数是这样的:\n```javascript\nfunction setTimeout(fn, delay) {\n  // something\n  fn();  // call-site !!!\n}\n```\n由于`fn()`这种invoke pattern属于第一种，所以他是绑定到`global object`。\n\n虽然`this`的值是符合我们所讲的，但是这并不是我想要的东西，因为我想打印出就是`ex.loved`这个field，而不是`global object`。\n\n### Explicit Binding\n我们将会使用到`call`, `apply`和`bind`。\n\n```javascript\nfunction foo() {\n  console.log(this.loved);\n}\n\nvar ex = {\n  loved: true\n}\n\nfoo.call(ex); // true\n```\n\n那么，我们要怎样解决上面那个问题呢？我们需要**hard binding**。  \n我们需要用另外一个函数来作为wrapper，\n```javascript\nfunction bar() {\n  foo.call(ex);\n}\n\nbar(); // true\nsetTimeout(bar, 100); // true\nbar.call(window); // true\n```\n\n因为*hard binding*经常用，所以ES5提供了一个方法: `bind()`。因此，我们可以这样:\n```javascript\nvar bar = foo.bind(ex);\nsetTimeout(bar, 100); // true\n```\n### New Binding\n当一个函数在调用的时候前面有个`new` keyword，`this`就被绑定到这个constructed object。\n```javascript\nfunction Ex() {\n  this.loved = true;\n}\nvar ex = new Ex();\nconsole.log(ex.loved);\n```\n既然`this`怎么麻烦，为什么就不能简单一点啊？\n\n## Arrow function\n在`=>`中，`this`是绑定在**lexical scope**，也就是`this`取决于函数在哪里定义，而不是函数在哪里调用。并且，`this`一旦决定是不会改变的，也就是说`call`, `bind`这些方法都不起作用了。\n```javascript\nvar ex = {\n  loved: true,\n\n  foo() {\n    setTimeout(() => {\n      console.log(this.loved);\n    }, 10.24);\n  }\n}\n\nex.foo(); // true\n```\n\n## Reference\n[You dont know JavaScript - This](https://github.com/getify/You-Dont-Know-JS/blob/master/this%20&%20object%20prototypes/README.md#you-dont-know-js-this--object-prototypes) chapter\n","source":"_posts/JavaScript-For-Kids-This.md","raw":"---\ntitle: 笨方法学 JavaScript - This 关键字\ndate: 2015-06-09 15:09:05\n\nauthor: Drake Leung\ntags: This\ncategories: JavaScript\nforeword:\n  this系列第一篇, 主要讲解了this在5种模式下的不同取值.\n---\n\n## 2 个常见的误解\n第一个普遍错误就是认为`this`是指向这个`function`本身。举个例子:\n```javascript\nfunction foo() {\n  this.count++;\n}\n\nfoo.count = 0;\nfor (var i = 0; i < 5; i++) {\n  foo();\n}\n\nconsole.log(foo.count); // not 5 but 0\n```\n\n这样的话，有没有其他办法可以解决呢？如果不用`this`的话，我们可以新创建一个对象。\n```javascript\nfunction foo() {\n  data.count++;\n}\nvar data = {\n  count: 0;\n};\n\n// same to the example above\n```\n还有一个解决方法,直接用`foo`他本身。\n```javascript\nfunction foo() {\n  foo.count++;\n}\n```\n虽然上面２种方法都解决了问题，但是他们都逃避了`this`。这不是我们想要的。　　\n再来看下面的解决方法: 使用`call`。\n```javascript\nfor (var i = 0; i < 5; i++) {\n  foo.call(foo);\n}\n```\n\n### Its Scope\n还有一个误解就是认为`this`指向这个函数的作用域。\n```javascript\nfunction foo() {\n  var loved = true;\n  bar();\n}\n\nfunction bar() {\n  console.log(this.loved);\n}\n\nfoo(); // ReferenceError: loved is not defined\n```\n\n## What is this\n事实上`this`并不是在函数定义的就绑定好的(**author-time binding**)，而是在函数调用的时候才绑定好(**runtime binding**)\n\n也就是说，`this`的值跟函数的定义一毛钱的关系都没有，而是取决于函数是在哪里被调用的(**call-site**)\n```javascript\nfunction foo() {\n  bar() // call-site for bar\n}\n\nfoo()  // call-site for 'foo'\n```\n\n## 4 Rules\n上面说了`this`的值取决与函数的call-site。因此，我们总结了４种**invoke pattern**(not define pattern)\n\n### Default Binding\n```javascript\nfunction foo() {\n  console.log(this.loved);\n}\n\nvar loved = true;\n\nfoo(); // true\n```\n从上面的例子可以看出，`this`是指向`global object`(or `window`)。也就是说，当一个函数以**函数名加括号**(`foo()`)的这个形式被调用的话，他的`this`就指向`globol object`。\n\nP.S.如果在严格模式下, `this`的值会是`undefined`而不是`global object`。\n\n### Implicit Binding\n```javascript\nfunction foo() {\n  console.log(this.loved);\n}\n\nvar ex = {\n  loved: true,\n  foo: foo\n};\n\nex.foo();  // true\n```\n如果是调用一个对象的方法的话，`this`就隐式地指向这个对象本身。所以上面的`this`指向`ex`对象。并且是指向离他最近的对象，就近原则。所以下面的例子`this`是指向`next`而不是`ex`。\n```javascript\nvar ex = {\n  loved: true,\n  next: {\n    loved: false,\n    foo: foo\n  }\n};\n\nex.next.foo(); // not true but false\n```\n**但，这个隐式绑定有可能会出现意外**。尤其是传给一个callback function的时候。\n```javascript\nfunction foo() {\n  console.log(this.loved);\n}\n\nvar ex = {\n  loved: true,\n  foo: foo\n};\n\nwindow.loved = false;\nsetTimeout(ex.foo, 100); // false\n```\n其实`setTiemout`的函数是这样的:\n```javascript\nfunction setTimeout(fn, delay) {\n  // something\n  fn();  // call-site !!!\n}\n```\n由于`fn()`这种invoke pattern属于第一种，所以他是绑定到`global object`。\n\n虽然`this`的值是符合我们所讲的，但是这并不是我想要的东西，因为我想打印出就是`ex.loved`这个field，而不是`global object`。\n\n### Explicit Binding\n我们将会使用到`call`, `apply`和`bind`。\n\n```javascript\nfunction foo() {\n  console.log(this.loved);\n}\n\nvar ex = {\n  loved: true\n}\n\nfoo.call(ex); // true\n```\n\n那么，我们要怎样解决上面那个问题呢？我们需要**hard binding**。  \n我们需要用另外一个函数来作为wrapper，\n```javascript\nfunction bar() {\n  foo.call(ex);\n}\n\nbar(); // true\nsetTimeout(bar, 100); // true\nbar.call(window); // true\n```\n\n因为*hard binding*经常用，所以ES5提供了一个方法: `bind()`。因此，我们可以这样:\n```javascript\nvar bar = foo.bind(ex);\nsetTimeout(bar, 100); // true\n```\n### New Binding\n当一个函数在调用的时候前面有个`new` keyword，`this`就被绑定到这个constructed object。\n```javascript\nfunction Ex() {\n  this.loved = true;\n}\nvar ex = new Ex();\nconsole.log(ex.loved);\n```\n既然`this`怎么麻烦，为什么就不能简单一点啊？\n\n## Arrow function\n在`=>`中，`this`是绑定在**lexical scope**，也就是`this`取决于函数在哪里定义，而不是函数在哪里调用。并且，`this`一旦决定是不会改变的，也就是说`call`, `bind`这些方法都不起作用了。\n```javascript\nvar ex = {\n  loved: true,\n\n  foo() {\n    setTimeout(() => {\n      console.log(this.loved);\n    }, 10.24);\n  }\n}\n\nex.foo(); // true\n```\n\n## Reference\n[You dont know JavaScript - This](https://github.com/getify/You-Dont-Know-JS/blob/master/this%20&%20object%20prototypes/README.md#you-dont-know-js-this--object-prototypes) chapter\n","slug":"JavaScript-For-Kids-This","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742yw000a37rqlw8meave","content":"<h2>2 个常见的误解</h2>\n<p>第一个普遍错误就是认为<code>this</code>是指向这个<code>function</code>本身。举个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.count++;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo.count = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  foo();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(foo.count); <span class=\"comment\">// not 5 but 0</span></div></pre></td></tr></table></figure>\n<p>这样的话，有没有其他办法可以解决呢？如果不用<code>this</code>的话，我们可以新创建一个对象。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  data.count++;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> data = &#123;</div><div class=\"line\">  count: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// same to the example above</span></div></pre></td></tr></table></figure>\n<p>还有一个解决方法,直接用<code>foo</code>他本身。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  foo.count++;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>虽然上面２种方法都解决了问题，但是他们都逃避了<code>this</code>。这不是我们想要的。　　<br>\n再来看下面的解决方法: 使用<code>call</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  foo.call(foo);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3>Its Scope</h3>\n<p>还有一个误解就是认为<code>this</code>指向这个函数的作用域。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> loved = <span class=\"literal\">true</span>;</div><div class=\"line\">  bar();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// ReferenceError: loved is not defined</span></div></pre></td></tr></table></figure>\n<h2>What is this</h2>\n<p>事实上<code>this</code>并不是在函数定义的就绑定好的(<strong>author-time binding</strong>)，而是在函数调用的时候才绑定好(<strong>runtime binding</strong>)</p>\n<p>也就是说，<code>this</code>的值跟函数的定义一毛钱的关系都没有，而是取决于函数是在哪里被调用的(<strong>call-site</strong>)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  bar() <span class=\"comment\">// call-site for bar</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo()  <span class=\"comment\">// call-site for 'foo'</span></div></pre></td></tr></table></figure>\n<h2>4 Rules</h2>\n<p>上面说了<code>this</code>的值取决与函数的call-site。因此，我们总结了４种<strong>invoke pattern</strong>(not define pattern)</p>\n<h3>Default Binding</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> loved = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>从上面的例子可以看出，<code>this</code>是指向<code>global object</code>(or <code>window</code>)。也就是说，当一个函数以<strong>函数名加括号</strong>(<code>foo()</code>)的这个形式被调用的话，他的<code>this</code>就指向<code>globol object</code>。</p>\n<p>P.S.如果在严格模式下, <code>this</code>的值会是<code>undefined</code>而不是<code>global object</code>。</p>\n<h3>Implicit Binding</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span>,</div><div class=\"line\">  foo: foo</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">ex.foo();  <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>如果是调用一个对象的方法的话，<code>this</code>就隐式地指向这个对象本身。所以上面的<code>this</code>指向<code>ex</code>对象。并且是指向离他最近的对象，就近原则。所以下面的例子<code>this</code>是指向<code>next</code>而不是<code>ex</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span>,</div><div class=\"line\">  next: &#123;</div><div class=\"line\">    loved: <span class=\"literal\">false</span>,</div><div class=\"line\">    foo: foo</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">ex.next.foo(); <span class=\"comment\">// not true but false</span></div></pre></td></tr></table></figure>\n<p><strong>但，这个隐式绑定有可能会出现意外</strong>。尤其是传给一个callback function的时候。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span>,</div><div class=\"line\">  foo: foo</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">window</span>.loved = <span class=\"literal\">false</span>;</div><div class=\"line\">setTimeout(ex.foo, <span class=\"number\">100</span>); <span class=\"comment\">// false</span></div></pre></td></tr></table></figure>\n<p>其实<code>setTiemout</code>的函数是这样的:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setTimeout</span>(<span class=\"params\">fn, delay</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// something</span></div><div class=\"line\">  fn();  <span class=\"comment\">// call-site !!!</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>由于<code>fn()</code>这种invoke pattern属于第一种，所以他是绑定到<code>global object</code>。</p>\n<p>虽然<code>this</code>的值是符合我们所讲的，但是这并不是我想要的东西，因为我想打印出就是<code>ex.loved</code>这个field，而不是<code>global object</code>。</p>\n<h3>Explicit Binding</h3>\n<p>我们将会使用到<code>call</code>, <code>apply</code>和<code>bind</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo.call(ex); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>那么，我们要怎样解决上面那个问题呢？我们需要<strong>hard binding</strong>。<br>\n我们需要用另外一个函数来作为wrapper，</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  foo.call(ex);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">bar(); <span class=\"comment\">// true</span></div><div class=\"line\">setTimeout(bar, <span class=\"number\">100</span>); <span class=\"comment\">// true</span></div><div class=\"line\">bar.call(<span class=\"built_in\">window</span>); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>因为<em>hard binding</em>经常用，所以ES5提供了一个方法: <code>bind()</code>。因此，我们可以这样:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> bar = foo.bind(ex);</div><div class=\"line\">setTimeout(bar, <span class=\"number\">100</span>); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<h3>New Binding</h3>\n<p>当一个函数在调用的时候前面有个<code>new</code> keyword，<code>this</code>就被绑定到这个constructed object。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Ex</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.loved = <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> ex = <span class=\"keyword\">new</span> Ex();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(ex.loved);</div></pre></td></tr></table></figure>\n<p>既然<code>this</code>怎么麻烦，为什么就不能简单一点啊？</p>\n<h2>Arrow function</h2>\n<p>在<code>=&gt;</code>中，<code>this</code>是绑定在<strong>lexical scope</strong>，也就是<code>this</code>取决于函数在哪里定义，而不是函数在哪里调用。并且，<code>this</code>一旦决定是不会改变的，也就是说<code>call</code>, <code>bind</code>这些方法都不起作用了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span>,</div><div class=\"line\"></div><div class=\"line\">  foo() &#123;</div><div class=\"line\">    setTimeout(() =&gt; &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">    &#125;, <span class=\"number\">10.24</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">ex.foo(); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<h2>Reference</h2>\n<p><a href=\"https://github.com/getify/You-Dont-Know-JS/blob/master/this%20&amp;%20object%20prototypes/README.md#you-dont-know-js-this--object-prototypes\" target=\"_blank\" rel=\"external\">You dont know JavaScript - This</a> chapter</p>\n","excerpt":"","more":"<h2>2 个常见的误解</h2>\n<p>第一个普遍错误就是认为<code>this</code>是指向这个<code>function</code>本身。举个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.count++;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo.count = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  foo();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(foo.count); <span class=\"comment\">// not 5 but 0</span></div></pre></td></tr></table></figure>\n<p>这样的话，有没有其他办法可以解决呢？如果不用<code>this</code>的话，我们可以新创建一个对象。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  data.count++;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> data = &#123;</div><div class=\"line\">  count: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// same to the example above</span></div></pre></td></tr></table></figure>\n<p>还有一个解决方法,直接用<code>foo</code>他本身。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  foo.count++;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>虽然上面２种方法都解决了问题，但是他们都逃避了<code>this</code>。这不是我们想要的。　　<br>\n再来看下面的解决方法: 使用<code>call</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  foo.call(foo);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3>Its Scope</h3>\n<p>还有一个误解就是认为<code>this</code>指向这个函数的作用域。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> loved = <span class=\"literal\">true</span>;</div><div class=\"line\">  bar();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// ReferenceError: loved is not defined</span></div></pre></td></tr></table></figure>\n<h2>What is this</h2>\n<p>事实上<code>this</code>并不是在函数定义的就绑定好的(<strong>author-time binding</strong>)，而是在函数调用的时候才绑定好(<strong>runtime binding</strong>)</p>\n<p>也就是说，<code>this</code>的值跟函数的定义一毛钱的关系都没有，而是取决于函数是在哪里被调用的(<strong>call-site</strong>)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  bar() <span class=\"comment\">// call-site for bar</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo()  <span class=\"comment\">// call-site for 'foo'</span></div></pre></td></tr></table></figure>\n<h2>4 Rules</h2>\n<p>上面说了<code>this</code>的值取决与函数的call-site。因此，我们总结了４种<strong>invoke pattern</strong>(not define pattern)</p>\n<h3>Default Binding</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> loved = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>从上面的例子可以看出，<code>this</code>是指向<code>global object</code>(or <code>window</code>)。也就是说，当一个函数以<strong>函数名加括号</strong>(<code>foo()</code>)的这个形式被调用的话，他的<code>this</code>就指向<code>globol object</code>。</p>\n<p>P.S.如果在严格模式下, <code>this</code>的值会是<code>undefined</code>而不是<code>global object</code>。</p>\n<h3>Implicit Binding</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span>,</div><div class=\"line\">  foo: foo</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">ex.foo();  <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>如果是调用一个对象的方法的话，<code>this</code>就隐式地指向这个对象本身。所以上面的<code>this</code>指向<code>ex</code>对象。并且是指向离他最近的对象，就近原则。所以下面的例子<code>this</code>是指向<code>next</code>而不是<code>ex</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span>,</div><div class=\"line\">  next: &#123;</div><div class=\"line\">    loved: <span class=\"literal\">false</span>,</div><div class=\"line\">    foo: foo</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">ex.next.foo(); <span class=\"comment\">// not true but false</span></div></pre></td></tr></table></figure>\n<p><strong>但，这个隐式绑定有可能会出现意外</strong>。尤其是传给一个callback function的时候。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span>,</div><div class=\"line\">  foo: foo</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">window</span>.loved = <span class=\"literal\">false</span>;</div><div class=\"line\">setTimeout(ex.foo, <span class=\"number\">100</span>); <span class=\"comment\">// false</span></div></pre></td></tr></table></figure>\n<p>其实<code>setTiemout</code>的函数是这样的:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setTimeout</span>(<span class=\"params\">fn, delay</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// something</span></div><div class=\"line\">  fn();  <span class=\"comment\">// call-site !!!</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>由于<code>fn()</code>这种invoke pattern属于第一种，所以他是绑定到<code>global object</code>。</p>\n<p>虽然<code>this</code>的值是符合我们所讲的，但是这并不是我想要的东西，因为我想打印出就是<code>ex.loved</code>这个field，而不是<code>global object</code>。</p>\n<h3>Explicit Binding</h3>\n<p>我们将会使用到<code>call</code>, <code>apply</code>和<code>bind</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo.call(ex); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>那么，我们要怎样解决上面那个问题呢？我们需要<strong>hard binding</strong>。<br>\n我们需要用另外一个函数来作为wrapper，</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  foo.call(ex);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">bar(); <span class=\"comment\">// true</span></div><div class=\"line\">setTimeout(bar, <span class=\"number\">100</span>); <span class=\"comment\">// true</span></div><div class=\"line\">bar.call(<span class=\"built_in\">window</span>); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>因为<em>hard binding</em>经常用，所以ES5提供了一个方法: <code>bind()</code>。因此，我们可以这样:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> bar = foo.bind(ex);</div><div class=\"line\">setTimeout(bar, <span class=\"number\">100</span>); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<h3>New Binding</h3>\n<p>当一个函数在调用的时候前面有个<code>new</code> keyword，<code>this</code>就被绑定到这个constructed object。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Ex</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.loved = <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> ex = <span class=\"keyword\">new</span> Ex();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(ex.loved);</div></pre></td></tr></table></figure>\n<p>既然<code>this</code>怎么麻烦，为什么就不能简单一点啊？</p>\n<h2>Arrow function</h2>\n<p>在<code>=&gt;</code>中，<code>this</code>是绑定在<strong>lexical scope</strong>，也就是<code>this</code>取决于函数在哪里定义，而不是函数在哪里调用。并且，<code>this</code>一旦决定是不会改变的，也就是说<code>call</code>, <code>bind</code>这些方法都不起作用了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> ex = &#123;</div><div class=\"line\">  loved: <span class=\"literal\">true</span>,</div><div class=\"line\"></div><div class=\"line\">  foo() &#123;</div><div class=\"line\">    setTimeout(() =&gt; &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.loved);</div><div class=\"line\">    &#125;, <span class=\"number\">10.24</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">ex.foo(); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<h2>Reference</h2>\n<p><a href=\"https://github.com/getify/You-Dont-Know-JS/blob/master/this%20&amp;%20object%20prototypes/README.md#you-dont-know-js-this--object-prototypes\">You dont know JavaScript - This</a> chapter</p>\n"},{"title":"「译」JavaScript Modules Part1: A Beginner Guide","author":"Drake Leung","date":"2016-02-07T13:50:52.000Z","foreword":"超级详细地介绍了 JavaScript 模块化的进化历史。","_content":"\n**(原文：[JavaScript Modules: A Beginner's Guide - Preethi Kasireddy](https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.4ufizwkud))**\n\n\n如果你是刚接触 JavaScript 的话，像「module bundler vs. module loaders」， 「Webpack vs. Browserify」 以及「AMD vs. CommonJS」这些术语可以一下子把你搞晕。\n\nJavaScript的模块系统(module system)也许是很吓人的，但是对于web开发者来说，理解他是很重要的。\n\n在本文，我会使用通俗易懂的话(以及一些代码)来解释这些术语。我希望能帮助到你。\n\n注意：为了简单起见，我会分成2部分来说：Part 1 会解释什么是 *module* 以及为什么要使用他们。Part 2 (在下周发表)会接着解释什么是 *bundle modules* 以及其实现方法。\n\n\n## Part 1: 有谁可以再解释解释什么是 module 吗？\n\n好的作者会把他们的书籍分成多个章节；好的程序员也会把他们的程序分成多个模块。\n\n就像书的章节一样，module 只是单词(在这里，即是 code )的集合。\n\n但是，好的模块是高度包含自己独立的功能。这让他们可以根据需求更改，删除，增加，而不扰乱整个系统。\n\n## 为什么使用 module ？\n\n使用modules对于大型，相互依赖的代码库来说是很多好处的。在我看来，最重要的是：\n\n**1) 可维护性：**根据定义，module 是独立的。一个设计良好的 module 是尽可能多地减少代码的耦合，从而他能够独立地开发和改进。当一个 module 的耦合度低的时候，更新他是很容易一件事情。\n\n回到我们书籍的例子，当你因为更新了一个章节，从而需要调整剩余章节的话，这简直是噩耗。相反，你更愿意编写章节的时候，不影响其他章节。\n\n**2) 命名空间(namespacing)：**在 JavaScript 中，在 top-level 函数的作用域的外面的变量就是 *global* (全局)变量，全局变量即是每个人都可以 access 他们。因为这样，就很容易造成\"命名空间污染”，也就是无相关的代码共享全局变量。\n\n在毫无相关的代码中共享全局变量在开发中 [is a big no no](http://c2.com/cgi/wiki?GlobalVariablesAreBad)。\n\n在本文的下面，我们会解释 module 可以让我们避免命名空间污染，通过为我们的变量创建私有空间。\n\n**3) 可重用性：**我们不妨老实承认，我们过去是把一个项目的代码copy到另一个项目中。比方说，你copy了你之前项目的一些util方法到当前的项目中。\n\n这是很浪费时间的。但是慢着，如果使用 module ，一个我们可以不断复用的 module ，这不是很好吗？\n\n## 你是如何合并模块(incorporate modules)?\n\n有很多方法可以在你的程序中合并模块。我们现在就来讲解他们的其中一些：\n\n### Module Pattern\n\n*Module pattern* 其实就是模仿 *class* 的概念(因为 JavaScript 并不真正地支持 class )，因此我们可以把公有方法，私有方法以及变量都保存在一个对象里面——这个就有点类似于 class 在其他编程语言(如 Java 或者 Python )中的使用。这可以让我们给公有方法创建 API ，然后暴露出去；并且同时可以把私有的变量和方法都封装在一个闭包作用域(closure scope)中。\n\n有几个方法可以实现 module pattern。在第一个例子中。我会使用 *anonymous closure*。他会把我们所有的代码都放进一个匿名函数里面。(记住：在 JavaScript 中，`function` 是创建作用域的唯一方法？)\n\n**例子一：Anonymous closure**\n\n``` javascript\n(function () {\n  // We keep these variables private inside this closure scope\n\n  var myGrades = [93, 95, 88, 0, 55, 91];\n\n  var average = function() {\n    var total = myGrades.reduce(function(accumulator, item) {\n      return accumulator + item}, 0);\n\n      return 'Your average grade is ' + total / myGrades.length + '.';\n  }\n\n  var failing = function(){\n    var failingGrades = myGrades.filter(function(item) {\n      return item < 70;});\n\n    return 'You failed ' + failingGrades.length + ' times.';\n  }\n\n  console.log(failing());\n\n}());\n\n// ‘You failed 2 times.’\n```\n\n有了这个，我们的匿名函数就有了它自己的求值环境(evaluation environment)或者\"closure\"，并且我们可以立马对他求值(evaluate)。这可以让我们从 parent namespace(global) 中隐藏变量。\n\n这种方法的好处就是，你可以在匿名函数中使用局部变量而不会 overwrite(覆盖) 已经存在的全局变量，但与此同时，你还可以 access 全局变量，就像这样：\n\n``` javascript\nvar global = 'Hello, I am a global variable :)';\n\n(function () {\n  // We keep these variables private inside this closure scope\n\n  var myGrades = [93, 95, 88, 0, 55, 91];\n\n  var average = function() {\n    var total = myGrades.reduce(function(accumulator, item) {\n      return accumulator + item}, 0);\n\n    return 'Your average grade is ' + total / myGrades.length + '.';\n  }\n\n  var failing = function(){\n    var failingGrades = myGrades.filter(function(item) {\n      return item < 70;});\n\n    return 'You failed ' + failingGrades.length + ' times.';\n  }\n\n  console.log(failing());\n  console.log(global);\n}());\n\n// 'You failed 2 times.'\n// 'Hello, I am a global variable :)'\n```\n\n注意到在匿名函数2旁的括号是必须的，因为以关键字`function`开头的语句会被认为是 *function declaration* (记住，在 JavaScript 中，你是不能定义没有名字的function declaration。) 因此，这对括号就创建一个 *function expression*。如果不明白的话，你可以[阅读这里](http://stackoverflow.com/questions/1634268/explain-javascripts-encapsulated-anonymous-function-syntax)。\n\n**例子二：Global import**\n\n另一个较流行的方法是 *global import* ，就像 jQuery 一样。他有点类似于上面的　*anonymous closure*，只是现在我们把全局变量作为参数传进了匿名函数中。\n\n``` javascript\n(function (globalVariable) {\n\n  // Keep this variables private inside this closure scope\n  var privateFunction = function() {\n    console.log('Shhhh, this is private!');\n  }\n\n  // Expose the below methods via the globalVariable interface while\n  // hiding the implementation of the method within the\n  // function() block\n\n  globalVariable.each = function(collection, iterator) {\n    if (Array.isArray(collection)) {\n      for (var i = 0; i < collection.length; i++) {\n        iterator(collection[i], i, collection);\n      }\n    } else {\n      for (var key in collection) {\n        iterator(collection[key], key, collection);\n      }\n    }\n  };\n\n  globalVariable.filter = function(collection, test) {\n    var filtered = [];\n    globalVariable.each(collection, function(item) {\n      if (test(item)) {\n        filtered.push(item);\n      }\n    });\n    return filtered;\n  };\n\n  globalVariable.map = function(collection, iterator) {\n    var mapped = [];\n    globalUtils.each(collection, function(value, key, collection) {\n      mapped.push(iterator(value));\n    });\n    return mapped;\n  };\n\n  globalVariable.reduce = function(collection, iterator, accumulator) {\n    var startingValueMissing = accumulator === undefined;\n\n    globalVariable.each(collection, function(item) {\n      if(startingValueMissing) {\n        accumulator = item;\n        startingValueMissing = false;\n      } else {\n        accumulator = iterator(accumulator, item);\n      }\n    });\n\n    return accumulator;\n\n  };\n\n }(globalVariable));\n```\n\n在这个例子中，`globalVariable` 在全局中唯一的一个变量。这个方法比前一个方法好的地方在于：你可以在前面就定义全局变量，这样就方便别人阅读你的代码。\n\n**例子三：Object interface**\n\n创建 module 的例子还有一个就是使用独立的 *object interface*，就像这样：\n\n``` javascript\nvar myGradesCalculate = (function () {\n\n  // Keep this variable private inside this closure scope\n  var myGrades = [93, 95, 88, 0, 55, 91];\n\n  // Expose these functions via an interface while hiding\n  // the implementation of the module within the function() block\n\n  return {\n    average: function() {\n      var total = myGrades.reduce(function(accumulator, item) {\n        return accumulator + item;\n        }, 0);\n\n      return'Your average grade is ' + total / myGrades.length + '.';\n    },\n\n    failing: function() {\n      var failingGrades = myGrades.filter(function(item) {\n          return item < 70;\n        });\n\n      return 'You failed ' + failingGrades.length + ' times.';\n    }\n  }\n})();\n\nmyGradesCalculate.failing(); // 'You failed 2 times.'\nmyGradesCalculate.average(); // 'Your average grade is 70.33333333333333.'\n```\n\n显而易见，这种方法可以让我们自己定义哪些变量/方法是私有的(例如，`myGrads`)，以及哪些变量/方法是我们想要暴露给他们的，通过 `return` 语句(比如，`average` & `failing`)。\n\n**例子四：Revealing module pattern**\n\n这个跟上面的方法是很相似的，除了他保证所有的变量和方法都是私有的，直到我们显式地暴露出去：\n\n``` javascript\nvar myGradesCalculate = (function () {\n\n  // Keep this variable private inside this closure scope\n  var myGrades = [93, 95, 88, 0, 55, 91];\n\n  var average = function() {\n    var total = myGrades.reduce(function(accumulator, item) {\n      return accumulator + item;\n      }, 0);\n\n    return'Your average grade is ' + total / myGrades.length + '.';\n  };\n\n  var failing = function() {\n    var failingGrades = myGrades.filter(function(item) {\n        return item < 70;\n      });\n\n    return 'You failed ' + failingGrades.length + ' times.';\n  };\n\n  // Explicitly reveal public pointers to the private functions\n  // that we want to reveal publicly\n\n  return {\n    average: average,\n    failing: failing\n  }\n})();\n\nmyGradesCalculate.failing(); // 'You failed 2 times.'\nmyGradesCalculate.average(); // 'Your average grade is 70.33333333333333.'\n```\n\n上面好像讲了好多东西，其实对于 module pattern 来说，只是冰山一角。下面是一些我认为比较有用的资源：\n\n- [Learn JavaScript Design Patterns](https://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript) - by *Addy Osmani*\n- [Adequately Good by Ben Cherry](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html) - 通过例子讲述module pattern的高级使用\n- [Blog of Carl Danley](https://carldanley.com/js-module-pattern/) - module pattern的概述以及其他 JavaScript pattern 的资源\n\n## CommonJS and AMD\n\n上面讲到的所有方法都有一个共同点：使用全局变量将其所有代码都封装在一个函数里面，从而使用 *closure scope* 为他自己创建出了一个私有的命名空间。\n\n他们各自有各自的优点，但是他们也有他们的弊端。\n\n其中一个，作为一名开发者，为了加载你的文件，你需要知道正确的依赖顺序。比如，你要在项目中使用 `Backbone`，那么你需要通过 `script` 标签来加载他的源文件。\n\n但是，因为 `Backbone` 是依赖 `Underscore.js`，那么加载 `Backbone` 的 `script` 标签就不能在 `Underscore` 的前面。\n\n作为一名开发者，维护依赖以及让他们的顺序都正确的话，有时是一件很头疼的事情。\n\n另一个弊端就是他们仍然会产生命名空间冲突。比如，你的两个 module 具有相同的名字。又或者，你的一个模块有两个版本，并且你同时需要他们。\n\n因此，你也会这样想到：能不能设计一种方法，既可以访问 module 的接口，但同时又不污染全局作用域。\n\n其实有两种已经实现好的方法：即是 CommonJS 和 AMD 。\n\n### CommonJS\n\nCommonJS是一个自愿的工作小组，设计和实现 JavaScript 模块系统的 API。\n\n一个 CommonJS 模块其实就是 `exports` 了具体对象的 JavaScript 代码块，使得他们能够被程序中的其他模块 `require` 。如果你写过 `Node.js` 的话，你应该对他很熟悉。\n\n有了 CommonJS，每个 JavaScript 文件在他们各自唯一的 module context (就像封装在一个闭包中)保存了模块。在这个作用域里面，我们使用 `module.exports` 对象来暴露模块，使用`require`来加载他们。\n\n当你定义了一个 CommonJS 文件，也许他就长这样子的：\n\n``` javascript\nfunction myModule() {\n  this.hello = function() {\n    return 'hello!';\n  }\n\n  this.goodbye = function() {\n    return 'goodbye!';\n  }\n}\n\nmodule.exports = myModule;\n```\n\n我们使用特殊的对象`module`，然后把我们函数的引用赋给`module.exports`。这个让CommonJS的模块系统知道我们想要暴露哪些，从而让别的文件引用。\n\n然后，如果别人想使用我的`myModule`，他们可以引用它到文件中，像这样：\n\n``` javascript\nvar myModule = require('myModule');\n\nvar myModuleInstance = new myModule();\nmyModuleInstance.hello(); // 'hello!'\nmyModuleInstance.goodbye(); // 'goodbye!'\n```\n\n这个方法比前面所讲的 *module pattern* 有2个明显的优点：\n\n1. 避免全局命名空间的污染\n2. 让我们的依赖更加清晰\n\n而且，语法很简洁，我很喜欢。\n\n还有一个注意的是，CommonJS是针对server实现的，并且**同步加载modules**。这是很重要的，因为如果我们有3个module需要引入，那么他会一个接着一个加载。\n\n现在，CommonJS对于server端很极好的。但是不幸的是，他不适用于浏览器。因为在web读取一个module比在磁盘中读取慢得多。如果开始加载module，就会阻塞浏览器直到modules全部加载完毕。(我会在 Part 2 讲述解决方法)。\n\n### AMD\n\nCommonJS是很好，但是如果我们想要异步加载modules呢？答案就是*Asynchronous Module Definition*，即*AMD*。\n\n使用AMD加载module就像这样：\n\n``` javascript\ndefine(['myModule', 'myOtherModule'], function(myModule, myOtherModule) {\n  console.log(myModule.hello());\n});\n```\n\n`define`函数的第一个参数是一个数组，他包含了所需的依赖。这些依赖会在背后加载(不会阻塞)，而且一旦加载完毕，`define`就会调用传给他的callback函数。\n\n接着，callback函数就会把加载好的依赖作为他的参数——在上面例子中，即是`myModule`和`myOtherModule`。最后，这些依赖他们自己必须通过关键字`define`来定义。\n\n比如，`myModule`也许是这样子的：\n\n``` javascript\ndefine([], function() {\n\n  return {\n    hello: function() {\n      console.log('hello');\n    },\n    goodbye: function() {\n      console.log('goodbye');\n    }\n  };\n});\n```\n\n不像CommonJS，AMD是以浏览器为核心来实现异步加载module的。(注意到，有很多人强烈地认为动态加载文件是不好的，这个我们在Part 2会讲到)。\n\n除了异步之外，AMD的另一个优点是，你的module可以是对象，函数，构造函数，字符串，JSON以及其他类型。而CommonJS只支持对象作为module。\n\n总的来说，AMD并不兼容io，文件系统，以及其他面向server的feature，并且，封装的语法比`require`较复杂一点。\n\n### UMD\n\n对于需要你同时支持AMD和CommonJS的项目，你可以选择*Universal Module Definition (UMD)*。\n\nUMD本质上创建了一个方式，支持他们其中的一种，也支持全局变量的定义。因此，UMD module可以同时在client和server端使用。\n\n让我们来看看UMD是怎样子的：\n\n``` javascript\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n      // AMD\n    define(['myModule', 'myOtherModule'], factory);\n  } else if (typeof exports === 'object') {\n      // CommonJS\n    module.exports = factory(require('myModule'), require('myOtherModule'));\n  } else {\n    // Browser globals (Note: root is window)\n    root.returnExports = factory(root.myModule, root.myOtherModule);\n  }\n}(this, function (myModule, myOtherModule) {\n  // Methods\n  function notHelloOrGoodbye(){}; // A private method\n  function hello(){}; // A public method because it's returned (see below)\n  function goodbye(){}; // A public method because it's returned (see below)\n\n  // Exposed public methods\n  return {\n      hello: hello,\n      goodbye: goodbye\n  }\n}));\n```\n\n更多关于UMD的例子，请查看 [enlightening repo](https://github.com/umdjs/umd)。\n\n## Native JS\n\n哈！你居然能看到这里，看来我没有搞晕你。太棒了。因为在结束之前，我们还有一个定义module的方法。\n\n如你所见，上面的方法没有一种是原生JavaScript支持的。相反，我们使用了各种各样的方式去模拟一个模块系统。\n\n幸运的是，在TC39工作的人(设计ECMAScript的语法和语义)在ES6实现了内置的模块系统。\n\n下面的资源很好地讲解了ES6的模块系统：\n\n- [jsmodules.io](http://jsmodules.io/cjs.html)\n- [exploringjs.com](http://exploringjs.com/es6/ch_modules.html)\n\nES6的module结合了CommonJS和AMD的优点，比如简洁的语法和异步加载。还有优点是，比如支持循环依赖。\n\n我最喜欢的ES6 modules的feature是，*imports*是*exports*的**live read-only views**(而CommonJS的import只是exports的一份copy而已，并且不是即时)。\n\n下面例子会讲述live read-only view是怎样子的：\n\n``` javascript\n// lib/counter.js\n\nvar counter = 1;\n\nfunction increment() {\n  counter++;\n}\n\nfunction decrement() {\n  counter--;\n}\n\nmodule.exports = {\n  counter: counter,\n  increment: increment,\n  decrement: decrement\n};\n\n\n// src/main.js\n\nvar counter = require('../../lib/counter');\n\ncounter.increment();\nconsole.log(counter.counter); // 1\n```\n\n在这个例子中，我们创建了module的**2份copy**：一个是当我们`export`他，另一个是当我们`require`他。\n\n并且，在`main.js`的那份copy已经和原本的失去连接了。这就是为什么当我们给`counter`增加时他还是`1`——因为我们`import`的`counter`已经和原来的失去联系。\n\n因为，增加`counter`会在原来的module可以实现，但是在你copy的那份就实现不了。如果想要后者实现的话，只能手动地操作了：\n\n``` javascript\ncounter.counter++;\nconsole.log(counter.counter); // 2\n```\n\n在另一个方面，ES6对于我们`import`的module创建了一个**live read-only view**。\n\n``` javascript\n// lib/counter.js\nexport let counter = 1;\n\nexport function increment() {\n  counter++;\n}\n\nexport function decrement() {\n  counter--;\n}\n\n\n// src/main.js\nimport * as counter from '../../counter';\n\nconsole.log(counter.counter); // 1\ncounter.increment();\nconsole.log(counter.counter); // 2\n```\n\n很cool，对吧。\n\n## 向前看：bunding modules\n\n哇。时间过得真快。我真的希望能够帮助你更好地理解JavaScript的modules。\n\n在下一部分，我会讲**module bundling**，涉及到几个核心的主题：\n\n- 为什么我们需要*module bundling*\n- 不同方法实现*bundling*\n- ECMAScript的模块加载器API\n- ...更多...\n\n注意：为了简单起见，我跳过了许多细节(比如，循环依赖)。如果我留下了很重要或者很棒的东西，请留言让我知道！\n\n\n**(原文：[JavaScript Modules: A Beginner’s Guide - Preethi Kasireddy](https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.4ufizwkud))**\n","source":"_posts/JavaScript-Module-A-Beginner-Guide.md","raw":"---\ntitle: '「译」JavaScript Modules Part1: A Beginner Guide'\nauthor: Drake Leung\ntags: []\ncategories: [翻译]\ndate: 2016-02-07 21:50:52\nforeword: 超级详细地介绍了 JavaScript 模块化的进化历史。\n---\n\n**(原文：[JavaScript Modules: A Beginner's Guide - Preethi Kasireddy](https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.4ufizwkud))**\n\n\n如果你是刚接触 JavaScript 的话，像「module bundler vs. module loaders」， 「Webpack vs. Browserify」 以及「AMD vs. CommonJS」这些术语可以一下子把你搞晕。\n\nJavaScript的模块系统(module system)也许是很吓人的，但是对于web开发者来说，理解他是很重要的。\n\n在本文，我会使用通俗易懂的话(以及一些代码)来解释这些术语。我希望能帮助到你。\n\n注意：为了简单起见，我会分成2部分来说：Part 1 会解释什么是 *module* 以及为什么要使用他们。Part 2 (在下周发表)会接着解释什么是 *bundle modules* 以及其实现方法。\n\n\n## Part 1: 有谁可以再解释解释什么是 module 吗？\n\n好的作者会把他们的书籍分成多个章节；好的程序员也会把他们的程序分成多个模块。\n\n就像书的章节一样，module 只是单词(在这里，即是 code )的集合。\n\n但是，好的模块是高度包含自己独立的功能。这让他们可以根据需求更改，删除，增加，而不扰乱整个系统。\n\n## 为什么使用 module ？\n\n使用modules对于大型，相互依赖的代码库来说是很多好处的。在我看来，最重要的是：\n\n**1) 可维护性：**根据定义，module 是独立的。一个设计良好的 module 是尽可能多地减少代码的耦合，从而他能够独立地开发和改进。当一个 module 的耦合度低的时候，更新他是很容易一件事情。\n\n回到我们书籍的例子，当你因为更新了一个章节，从而需要调整剩余章节的话，这简直是噩耗。相反，你更愿意编写章节的时候，不影响其他章节。\n\n**2) 命名空间(namespacing)：**在 JavaScript 中，在 top-level 函数的作用域的外面的变量就是 *global* (全局)变量，全局变量即是每个人都可以 access 他们。因为这样，就很容易造成\"命名空间污染”，也就是无相关的代码共享全局变量。\n\n在毫无相关的代码中共享全局变量在开发中 [is a big no no](http://c2.com/cgi/wiki?GlobalVariablesAreBad)。\n\n在本文的下面，我们会解释 module 可以让我们避免命名空间污染，通过为我们的变量创建私有空间。\n\n**3) 可重用性：**我们不妨老实承认，我们过去是把一个项目的代码copy到另一个项目中。比方说，你copy了你之前项目的一些util方法到当前的项目中。\n\n这是很浪费时间的。但是慢着，如果使用 module ，一个我们可以不断复用的 module ，这不是很好吗？\n\n## 你是如何合并模块(incorporate modules)?\n\n有很多方法可以在你的程序中合并模块。我们现在就来讲解他们的其中一些：\n\n### Module Pattern\n\n*Module pattern* 其实就是模仿 *class* 的概念(因为 JavaScript 并不真正地支持 class )，因此我们可以把公有方法，私有方法以及变量都保存在一个对象里面——这个就有点类似于 class 在其他编程语言(如 Java 或者 Python )中的使用。这可以让我们给公有方法创建 API ，然后暴露出去；并且同时可以把私有的变量和方法都封装在一个闭包作用域(closure scope)中。\n\n有几个方法可以实现 module pattern。在第一个例子中。我会使用 *anonymous closure*。他会把我们所有的代码都放进一个匿名函数里面。(记住：在 JavaScript 中，`function` 是创建作用域的唯一方法？)\n\n**例子一：Anonymous closure**\n\n``` javascript\n(function () {\n  // We keep these variables private inside this closure scope\n\n  var myGrades = [93, 95, 88, 0, 55, 91];\n\n  var average = function() {\n    var total = myGrades.reduce(function(accumulator, item) {\n      return accumulator + item}, 0);\n\n      return 'Your average grade is ' + total / myGrades.length + '.';\n  }\n\n  var failing = function(){\n    var failingGrades = myGrades.filter(function(item) {\n      return item < 70;});\n\n    return 'You failed ' + failingGrades.length + ' times.';\n  }\n\n  console.log(failing());\n\n}());\n\n// ‘You failed 2 times.’\n```\n\n有了这个，我们的匿名函数就有了它自己的求值环境(evaluation environment)或者\"closure\"，并且我们可以立马对他求值(evaluate)。这可以让我们从 parent namespace(global) 中隐藏变量。\n\n这种方法的好处就是，你可以在匿名函数中使用局部变量而不会 overwrite(覆盖) 已经存在的全局变量，但与此同时，你还可以 access 全局变量，就像这样：\n\n``` javascript\nvar global = 'Hello, I am a global variable :)';\n\n(function () {\n  // We keep these variables private inside this closure scope\n\n  var myGrades = [93, 95, 88, 0, 55, 91];\n\n  var average = function() {\n    var total = myGrades.reduce(function(accumulator, item) {\n      return accumulator + item}, 0);\n\n    return 'Your average grade is ' + total / myGrades.length + '.';\n  }\n\n  var failing = function(){\n    var failingGrades = myGrades.filter(function(item) {\n      return item < 70;});\n\n    return 'You failed ' + failingGrades.length + ' times.';\n  }\n\n  console.log(failing());\n  console.log(global);\n}());\n\n// 'You failed 2 times.'\n// 'Hello, I am a global variable :)'\n```\n\n注意到在匿名函数2旁的括号是必须的，因为以关键字`function`开头的语句会被认为是 *function declaration* (记住，在 JavaScript 中，你是不能定义没有名字的function declaration。) 因此，这对括号就创建一个 *function expression*。如果不明白的话，你可以[阅读这里](http://stackoverflow.com/questions/1634268/explain-javascripts-encapsulated-anonymous-function-syntax)。\n\n**例子二：Global import**\n\n另一个较流行的方法是 *global import* ，就像 jQuery 一样。他有点类似于上面的　*anonymous closure*，只是现在我们把全局变量作为参数传进了匿名函数中。\n\n``` javascript\n(function (globalVariable) {\n\n  // Keep this variables private inside this closure scope\n  var privateFunction = function() {\n    console.log('Shhhh, this is private!');\n  }\n\n  // Expose the below methods via the globalVariable interface while\n  // hiding the implementation of the method within the\n  // function() block\n\n  globalVariable.each = function(collection, iterator) {\n    if (Array.isArray(collection)) {\n      for (var i = 0; i < collection.length; i++) {\n        iterator(collection[i], i, collection);\n      }\n    } else {\n      for (var key in collection) {\n        iterator(collection[key], key, collection);\n      }\n    }\n  };\n\n  globalVariable.filter = function(collection, test) {\n    var filtered = [];\n    globalVariable.each(collection, function(item) {\n      if (test(item)) {\n        filtered.push(item);\n      }\n    });\n    return filtered;\n  };\n\n  globalVariable.map = function(collection, iterator) {\n    var mapped = [];\n    globalUtils.each(collection, function(value, key, collection) {\n      mapped.push(iterator(value));\n    });\n    return mapped;\n  };\n\n  globalVariable.reduce = function(collection, iterator, accumulator) {\n    var startingValueMissing = accumulator === undefined;\n\n    globalVariable.each(collection, function(item) {\n      if(startingValueMissing) {\n        accumulator = item;\n        startingValueMissing = false;\n      } else {\n        accumulator = iterator(accumulator, item);\n      }\n    });\n\n    return accumulator;\n\n  };\n\n }(globalVariable));\n```\n\n在这个例子中，`globalVariable` 在全局中唯一的一个变量。这个方法比前一个方法好的地方在于：你可以在前面就定义全局变量，这样就方便别人阅读你的代码。\n\n**例子三：Object interface**\n\n创建 module 的例子还有一个就是使用独立的 *object interface*，就像这样：\n\n``` javascript\nvar myGradesCalculate = (function () {\n\n  // Keep this variable private inside this closure scope\n  var myGrades = [93, 95, 88, 0, 55, 91];\n\n  // Expose these functions via an interface while hiding\n  // the implementation of the module within the function() block\n\n  return {\n    average: function() {\n      var total = myGrades.reduce(function(accumulator, item) {\n        return accumulator + item;\n        }, 0);\n\n      return'Your average grade is ' + total / myGrades.length + '.';\n    },\n\n    failing: function() {\n      var failingGrades = myGrades.filter(function(item) {\n          return item < 70;\n        });\n\n      return 'You failed ' + failingGrades.length + ' times.';\n    }\n  }\n})();\n\nmyGradesCalculate.failing(); // 'You failed 2 times.'\nmyGradesCalculate.average(); // 'Your average grade is 70.33333333333333.'\n```\n\n显而易见，这种方法可以让我们自己定义哪些变量/方法是私有的(例如，`myGrads`)，以及哪些变量/方法是我们想要暴露给他们的，通过 `return` 语句(比如，`average` & `failing`)。\n\n**例子四：Revealing module pattern**\n\n这个跟上面的方法是很相似的，除了他保证所有的变量和方法都是私有的，直到我们显式地暴露出去：\n\n``` javascript\nvar myGradesCalculate = (function () {\n\n  // Keep this variable private inside this closure scope\n  var myGrades = [93, 95, 88, 0, 55, 91];\n\n  var average = function() {\n    var total = myGrades.reduce(function(accumulator, item) {\n      return accumulator + item;\n      }, 0);\n\n    return'Your average grade is ' + total / myGrades.length + '.';\n  };\n\n  var failing = function() {\n    var failingGrades = myGrades.filter(function(item) {\n        return item < 70;\n      });\n\n    return 'You failed ' + failingGrades.length + ' times.';\n  };\n\n  // Explicitly reveal public pointers to the private functions\n  // that we want to reveal publicly\n\n  return {\n    average: average,\n    failing: failing\n  }\n})();\n\nmyGradesCalculate.failing(); // 'You failed 2 times.'\nmyGradesCalculate.average(); // 'Your average grade is 70.33333333333333.'\n```\n\n上面好像讲了好多东西，其实对于 module pattern 来说，只是冰山一角。下面是一些我认为比较有用的资源：\n\n- [Learn JavaScript Design Patterns](https://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript) - by *Addy Osmani*\n- [Adequately Good by Ben Cherry](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html) - 通过例子讲述module pattern的高级使用\n- [Blog of Carl Danley](https://carldanley.com/js-module-pattern/) - module pattern的概述以及其他 JavaScript pattern 的资源\n\n## CommonJS and AMD\n\n上面讲到的所有方法都有一个共同点：使用全局变量将其所有代码都封装在一个函数里面，从而使用 *closure scope* 为他自己创建出了一个私有的命名空间。\n\n他们各自有各自的优点，但是他们也有他们的弊端。\n\n其中一个，作为一名开发者，为了加载你的文件，你需要知道正确的依赖顺序。比如，你要在项目中使用 `Backbone`，那么你需要通过 `script` 标签来加载他的源文件。\n\n但是，因为 `Backbone` 是依赖 `Underscore.js`，那么加载 `Backbone` 的 `script` 标签就不能在 `Underscore` 的前面。\n\n作为一名开发者，维护依赖以及让他们的顺序都正确的话，有时是一件很头疼的事情。\n\n另一个弊端就是他们仍然会产生命名空间冲突。比如，你的两个 module 具有相同的名字。又或者，你的一个模块有两个版本，并且你同时需要他们。\n\n因此，你也会这样想到：能不能设计一种方法，既可以访问 module 的接口，但同时又不污染全局作用域。\n\n其实有两种已经实现好的方法：即是 CommonJS 和 AMD 。\n\n### CommonJS\n\nCommonJS是一个自愿的工作小组，设计和实现 JavaScript 模块系统的 API。\n\n一个 CommonJS 模块其实就是 `exports` 了具体对象的 JavaScript 代码块，使得他们能够被程序中的其他模块 `require` 。如果你写过 `Node.js` 的话，你应该对他很熟悉。\n\n有了 CommonJS，每个 JavaScript 文件在他们各自唯一的 module context (就像封装在一个闭包中)保存了模块。在这个作用域里面，我们使用 `module.exports` 对象来暴露模块，使用`require`来加载他们。\n\n当你定义了一个 CommonJS 文件，也许他就长这样子的：\n\n``` javascript\nfunction myModule() {\n  this.hello = function() {\n    return 'hello!';\n  }\n\n  this.goodbye = function() {\n    return 'goodbye!';\n  }\n}\n\nmodule.exports = myModule;\n```\n\n我们使用特殊的对象`module`，然后把我们函数的引用赋给`module.exports`。这个让CommonJS的模块系统知道我们想要暴露哪些，从而让别的文件引用。\n\n然后，如果别人想使用我的`myModule`，他们可以引用它到文件中，像这样：\n\n``` javascript\nvar myModule = require('myModule');\n\nvar myModuleInstance = new myModule();\nmyModuleInstance.hello(); // 'hello!'\nmyModuleInstance.goodbye(); // 'goodbye!'\n```\n\n这个方法比前面所讲的 *module pattern* 有2个明显的优点：\n\n1. 避免全局命名空间的污染\n2. 让我们的依赖更加清晰\n\n而且，语法很简洁，我很喜欢。\n\n还有一个注意的是，CommonJS是针对server实现的，并且**同步加载modules**。这是很重要的，因为如果我们有3个module需要引入，那么他会一个接着一个加载。\n\n现在，CommonJS对于server端很极好的。但是不幸的是，他不适用于浏览器。因为在web读取一个module比在磁盘中读取慢得多。如果开始加载module，就会阻塞浏览器直到modules全部加载完毕。(我会在 Part 2 讲述解决方法)。\n\n### AMD\n\nCommonJS是很好，但是如果我们想要异步加载modules呢？答案就是*Asynchronous Module Definition*，即*AMD*。\n\n使用AMD加载module就像这样：\n\n``` javascript\ndefine(['myModule', 'myOtherModule'], function(myModule, myOtherModule) {\n  console.log(myModule.hello());\n});\n```\n\n`define`函数的第一个参数是一个数组，他包含了所需的依赖。这些依赖会在背后加载(不会阻塞)，而且一旦加载完毕，`define`就会调用传给他的callback函数。\n\n接着，callback函数就会把加载好的依赖作为他的参数——在上面例子中，即是`myModule`和`myOtherModule`。最后，这些依赖他们自己必须通过关键字`define`来定义。\n\n比如，`myModule`也许是这样子的：\n\n``` javascript\ndefine([], function() {\n\n  return {\n    hello: function() {\n      console.log('hello');\n    },\n    goodbye: function() {\n      console.log('goodbye');\n    }\n  };\n});\n```\n\n不像CommonJS，AMD是以浏览器为核心来实现异步加载module的。(注意到，有很多人强烈地认为动态加载文件是不好的，这个我们在Part 2会讲到)。\n\n除了异步之外，AMD的另一个优点是，你的module可以是对象，函数，构造函数，字符串，JSON以及其他类型。而CommonJS只支持对象作为module。\n\n总的来说，AMD并不兼容io，文件系统，以及其他面向server的feature，并且，封装的语法比`require`较复杂一点。\n\n### UMD\n\n对于需要你同时支持AMD和CommonJS的项目，你可以选择*Universal Module Definition (UMD)*。\n\nUMD本质上创建了一个方式，支持他们其中的一种，也支持全局变量的定义。因此，UMD module可以同时在client和server端使用。\n\n让我们来看看UMD是怎样子的：\n\n``` javascript\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n      // AMD\n    define(['myModule', 'myOtherModule'], factory);\n  } else if (typeof exports === 'object') {\n      // CommonJS\n    module.exports = factory(require('myModule'), require('myOtherModule'));\n  } else {\n    // Browser globals (Note: root is window)\n    root.returnExports = factory(root.myModule, root.myOtherModule);\n  }\n}(this, function (myModule, myOtherModule) {\n  // Methods\n  function notHelloOrGoodbye(){}; // A private method\n  function hello(){}; // A public method because it's returned (see below)\n  function goodbye(){}; // A public method because it's returned (see below)\n\n  // Exposed public methods\n  return {\n      hello: hello,\n      goodbye: goodbye\n  }\n}));\n```\n\n更多关于UMD的例子，请查看 [enlightening repo](https://github.com/umdjs/umd)。\n\n## Native JS\n\n哈！你居然能看到这里，看来我没有搞晕你。太棒了。因为在结束之前，我们还有一个定义module的方法。\n\n如你所见，上面的方法没有一种是原生JavaScript支持的。相反，我们使用了各种各样的方式去模拟一个模块系统。\n\n幸运的是，在TC39工作的人(设计ECMAScript的语法和语义)在ES6实现了内置的模块系统。\n\n下面的资源很好地讲解了ES6的模块系统：\n\n- [jsmodules.io](http://jsmodules.io/cjs.html)\n- [exploringjs.com](http://exploringjs.com/es6/ch_modules.html)\n\nES6的module结合了CommonJS和AMD的优点，比如简洁的语法和异步加载。还有优点是，比如支持循环依赖。\n\n我最喜欢的ES6 modules的feature是，*imports*是*exports*的**live read-only views**(而CommonJS的import只是exports的一份copy而已，并且不是即时)。\n\n下面例子会讲述live read-only view是怎样子的：\n\n``` javascript\n// lib/counter.js\n\nvar counter = 1;\n\nfunction increment() {\n  counter++;\n}\n\nfunction decrement() {\n  counter--;\n}\n\nmodule.exports = {\n  counter: counter,\n  increment: increment,\n  decrement: decrement\n};\n\n\n// src/main.js\n\nvar counter = require('../../lib/counter');\n\ncounter.increment();\nconsole.log(counter.counter); // 1\n```\n\n在这个例子中，我们创建了module的**2份copy**：一个是当我们`export`他，另一个是当我们`require`他。\n\n并且，在`main.js`的那份copy已经和原本的失去连接了。这就是为什么当我们给`counter`增加时他还是`1`——因为我们`import`的`counter`已经和原来的失去联系。\n\n因为，增加`counter`会在原来的module可以实现，但是在你copy的那份就实现不了。如果想要后者实现的话，只能手动地操作了：\n\n``` javascript\ncounter.counter++;\nconsole.log(counter.counter); // 2\n```\n\n在另一个方面，ES6对于我们`import`的module创建了一个**live read-only view**。\n\n``` javascript\n// lib/counter.js\nexport let counter = 1;\n\nexport function increment() {\n  counter++;\n}\n\nexport function decrement() {\n  counter--;\n}\n\n\n// src/main.js\nimport * as counter from '../../counter';\n\nconsole.log(counter.counter); // 1\ncounter.increment();\nconsole.log(counter.counter); // 2\n```\n\n很cool，对吧。\n\n## 向前看：bunding modules\n\n哇。时间过得真快。我真的希望能够帮助你更好地理解JavaScript的modules。\n\n在下一部分，我会讲**module bundling**，涉及到几个核心的主题：\n\n- 为什么我们需要*module bundling*\n- 不同方法实现*bundling*\n- ECMAScript的模块加载器API\n- ...更多...\n\n注意：为了简单起见，我跳过了许多细节(比如，循环依赖)。如果我留下了很重要或者很棒的东西，请留言让我知道！\n\n\n**(原文：[JavaScript Modules: A Beginner’s Guide - Preethi Kasireddy](https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.4ufizwkud))**\n","slug":"JavaScript-Module-A-Beginner-Guide","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742z0000b37rq13ojn9r8","content":"<p><strong>(原文：<a href=\"https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.4ufizwkud\" target=\"_blank\" rel=\"external\">JavaScript Modules: A Beginner’s Guide - Preethi Kasireddy</a>)</strong></p>\n<p>如果你是刚接触 JavaScript 的话，像「module bundler vs. module loaders」， 「Webpack vs. Browserify」 以及「AMD vs. CommonJS」这些术语可以一下子把你搞晕。</p>\n<p>JavaScript的模块系统(module system)也许是很吓人的，但是对于web开发者来说，理解他是很重要的。</p>\n<p>在本文，我会使用通俗易懂的话(以及一些代码)来解释这些术语。我希望能帮助到你。</p>\n<p>注意：为了简单起见，我会分成2部分来说：Part 1 会解释什么是 <em>module</em> 以及为什么要使用他们。Part 2 (在下周发表)会接着解释什么是 <em>bundle modules</em> 以及其实现方法。</p>\n<h2>Part 1: 有谁可以再解释解释什么是 module 吗？</h2>\n<p>好的作者会把他们的书籍分成多个章节；好的程序员也会把他们的程序分成多个模块。</p>\n<p>就像书的章节一样，module 只是单词(在这里，即是 code )的集合。</p>\n<p>但是，好的模块是高度包含自己独立的功能。这让他们可以根据需求更改，删除，增加，而不扰乱整个系统。</p>\n<h2>为什么使用 module ？</h2>\n<p>使用modules对于大型，相互依赖的代码库来说是很多好处的。在我看来，最重要的是：</p>\n<p>**1) 可维护性：**根据定义，module 是独立的。一个设计良好的 module 是尽可能多地减少代码的耦合，从而他能够独立地开发和改进。当一个 module 的耦合度低的时候，更新他是很容易一件事情。</p>\n<p>回到我们书籍的例子，当你因为更新了一个章节，从而需要调整剩余章节的话，这简直是噩耗。相反，你更愿意编写章节的时候，不影响其他章节。</p>\n<p>**2) 命名空间(namespacing)：**在 JavaScript 中，在 top-level 函数的作用域的外面的变量就是 <em>global</em> (全局)变量，全局变量即是每个人都可以 access 他们。因为这样，就很容易造成&quot;命名空间污染”，也就是无相关的代码共享全局变量。</p>\n<p>在毫无相关的代码中共享全局变量在开发中 <a href=\"http://c2.com/cgi/wiki?GlobalVariablesAreBad\" target=\"_blank\" rel=\"external\">is a big no no</a>。</p>\n<p>在本文的下面，我们会解释 module 可以让我们避免命名空间污染，通过为我们的变量创建私有空间。</p>\n<p>**3) 可重用性：**我们不妨老实承认，我们过去是把一个项目的代码copy到另一个项目中。比方说，你copy了你之前项目的一些util方法到当前的项目中。</p>\n<p>这是很浪费时间的。但是慢着，如果使用 module ，一个我们可以不断复用的 module ，这不是很好吗？</p>\n<h2>你是如何合并模块(incorporate modules)?</h2>\n<p>有很多方法可以在你的程序中合并模块。我们现在就来讲解他们的其中一些：</p>\n<h3>Module Pattern</h3>\n<p><em>Module pattern</em> 其实就是模仿 <em>class</em> 的概念(因为 JavaScript 并不真正地支持 class )，因此我们可以把公有方法，私有方法以及变量都保存在一个对象里面——这个就有点类似于 class 在其他编程语言(如 Java 或者 Python )中的使用。这可以让我们给公有方法创建 API ，然后暴露出去；并且同时可以把私有的变量和方法都封装在一个闭包作用域(closure scope)中。</p>\n<p>有几个方法可以实现 module pattern。在第一个例子中。我会使用 <em>anonymous closure</em>。他会把我们所有的代码都放进一个匿名函数里面。(记住：在 JavaScript 中，<code>function</code> 是创建作用域的唯一方法？)</p>\n<p><strong>例子一：Anonymous closure</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// We keep these variables private inside this closure scope</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">55</span>, <span class=\"number\">91</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> average = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> total = myGrades.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> accumulator + item&#125;, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'Your average grade is '</span> + total / myGrades.length + <span class=\"string\">'.'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> failing = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> failingGrades = myGrades.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> item &lt; <span class=\"number\">70</span>;&#125;);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'You failed '</span> + failingGrades.length + <span class=\"string\">' times.'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">console</span>.log(failing());</div><div class=\"line\"></div><div class=\"line\">&#125;());</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ‘You failed 2 times.’</span></div></pre></td></tr></table></figure>\n<p>有了这个，我们的匿名函数就有了它自己的求值环境(evaluation environment)或者&quot;closure&quot;，并且我们可以立马对他求值(evaluate)。这可以让我们从 parent namespace(global) 中隐藏变量。</p>\n<p>这种方法的好处就是，你可以在匿名函数中使用局部变量而不会 overwrite(覆盖) 已经存在的全局变量，但与此同时，你还可以 access 全局变量，就像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> global = <span class=\"string\">'Hello, I am a global variable :)'</span>;</div><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// We keep these variables private inside this closure scope</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">55</span>, <span class=\"number\">91</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> average = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> total = myGrades.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> accumulator + item&#125;, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Your average grade is '</span> + total / myGrades.length + <span class=\"string\">'.'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> failing = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> failingGrades = myGrades.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> item &lt; <span class=\"number\">70</span>;&#125;);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'You failed '</span> + failingGrades.length + <span class=\"string\">' times.'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">console</span>.log(failing());</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(global);</div><div class=\"line\">&#125;());</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 'You failed 2 times.'</span></div><div class=\"line\"><span class=\"comment\">// 'Hello, I am a global variable :)'</span></div></pre></td></tr></table></figure>\n<p>注意到在匿名函数2旁的括号是必须的，因为以关键字<code>function</code>开头的语句会被认为是 <em>function declaration</em> (记住，在 JavaScript 中，你是不能定义没有名字的function declaration。) 因此，这对括号就创建一个 <em>function expression</em>。如果不明白的话，你可以<a href=\"http://stackoverflow.com/questions/1634268/explain-javascripts-encapsulated-anonymous-function-syntax\" target=\"_blank\" rel=\"external\">阅读这里</a>。</p>\n<p><strong>例子二：Global import</strong></p>\n<p>另一个较流行的方法是 <em>global import</em> ，就像 jQuery 一样。他有点类似于上面的　<em>anonymous closure</em>，只是现在我们把全局变量作为参数传进了匿名函数中。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">globalVariable</span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keep this variables private inside this closure scope</span></div><div class=\"line\">  <span class=\"keyword\">var</span> privateFunction = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Shhhh, this is private!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Expose the below methods via the globalVariable interface while</span></div><div class=\"line\">  <span class=\"comment\">// hiding the implementation of the method within the</span></div><div class=\"line\">  <span class=\"comment\">// function() block</span></div><div class=\"line\"></div><div class=\"line\">  globalVariable.each = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(collection)) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; collection.length; i++) &#123;</div><div class=\"line\">        iterator(collection[i], i, collection);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> collection) &#123;</div><div class=\"line\">        iterator(collection[key], key, collection);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  globalVariable.filter = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection, test</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> filtered = [];</div><div class=\"line\">    globalVariable.each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (test(item)) &#123;</div><div class=\"line\">        filtered.push(item);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span> filtered;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  globalVariable.map = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> mapped = [];</div><div class=\"line\">    globalUtils.each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key, collection</span>) </span>&#123;</div><div class=\"line\">      mapped.push(iterator(value));</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span> mapped;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  globalVariable.reduce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection, iterator, accumulator</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> startingValueMissing = accumulator === <span class=\"literal\">undefined</span>;</div><div class=\"line\"></div><div class=\"line\">    globalVariable.each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span>(startingValueMissing) &#123;</div><div class=\"line\">        accumulator = item;</div><div class=\"line\">        startingValueMissing = <span class=\"literal\">false</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        accumulator = iterator(accumulator, item);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> accumulator;</div><div class=\"line\"></div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\"> &#125;(globalVariable));</div></pre></td></tr></table></figure>\n<p>在这个例子中，<code>globalVariable</code> 在全局中唯一的一个变量。这个方法比前一个方法好的地方在于：你可以在前面就定义全局变量，这样就方便别人阅读你的代码。</p>\n<p><strong>例子三：Object interface</strong></p>\n<p>创建 module 的例子还有一个就是使用独立的 <em>object interface</em>，就像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myGradesCalculate = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keep this variable private inside this closure scope</span></div><div class=\"line\">  <span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">55</span>, <span class=\"number\">91</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Expose these functions via an interface while hiding</span></div><div class=\"line\">  <span class=\"comment\">// the implementation of the module within the function() block</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    average: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> total = myGrades.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, item</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> accumulator + item;</div><div class=\"line\">        &#125;, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span><span class=\"string\">'Your average grade is '</span> + total / myGrades.length + <span class=\"string\">'.'</span>;</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    failing: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> failingGrades = myGrades.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> item &lt; <span class=\"number\">70</span>;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'You failed '</span> + failingGrades.length + <span class=\"string\">' times.'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\">myGradesCalculate.failing(); <span class=\"comment\">// 'You failed 2 times.'</span></div><div class=\"line\">myGradesCalculate.average(); <span class=\"comment\">// 'Your average grade is 70.33333333333333.'</span></div></pre></td></tr></table></figure>\n<p>显而易见，这种方法可以让我们自己定义哪些变量/方法是私有的(例如，<code>myGrads</code>)，以及哪些变量/方法是我们想要暴露给他们的，通过 <code>return</code> 语句(比如，<code>average</code> &amp; <code>failing</code>)。</p>\n<p><strong>例子四：Revealing module pattern</strong></p>\n<p>这个跟上面的方法是很相似的，除了他保证所有的变量和方法都是私有的，直到我们显式地暴露出去：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myGradesCalculate = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keep this variable private inside this closure scope</span></div><div class=\"line\">  <span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">55</span>, <span class=\"number\">91</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> average = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> total = myGrades.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> accumulator + item;</div><div class=\"line\">      &#125;, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span><span class=\"string\">'Your average grade is '</span> + total / myGrades.length + <span class=\"string\">'.'</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> failing = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> failingGrades = myGrades.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> item &lt; <span class=\"number\">70</span>;</div><div class=\"line\">      &#125;);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'You failed '</span> + failingGrades.length + <span class=\"string\">' times.'</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Explicitly reveal public pointers to the private functions</span></div><div class=\"line\">  <span class=\"comment\">// that we want to reveal publicly</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    average: average,</div><div class=\"line\">    failing: failing</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\">myGradesCalculate.failing(); <span class=\"comment\">// 'You failed 2 times.'</span></div><div class=\"line\">myGradesCalculate.average(); <span class=\"comment\">// 'Your average grade is 70.33333333333333.'</span></div></pre></td></tr></table></figure>\n<p>上面好像讲了好多东西，其实对于 module pattern 来说，只是冰山一角。下面是一些我认为比较有用的资源：</p>\n<ul>\n<li><a href=\"https://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript\" target=\"_blank\" rel=\"external\">Learn JavaScript Design Patterns</a> - by <em>Addy Osmani</em></li>\n<li><a href=\"http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html\" target=\"_blank\" rel=\"external\">Adequately Good by Ben Cherry</a> - 通过例子讲述module pattern的高级使用</li>\n<li><a href=\"https://carldanley.com/js-module-pattern/\" target=\"_blank\" rel=\"external\">Blog of Carl Danley</a> - module pattern的概述以及其他 JavaScript pattern 的资源</li>\n</ul>\n<h2>CommonJS and AMD</h2>\n<p>上面讲到的所有方法都有一个共同点：使用全局变量将其所有代码都封装在一个函数里面，从而使用 <em>closure scope</em> 为他自己创建出了一个私有的命名空间。</p>\n<p>他们各自有各自的优点，但是他们也有他们的弊端。</p>\n<p>其中一个，作为一名开发者，为了加载你的文件，你需要知道正确的依赖顺序。比如，你要在项目中使用 <code>Backbone</code>，那么你需要通过 <code>script</code> 标签来加载他的源文件。</p>\n<p>但是，因为 <code>Backbone</code> 是依赖 <code>Underscore.js</code>，那么加载 <code>Backbone</code> 的 <code>script</code> 标签就不能在 <code>Underscore</code> 的前面。</p>\n<p>作为一名开发者，维护依赖以及让他们的顺序都正确的话，有时是一件很头疼的事情。</p>\n<p>另一个弊端就是他们仍然会产生命名空间冲突。比如，你的两个 module 具有相同的名字。又或者，你的一个模块有两个版本，并且你同时需要他们。</p>\n<p>因此，你也会这样想到：能不能设计一种方法，既可以访问 module 的接口，但同时又不污染全局作用域。</p>\n<p>其实有两种已经实现好的方法：即是 CommonJS 和 AMD 。</p>\n<h3>CommonJS</h3>\n<p>CommonJS是一个自愿的工作小组，设计和实现 JavaScript 模块系统的 API。</p>\n<p>一个 CommonJS 模块其实就是 <code>exports</code> 了具体对象的 JavaScript 代码块，使得他们能够被程序中的其他模块 <code>require</code> 。如果你写过 <code>Node.js</code> 的话，你应该对他很熟悉。</p>\n<p>有了 CommonJS，每个 JavaScript 文件在他们各自唯一的 module context (就像封装在一个闭包中)保存了模块。在这个作用域里面，我们使用 <code>module.exports</code> 对象来暴露模块，使用<code>require</code>来加载他们。</p>\n<p>当你定义了一个 CommonJS 文件，也许他就长这样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myModule</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.hello = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'hello!'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.goodbye = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'goodbye!'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = myModule;</div></pre></td></tr></table></figure>\n<p>我们使用特殊的对象<code>module</code>，然后把我们函数的引用赋给<code>module.exports</code>。这个让CommonJS的模块系统知道我们想要暴露哪些，从而让别的文件引用。</p>\n<p>然后，如果别人想使用我的<code>myModule</code>，他们可以引用它到文件中，像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myModule = <span class=\"built_in\">require</span>(<span class=\"string\">'myModule'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> myModuleInstance = <span class=\"keyword\">new</span> myModule();</div><div class=\"line\">myModuleInstance.hello(); <span class=\"comment\">// 'hello!'</span></div><div class=\"line\">myModuleInstance.goodbye(); <span class=\"comment\">// 'goodbye!'</span></div></pre></td></tr></table></figure>\n<p>这个方法比前面所讲的 <em>module pattern</em> 有2个明显的优点：</p>\n<ol>\n<li>避免全局命名空间的污染</li>\n<li>让我们的依赖更加清晰</li>\n</ol>\n<p>而且，语法很简洁，我很喜欢。</p>\n<p>还有一个注意的是，CommonJS是针对server实现的，并且<strong>同步加载modules</strong>。这是很重要的，因为如果我们有3个module需要引入，那么他会一个接着一个加载。</p>\n<p>现在，CommonJS对于server端很极好的。但是不幸的是，他不适用于浏览器。因为在web读取一个module比在磁盘中读取慢得多。如果开始加载module，就会阻塞浏览器直到modules全部加载完毕。(我会在 Part 2 讲述解决方法)。</p>\n<h3>AMD</h3>\n<p>CommonJS是很好，但是如果我们想要异步加载modules呢？答案就是<em>Asynchronous Module Definition</em>，即<em>AMD</em>。</p>\n<p>使用AMD加载module就像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">define([<span class=\"string\">'myModule'</span>, <span class=\"string\">'myOtherModule'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">myModule, myOtherModule</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(myModule.hello());</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p><code>define</code>函数的第一个参数是一个数组，他包含了所需的依赖。这些依赖会在背后加载(不会阻塞)，而且一旦加载完毕，<code>define</code>就会调用传给他的callback函数。</p>\n<p>接着，callback函数就会把加载好的依赖作为他的参数——在上面例子中，即是<code>myModule</code>和<code>myOtherModule</code>。最后，这些依赖他们自己必须通过关键字<code>define</code>来定义。</p>\n<p>比如，<code>myModule</code>也许是这样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">define([], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    hello: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</div><div class=\"line\">    &#125;,</div><div class=\"line\">    goodbye: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'goodbye'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>不像CommonJS，AMD是以浏览器为核心来实现异步加载module的。(注意到，有很多人强烈地认为动态加载文件是不好的，这个我们在Part 2会讲到)。</p>\n<p>除了异步之外，AMD的另一个优点是，你的module可以是对象，函数，构造函数，字符串，JSON以及其他类型。而CommonJS只支持对象作为module。</p>\n<p>总的来说，AMD并不兼容io，文件系统，以及其他面向server的feature，并且，封装的语法比<code>require</code>较复杂一点。</p>\n<h3>UMD</h3>\n<p>对于需要你同时支持AMD和CommonJS的项目，你可以选择<em>Universal Module Definition (UMD)</em>。</p>\n<p>UMD本质上创建了一个方式，支持他们其中的一种，也支持全局变量的定义。因此，UMD module可以同时在client和server端使用。</p>\n<p>让我们来看看UMD是怎样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">root, factory</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">      <span class=\"comment\">// AMD</span></div><div class=\"line\">    define([<span class=\"string\">'myModule'</span>, <span class=\"string\">'myOtherModule'</span>], factory);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">      <span class=\"comment\">// CommonJS</span></div><div class=\"line\">    <span class=\"built_in\">module</span>.exports = factory(<span class=\"built_in\">require</span>(<span class=\"string\">'myModule'</span>), <span class=\"built_in\">require</span>(<span class=\"string\">'myOtherModule'</span>));</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"comment\">// Browser globals (Note: root is window)</span></div><div class=\"line\">    root.returnExports = factory(root.myModule, root.myOtherModule);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">myModule, myOtherModule</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// Methods</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notHelloOrGoodbye</span>(<span class=\"params\"></span>)</span>&#123;&#125;; <span class=\"comment\">// A private method</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hello</span>(<span class=\"params\"></span>)</span>&#123;&#125;; <span class=\"comment\">// A public method because it's returned (see below)</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">goodbye</span>(<span class=\"params\"></span>)</span>&#123;&#125;; <span class=\"comment\">// A public method because it's returned (see below)</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Exposed public methods</span></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">      hello: hello,</div><div class=\"line\">      goodbye: goodbye</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure>\n<p>更多关于UMD的例子，请查看 <a href=\"https://github.com/umdjs/umd\" target=\"_blank\" rel=\"external\">enlightening repo</a>。</p>\n<h2>Native JS</h2>\n<p>哈！你居然能看到这里，看来我没有搞晕你。太棒了。因为在结束之前，我们还有一个定义module的方法。</p>\n<p>如你所见，上面的方法没有一种是原生JavaScript支持的。相反，我们使用了各种各样的方式去模拟一个模块系统。</p>\n<p>幸运的是，在TC39工作的人(设计ECMAScript的语法和语义)在ES6实现了内置的模块系统。</p>\n<p>下面的资源很好地讲解了ES6的模块系统：</p>\n<ul>\n<li><a href=\"http://jsmodules.io/cjs.html\" target=\"_blank\" rel=\"external\">jsmodules.io</a></li>\n<li><a href=\"http://exploringjs.com/es6/ch_modules.html\" target=\"_blank\" rel=\"external\">exploringjs.com</a></li>\n</ul>\n<p>ES6的module结合了CommonJS和AMD的优点，比如简洁的语法和异步加载。还有优点是，比如支持循环依赖。</p>\n<p>我最喜欢的ES6 modules的feature是，<em>imports</em>是<em>exports</em>的<strong>live read-only views</strong>(而CommonJS的import只是exports的一份copy而已，并且不是即时)。</p>\n<p>下面例子会讲述live read-only view是怎样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// lib/counter.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> counter = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">increment</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  counter++;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decrement</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  counter--;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">  counter: counter,</div><div class=\"line\">  increment: increment,</div><div class=\"line\">  decrement: decrement</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// src/main.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> counter = <span class=\"built_in\">require</span>(<span class=\"string\">'../../lib/counter'</span>);</div><div class=\"line\"></div><div class=\"line\">counter.increment();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(counter.counter); <span class=\"comment\">// 1</span></div></pre></td></tr></table></figure>\n<p>在这个例子中，我们创建了module的<strong>2份copy</strong>：一个是当我们<code>export</code>他，另一个是当我们<code>require</code>他。</p>\n<p>并且，在<code>main.js</code>的那份copy已经和原本的失去连接了。这就是为什么当我们给<code>counter</code>增加时他还是<code>1</code>——因为我们<code>import</code>的<code>counter</code>已经和原来的失去联系。</p>\n<p>因为，增加<code>counter</code>会在原来的module可以实现，但是在你copy的那份就实现不了。如果想要后者实现的话，只能手动地操作了：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">counter.counter++;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(counter.counter); <span class=\"comment\">// 2</span></div></pre></td></tr></table></figure>\n<p>在另一个方面，ES6对于我们<code>import</code>的module创建了一个<strong>live read-only view</strong>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// lib/counter.js</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">let</span> counter = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">increment</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  counter++;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decrement</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  counter--;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// src/main.js</span></div><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> counter <span class=\"keyword\">from</span> <span class=\"string\">'../../counter'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(counter.counter); <span class=\"comment\">// 1</span></div><div class=\"line\">counter.increment();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(counter.counter); <span class=\"comment\">// 2</span></div></pre></td></tr></table></figure>\n<p>很cool，对吧。</p>\n<h2>向前看：bunding modules</h2>\n<p>哇。时间过得真快。我真的希望能够帮助你更好地理解JavaScript的modules。</p>\n<p>在下一部分，我会讲<strong>module bundling</strong>，涉及到几个核心的主题：</p>\n<ul>\n<li>为什么我们需要<em>module bundling</em></li>\n<li>不同方法实现<em>bundling</em></li>\n<li>ECMAScript的模块加载器API</li>\n<li>…更多…</li>\n</ul>\n<p>注意：为了简单起见，我跳过了许多细节(比如，循环依赖)。如果我留下了很重要或者很棒的东西，请留言让我知道！</p>\n<p><strong>(原文：<a href=\"https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.4ufizwkud\" target=\"_blank\" rel=\"external\">JavaScript Modules: A Beginner’s Guide - Preethi Kasireddy</a>)</strong></p>\n","excerpt":"","more":"<p><strong>(原文：<a href=\"https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.4ufizwkud\">JavaScript Modules: A Beginner’s Guide - Preethi Kasireddy</a>)</strong></p>\n<p>如果你是刚接触 JavaScript 的话，像「module bundler vs. module loaders」， 「Webpack vs. Browserify」 以及「AMD vs. CommonJS」这些术语可以一下子把你搞晕。</p>\n<p>JavaScript的模块系统(module system)也许是很吓人的，但是对于web开发者来说，理解他是很重要的。</p>\n<p>在本文，我会使用通俗易懂的话(以及一些代码)来解释这些术语。我希望能帮助到你。</p>\n<p>注意：为了简单起见，我会分成2部分来说：Part 1 会解释什么是 <em>module</em> 以及为什么要使用他们。Part 2 (在下周发表)会接着解释什么是 <em>bundle modules</em> 以及其实现方法。</p>\n<h2>Part 1: 有谁可以再解释解释什么是 module 吗？</h2>\n<p>好的作者会把他们的书籍分成多个章节；好的程序员也会把他们的程序分成多个模块。</p>\n<p>就像书的章节一样，module 只是单词(在这里，即是 code )的集合。</p>\n<p>但是，好的模块是高度包含自己独立的功能。这让他们可以根据需求更改，删除，增加，而不扰乱整个系统。</p>\n<h2>为什么使用 module ？</h2>\n<p>使用modules对于大型，相互依赖的代码库来说是很多好处的。在我看来，最重要的是：</p>\n<p>**1) 可维护性：**根据定义，module 是独立的。一个设计良好的 module 是尽可能多地减少代码的耦合，从而他能够独立地开发和改进。当一个 module 的耦合度低的时候，更新他是很容易一件事情。</p>\n<p>回到我们书籍的例子，当你因为更新了一个章节，从而需要调整剩余章节的话，这简直是噩耗。相反，你更愿意编写章节的时候，不影响其他章节。</p>\n<p>**2) 命名空间(namespacing)：**在 JavaScript 中，在 top-level 函数的作用域的外面的变量就是 <em>global</em> (全局)变量，全局变量即是每个人都可以 access 他们。因为这样，就很容易造成&quot;命名空间污染”，也就是无相关的代码共享全局变量。</p>\n<p>在毫无相关的代码中共享全局变量在开发中 <a href=\"http://c2.com/cgi/wiki?GlobalVariablesAreBad\">is a big no no</a>。</p>\n<p>在本文的下面，我们会解释 module 可以让我们避免命名空间污染，通过为我们的变量创建私有空间。</p>\n<p>**3) 可重用性：**我们不妨老实承认，我们过去是把一个项目的代码copy到另一个项目中。比方说，你copy了你之前项目的一些util方法到当前的项目中。</p>\n<p>这是很浪费时间的。但是慢着，如果使用 module ，一个我们可以不断复用的 module ，这不是很好吗？</p>\n<h2>你是如何合并模块(incorporate modules)?</h2>\n<p>有很多方法可以在你的程序中合并模块。我们现在就来讲解他们的其中一些：</p>\n<h3>Module Pattern</h3>\n<p><em>Module pattern</em> 其实就是模仿 <em>class</em> 的概念(因为 JavaScript 并不真正地支持 class )，因此我们可以把公有方法，私有方法以及变量都保存在一个对象里面——这个就有点类似于 class 在其他编程语言(如 Java 或者 Python )中的使用。这可以让我们给公有方法创建 API ，然后暴露出去；并且同时可以把私有的变量和方法都封装在一个闭包作用域(closure scope)中。</p>\n<p>有几个方法可以实现 module pattern。在第一个例子中。我会使用 <em>anonymous closure</em>。他会把我们所有的代码都放进一个匿名函数里面。(记住：在 JavaScript 中，<code>function</code> 是创建作用域的唯一方法？)</p>\n<p><strong>例子一：Anonymous closure</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// We keep these variables private inside this closure scope</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">55</span>, <span class=\"number\">91</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> average = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> total = myGrades.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> accumulator + item&#125;, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'Your average grade is '</span> + total / myGrades.length + <span class=\"string\">'.'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> failing = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> failingGrades = myGrades.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> item &lt; <span class=\"number\">70</span>;&#125;);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'You failed '</span> + failingGrades.length + <span class=\"string\">' times.'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">console</span>.log(failing());</div><div class=\"line\"></div><div class=\"line\">&#125;());</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ‘You failed 2 times.’</span></div></pre></td></tr></table></figure>\n<p>有了这个，我们的匿名函数就有了它自己的求值环境(evaluation environment)或者&quot;closure&quot;，并且我们可以立马对他求值(evaluate)。这可以让我们从 parent namespace(global) 中隐藏变量。</p>\n<p>这种方法的好处就是，你可以在匿名函数中使用局部变量而不会 overwrite(覆盖) 已经存在的全局变量，但与此同时，你还可以 access 全局变量，就像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> global = <span class=\"string\">'Hello, I am a global variable :)'</span>;</div><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// We keep these variables private inside this closure scope</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">55</span>, <span class=\"number\">91</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> average = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> total = myGrades.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> accumulator + item&#125;, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Your average grade is '</span> + total / myGrades.length + <span class=\"string\">'.'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> failing = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> failingGrades = myGrades.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> item &lt; <span class=\"number\">70</span>;&#125;);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'You failed '</span> + failingGrades.length + <span class=\"string\">' times.'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">console</span>.log(failing());</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(global);</div><div class=\"line\">&#125;());</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 'You failed 2 times.'</span></div><div class=\"line\"><span class=\"comment\">// 'Hello, I am a global variable :)'</span></div></pre></td></tr></table></figure>\n<p>注意到在匿名函数2旁的括号是必须的，因为以关键字<code>function</code>开头的语句会被认为是 <em>function declaration</em> (记住，在 JavaScript 中，你是不能定义没有名字的function declaration。) 因此，这对括号就创建一个 <em>function expression</em>。如果不明白的话，你可以<a href=\"http://stackoverflow.com/questions/1634268/explain-javascripts-encapsulated-anonymous-function-syntax\">阅读这里</a>。</p>\n<p><strong>例子二：Global import</strong></p>\n<p>另一个较流行的方法是 <em>global import</em> ，就像 jQuery 一样。他有点类似于上面的　<em>anonymous closure</em>，只是现在我们把全局变量作为参数传进了匿名函数中。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">globalVariable</span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keep this variables private inside this closure scope</span></div><div class=\"line\">  <span class=\"keyword\">var</span> privateFunction = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Shhhh, this is private!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Expose the below methods via the globalVariable interface while</span></div><div class=\"line\">  <span class=\"comment\">// hiding the implementation of the method within the</span></div><div class=\"line\">  <span class=\"comment\">// function() block</span></div><div class=\"line\"></div><div class=\"line\">  globalVariable.each = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(collection)) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; collection.length; i++) &#123;</div><div class=\"line\">        iterator(collection[i], i, collection);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> collection) &#123;</div><div class=\"line\">        iterator(collection[key], key, collection);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  globalVariable.filter = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection, test</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> filtered = [];</div><div class=\"line\">    globalVariable.each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (test(item)) &#123;</div><div class=\"line\">        filtered.push(item);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span> filtered;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  globalVariable.map = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> mapped = [];</div><div class=\"line\">    globalUtils.each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key, collection</span>) </span>&#123;</div><div class=\"line\">      mapped.push(iterator(value));</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span> mapped;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  globalVariable.reduce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection, iterator, accumulator</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> startingValueMissing = accumulator === <span class=\"literal\">undefined</span>;</div><div class=\"line\"></div><div class=\"line\">    globalVariable.each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span>(startingValueMissing) &#123;</div><div class=\"line\">        accumulator = item;</div><div class=\"line\">        startingValueMissing = <span class=\"literal\">false</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        accumulator = iterator(accumulator, item);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> accumulator;</div><div class=\"line\"></div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\"> &#125;(globalVariable));</div></pre></td></tr></table></figure>\n<p>在这个例子中，<code>globalVariable</code> 在全局中唯一的一个变量。这个方法比前一个方法好的地方在于：你可以在前面就定义全局变量，这样就方便别人阅读你的代码。</p>\n<p><strong>例子三：Object interface</strong></p>\n<p>创建 module 的例子还有一个就是使用独立的 <em>object interface</em>，就像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myGradesCalculate = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keep this variable private inside this closure scope</span></div><div class=\"line\">  <span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">55</span>, <span class=\"number\">91</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Expose these functions via an interface while hiding</span></div><div class=\"line\">  <span class=\"comment\">// the implementation of the module within the function() block</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    average: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> total = myGrades.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, item</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> accumulator + item;</div><div class=\"line\">        &#125;, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span><span class=\"string\">'Your average grade is '</span> + total / myGrades.length + <span class=\"string\">'.'</span>;</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    failing: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> failingGrades = myGrades.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> item &lt; <span class=\"number\">70</span>;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'You failed '</span> + failingGrades.length + <span class=\"string\">' times.'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\">myGradesCalculate.failing(); <span class=\"comment\">// 'You failed 2 times.'</span></div><div class=\"line\">myGradesCalculate.average(); <span class=\"comment\">// 'Your average grade is 70.33333333333333.'</span></div></pre></td></tr></table></figure>\n<p>显而易见，这种方法可以让我们自己定义哪些变量/方法是私有的(例如，<code>myGrads</code>)，以及哪些变量/方法是我们想要暴露给他们的，通过 <code>return</code> 语句(比如，<code>average</code> &amp; <code>failing</code>)。</p>\n<p><strong>例子四：Revealing module pattern</strong></p>\n<p>这个跟上面的方法是很相似的，除了他保证所有的变量和方法都是私有的，直到我们显式地暴露出去：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myGradesCalculate = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keep this variable private inside this closure scope</span></div><div class=\"line\">  <span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">55</span>, <span class=\"number\">91</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> average = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> total = myGrades.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, item</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> accumulator + item;</div><div class=\"line\">      &#125;, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span><span class=\"string\">'Your average grade is '</span> + total / myGrades.length + <span class=\"string\">'.'</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> failing = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> failingGrades = myGrades.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> item &lt; <span class=\"number\">70</span>;</div><div class=\"line\">      &#125;);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'You failed '</span> + failingGrades.length + <span class=\"string\">' times.'</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Explicitly reveal public pointers to the private functions</span></div><div class=\"line\">  <span class=\"comment\">// that we want to reveal publicly</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    average: average,</div><div class=\"line\">    failing: failing</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\">myGradesCalculate.failing(); <span class=\"comment\">// 'You failed 2 times.'</span></div><div class=\"line\">myGradesCalculate.average(); <span class=\"comment\">// 'Your average grade is 70.33333333333333.'</span></div></pre></td></tr></table></figure>\n<p>上面好像讲了好多东西，其实对于 module pattern 来说，只是冰山一角。下面是一些我认为比较有用的资源：</p>\n<ul>\n<li><a href=\"https://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript\">Learn JavaScript Design Patterns</a> - by <em>Addy Osmani</em></li>\n<li><a href=\"http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html\">Adequately Good by Ben Cherry</a> - 通过例子讲述module pattern的高级使用</li>\n<li><a href=\"https://carldanley.com/js-module-pattern/\">Blog of Carl Danley</a> - module pattern的概述以及其他 JavaScript pattern 的资源</li>\n</ul>\n<h2>CommonJS and AMD</h2>\n<p>上面讲到的所有方法都有一个共同点：使用全局变量将其所有代码都封装在一个函数里面，从而使用 <em>closure scope</em> 为他自己创建出了一个私有的命名空间。</p>\n<p>他们各自有各自的优点，但是他们也有他们的弊端。</p>\n<p>其中一个，作为一名开发者，为了加载你的文件，你需要知道正确的依赖顺序。比如，你要在项目中使用 <code>Backbone</code>，那么你需要通过 <code>script</code> 标签来加载他的源文件。</p>\n<p>但是，因为 <code>Backbone</code> 是依赖 <code>Underscore.js</code>，那么加载 <code>Backbone</code> 的 <code>script</code> 标签就不能在 <code>Underscore</code> 的前面。</p>\n<p>作为一名开发者，维护依赖以及让他们的顺序都正确的话，有时是一件很头疼的事情。</p>\n<p>另一个弊端就是他们仍然会产生命名空间冲突。比如，你的两个 module 具有相同的名字。又或者，你的一个模块有两个版本，并且你同时需要他们。</p>\n<p>因此，你也会这样想到：能不能设计一种方法，既可以访问 module 的接口，但同时又不污染全局作用域。</p>\n<p>其实有两种已经实现好的方法：即是 CommonJS 和 AMD 。</p>\n<h3>CommonJS</h3>\n<p>CommonJS是一个自愿的工作小组，设计和实现 JavaScript 模块系统的 API。</p>\n<p>一个 CommonJS 模块其实就是 <code>exports</code> 了具体对象的 JavaScript 代码块，使得他们能够被程序中的其他模块 <code>require</code> 。如果你写过 <code>Node.js</code> 的话，你应该对他很熟悉。</p>\n<p>有了 CommonJS，每个 JavaScript 文件在他们各自唯一的 module context (就像封装在一个闭包中)保存了模块。在这个作用域里面，我们使用 <code>module.exports</code> 对象来暴露模块，使用<code>require</code>来加载他们。</p>\n<p>当你定义了一个 CommonJS 文件，也许他就长这样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myModule</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.hello = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'hello!'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.goodbye = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'goodbye!'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = myModule;</div></pre></td></tr></table></figure>\n<p>我们使用特殊的对象<code>module</code>，然后把我们函数的引用赋给<code>module.exports</code>。这个让CommonJS的模块系统知道我们想要暴露哪些，从而让别的文件引用。</p>\n<p>然后，如果别人想使用我的<code>myModule</code>，他们可以引用它到文件中，像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myModule = <span class=\"built_in\">require</span>(<span class=\"string\">'myModule'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> myModuleInstance = <span class=\"keyword\">new</span> myModule();</div><div class=\"line\">myModuleInstance.hello(); <span class=\"comment\">// 'hello!'</span></div><div class=\"line\">myModuleInstance.goodbye(); <span class=\"comment\">// 'goodbye!'</span></div></pre></td></tr></table></figure>\n<p>这个方法比前面所讲的 <em>module pattern</em> 有2个明显的优点：</p>\n<ol>\n<li>避免全局命名空间的污染</li>\n<li>让我们的依赖更加清晰</li>\n</ol>\n<p>而且，语法很简洁，我很喜欢。</p>\n<p>还有一个注意的是，CommonJS是针对server实现的，并且<strong>同步加载modules</strong>。这是很重要的，因为如果我们有3个module需要引入，那么他会一个接着一个加载。</p>\n<p>现在，CommonJS对于server端很极好的。但是不幸的是，他不适用于浏览器。因为在web读取一个module比在磁盘中读取慢得多。如果开始加载module，就会阻塞浏览器直到modules全部加载完毕。(我会在 Part 2 讲述解决方法)。</p>\n<h3>AMD</h3>\n<p>CommonJS是很好，但是如果我们想要异步加载modules呢？答案就是<em>Asynchronous Module Definition</em>，即<em>AMD</em>。</p>\n<p>使用AMD加载module就像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">define([<span class=\"string\">'myModule'</span>, <span class=\"string\">'myOtherModule'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">myModule, myOtherModule</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(myModule.hello());</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p><code>define</code>函数的第一个参数是一个数组，他包含了所需的依赖。这些依赖会在背后加载(不会阻塞)，而且一旦加载完毕，<code>define</code>就会调用传给他的callback函数。</p>\n<p>接着，callback函数就会把加载好的依赖作为他的参数——在上面例子中，即是<code>myModule</code>和<code>myOtherModule</code>。最后，这些依赖他们自己必须通过关键字<code>define</code>来定义。</p>\n<p>比如，<code>myModule</code>也许是这样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">define([], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    hello: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</div><div class=\"line\">    &#125;,</div><div class=\"line\">    goodbye: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'goodbye'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>不像CommonJS，AMD是以浏览器为核心来实现异步加载module的。(注意到，有很多人强烈地认为动态加载文件是不好的，这个我们在Part 2会讲到)。</p>\n<p>除了异步之外，AMD的另一个优点是，你的module可以是对象，函数，构造函数，字符串，JSON以及其他类型。而CommonJS只支持对象作为module。</p>\n<p>总的来说，AMD并不兼容io，文件系统，以及其他面向server的feature，并且，封装的语法比<code>require</code>较复杂一点。</p>\n<h3>UMD</h3>\n<p>对于需要你同时支持AMD和CommonJS的项目，你可以选择<em>Universal Module Definition (UMD)</em>。</p>\n<p>UMD本质上创建了一个方式，支持他们其中的一种，也支持全局变量的定义。因此，UMD module可以同时在client和server端使用。</p>\n<p>让我们来看看UMD是怎样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">root, factory</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">      <span class=\"comment\">// AMD</span></div><div class=\"line\">    define([<span class=\"string\">'myModule'</span>, <span class=\"string\">'myOtherModule'</span>], factory);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">      <span class=\"comment\">// CommonJS</span></div><div class=\"line\">    <span class=\"built_in\">module</span>.exports = factory(<span class=\"built_in\">require</span>(<span class=\"string\">'myModule'</span>), <span class=\"built_in\">require</span>(<span class=\"string\">'myOtherModule'</span>));</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"comment\">// Browser globals (Note: root is window)</span></div><div class=\"line\">    root.returnExports = factory(root.myModule, root.myOtherModule);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">myModule, myOtherModule</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// Methods</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notHelloOrGoodbye</span>(<span class=\"params\"></span>)</span>&#123;&#125;; <span class=\"comment\">// A private method</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hello</span>(<span class=\"params\"></span>)</span>&#123;&#125;; <span class=\"comment\">// A public method because it's returned (see below)</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">goodbye</span>(<span class=\"params\"></span>)</span>&#123;&#125;; <span class=\"comment\">// A public method because it's returned (see below)</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Exposed public methods</span></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">      hello: hello,</div><div class=\"line\">      goodbye: goodbye</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure>\n<p>更多关于UMD的例子，请查看 <a href=\"https://github.com/umdjs/umd\">enlightening repo</a>。</p>\n<h2>Native JS</h2>\n<p>哈！你居然能看到这里，看来我没有搞晕你。太棒了。因为在结束之前，我们还有一个定义module的方法。</p>\n<p>如你所见，上面的方法没有一种是原生JavaScript支持的。相反，我们使用了各种各样的方式去模拟一个模块系统。</p>\n<p>幸运的是，在TC39工作的人(设计ECMAScript的语法和语义)在ES6实现了内置的模块系统。</p>\n<p>下面的资源很好地讲解了ES6的模块系统：</p>\n<ul>\n<li><a href=\"http://jsmodules.io/cjs.html\">jsmodules.io</a></li>\n<li><a href=\"http://exploringjs.com/es6/ch_modules.html\">exploringjs.com</a></li>\n</ul>\n<p>ES6的module结合了CommonJS和AMD的优点，比如简洁的语法和异步加载。还有优点是，比如支持循环依赖。</p>\n<p>我最喜欢的ES6 modules的feature是，<em>imports</em>是<em>exports</em>的<strong>live read-only views</strong>(而CommonJS的import只是exports的一份copy而已，并且不是即时)。</p>\n<p>下面例子会讲述live read-only view是怎样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// lib/counter.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> counter = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">increment</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  counter++;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decrement</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  counter--;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">  counter: counter,</div><div class=\"line\">  increment: increment,</div><div class=\"line\">  decrement: decrement</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// src/main.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> counter = <span class=\"built_in\">require</span>(<span class=\"string\">'../../lib/counter'</span>);</div><div class=\"line\"></div><div class=\"line\">counter.increment();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(counter.counter); <span class=\"comment\">// 1</span></div></pre></td></tr></table></figure>\n<p>在这个例子中，我们创建了module的<strong>2份copy</strong>：一个是当我们<code>export</code>他，另一个是当我们<code>require</code>他。</p>\n<p>并且，在<code>main.js</code>的那份copy已经和原本的失去连接了。这就是为什么当我们给<code>counter</code>增加时他还是<code>1</code>——因为我们<code>import</code>的<code>counter</code>已经和原来的失去联系。</p>\n<p>因为，增加<code>counter</code>会在原来的module可以实现，但是在你copy的那份就实现不了。如果想要后者实现的话，只能手动地操作了：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">counter.counter++;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(counter.counter); <span class=\"comment\">// 2</span></div></pre></td></tr></table></figure>\n<p>在另一个方面，ES6对于我们<code>import</code>的module创建了一个<strong>live read-only view</strong>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// lib/counter.js</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">let</span> counter = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">increment</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  counter++;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decrement</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  counter--;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// src/main.js</span></div><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> counter <span class=\"keyword\">from</span> <span class=\"string\">'../../counter'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(counter.counter); <span class=\"comment\">// 1</span></div><div class=\"line\">counter.increment();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(counter.counter); <span class=\"comment\">// 2</span></div></pre></td></tr></table></figure>\n<p>很cool，对吧。</p>\n<h2>向前看：bunding modules</h2>\n<p>哇。时间过得真快。我真的希望能够帮助你更好地理解JavaScript的modules。</p>\n<p>在下一部分，我会讲<strong>module bundling</strong>，涉及到几个核心的主题：</p>\n<ul>\n<li>为什么我们需要<em>module bundling</em></li>\n<li>不同方法实现<em>bundling</em></li>\n<li>ECMAScript的模块加载器API</li>\n<li>…更多…</li>\n</ul>\n<p>注意：为了简单起见，我跳过了许多细节(比如，循环依赖)。如果我留下了很重要或者很棒的东西，请留言让我知道！</p>\n<p><strong>(原文：<a href=\"https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.4ufizwkud\">JavaScript Modules: A Beginner’s Guide - Preethi Kasireddy</a>)</strong></p>\n"},{"title":"「译」JavaScript Modules Part2: Module Bundling","author":"Drake Leung","date":"2016-02-08T07:57:07.000Z","foreword":"JavaScript 模块化 Part2 - 主要讲述 module bundling。","_content":"\n**(原文：[JavaScript Modules Part 2: Module Bundling](https://medium.freecodecamp.com/javascript-modules-part-2-module-bundling-5020383cf306#.m5o3ar7dt))**\n\n\n\n在Part 1，我讲解了什么是 *module* ，为什么要使用他们，以及合并 module 的各种方法。在Part 2，我会讲解什么是 *bundle modules* : 为什么要，不同方法的实现，以及 module 在今后web开发的情况。\n\n\n\n## 什么是 module bundling?\n\n简单来说，*module bundling* 其实就是把一组 module (以及他们的依赖)，按照正确的顺序，打包(bundle)到一个单独的文件(或者一组文件)里面。但是对于web开发来说，细节才是魔鬼 :)\n\n\n\n## 为什么把所有的 module 都打包在一起？\n\n当你把程序分成多个 module 的时候，你很可能会把他们组织在不同的文件和文件夹中。偶尔你会有第三方 module ，比如`Underscore`或者`React`。\n\n\n\n那么，当用户浏览你的页面时，这些文件都会通过 `<script>` 标签引入到你的 HTML 文件。每个文件就需要一个 `<script>` 标签，就意味着，浏览器需要单独地加载每个文件，一个...接着...一个。\n\n\n\n...然而这对于页面的加载时间是很不友好的。\n\n\n\n为了解决这个问题，我们 *bundle*，或者 *concatenate* 所有的文件到一个大文件里面(或者一组文件，根据情况)，这样就可以减少请求的数量。这个就是你听别的开发人员所说的「build step」或者「build process」。\n\n\n\n另一个加速 bundling 操作的的方法是「minify」(压缩)代码。*minification* 就是从源代码中去除不必要的字符(比如，空格，注释，换行符等)。这样一来，不仅减少了代码的大小，而且不影响其本身的功能。\n\n\n\n更少的数据就意味着浏览器处理的时间更少，因为减少了下载文件的时间。如果你曾经见过文件名有后缀`min`，比如`underscore.min.js`，其实就是相对于完整版的一个不具可读性，压缩过的版本。\n\n\n\n像 *gulp* 或者 *Grunt* 这样的 Task runners，对开发者来说，是很容易进行`concatenations`和`minification`。这样一来，保证了代码对开发者的可读性的同时，也保证了对浏览器的优化。\n\n\n\n## 实现bundle module的各种方法\n\n当你使用标准的 module pattern (前面讲解的)的其中一种来定义 module 的时候，*concatenating* 和 *minifying* 你的文件是极好的，你所需要做的就是把你的一堆JavaScript代码打包在一起。\n\n\n\n但是，当你使用浏览器不能解析的非原生模块系统时，比如 CommonJS，AMD。你需要一种特殊的工具来把你的代码转换成浏览器可以解析的。这就是为什么 *Browserify*，*RequireJS*，*Webpack*，和其他「module bundlers」又或者「module loaders」会出现。\n\n\n\n为了 bundling 或者 loading 你的代码，module bundlers 提供了好多额外的 feature。比如当你修改代码时自动重编译，还有提供调试时所需要的 source maps。\n\n\n\n现在让我们来看看 module bundling 的几种方法:\n\n\n\n### Bundling CommonJS\n\n从 Part1 可知，CommonJS 是同步加载 module 的，这是很好的除了对浏览器不适用之外。我提到过有解决方法——其中一种就是使用 *Browserify* 。Browserify 可以给浏览器编译 CommonJS 的 module。\n\n\n\n举个例子，我们有一个 `main.js` 文件，他 *import* 了一个可以计算数组平均值的 module:\n\n\n\n``` javascript\nvar myDependency = require(‘myDependency’);\nvar myGrades = [93, 95, 88, 0, 91];\nvar myAverageGrade = myDependency.average(myGrades);\n```\n\n\n\n在这个例子中，我们有一个依赖(`myDependency`)。使用下面的命令，*Browserify* 会递归地把`main.js`前面所有需要的module打包到一个单独的文件里(`bundle.js`)：\n\n\n\n``` javascript\n\tbrowserify main.js -o bundle.js\n```\n\n\n\n*Browserify* 的实现方法：为了遍历你整个项目的依赖，他会把每个 `require` 解析成 [AST](https://en.wikipedia.org/wiki/Abstract_syntax_tree)。当他计算出你项目的依赖关系时，他就会按照正确的顺序把他们都打包在一个单独的文件里面。因此，你只需要把一个单独的，带上`bundle.js`的`<script>`标签放在你的 HTML 文件里面。这样一来，只要一个 HTTP 请求，就可以加载所有的modules。豪爽~\n\n\n\n相似地，如果你有多个文件且有多个依赖，你只需要简单地告诉 *Browserify* 你的 `entry file`，然后坐下，*Browserify* 就会开始施魔法。\n\n\n\n最后：准备好你打包好的文件，然后使用像 *Minify-JS* 这样的工具来压缩的你的代码。\n\n\n\n### Bundling AMD\n\n如果你使用AMD，也许你会使用一个像`RequireJS`或者`Curl`这样的AMD加载器。一个module loader(vs. a bundler)会动态地加载module，当你程序需要的时候。\n\n\n\n提醒一下，AMD与CommonJS不同的地方之一是，前者是动态加载模块的。也就是说，有了AMD，你实际上不需要*build step*(打包你所有的module到一个单独文件)，因为你是动态加载module——也就是只有当你需要module的时候才去下载文件，而不是当用户第一次浏览的时候，就把所有的module都下载。\n\n\n\n但在实际生产中，用户每次行为就需要请求下载对应的module是没有意义的。因此很多web开发者为了额外的性能，都会使用工具去打包和压缩他们的AMD modules，比如*RequireJS optimizer*，*r.js*。\n\n\n\n总的来说，AMD和CommonJS关于bundling的区别是：前者可以不需要build step。除非，你想*push the code live*，这时你可以使用像`r.js`这样的优化器。\n\n\n\n更多关于CommonJS和AMD的讨论，请查看这篇文章[Tom Dale’s blog](http://tomdale.net/2012/01/amd-is-not-the-answer/) :)\n\n\n\n### Webpack\n\n就目前的bundlers来说，*Webpack*是锋芒初现的。他可以识别任意一种模块系统，比如CommonJS，AMD或者ES6。\n\n\n\n你也许会这样想到：既然我们已经有了Browserify和RequireJS这样的工具，为什么还需要Webpack。其实，Webpack提供了很有用的feature像**code splitting**—把你的代码拆分成动态加载的「chuncks」。\n\n\n\n比如说，如果你的web应用有一块代码是在特定情况下才加载的，那么把所有的代码打包在一个单独的很大的文件里面就不是很适合了。在这种情况下，你可以使用*code splitting*提取代码到按需加载的*chunks*里面，这样就避免了用户首次访问时需要加载体积很大的`bundle.js`。\n\n\n\n*Code splitting*是Webpack提供的feature之一。网上有很多讨论Webpack和Browserify的文章，不妨看下面的链接：\n\n\n\n- [https://gist.github.com/substack/68f8d502be42d5cd4942](https://gist.github.com/substack/68f8d502be42d5cd4942)\n- [http://mattdesl.svbtle.com/browserify-vs-webpack](http://mattdesl.svbtle.com/browserify-vs-webpack)\n- [http://blog.namangoel.com/browserify-vs-webpack-js-drama](http://blog.namangoel.com/browserify-vs-webpack-js-drama)\n\n\n\n## ES6 Modules\n\n接下来我会讨论ES6 modules，他也许在未来让以上的bundlers的使用变少(等一下你就会明白我在讲什么)。首先，让我们来理解ES6 modules是如何加载的。\n\n\n\nES6 modules与AMD，CMD最大的不同之处在于，前者设计时考虑到了静态分析(static analysis)。这就意味着，当你`import` 模块时，这个`import`动作在编译的时候就完成了。也就是，在执行脚本之前，可以让我们移除掉不需要的`exports`。移除掉不必要的`exports`不但可以减少空间，还能减轻浏览器的压力。\n\n\n\n那么问题来了：这个和*dead code elimination*(如使用UglifyJS去压缩代码)有什么不同？答案是：**看情况**。\n\n\n\n(注意：*Dead code elimination*其实是移除掉不必要的代码和变量。不妨这样想：他是把你**打包后**的程序的多余的代码和变量移除掉。\n\n\n\n有时候，*dead code elimination*在ES6 module和UglifyJS中是一样的，但有时候又不是。如果你想了解更多你可以查看在[Rollup’s wiki](https://github.com/rollup/rollup)的一个很棒的例子。\n\n\n\nES6不同的地方在于实现dead code elimination的方法，叫**tree shaking**。Tree shaking实际上与dead code elimination的理念是相反的。他只打包了你所必需的代码，而不是把不需要的代码移除掉。让我们来看一下tree shaking的一个例子：\n\n\n\n假设我们有一个`util.js`文件 ，他有多个函数，我们用ES6的语法来导出他们。\n\n\n\n``` javascript\nexport function each(collection, iterator) {\n  if (Array.isArray(collection)) {\n    for (var i = 0; i < collection.length; i++) {\n      iterator(collection[i], i, collection);\n    }\n  } else {\n    for (var key in collection) {\n      iterator(collection[key], key, collection);\n    }\n  }\n}\n\nexport function filter(collection, test) {\n  var filtered = [];\n  each(collection, function(item) {\n    if (test(item)) {\n      filtered.push(item);\n    }\n  });\n  return filtered;\n}\n\nexport function map(collection, iterator) {\n  var mapped = [];\n  each(collection, function(value, key, collection) {\n    mapped.push(iterator(value));\n  });\n  return mapped;\n}\n\nexport function reduce(collection, iterator, accumulator) {\n  var startingValueMissing = accumulator === undefined;\n  each(collection, function(item) {\n    if (startingValueMissing) {\n      accumulator = item;\n      startingValueMissing = false;\n    } else {\n      accumulator = iterator(accumulator, item);\n    }\n  });\n  return accumulator;\n}\n```\n\n\n\n接下来，我们假设我们并不知道我们需要`util.js`的哪一个函数，所以，在`main.js`中我们这样引入他：\n\n\n\n``` javascript\nimport * as Utils from ‘./utils.js’;\n```\n\n\n\n然后，我们开始使用其中的一个函数：\n\n\n\n``` javascript\nimport * as Utils from ‘./utils.js’;\n\nUtils.each([1, 2, 3], function(x) { console.log(x) });\n```\n\n\n\n而，`main.js`被*tree shaking*编译之后，是长这样的：\n\n\n\n``` javascript\nfunction each(collection, iterator) {\n  if (Array.isArray(collection)) {\n    for (var i = 0; i < collection.length; i++) {\n      iterator(collection[i], i, collection);\n    }\n  } else {\n    for (var key in collection) {\n      iterator(collection[key], key, collection);\n    }\n  }\n};\n\neach([1, 2, 3], function(x) {\n  console.log(x)\n});\n```\n\n\n\n注意到，只有我们使用的`each`被引入了，而不是`util.js`里所有的函数。\n\n\n\n那么，如果我们使用`filter`函数而不是`each`的话，我们的`main.js`:\n\n\n\n``` javascript\nimport * as Utils from ‘./utils.js’;\nUtils.filter([1, 2, 3], function(x) { return x === 2 });\n```\n\n\n\ntree shaking 编译后，`main.js`变成了这样：\n\n\n\n``` javascript\nfunction each(collection, iterator) {\n  if (Array.isArray(collection)) {\n    for (var i = 0; i < collection.length; i++) {\n      iterator(collection[i], i, collection);\n    }\n  } else {\n    for (var key in collection) {\n      iterator(collection[key], key, collection);\n    }\n  }\n};\n\nfunction filter(collection, test) {\n  var filtered = [];\n  each(collection, function(item) {\n    if (test(item)) {\n      filtered.push(item);\n    }\n  });\n  return filtered;\n};\n\nfilter([1, 2, 3], function(x) {\n  return x === 2\n});\n```\n\n\n\n注意到这个时候,`each`和`filter`都被引入了，这是因为`filter`函数是依赖于`each`的。\n\n\n\n很cool，对不对？\n\n\n\n我建议你通过*Rollup.js*的 [live demo and editor](http://rollupjs.org/) ，去玩玩和了解一下tree shaking。\t\t\n\n\n\n## 构建ES6 modules\n\n好的，现在我们知道了ES6 modules的加载很其他module format是不同的，但是我们还没讲怎么构建ES6 modules。\n\n\n\n不幸的是，ES6 modules 还需要额外的工作，因为浏览器还没有实现原生的ES6 module加载。\n\n\n\n下面有两种方法来构建/转换 ES6 modules，使得在浏览器中可以使用。其中，第一种是当前最常见的：\n\n\n\n1. 使用转换器(比如，Babel或者Traceur)，把你ES6代码转换成CommonJS，AMD或者UMD格式的ES5代码。然后把转换好的代码送到一个module bundler里去，比如Browserify或者Webpack，这样就创建了一个或多个打包好的文件。\n2. 使用[Rollup.js](http://rollupjs.org/)：这种方法和前面的很相似，除了在打包之前会使用ES6 module的静态分析。他利用**tree shaking**把最少的代码量打包。总体来说，Rollup.js比Webpack或者Browserify最大的好处是，当你使用ES6 module时，可以使你的代码的体积更小。需要注意的是，Rollup提供了多种格式来打包你的代码，包括ES6，CommonJS，AMD，CMD，UMD或者IIFE。IIFE和UMD可以适用于你的浏览器，但如果你选择了AMD，CommonJS或者ES6的话，你需要找其他方法把你的代码转成浏览器可以识别的，比如使用Browserify，Webpack，RequireJS等等。\n\n\n\n## Jumping through hoops\n\n作为web开发者，我们需要跳过这些繁文缛节。因为把ES6 modules代码转换成浏览器可以解释的ES5不是一件易事。\n\n\n\n问题就是：我们可以直接在浏览器使用ES6 module，且不用弄上面说到的两种方法吗？\n\n\n\n答案是：很快。\n\n\n\nECMAScript现在已经有解决方案的规范了，叫做[ECMAScript 6 module loader API](https://github.com/ModuleLoader/es6-module-loader)。简单介绍，他是一种可编程的，基于Promise的API，可以动态加载你的modules，并且cache他们，使得随后的`import`不需要加载另外一份新版本的module。\n\n\n\n他大概是这样子的：\n\n\n\n``` javascript\n// myModule.js\n\nexport class myModule {\n  constructor() {\n    console.log('Hello, I am a module');\n  }\n  hello() {\n    console.log('hello!');\n  }\n  goodbye() {\n    console.log('goodbye!');\n  }\n}\n```\n\n\n\n``` javascript\n// main.js\n\nSystem.import(‘myModule’).then(function(myModule) {\n  new myModule.hello();\n});\n// ‘hello!’\n```\n\n\n\n另外一种方法是，你可以直接在`script`标签里，直接注明`type=module`来定义modules。\n\n\n\n``` javascript\n< script type = \"module\" >\n  // loads the 'myModule' export from 'mymodule.js'\n  import {\n    hello\n  } from 'mymodule';\nnew Hello(); // 'Hello, I am a module!'\n< /script>\n```\n\n\n\n如果你还没有看过module loader API的polyfill，我强烈建议你至少去[看一看](https://github.com/ModuleLoader/es6-module-loader)。\n\n\n\n如果你想要测试一下这种方法的话，你可以试试[SystemJS](https://github.com/systemjs/systemjs)。他是基于[ES6 Module Loader polyfill](https://github.com/ModuleLoader/es6-module-loader)创建的。他可以在浏览器和Node环境中，动态地加载任何格式的modules(ES6 modules，AMD，CommonJS以及全局的scripts)。他会跟踪所有已经加载到「module registry」的modules，避免了重新加载已经加载过的modules。值得提醒的是，他也可以自动地转换ES6 modules(如果你开启这个option的话)，还可以从任何一种模块格式中加载任何一种格式的模块。太棒了。\n\n\n\n## 既然我们已经有了ES6 modules，还需要bundlers吗？\n\nES6 modules的逐渐流行，产生了一些有趣的问题：\n\n\n\n### HTTP/2会使module bundlers过时吗？\n\n对于HTTP/1，我们的每个TCP连接只允许一个请求。这就是为什么加载多个资源需要多个请求。有了HTTP/2，一切都变了。HTTP/2是*fully multiplexed*，这就意味着多个请求和多个响应可以并行。这样一来，我们可以在一个TCP连接中，进行多个请求。\n\n\n\n既然每个HTTP/2请求的开销已经比HTTP/1小得多，那么长远来看，加载一堆的modules并不会降低很多的性能。于是有些人就认为，module bundling已经不需要了。这其实是有可能的，但是我们还要视情况而定。\n\n\n\n比如说，module bundling提供了HTTP/2没有提供的优点，像移除掉不需要的`exports`从而减少空间。如果你搭建的网页是每个微小的`bit`都会影响性能的话，那么bundling就给了你巨大的好处。另一方面，如果你对性能要求不是很高的话，你可以跳过构建过程，从而节省了一些时间。\n\n\n\n总起来说，我们现在离享受HTTP/2带来的好处还很远。我个人猜测build process还会持续一段时间。\n\n\n\n### CommonJS，AMD和UMD还过时吗？\n\n一旦ES6变成了标准，那么我们真的还需要非原生的module feature吗？\n\n\n\n我表示怀疑。\n\n\n\n如果只遵循单一的语法去加载和引入module，并且不需要中间步骤，这对于web开发者来说很棒的。但到达这一步还需要多久呢？\n\n\n\n机会是有的，但需要一段时间。\n\n\n\n并且，每个人都可以根据自己的口味去选择，因此「one truthful approach」并不会成为现实。\n\n\n\n## 结论\n\n当开发者讨论modules和module bundling的时候，我希望这两篇文章可以帮助他们厘清这些术语。如果你有疑问的话，你回头看看[part I](https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.y8hs0nsne) 。\n\n\n\n同样地，可以在评论中和我讨论，同时随时欢迎你提问题。\n\n\n\nHappy bundling :)\n\n\n**(原文：[JavaScript Modules Part 2: Module Bundling](https://medium.freecodecamp.com/javascript-modules-part-2-module-bundling-5020383cf306#.m5o3ar7dt))**\n","source":"_posts/JavaScript-Modules-Part-2.md","raw":"---\ntitle: '「译」JavaScript Modules Part2: Module Bundling'\nauthor: Drake Leung\ntags: []\ncategories: [翻译]\ndate: 2016-02-08 15:57:07\nforeword: JavaScript 模块化 Part2 - 主要讲述 module bundling。\n---\n\n**(原文：[JavaScript Modules Part 2: Module Bundling](https://medium.freecodecamp.com/javascript-modules-part-2-module-bundling-5020383cf306#.m5o3ar7dt))**\n\n\n\n在Part 1，我讲解了什么是 *module* ，为什么要使用他们，以及合并 module 的各种方法。在Part 2，我会讲解什么是 *bundle modules* : 为什么要，不同方法的实现，以及 module 在今后web开发的情况。\n\n\n\n## 什么是 module bundling?\n\n简单来说，*module bundling* 其实就是把一组 module (以及他们的依赖)，按照正确的顺序，打包(bundle)到一个单独的文件(或者一组文件)里面。但是对于web开发来说，细节才是魔鬼 :)\n\n\n\n## 为什么把所有的 module 都打包在一起？\n\n当你把程序分成多个 module 的时候，你很可能会把他们组织在不同的文件和文件夹中。偶尔你会有第三方 module ，比如`Underscore`或者`React`。\n\n\n\n那么，当用户浏览你的页面时，这些文件都会通过 `<script>` 标签引入到你的 HTML 文件。每个文件就需要一个 `<script>` 标签，就意味着，浏览器需要单独地加载每个文件，一个...接着...一个。\n\n\n\n...然而这对于页面的加载时间是很不友好的。\n\n\n\n为了解决这个问题，我们 *bundle*，或者 *concatenate* 所有的文件到一个大文件里面(或者一组文件，根据情况)，这样就可以减少请求的数量。这个就是你听别的开发人员所说的「build step」或者「build process」。\n\n\n\n另一个加速 bundling 操作的的方法是「minify」(压缩)代码。*minification* 就是从源代码中去除不必要的字符(比如，空格，注释，换行符等)。这样一来，不仅减少了代码的大小，而且不影响其本身的功能。\n\n\n\n更少的数据就意味着浏览器处理的时间更少，因为减少了下载文件的时间。如果你曾经见过文件名有后缀`min`，比如`underscore.min.js`，其实就是相对于完整版的一个不具可读性，压缩过的版本。\n\n\n\n像 *gulp* 或者 *Grunt* 这样的 Task runners，对开发者来说，是很容易进行`concatenations`和`minification`。这样一来，保证了代码对开发者的可读性的同时，也保证了对浏览器的优化。\n\n\n\n## 实现bundle module的各种方法\n\n当你使用标准的 module pattern (前面讲解的)的其中一种来定义 module 的时候，*concatenating* 和 *minifying* 你的文件是极好的，你所需要做的就是把你的一堆JavaScript代码打包在一起。\n\n\n\n但是，当你使用浏览器不能解析的非原生模块系统时，比如 CommonJS，AMD。你需要一种特殊的工具来把你的代码转换成浏览器可以解析的。这就是为什么 *Browserify*，*RequireJS*，*Webpack*，和其他「module bundlers」又或者「module loaders」会出现。\n\n\n\n为了 bundling 或者 loading 你的代码，module bundlers 提供了好多额外的 feature。比如当你修改代码时自动重编译，还有提供调试时所需要的 source maps。\n\n\n\n现在让我们来看看 module bundling 的几种方法:\n\n\n\n### Bundling CommonJS\n\n从 Part1 可知，CommonJS 是同步加载 module 的，这是很好的除了对浏览器不适用之外。我提到过有解决方法——其中一种就是使用 *Browserify* 。Browserify 可以给浏览器编译 CommonJS 的 module。\n\n\n\n举个例子，我们有一个 `main.js` 文件，他 *import* 了一个可以计算数组平均值的 module:\n\n\n\n``` javascript\nvar myDependency = require(‘myDependency’);\nvar myGrades = [93, 95, 88, 0, 91];\nvar myAverageGrade = myDependency.average(myGrades);\n```\n\n\n\n在这个例子中，我们有一个依赖(`myDependency`)。使用下面的命令，*Browserify* 会递归地把`main.js`前面所有需要的module打包到一个单独的文件里(`bundle.js`)：\n\n\n\n``` javascript\n\tbrowserify main.js -o bundle.js\n```\n\n\n\n*Browserify* 的实现方法：为了遍历你整个项目的依赖，他会把每个 `require` 解析成 [AST](https://en.wikipedia.org/wiki/Abstract_syntax_tree)。当他计算出你项目的依赖关系时，他就会按照正确的顺序把他们都打包在一个单独的文件里面。因此，你只需要把一个单独的，带上`bundle.js`的`<script>`标签放在你的 HTML 文件里面。这样一来，只要一个 HTTP 请求，就可以加载所有的modules。豪爽~\n\n\n\n相似地，如果你有多个文件且有多个依赖，你只需要简单地告诉 *Browserify* 你的 `entry file`，然后坐下，*Browserify* 就会开始施魔法。\n\n\n\n最后：准备好你打包好的文件，然后使用像 *Minify-JS* 这样的工具来压缩的你的代码。\n\n\n\n### Bundling AMD\n\n如果你使用AMD，也许你会使用一个像`RequireJS`或者`Curl`这样的AMD加载器。一个module loader(vs. a bundler)会动态地加载module，当你程序需要的时候。\n\n\n\n提醒一下，AMD与CommonJS不同的地方之一是，前者是动态加载模块的。也就是说，有了AMD，你实际上不需要*build step*(打包你所有的module到一个单独文件)，因为你是动态加载module——也就是只有当你需要module的时候才去下载文件，而不是当用户第一次浏览的时候，就把所有的module都下载。\n\n\n\n但在实际生产中，用户每次行为就需要请求下载对应的module是没有意义的。因此很多web开发者为了额外的性能，都会使用工具去打包和压缩他们的AMD modules，比如*RequireJS optimizer*，*r.js*。\n\n\n\n总的来说，AMD和CommonJS关于bundling的区别是：前者可以不需要build step。除非，你想*push the code live*，这时你可以使用像`r.js`这样的优化器。\n\n\n\n更多关于CommonJS和AMD的讨论，请查看这篇文章[Tom Dale’s blog](http://tomdale.net/2012/01/amd-is-not-the-answer/) :)\n\n\n\n### Webpack\n\n就目前的bundlers来说，*Webpack*是锋芒初现的。他可以识别任意一种模块系统，比如CommonJS，AMD或者ES6。\n\n\n\n你也许会这样想到：既然我们已经有了Browserify和RequireJS这样的工具，为什么还需要Webpack。其实，Webpack提供了很有用的feature像**code splitting**—把你的代码拆分成动态加载的「chuncks」。\n\n\n\n比如说，如果你的web应用有一块代码是在特定情况下才加载的，那么把所有的代码打包在一个单独的很大的文件里面就不是很适合了。在这种情况下，你可以使用*code splitting*提取代码到按需加载的*chunks*里面，这样就避免了用户首次访问时需要加载体积很大的`bundle.js`。\n\n\n\n*Code splitting*是Webpack提供的feature之一。网上有很多讨论Webpack和Browserify的文章，不妨看下面的链接：\n\n\n\n- [https://gist.github.com/substack/68f8d502be42d5cd4942](https://gist.github.com/substack/68f8d502be42d5cd4942)\n- [http://mattdesl.svbtle.com/browserify-vs-webpack](http://mattdesl.svbtle.com/browserify-vs-webpack)\n- [http://blog.namangoel.com/browserify-vs-webpack-js-drama](http://blog.namangoel.com/browserify-vs-webpack-js-drama)\n\n\n\n## ES6 Modules\n\n接下来我会讨论ES6 modules，他也许在未来让以上的bundlers的使用变少(等一下你就会明白我在讲什么)。首先，让我们来理解ES6 modules是如何加载的。\n\n\n\nES6 modules与AMD，CMD最大的不同之处在于，前者设计时考虑到了静态分析(static analysis)。这就意味着，当你`import` 模块时，这个`import`动作在编译的时候就完成了。也就是，在执行脚本之前，可以让我们移除掉不需要的`exports`。移除掉不必要的`exports`不但可以减少空间，还能减轻浏览器的压力。\n\n\n\n那么问题来了：这个和*dead code elimination*(如使用UglifyJS去压缩代码)有什么不同？答案是：**看情况**。\n\n\n\n(注意：*Dead code elimination*其实是移除掉不必要的代码和变量。不妨这样想：他是把你**打包后**的程序的多余的代码和变量移除掉。\n\n\n\n有时候，*dead code elimination*在ES6 module和UglifyJS中是一样的，但有时候又不是。如果你想了解更多你可以查看在[Rollup’s wiki](https://github.com/rollup/rollup)的一个很棒的例子。\n\n\n\nES6不同的地方在于实现dead code elimination的方法，叫**tree shaking**。Tree shaking实际上与dead code elimination的理念是相反的。他只打包了你所必需的代码，而不是把不需要的代码移除掉。让我们来看一下tree shaking的一个例子：\n\n\n\n假设我们有一个`util.js`文件 ，他有多个函数，我们用ES6的语法来导出他们。\n\n\n\n``` javascript\nexport function each(collection, iterator) {\n  if (Array.isArray(collection)) {\n    for (var i = 0; i < collection.length; i++) {\n      iterator(collection[i], i, collection);\n    }\n  } else {\n    for (var key in collection) {\n      iterator(collection[key], key, collection);\n    }\n  }\n}\n\nexport function filter(collection, test) {\n  var filtered = [];\n  each(collection, function(item) {\n    if (test(item)) {\n      filtered.push(item);\n    }\n  });\n  return filtered;\n}\n\nexport function map(collection, iterator) {\n  var mapped = [];\n  each(collection, function(value, key, collection) {\n    mapped.push(iterator(value));\n  });\n  return mapped;\n}\n\nexport function reduce(collection, iterator, accumulator) {\n  var startingValueMissing = accumulator === undefined;\n  each(collection, function(item) {\n    if (startingValueMissing) {\n      accumulator = item;\n      startingValueMissing = false;\n    } else {\n      accumulator = iterator(accumulator, item);\n    }\n  });\n  return accumulator;\n}\n```\n\n\n\n接下来，我们假设我们并不知道我们需要`util.js`的哪一个函数，所以，在`main.js`中我们这样引入他：\n\n\n\n``` javascript\nimport * as Utils from ‘./utils.js’;\n```\n\n\n\n然后，我们开始使用其中的一个函数：\n\n\n\n``` javascript\nimport * as Utils from ‘./utils.js’;\n\nUtils.each([1, 2, 3], function(x) { console.log(x) });\n```\n\n\n\n而，`main.js`被*tree shaking*编译之后，是长这样的：\n\n\n\n``` javascript\nfunction each(collection, iterator) {\n  if (Array.isArray(collection)) {\n    for (var i = 0; i < collection.length; i++) {\n      iterator(collection[i], i, collection);\n    }\n  } else {\n    for (var key in collection) {\n      iterator(collection[key], key, collection);\n    }\n  }\n};\n\neach([1, 2, 3], function(x) {\n  console.log(x)\n});\n```\n\n\n\n注意到，只有我们使用的`each`被引入了，而不是`util.js`里所有的函数。\n\n\n\n那么，如果我们使用`filter`函数而不是`each`的话，我们的`main.js`:\n\n\n\n``` javascript\nimport * as Utils from ‘./utils.js’;\nUtils.filter([1, 2, 3], function(x) { return x === 2 });\n```\n\n\n\ntree shaking 编译后，`main.js`变成了这样：\n\n\n\n``` javascript\nfunction each(collection, iterator) {\n  if (Array.isArray(collection)) {\n    for (var i = 0; i < collection.length; i++) {\n      iterator(collection[i], i, collection);\n    }\n  } else {\n    for (var key in collection) {\n      iterator(collection[key], key, collection);\n    }\n  }\n};\n\nfunction filter(collection, test) {\n  var filtered = [];\n  each(collection, function(item) {\n    if (test(item)) {\n      filtered.push(item);\n    }\n  });\n  return filtered;\n};\n\nfilter([1, 2, 3], function(x) {\n  return x === 2\n});\n```\n\n\n\n注意到这个时候,`each`和`filter`都被引入了，这是因为`filter`函数是依赖于`each`的。\n\n\n\n很cool，对不对？\n\n\n\n我建议你通过*Rollup.js*的 [live demo and editor](http://rollupjs.org/) ，去玩玩和了解一下tree shaking。\t\t\n\n\n\n## 构建ES6 modules\n\n好的，现在我们知道了ES6 modules的加载很其他module format是不同的，但是我们还没讲怎么构建ES6 modules。\n\n\n\n不幸的是，ES6 modules 还需要额外的工作，因为浏览器还没有实现原生的ES6 module加载。\n\n\n\n下面有两种方法来构建/转换 ES6 modules，使得在浏览器中可以使用。其中，第一种是当前最常见的：\n\n\n\n1. 使用转换器(比如，Babel或者Traceur)，把你ES6代码转换成CommonJS，AMD或者UMD格式的ES5代码。然后把转换好的代码送到一个module bundler里去，比如Browserify或者Webpack，这样就创建了一个或多个打包好的文件。\n2. 使用[Rollup.js](http://rollupjs.org/)：这种方法和前面的很相似，除了在打包之前会使用ES6 module的静态分析。他利用**tree shaking**把最少的代码量打包。总体来说，Rollup.js比Webpack或者Browserify最大的好处是，当你使用ES6 module时，可以使你的代码的体积更小。需要注意的是，Rollup提供了多种格式来打包你的代码，包括ES6，CommonJS，AMD，CMD，UMD或者IIFE。IIFE和UMD可以适用于你的浏览器，但如果你选择了AMD，CommonJS或者ES6的话，你需要找其他方法把你的代码转成浏览器可以识别的，比如使用Browserify，Webpack，RequireJS等等。\n\n\n\n## Jumping through hoops\n\n作为web开发者，我们需要跳过这些繁文缛节。因为把ES6 modules代码转换成浏览器可以解释的ES5不是一件易事。\n\n\n\n问题就是：我们可以直接在浏览器使用ES6 module，且不用弄上面说到的两种方法吗？\n\n\n\n答案是：很快。\n\n\n\nECMAScript现在已经有解决方案的规范了，叫做[ECMAScript 6 module loader API](https://github.com/ModuleLoader/es6-module-loader)。简单介绍，他是一种可编程的，基于Promise的API，可以动态加载你的modules，并且cache他们，使得随后的`import`不需要加载另外一份新版本的module。\n\n\n\n他大概是这样子的：\n\n\n\n``` javascript\n// myModule.js\n\nexport class myModule {\n  constructor() {\n    console.log('Hello, I am a module');\n  }\n  hello() {\n    console.log('hello!');\n  }\n  goodbye() {\n    console.log('goodbye!');\n  }\n}\n```\n\n\n\n``` javascript\n// main.js\n\nSystem.import(‘myModule’).then(function(myModule) {\n  new myModule.hello();\n});\n// ‘hello!’\n```\n\n\n\n另外一种方法是，你可以直接在`script`标签里，直接注明`type=module`来定义modules。\n\n\n\n``` javascript\n< script type = \"module\" >\n  // loads the 'myModule' export from 'mymodule.js'\n  import {\n    hello\n  } from 'mymodule';\nnew Hello(); // 'Hello, I am a module!'\n< /script>\n```\n\n\n\n如果你还没有看过module loader API的polyfill，我强烈建议你至少去[看一看](https://github.com/ModuleLoader/es6-module-loader)。\n\n\n\n如果你想要测试一下这种方法的话，你可以试试[SystemJS](https://github.com/systemjs/systemjs)。他是基于[ES6 Module Loader polyfill](https://github.com/ModuleLoader/es6-module-loader)创建的。他可以在浏览器和Node环境中，动态地加载任何格式的modules(ES6 modules，AMD，CommonJS以及全局的scripts)。他会跟踪所有已经加载到「module registry」的modules，避免了重新加载已经加载过的modules。值得提醒的是，他也可以自动地转换ES6 modules(如果你开启这个option的话)，还可以从任何一种模块格式中加载任何一种格式的模块。太棒了。\n\n\n\n## 既然我们已经有了ES6 modules，还需要bundlers吗？\n\nES6 modules的逐渐流行，产生了一些有趣的问题：\n\n\n\n### HTTP/2会使module bundlers过时吗？\n\n对于HTTP/1，我们的每个TCP连接只允许一个请求。这就是为什么加载多个资源需要多个请求。有了HTTP/2，一切都变了。HTTP/2是*fully multiplexed*，这就意味着多个请求和多个响应可以并行。这样一来，我们可以在一个TCP连接中，进行多个请求。\n\n\n\n既然每个HTTP/2请求的开销已经比HTTP/1小得多，那么长远来看，加载一堆的modules并不会降低很多的性能。于是有些人就认为，module bundling已经不需要了。这其实是有可能的，但是我们还要视情况而定。\n\n\n\n比如说，module bundling提供了HTTP/2没有提供的优点，像移除掉不需要的`exports`从而减少空间。如果你搭建的网页是每个微小的`bit`都会影响性能的话，那么bundling就给了你巨大的好处。另一方面，如果你对性能要求不是很高的话，你可以跳过构建过程，从而节省了一些时间。\n\n\n\n总起来说，我们现在离享受HTTP/2带来的好处还很远。我个人猜测build process还会持续一段时间。\n\n\n\n### CommonJS，AMD和UMD还过时吗？\n\n一旦ES6变成了标准，那么我们真的还需要非原生的module feature吗？\n\n\n\n我表示怀疑。\n\n\n\n如果只遵循单一的语法去加载和引入module，并且不需要中间步骤，这对于web开发者来说很棒的。但到达这一步还需要多久呢？\n\n\n\n机会是有的，但需要一段时间。\n\n\n\n并且，每个人都可以根据自己的口味去选择，因此「one truthful approach」并不会成为现实。\n\n\n\n## 结论\n\n当开发者讨论modules和module bundling的时候，我希望这两篇文章可以帮助他们厘清这些术语。如果你有疑问的话，你回头看看[part I](https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.y8hs0nsne) 。\n\n\n\n同样地，可以在评论中和我讨论，同时随时欢迎你提问题。\n\n\n\nHappy bundling :)\n\n\n**(原文：[JavaScript Modules Part 2: Module Bundling](https://medium.freecodecamp.com/javascript-modules-part-2-module-bundling-5020383cf306#.m5o3ar7dt))**\n","slug":"JavaScript-Modules-Part-2","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742z4000f37rqhj0bo51v","content":"<p><strong>(原文：<a href=\"https://medium.freecodecamp.com/javascript-modules-part-2-module-bundling-5020383cf306#.m5o3ar7dt\" target=\"_blank\" rel=\"external\">JavaScript Modules Part 2: Module Bundling</a>)</strong></p>\n<p>在Part 1，我讲解了什么是 <em>module</em> ，为什么要使用他们，以及合并 module 的各种方法。在Part 2，我会讲解什么是 <em>bundle modules</em> : 为什么要，不同方法的实现，以及 module 在今后web开发的情况。</p>\n<h2>什么是 module bundling?</h2>\n<p>简单来说，<em>module bundling</em> 其实就是把一组 module (以及他们的依赖)，按照正确的顺序，打包(bundle)到一个单独的文件(或者一组文件)里面。但是对于web开发来说，细节才是魔鬼 <img class=\"emoji\" draggable=\"false\" alt=\"😃\" src=\"https://twemoji.maxcdn.com/2/72x72/1f603.png\"></p>\n<h2>为什么把所有的 module 都打包在一起？</h2>\n<p>当你把程序分成多个 module 的时候，你很可能会把他们组织在不同的文件和文件夹中。偶尔你会有第三方 module ，比如<code>Underscore</code>或者<code>React</code>。</p>\n<p>那么，当用户浏览你的页面时，这些文件都会通过 <code>&lt;script&gt;</code> 标签引入到你的 HTML 文件。每个文件就需要一个 <code>&lt;script&gt;</code> 标签，就意味着，浏览器需要单独地加载每个文件，一个…接着…一个。</p>\n<p>…然而这对于页面的加载时间是很不友好的。</p>\n<p>为了解决这个问题，我们 <em>bundle</em>，或者 <em>concatenate</em> 所有的文件到一个大文件里面(或者一组文件，根据情况)，这样就可以减少请求的数量。这个就是你听别的开发人员所说的「build step」或者「build process」。</p>\n<p>另一个加速 bundling 操作的的方法是「minify」(压缩)代码。<em>minification</em> 就是从源代码中去除不必要的字符(比如，空格，注释，换行符等)。这样一来，不仅减少了代码的大小，而且不影响其本身的功能。</p>\n<p>更少的数据就意味着浏览器处理的时间更少，因为减少了下载文件的时间。如果你曾经见过文件名有后缀<code>min</code>，比如<code>underscore.min.js</code>，其实就是相对于完整版的一个不具可读性，压缩过的版本。</p>\n<p>像 <em>gulp</em> 或者 <em>Grunt</em> 这样的 Task runners，对开发者来说，是很容易进行<code>concatenations</code>和<code>minification</code>。这样一来，保证了代码对开发者的可读性的同时，也保证了对浏览器的优化。</p>\n<h2>实现bundle module的各种方法</h2>\n<p>当你使用标准的 module pattern (前面讲解的)的其中一种来定义 module 的时候，<em>concatenating</em> 和 <em>minifying</em> 你的文件是极好的，你所需要做的就是把你的一堆JavaScript代码打包在一起。</p>\n<p>但是，当你使用浏览器不能解析的非原生模块系统时，比如 CommonJS，AMD。你需要一种特殊的工具来把你的代码转换成浏览器可以解析的。这就是为什么 <em>Browserify</em>，<em>RequireJS</em>，<em>Webpack</em>，和其他「module bundlers」又或者「module loaders」会出现。</p>\n<p>为了 bundling 或者 loading 你的代码，module bundlers 提供了好多额外的 feature。比如当你修改代码时自动重编译，还有提供调试时所需要的 source maps。</p>\n<p>现在让我们来看看 module bundling 的几种方法:</p>\n<h3>Bundling CommonJS</h3>\n<p>从 Part1 可知，CommonJS 是同步加载 module 的，这是很好的除了对浏览器不适用之外。我提到过有解决方法——其中一种就是使用 <em>Browserify</em> 。Browserify 可以给浏览器编译 CommonJS 的 module。</p>\n<p>举个例子，我们有一个 <code>main.js</code> 文件，他 <em>import</em> 了一个可以计算数组平均值的 module:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myDependency = <span class=\"built_in\">require</span>(‘myDependency’);</div><div class=\"line\"><span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">91</span>];</div><div class=\"line\"><span class=\"keyword\">var</span> myAverageGrade = myDependency.average(myGrades);</div></pre></td></tr></table></figure>\n<p>在这个例子中，我们有一个依赖(<code>myDependency</code>)。使用下面的命令，<em>Browserify</em> 会递归地把<code>main.js</code>前面所有需要的module打包到一个单独的文件里(<code>bundle.js</code>)：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">browserify main.js -o bundle.js</div></pre></td></tr></table></figure>\n<p><em>Browserify</em> 的实现方法：为了遍历你整个项目的依赖，他会把每个 <code>require</code> 解析成 <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" target=\"_blank\" rel=\"external\">AST</a>。当他计算出你项目的依赖关系时，他就会按照正确的顺序把他们都打包在一个单独的文件里面。因此，你只需要把一个单独的，带上<code>bundle.js</code>的<code>&lt;script&gt;</code>标签放在你的 HTML 文件里面。这样一来，只要一个 HTTP 请求，就可以加载所有的modules。豪爽~</p>\n<p>相似地，如果你有多个文件且有多个依赖，你只需要简单地告诉 <em>Browserify</em> 你的 <code>entry file</code>，然后坐下，<em>Browserify</em> 就会开始施魔法。</p>\n<p>最后：准备好你打包好的文件，然后使用像 <em>Minify-JS</em> 这样的工具来压缩的你的代码。</p>\n<h3>Bundling AMD</h3>\n<p>如果你使用AMD，也许你会使用一个像<code>RequireJS</code>或者<code>Curl</code>这样的AMD加载器。一个module loader(vs. a bundler)会动态地加载module，当你程序需要的时候。</p>\n<p>提醒一下，AMD与CommonJS不同的地方之一是，前者是动态加载模块的。也就是说，有了AMD，你实际上不需要<em>build step</em>(打包你所有的module到一个单独文件)，因为你是动态加载module——也就是只有当你需要module的时候才去下载文件，而不是当用户第一次浏览的时候，就把所有的module都下载。</p>\n<p>但在实际生产中，用户每次行为就需要请求下载对应的module是没有意义的。因此很多web开发者为了额外的性能，都会使用工具去打包和压缩他们的AMD modules，比如<em>RequireJS optimizer</em>，<em>r.js</em>。</p>\n<p>总的来说，AMD和CommonJS关于bundling的区别是：前者可以不需要build step。除非，你想<em>push the code live</em>，这时你可以使用像<code>r.js</code>这样的优化器。</p>\n<p>更多关于CommonJS和AMD的讨论，请查看这篇文章<a href=\"http://tomdale.net/2012/01/amd-is-not-the-answer/\" target=\"_blank\" rel=\"external\">Tom Dale’s blog</a> <img class=\"emoji\" draggable=\"false\" alt=\"😃\" src=\"https://twemoji.maxcdn.com/2/72x72/1f603.png\"></p>\n<h3>Webpack</h3>\n<p>就目前的bundlers来说，<em>Webpack</em>是锋芒初现的。他可以识别任意一种模块系统，比如CommonJS，AMD或者ES6。</p>\n<p>你也许会这样想到：既然我们已经有了Browserify和RequireJS这样的工具，为什么还需要Webpack。其实，Webpack提供了很有用的feature像<strong>code splitting</strong>—把你的代码拆分成动态加载的「chuncks」。</p>\n<p>比如说，如果你的web应用有一块代码是在特定情况下才加载的，那么把所有的代码打包在一个单独的很大的文件里面就不是很适合了。在这种情况下，你可以使用<em>code splitting</em>提取代码到按需加载的<em>chunks</em>里面，这样就避免了用户首次访问时需要加载体积很大的<code>bundle.js</code>。</p>\n<p><em>Code splitting</em>是Webpack提供的feature之一。网上有很多讨论Webpack和Browserify的文章，不妨看下面的链接：</p>\n<ul>\n<li><a href=\"https://gist.github.com/substack/68f8d502be42d5cd4942\" target=\"_blank\" rel=\"external\">https://gist.github.com/substack/68f8d502be42d5cd4942</a></li>\n<li><a href=\"http://mattdesl.svbtle.com/browserify-vs-webpack\" target=\"_blank\" rel=\"external\">http://mattdesl.svbtle.com/browserify-vs-webpack</a></li>\n<li><a href=\"http://blog.namangoel.com/browserify-vs-webpack-js-drama\" target=\"_blank\" rel=\"external\">http://blog.namangoel.com/browserify-vs-webpack-js-drama</a></li>\n</ul>\n<h2>ES6 Modules</h2>\n<p>接下来我会讨论ES6 modules，他也许在未来让以上的bundlers的使用变少(等一下你就会明白我在讲什么)。首先，让我们来理解ES6 modules是如何加载的。</p>\n<p>ES6 modules与AMD，CMD最大的不同之处在于，前者设计时考虑到了静态分析(static analysis)。这就意味着，当你<code>import</code> 模块时，这个<code>import</code>动作在编译的时候就完成了。也就是，在执行脚本之前，可以让我们移除掉不需要的<code>exports</code>。移除掉不必要的<code>exports</code>不但可以减少空间，还能减轻浏览器的压力。</p>\n<p>那么问题来了：这个和<em>dead code elimination</em>(如使用UglifyJS去压缩代码)有什么不同？答案是：<strong>看情况</strong>。</p>\n<p>(注意：<em>Dead code elimination</em>其实是移除掉不必要的代码和变量。不妨这样想：他是把你<strong>打包后</strong>的程序的多余的代码和变量移除掉。</p>\n<p>有时候，<em>dead code elimination</em>在ES6 module和UglifyJS中是一样的，但有时候又不是。如果你想了解更多你可以查看在<a href=\"https://github.com/rollup/rollup\" target=\"_blank\" rel=\"external\">Rollup’s wiki</a>的一个很棒的例子。</p>\n<p>ES6不同的地方在于实现dead code elimination的方法，叫<strong>tree shaking</strong>。Tree shaking实际上与dead code elimination的理念是相反的。他只打包了你所必需的代码，而不是把不需要的代码移除掉。让我们来看一下tree shaking的一个例子：</p>\n<p>假设我们有一个<code>util.js</code>文件 ，他有多个函数，我们用ES6的语法来导出他们。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">each</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(collection)) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; collection.length; i++) &#123;</div><div class=\"line\">      iterator(collection[i], i, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> collection) &#123;</div><div class=\"line\">      iterator(collection[key], key, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">filter</span>(<span class=\"params\">collection, test</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> filtered = [];</div><div class=\"line\">  each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (test(item)) &#123;</div><div class=\"line\">      filtered.push(item);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> filtered;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">map</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> mapped = [];</div><div class=\"line\">  each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key, collection</span>) </span>&#123;</div><div class=\"line\">    mapped.push(iterator(value));</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> mapped;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reduce</span>(<span class=\"params\">collection, iterator, accumulator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> startingValueMissing = accumulator === <span class=\"literal\">undefined</span>;</div><div class=\"line\">  each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (startingValueMissing) &#123;</div><div class=\"line\">      accumulator = item;</div><div class=\"line\">      startingValueMissing = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      accumulator = iterator(accumulator, item);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> accumulator;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>接下来，我们假设我们并不知道我们需要<code>util.js</code>的哪一个函数，所以，在<code>main.js</code>中我们这样引入他：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Utils <span class=\"keyword\">from</span> ‘./utils.js’;</div></pre></td></tr></table></figure>\n<p>然后，我们开始使用其中的一个函数：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Utils <span class=\"keyword\">from</span> ‘./utils.js’;</div><div class=\"line\"></div><div class=\"line\">Utils.each([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123; <span class=\"built_in\">console</span>.log(x) &#125;);</div></pre></td></tr></table></figure>\n<p>而，<code>main.js</code>被<em>tree shaking</em>编译之后，是长这样的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">each</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(collection)) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; collection.length; i++) &#123;</div><div class=\"line\">      iterator(collection[i], i, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> collection) &#123;</div><div class=\"line\">      iterator(collection[key], key, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">each([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(x)</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>注意到，只有我们使用的<code>each</code>被引入了，而不是<code>util.js</code>里所有的函数。</p>\n<p>那么，如果我们使用<code>filter</code>函数而不是<code>each</code>的话，我们的<code>main.js</code>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Utils <span class=\"keyword\">from</span> ‘./utils.js’;</div><div class=\"line\">Utils.filter([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123; <span class=\"keyword\">return</span> x === <span class=\"number\">2</span> &#125;);</div></pre></td></tr></table></figure>\n<p>tree shaking 编译后，<code>main.js</code>变成了这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">each</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(collection)) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; collection.length; i++) &#123;</div><div class=\"line\">      iterator(collection[i], i, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> collection) &#123;</div><div class=\"line\">      iterator(collection[key], key, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">filter</span>(<span class=\"params\">collection, test</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> filtered = [];</div><div class=\"line\">  each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (test(item)) &#123;</div><div class=\"line\">      filtered.push(item);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> filtered;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">filter([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> x === <span class=\"number\">2</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>注意到这个时候,<code>each</code>和<code>filter</code>都被引入了，这是因为<code>filter</code>函数是依赖于<code>each</code>的。</p>\n<p>很cool，对不对？</p>\n<p>我建议你通过<em>Rollup.js</em>的 <a href=\"http://rollupjs.org/\" target=\"_blank\" rel=\"external\">live demo and editor</a> ，去玩玩和了解一下tree shaking。</p>\n<h2>构建ES6 modules</h2>\n<p>好的，现在我们知道了ES6 modules的加载很其他module format是不同的，但是我们还没讲怎么构建ES6 modules。</p>\n<p>不幸的是，ES6 modules 还需要额外的工作，因为浏览器还没有实现原生的ES6 module加载。</p>\n<p>下面有两种方法来构建/转换 ES6 modules，使得在浏览器中可以使用。其中，第一种是当前最常见的：</p>\n<ol>\n<li>使用转换器(比如，Babel或者Traceur)，把你ES6代码转换成CommonJS，AMD或者UMD格式的ES5代码。然后把转换好的代码送到一个module bundler里去，比如Browserify或者Webpack，这样就创建了一个或多个打包好的文件。</li>\n<li>使用<a href=\"http://rollupjs.org/\" target=\"_blank\" rel=\"external\">Rollup.js</a>：这种方法和前面的很相似，除了在打包之前会使用ES6 module的静态分析。他利用<strong>tree shaking</strong>把最少的代码量打包。总体来说，Rollup.js比Webpack或者Browserify最大的好处是，当你使用ES6 module时，可以使你的代码的体积更小。需要注意的是，Rollup提供了多种格式来打包你的代码，包括ES6，CommonJS，AMD，CMD，UMD或者IIFE。IIFE和UMD可以适用于你的浏览器，但如果你选择了AMD，CommonJS或者ES6的话，你需要找其他方法把你的代码转成浏览器可以识别的，比如使用Browserify，Webpack，RequireJS等等。</li>\n</ol>\n<h2>Jumping through hoops</h2>\n<p>作为web开发者，我们需要跳过这些繁文缛节。因为把ES6 modules代码转换成浏览器可以解释的ES5不是一件易事。</p>\n<p>问题就是：我们可以直接在浏览器使用ES6 module，且不用弄上面说到的两种方法吗？</p>\n<p>答案是：很快。</p>\n<p>ECMAScript现在已经有解决方案的规范了，叫做<a href=\"https://github.com/ModuleLoader/es6-module-loader\" target=\"_blank\" rel=\"external\">ECMAScript 6 module loader API</a>。简单介绍，他是一种可编程的，基于Promise的API，可以动态加载你的modules，并且cache他们，使得随后的<code>import</code>不需要加载另外一份新版本的module。</p>\n<p>他大概是这样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// myModule.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">myModule</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello, I am a module'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  hello() &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  goodbye() &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'goodbye!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// main.js</span></div><div class=\"line\"></div><div class=\"line\">System.import(‘myModule’).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">myModule</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">new</span> myModule.hello();</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// ‘hello!’</span></div></pre></td></tr></table></figure>\n<p>另外一种方法是，你可以直接在<code>script</code>标签里，直接注明<code>type=module</code>来定义modules。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt; script type = <span class=\"string\">\"module\"</span> &gt;</div><div class=\"line\">  <span class=\"comment\">// loads the 'myModule' export from 'mymodule.js'</span></div><div class=\"line\">  <span class=\"keyword\">import</span> &#123;</div><div class=\"line\">    hello</div><div class=\"line\">  &#125; <span class=\"keyword\">from</span> <span class=\"string\">'mymodule'</span>;</div><div class=\"line\"><span class=\"keyword\">new</span> Hello(); <span class=\"comment\">// 'Hello, I am a module!'</span></div><div class=\"line\">&lt; <span class=\"regexp\">/script&gt;</span></div></pre></td></tr></table></figure>\n<p>如果你还没有看过module loader API的polyfill，我强烈建议你至少去<a href=\"https://github.com/ModuleLoader/es6-module-loader\" target=\"_blank\" rel=\"external\">看一看</a>。</p>\n<p>如果你想要测试一下这种方法的话，你可以试试<a href=\"https://github.com/systemjs/systemjs\" target=\"_blank\" rel=\"external\">SystemJS</a>。他是基于<a href=\"https://github.com/ModuleLoader/es6-module-loader\" target=\"_blank\" rel=\"external\">ES6 Module Loader polyfill</a>创建的。他可以在浏览器和Node环境中，动态地加载任何格式的modules(ES6 modules，AMD，CommonJS以及全局的scripts)。他会跟踪所有已经加载到「module registry」的modules，避免了重新加载已经加载过的modules。值得提醒的是，他也可以自动地转换ES6 modules(如果你开启这个option的话)，还可以从任何一种模块格式中加载任何一种格式的模块。太棒了。</p>\n<h2>既然我们已经有了ES6 modules，还需要bundlers吗？</h2>\n<p>ES6 modules的逐渐流行，产生了一些有趣的问题：</p>\n<h3>HTTP/2会使module bundlers过时吗？</h3>\n<p>对于HTTP/1，我们的每个TCP连接只允许一个请求。这就是为什么加载多个资源需要多个请求。有了HTTP/2，一切都变了。HTTP/2是<em>fully multiplexed</em>，这就意味着多个请求和多个响应可以并行。这样一来，我们可以在一个TCP连接中，进行多个请求。</p>\n<p>既然每个HTTP/2请求的开销已经比HTTP/1小得多，那么长远来看，加载一堆的modules并不会降低很多的性能。于是有些人就认为，module bundling已经不需要了。这其实是有可能的，但是我们还要视情况而定。</p>\n<p>比如说，module bundling提供了HTTP/2没有提供的优点，像移除掉不需要的<code>exports</code>从而减少空间。如果你搭建的网页是每个微小的<code>bit</code>都会影响性能的话，那么bundling就给了你巨大的好处。另一方面，如果你对性能要求不是很高的话，你可以跳过构建过程，从而节省了一些时间。</p>\n<p>总起来说，我们现在离享受HTTP/2带来的好处还很远。我个人猜测build process还会持续一段时间。</p>\n<h3>CommonJS，AMD和UMD还过时吗？</h3>\n<p>一旦ES6变成了标准，那么我们真的还需要非原生的module feature吗？</p>\n<p>我表示怀疑。</p>\n<p>如果只遵循单一的语法去加载和引入module，并且不需要中间步骤，这对于web开发者来说很棒的。但到达这一步还需要多久呢？</p>\n<p>机会是有的，但需要一段时间。</p>\n<p>并且，每个人都可以根据自己的口味去选择，因此「one truthful approach」并不会成为现实。</p>\n<h2>结论</h2>\n<p>当开发者讨论modules和module bundling的时候，我希望这两篇文章可以帮助他们厘清这些术语。如果你有疑问的话，你回头看看<a href=\"https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.y8hs0nsne\" target=\"_blank\" rel=\"external\">part I</a> 。</p>\n<p>同样地，可以在评论中和我讨论，同时随时欢迎你提问题。</p>\n<p>Happy bundling <img class=\"emoji\" draggable=\"false\" alt=\"😃\" src=\"https://twemoji.maxcdn.com/2/72x72/1f603.png\"></p>\n<p><strong>(原文：<a href=\"https://medium.freecodecamp.com/javascript-modules-part-2-module-bundling-5020383cf306#.m5o3ar7dt\" target=\"_blank\" rel=\"external\">JavaScript Modules Part 2: Module Bundling</a>)</strong></p>\n","excerpt":"","more":"<p><strong>(原文：<a href=\"https://medium.freecodecamp.com/javascript-modules-part-2-module-bundling-5020383cf306#.m5o3ar7dt\">JavaScript Modules Part 2: Module Bundling</a>)</strong></p>\n<p>在Part 1，我讲解了什么是 <em>module</em> ，为什么要使用他们，以及合并 module 的各种方法。在Part 2，我会讲解什么是 <em>bundle modules</em> : 为什么要，不同方法的实现，以及 module 在今后web开发的情况。</p>\n<h2>什么是 module bundling?</h2>\n<p>简单来说，<em>module bundling</em> 其实就是把一组 module (以及他们的依赖)，按照正确的顺序，打包(bundle)到一个单独的文件(或者一组文件)里面。但是对于web开发来说，细节才是魔鬼 <img class=\"emoji\" draggable=\"false\" alt=\"😃\" src=\"https://twemoji.maxcdn.com/2/72x72/1f603.png\"></p>\n<h2>为什么把所有的 module 都打包在一起？</h2>\n<p>当你把程序分成多个 module 的时候，你很可能会把他们组织在不同的文件和文件夹中。偶尔你会有第三方 module ，比如<code>Underscore</code>或者<code>React</code>。</p>\n<p>那么，当用户浏览你的页面时，这些文件都会通过 <code>&lt;script&gt;</code> 标签引入到你的 HTML 文件。每个文件就需要一个 <code>&lt;script&gt;</code> 标签，就意味着，浏览器需要单独地加载每个文件，一个…接着…一个。</p>\n<p>…然而这对于页面的加载时间是很不友好的。</p>\n<p>为了解决这个问题，我们 <em>bundle</em>，或者 <em>concatenate</em> 所有的文件到一个大文件里面(或者一组文件，根据情况)，这样就可以减少请求的数量。这个就是你听别的开发人员所说的「build step」或者「build process」。</p>\n<p>另一个加速 bundling 操作的的方法是「minify」(压缩)代码。<em>minification</em> 就是从源代码中去除不必要的字符(比如，空格，注释，换行符等)。这样一来，不仅减少了代码的大小，而且不影响其本身的功能。</p>\n<p>更少的数据就意味着浏览器处理的时间更少，因为减少了下载文件的时间。如果你曾经见过文件名有后缀<code>min</code>，比如<code>underscore.min.js</code>，其实就是相对于完整版的一个不具可读性，压缩过的版本。</p>\n<p>像 <em>gulp</em> 或者 <em>Grunt</em> 这样的 Task runners，对开发者来说，是很容易进行<code>concatenations</code>和<code>minification</code>。这样一来，保证了代码对开发者的可读性的同时，也保证了对浏览器的优化。</p>\n<h2>实现bundle module的各种方法</h2>\n<p>当你使用标准的 module pattern (前面讲解的)的其中一种来定义 module 的时候，<em>concatenating</em> 和 <em>minifying</em> 你的文件是极好的，你所需要做的就是把你的一堆JavaScript代码打包在一起。</p>\n<p>但是，当你使用浏览器不能解析的非原生模块系统时，比如 CommonJS，AMD。你需要一种特殊的工具来把你的代码转换成浏览器可以解析的。这就是为什么 <em>Browserify</em>，<em>RequireJS</em>，<em>Webpack</em>，和其他「module bundlers」又或者「module loaders」会出现。</p>\n<p>为了 bundling 或者 loading 你的代码，module bundlers 提供了好多额外的 feature。比如当你修改代码时自动重编译，还有提供调试时所需要的 source maps。</p>\n<p>现在让我们来看看 module bundling 的几种方法:</p>\n<h3>Bundling CommonJS</h3>\n<p>从 Part1 可知，CommonJS 是同步加载 module 的，这是很好的除了对浏览器不适用之外。我提到过有解决方法——其中一种就是使用 <em>Browserify</em> 。Browserify 可以给浏览器编译 CommonJS 的 module。</p>\n<p>举个例子，我们有一个 <code>main.js</code> 文件，他 <em>import</em> 了一个可以计算数组平均值的 module:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myDependency = <span class=\"built_in\">require</span>(‘myDependency’);</div><div class=\"line\"><span class=\"keyword\">var</span> myGrades = [<span class=\"number\">93</span>, <span class=\"number\">95</span>, <span class=\"number\">88</span>, <span class=\"number\">0</span>, <span class=\"number\">91</span>];</div><div class=\"line\"><span class=\"keyword\">var</span> myAverageGrade = myDependency.average(myGrades);</div></pre></td></tr></table></figure>\n<p>在这个例子中，我们有一个依赖(<code>myDependency</code>)。使用下面的命令，<em>Browserify</em> 会递归地把<code>main.js</code>前面所有需要的module打包到一个单独的文件里(<code>bundle.js</code>)：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">browserify main.js -o bundle.js</div></pre></td></tr></table></figure>\n<p><em>Browserify</em> 的实现方法：为了遍历你整个项目的依赖，他会把每个 <code>require</code> 解析成 <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\">AST</a>。当他计算出你项目的依赖关系时，他就会按照正确的顺序把他们都打包在一个单独的文件里面。因此，你只需要把一个单独的，带上<code>bundle.js</code>的<code>&lt;script&gt;</code>标签放在你的 HTML 文件里面。这样一来，只要一个 HTTP 请求，就可以加载所有的modules。豪爽~</p>\n<p>相似地，如果你有多个文件且有多个依赖，你只需要简单地告诉 <em>Browserify</em> 你的 <code>entry file</code>，然后坐下，<em>Browserify</em> 就会开始施魔法。</p>\n<p>最后：准备好你打包好的文件，然后使用像 <em>Minify-JS</em> 这样的工具来压缩的你的代码。</p>\n<h3>Bundling AMD</h3>\n<p>如果你使用AMD，也许你会使用一个像<code>RequireJS</code>或者<code>Curl</code>这样的AMD加载器。一个module loader(vs. a bundler)会动态地加载module，当你程序需要的时候。</p>\n<p>提醒一下，AMD与CommonJS不同的地方之一是，前者是动态加载模块的。也就是说，有了AMD，你实际上不需要<em>build step</em>(打包你所有的module到一个单独文件)，因为你是动态加载module——也就是只有当你需要module的时候才去下载文件，而不是当用户第一次浏览的时候，就把所有的module都下载。</p>\n<p>但在实际生产中，用户每次行为就需要请求下载对应的module是没有意义的。因此很多web开发者为了额外的性能，都会使用工具去打包和压缩他们的AMD modules，比如<em>RequireJS optimizer</em>，<em>r.js</em>。</p>\n<p>总的来说，AMD和CommonJS关于bundling的区别是：前者可以不需要build step。除非，你想<em>push the code live</em>，这时你可以使用像<code>r.js</code>这样的优化器。</p>\n<p>更多关于CommonJS和AMD的讨论，请查看这篇文章<a href=\"http://tomdale.net/2012/01/amd-is-not-the-answer/\">Tom Dale’s blog</a> <img class=\"emoji\" draggable=\"false\" alt=\"😃\" src=\"https://twemoji.maxcdn.com/2/72x72/1f603.png\"></p>\n<h3>Webpack</h3>\n<p>就目前的bundlers来说，<em>Webpack</em>是锋芒初现的。他可以识别任意一种模块系统，比如CommonJS，AMD或者ES6。</p>\n<p>你也许会这样想到：既然我们已经有了Browserify和RequireJS这样的工具，为什么还需要Webpack。其实，Webpack提供了很有用的feature像<strong>code splitting</strong>—把你的代码拆分成动态加载的「chuncks」。</p>\n<p>比如说，如果你的web应用有一块代码是在特定情况下才加载的，那么把所有的代码打包在一个单独的很大的文件里面就不是很适合了。在这种情况下，你可以使用<em>code splitting</em>提取代码到按需加载的<em>chunks</em>里面，这样就避免了用户首次访问时需要加载体积很大的<code>bundle.js</code>。</p>\n<p><em>Code splitting</em>是Webpack提供的feature之一。网上有很多讨论Webpack和Browserify的文章，不妨看下面的链接：</p>\n<ul>\n<li><a href=\"https://gist.github.com/substack/68f8d502be42d5cd4942\">https://gist.github.com/substack/68f8d502be42d5cd4942</a></li>\n<li><a href=\"http://mattdesl.svbtle.com/browserify-vs-webpack\">http://mattdesl.svbtle.com/browserify-vs-webpack</a></li>\n<li><a href=\"http://blog.namangoel.com/browserify-vs-webpack-js-drama\">http://blog.namangoel.com/browserify-vs-webpack-js-drama</a></li>\n</ul>\n<h2>ES6 Modules</h2>\n<p>接下来我会讨论ES6 modules，他也许在未来让以上的bundlers的使用变少(等一下你就会明白我在讲什么)。首先，让我们来理解ES6 modules是如何加载的。</p>\n<p>ES6 modules与AMD，CMD最大的不同之处在于，前者设计时考虑到了静态分析(static analysis)。这就意味着，当你<code>import</code> 模块时，这个<code>import</code>动作在编译的时候就完成了。也就是，在执行脚本之前，可以让我们移除掉不需要的<code>exports</code>。移除掉不必要的<code>exports</code>不但可以减少空间，还能减轻浏览器的压力。</p>\n<p>那么问题来了：这个和<em>dead code elimination</em>(如使用UglifyJS去压缩代码)有什么不同？答案是：<strong>看情况</strong>。</p>\n<p>(注意：<em>Dead code elimination</em>其实是移除掉不必要的代码和变量。不妨这样想：他是把你<strong>打包后</strong>的程序的多余的代码和变量移除掉。</p>\n<p>有时候，<em>dead code elimination</em>在ES6 module和UglifyJS中是一样的，但有时候又不是。如果你想了解更多你可以查看在<a href=\"https://github.com/rollup/rollup\">Rollup’s wiki</a>的一个很棒的例子。</p>\n<p>ES6不同的地方在于实现dead code elimination的方法，叫<strong>tree shaking</strong>。Tree shaking实际上与dead code elimination的理念是相反的。他只打包了你所必需的代码，而不是把不需要的代码移除掉。让我们来看一下tree shaking的一个例子：</p>\n<p>假设我们有一个<code>util.js</code>文件 ，他有多个函数，我们用ES6的语法来导出他们。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">each</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(collection)) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; collection.length; i++) &#123;</div><div class=\"line\">      iterator(collection[i], i, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> collection) &#123;</div><div class=\"line\">      iterator(collection[key], key, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">filter</span>(<span class=\"params\">collection, test</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> filtered = [];</div><div class=\"line\">  each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (test(item)) &#123;</div><div class=\"line\">      filtered.push(item);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> filtered;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">map</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> mapped = [];</div><div class=\"line\">  each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key, collection</span>) </span>&#123;</div><div class=\"line\">    mapped.push(iterator(value));</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> mapped;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reduce</span>(<span class=\"params\">collection, iterator, accumulator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> startingValueMissing = accumulator === <span class=\"literal\">undefined</span>;</div><div class=\"line\">  each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (startingValueMissing) &#123;</div><div class=\"line\">      accumulator = item;</div><div class=\"line\">      startingValueMissing = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      accumulator = iterator(accumulator, item);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> accumulator;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>接下来，我们假设我们并不知道我们需要<code>util.js</code>的哪一个函数，所以，在<code>main.js</code>中我们这样引入他：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Utils <span class=\"keyword\">from</span> ‘./utils.js’;</div></pre></td></tr></table></figure>\n<p>然后，我们开始使用其中的一个函数：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Utils <span class=\"keyword\">from</span> ‘./utils.js’;</div><div class=\"line\"></div><div class=\"line\">Utils.each([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123; <span class=\"built_in\">console</span>.log(x) &#125;);</div></pre></td></tr></table></figure>\n<p>而，<code>main.js</code>被<em>tree shaking</em>编译之后，是长这样的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">each</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(collection)) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; collection.length; i++) &#123;</div><div class=\"line\">      iterator(collection[i], i, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> collection) &#123;</div><div class=\"line\">      iterator(collection[key], key, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">each([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(x)</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>注意到，只有我们使用的<code>each</code>被引入了，而不是<code>util.js</code>里所有的函数。</p>\n<p>那么，如果我们使用<code>filter</code>函数而不是<code>each</code>的话，我们的<code>main.js</code>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Utils <span class=\"keyword\">from</span> ‘./utils.js’;</div><div class=\"line\">Utils.filter([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123; <span class=\"keyword\">return</span> x === <span class=\"number\">2</span> &#125;);</div></pre></td></tr></table></figure>\n<p>tree shaking 编译后，<code>main.js</code>变成了这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">each</span>(<span class=\"params\">collection, iterator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(collection)) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; collection.length; i++) &#123;</div><div class=\"line\">      iterator(collection[i], i, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> collection) &#123;</div><div class=\"line\">      iterator(collection[key], key, collection);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">filter</span>(<span class=\"params\">collection, test</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> filtered = [];</div><div class=\"line\">  each(collection, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (test(item)) &#123;</div><div class=\"line\">      filtered.push(item);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> filtered;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">filter([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> x === <span class=\"number\">2</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>注意到这个时候,<code>each</code>和<code>filter</code>都被引入了，这是因为<code>filter</code>函数是依赖于<code>each</code>的。</p>\n<p>很cool，对不对？</p>\n<p>我建议你通过<em>Rollup.js</em>的 <a href=\"http://rollupjs.org/\">live demo and editor</a> ，去玩玩和了解一下tree shaking。</p>\n<h2>构建ES6 modules</h2>\n<p>好的，现在我们知道了ES6 modules的加载很其他module format是不同的，但是我们还没讲怎么构建ES6 modules。</p>\n<p>不幸的是，ES6 modules 还需要额外的工作，因为浏览器还没有实现原生的ES6 module加载。</p>\n<p>下面有两种方法来构建/转换 ES6 modules，使得在浏览器中可以使用。其中，第一种是当前最常见的：</p>\n<ol>\n<li>使用转换器(比如，Babel或者Traceur)，把你ES6代码转换成CommonJS，AMD或者UMD格式的ES5代码。然后把转换好的代码送到一个module bundler里去，比如Browserify或者Webpack，这样就创建了一个或多个打包好的文件。</li>\n<li>使用<a href=\"http://rollupjs.org/\">Rollup.js</a>：这种方法和前面的很相似，除了在打包之前会使用ES6 module的静态分析。他利用<strong>tree shaking</strong>把最少的代码量打包。总体来说，Rollup.js比Webpack或者Browserify最大的好处是，当你使用ES6 module时，可以使你的代码的体积更小。需要注意的是，Rollup提供了多种格式来打包你的代码，包括ES6，CommonJS，AMD，CMD，UMD或者IIFE。IIFE和UMD可以适用于你的浏览器，但如果你选择了AMD，CommonJS或者ES6的话，你需要找其他方法把你的代码转成浏览器可以识别的，比如使用Browserify，Webpack，RequireJS等等。</li>\n</ol>\n<h2>Jumping through hoops</h2>\n<p>作为web开发者，我们需要跳过这些繁文缛节。因为把ES6 modules代码转换成浏览器可以解释的ES5不是一件易事。</p>\n<p>问题就是：我们可以直接在浏览器使用ES6 module，且不用弄上面说到的两种方法吗？</p>\n<p>答案是：很快。</p>\n<p>ECMAScript现在已经有解决方案的规范了，叫做<a href=\"https://github.com/ModuleLoader/es6-module-loader\">ECMAScript 6 module loader API</a>。简单介绍，他是一种可编程的，基于Promise的API，可以动态加载你的modules，并且cache他们，使得随后的<code>import</code>不需要加载另外一份新版本的module。</p>\n<p>他大概是这样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// myModule.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">myModule</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello, I am a module'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  hello() &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  goodbye() &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'goodbye!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// main.js</span></div><div class=\"line\"></div><div class=\"line\">System.import(‘myModule’).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">myModule</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">new</span> myModule.hello();</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// ‘hello!’</span></div></pre></td></tr></table></figure>\n<p>另外一种方法是，你可以直接在<code>script</code>标签里，直接注明<code>type=module</code>来定义modules。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt; script type = <span class=\"string\">\"module\"</span> &gt;</div><div class=\"line\">  <span class=\"comment\">// loads the 'myModule' export from 'mymodule.js'</span></div><div class=\"line\">  <span class=\"keyword\">import</span> &#123;</div><div class=\"line\">    hello</div><div class=\"line\">  &#125; <span class=\"keyword\">from</span> <span class=\"string\">'mymodule'</span>;</div><div class=\"line\"><span class=\"keyword\">new</span> Hello(); <span class=\"comment\">// 'Hello, I am a module!'</span></div><div class=\"line\">&lt; <span class=\"regexp\">/script&gt;</span></div></pre></td></tr></table></figure>\n<p>如果你还没有看过module loader API的polyfill，我强烈建议你至少去<a href=\"https://github.com/ModuleLoader/es6-module-loader\">看一看</a>。</p>\n<p>如果你想要测试一下这种方法的话，你可以试试<a href=\"https://github.com/systemjs/systemjs\">SystemJS</a>。他是基于<a href=\"https://github.com/ModuleLoader/es6-module-loader\">ES6 Module Loader polyfill</a>创建的。他可以在浏览器和Node环境中，动态地加载任何格式的modules(ES6 modules，AMD，CommonJS以及全局的scripts)。他会跟踪所有已经加载到「module registry」的modules，避免了重新加载已经加载过的modules。值得提醒的是，他也可以自动地转换ES6 modules(如果你开启这个option的话)，还可以从任何一种模块格式中加载任何一种格式的模块。太棒了。</p>\n<h2>既然我们已经有了ES6 modules，还需要bundlers吗？</h2>\n<p>ES6 modules的逐渐流行，产生了一些有趣的问题：</p>\n<h3>HTTP/2会使module bundlers过时吗？</h3>\n<p>对于HTTP/1，我们的每个TCP连接只允许一个请求。这就是为什么加载多个资源需要多个请求。有了HTTP/2，一切都变了。HTTP/2是<em>fully multiplexed</em>，这就意味着多个请求和多个响应可以并行。这样一来，我们可以在一个TCP连接中，进行多个请求。</p>\n<p>既然每个HTTP/2请求的开销已经比HTTP/1小得多，那么长远来看，加载一堆的modules并不会降低很多的性能。于是有些人就认为，module bundling已经不需要了。这其实是有可能的，但是我们还要视情况而定。</p>\n<p>比如说，module bundling提供了HTTP/2没有提供的优点，像移除掉不需要的<code>exports</code>从而减少空间。如果你搭建的网页是每个微小的<code>bit</code>都会影响性能的话，那么bundling就给了你巨大的好处。另一方面，如果你对性能要求不是很高的话，你可以跳过构建过程，从而节省了一些时间。</p>\n<p>总起来说，我们现在离享受HTTP/2带来的好处还很远。我个人猜测build process还会持续一段时间。</p>\n<h3>CommonJS，AMD和UMD还过时吗？</h3>\n<p>一旦ES6变成了标准，那么我们真的还需要非原生的module feature吗？</p>\n<p>我表示怀疑。</p>\n<p>如果只遵循单一的语法去加载和引入module，并且不需要中间步骤，这对于web开发者来说很棒的。但到达这一步还需要多久呢？</p>\n<p>机会是有的，但需要一段时间。</p>\n<p>并且，每个人都可以根据自己的口味去选择，因此「one truthful approach」并不会成为现实。</p>\n<h2>结论</h2>\n<p>当开发者讨论modules和module bundling的时候，我希望这两篇文章可以帮助他们厘清这些术语。如果你有疑问的话，你回头看看<a href=\"https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#.y8hs0nsne\">part I</a> 。</p>\n<p>同样地，可以在评论中和我讨论，同时随时欢迎你提问题。</p>\n<p>Happy bundling <img class=\"emoji\" draggable=\"false\" alt=\"😃\" src=\"https://twemoji.maxcdn.com/2/72x72/1f603.png\"></p>\n<p><strong>(原文：<a href=\"https://medium.freecodecamp.com/javascript-modules-part-2-module-bundling-5020383cf306#.m5o3ar7dt\">JavaScript Modules Part 2: Module Bundling</a>)</strong></p>\n"},{"title":"「译」Learning React Without Using React Part 1","author":"Drake Leung","date":"2016-03-20T05:05:34.000Z","foreword":"用 React 的组件化，单向数据流的思路，来改进一个 jQuery 实现的 todo。","_content":"\n*原文链接：[Learning React Without Using React Part 1](https://medium.com/javascript-inside/learn-the-concepts-part-1-418952d968cb#.femmquo5d)*\n\n当我们谈起 React 的时候总是有很多疑惑。下面简单地介绍了 React 以及他的一些底层原理。\n\n当你完成 Part1 和 Part2 之后，你会学到什么呢？你也许就会知道你为什么需要 React 以及 Redux 类似的 state container （状态管理器）。\n\n然而，**你并不需要学习**: JSX，ES6/ES*，Webpack，Hot Reloading，也不需要理解 Virtual DOM，甚至不需要 React 本身。\n\n那么，我们首先要做的是：\n\n阅读 [Jquery 实现的 TodoMVC](https://github.com/tastejs/todomvc/blob/gh-pages/examples/jquery/js/app.js) 的代码。\n\n也许你会注意到有一个叫 `render` 的方法，他会在某个事件触发或者数据更新的时候被调用。现在，我们从头来实现一个例子：当 `input` 的值改变时，调用 `render` 函数，并且更新 DOM 元素。（[点击这里可查看完整的代码](http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview)）\n\n```javascript\nvar state = {value: null}\n\n$('#input').on('keyup', function () {\n  state.value = $(this).val().trim()\n  render()\n})\n\nfunction render () {\n  $('#output').html(state.value)\n}\n\nrender()\n```\n\n我们使用一个全局变量 `state` 来同步所有的东西。也就是说，当 *input* 的值改变时会更新两样东西：\n\n1. 更新整个应用的 `state`\n2. 更新 DOM（根据应用当前的 `state` 来调用 `render` 函数）\n\n先记住这些，我们等一下就会返回来。\n\n现在，我们有了一个新想法：\n\n```javascript\nfunction output(text) {\n  return '<div>' + text + '</div>'\n}\n```\n\n显然，调用 `output(foo)` 就会返回 `'<div>foo</div>'`。\n\n那么接下来：\n\n```javascript\nfunction h2 (text) {\n  return '<h2>' + text + '</h2>'\n}\n\nfunction div (text) {\n  return '<div>' + text + '</div>'\n}\n\nfunction header (text) {\n  return div(h2(text))\n}\n\nconsole.log(header('foo') === '<div><h2>foo</h2></div>') // true\n```\n\n上面的函数都是基于一个 *text(input)* 然后返回一个 *string(text)* 。调用 `header` 的时候传入相同的参数（*input*），都会得到相同的字符串（*output*）。如果你在想思考 React 中的 **stateless functions** 的话，那么这个其实就是一个简化版。只是 Stateless functions 会返回一个 React Element 而不是一个简单的 string ，但是思路是一样的。\n\n既然这样，我们就把这个想法应用到我们之前的例子中。我们添加了一个 `button`，用来添加 todo item 。\n\n```javascript\nvar state = {items: [], id: 0}\n\n$('#add').on('click', function (e) {\n  var value = $('#input').val().trim()\n  $('#input').val('')\n\n  state.items.push({\n    id: state.id++,\n    text: value,\n    completed: false\n  })\n\n  render()\n})\n\n$('#list').on('click', function () {\n  var toggleId = parseInt($(this).attr('id'))\n\n  state.items.forEach(function (el) {\n    el.id === toggleId && (el.completed = !el.completed)\n  })\n\n  render()\n})\n\nfunction render () {\n  var items = state.items.map(function (item) {\n    var completed = item.completed ? 'completed' : ''\n\n    return '<li class=\"item + ' + completed + '\" id=\"' + item.id + '\">(' +\n      item.id + ') ' + item.text + '</li>'\n  }).join('')\n\n  var html = '<ul>' + items = '</ul>'\n\n  $('#list').html(html)\n}\n\nrender()\n```\n\n效果图如下。我们的应用现在可以显示所有的 todo，也可以改变每个 todo 的状态（进行中或者完成）。\n\n![simple todo lsit](https://cdn-images-1.medium.com/max/800/1*ouOYh6bI3q_8y1XLCoVD-A.png)\n\n在上面，我们定义了两个 `click` 事件，当他们触发时就会更新我们的 `state` 以及调用 `render` 函数。而 `render` 函数会创建一个 todo list 。 `state` 作为中间媒介，简化了事件和 DOM 元素之间的交互，而不是** 通过事件来直接操作 DOM ** （不需要定义每个 DOM 元素和每个事件以及他们之间的关系）。当某个 *action*（如 click 事件） 触发之后，`state` 就会更新，接着调用 `render` 函数，最后我们的应用就会更新。这样一来，就简化了好多复杂的交互。\n\n上面的例子是很好的，我们不妨再来重构他。\n\n可以看到，`render` 函数有一点乱。我们不妨创建一个函数，他接收一个参数（input），然后基于这个参数返回一个字符串（output）。\n\n```javascript\nfunction ItemRow (props) {\n  var className = props.completed ? ' item completed' : 'item'\n  return '<li className=\"' + className +' \">' + props.text + '</li>'\n}\n```\n\n```javascript\nfunction ItemsList (props) {\n  return '<ul>' + props.items.map(ItemRow).join('') + '</ul>'\n}\n```\n\n看，现在我们的 `render` 函数优美多了：\n\n```javascript\nfunction render () {\n  $('#list').html(ItemsList({\n    items: state.items\n  }))\n}\n```\n\n如果 `render` 函数并不知道 `state` 是什么，而是期望一个 *input* 作为参数呢？好吧，现在我们可以重构一下 `render` 函数，他期望接收一个 `props` 对象（这其实就是 React Component 所期望的。\n\n```javascript\nfunction render (props) {\n  $('#list').html(ItemsList({\n    items: props.items\n  }))\n}\n```\n\n现在，`render` 函数并不依赖外部的状态（state），这使得我们在调用 `render` 时可以随便传入一个 *input* ，也就意味着我们的应用重新渲染时，相同的 *input* 会有相同的 *output* 。需要注意的是，DOM 操作其实是一个 side effect，但是现在我们暂时忽略他。\n\n把 `state` 从 `render` 函数中分离出来，可以使得我们很容易实现 `Undo/Redo`。这也意味着每当 * 当前的 state * 改变时，我们能够创建一个 history ，保存这个当前的 state 。\n\n另外一个优化就是传一个 root node 作为参数，而不是写死在 `render` 函数里面：\n\n```javascript\nfunction render (props, node) {\n  node.html(ItemsList({\n    items: props.items\n  }))\n}\n```\n\n因此，我们可以这样调用 `render` 函数：\n\n```javascript\nrender(state, $('#list'))\n```\n\n我们会很容易想到：当 `state` 改变的时候，能不能自动地更新应用？也就是，不用手动地调用 `render` 函数。\n\n现在，我们来创建一个 *store* ，他的作用是当 `state` 改变之后，就立马调用 `render` 函数。下面的实现虽然简单，但也是一个 advanced state container 的雏形。\n\n```javascript\nfunction createStore (initialState) {\n  var _state = initialState || {},\n    _listeners = []\n\n  function updateListeners (state) {\n    _listeners.forEach(function (listener) {\n      listener.cb(state)\n    })\n  }\n\n  return {\n    setState: function (state) {\n      _state = state\n      updateListeners(state)\n    },\n\n    getState: function () {\n      return _state\n    },\n\n    onUpdate: function (name, cb) {\n      _listeners.push({name: name, cb: cb})\n    }\n  }\n}\n```\n\n现在，我们更新 `state` 只需要简单地调用 `setState` 方法。只要 `state` 一改变，我们的 `render` 函数就会被调用：\n\n```javascript\nvar store = createStore(store)\n\nstore.onUpdate('rootRender', function (state) {\n  render(state, $('#list'))\n})\n```\n\n[点击这里可查看完整的代码](http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview)\n\n** 现在我们学会了什么？ ** 我们知道了简单的单向数据流（one-way data flow）的原则。我们给 `render` 函数传了一个 `state` 参数，然后 `state` 就会像流水一样，流到 `render` 函数的每个层次中。比如，`ItemRow` 函数需要 `ItemsList` 给他传进正确的参数。\n\n我们已经创建了多个组件（component），并且我们把这些组件组合（compose）在一起。回想一下前面的 `header` 例子，我们把 `div` 和 `h2` 函数组合成了一个 `header` 函数。并且，这些函数都是 *pure function* ，这使得所有更新都是可预测的。\n\n并且，我们使用了 *store* 来管理我们的 `state`。\n\n而，React 会用更好更优美的方法来实现上面这些东西。组件（组合），使用 Virtual DOM 优化渲染，单向数据流等等。\n\n> …we can focus on examining React’s true strengths: composition, unidirectional data flow, freedom from DSLs, explicit mutation and static mental model.\n\nFrom [Dan Abramov - you're missing the point of react](https://medium.com/@dan_abramov/youre-missing-the-point-of-react-a20e34a51e1a)\n\n我们可以优化的东西还有很多，比如继续优化 state container，重构我们的 listeners，实现 undo/redo，以及更多更好的 feature。**这些东西我们都会在 Part 2 呈现**。\n\n*原文链接：[Learning React Without Using React Part 1](https://medium.com/javascript-inside/learn-the-concepts-part-1-418952d968cb#.femmquo5d)*\n","source":"_posts/Learning-React-Without-Using-React-Part-1.md","raw":"---\ntitle: 「译」Learning React Without Using React Part 1\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-03-20 13:05:34\nforeword: 用 React 的组件化，单向数据流的思路，来改进一个 jQuery 实现的 todo。\n---\n\n*原文链接：[Learning React Without Using React Part 1](https://medium.com/javascript-inside/learn-the-concepts-part-1-418952d968cb#.femmquo5d)*\n\n当我们谈起 React 的时候总是有很多疑惑。下面简单地介绍了 React 以及他的一些底层原理。\n\n当你完成 Part1 和 Part2 之后，你会学到什么呢？你也许就会知道你为什么需要 React 以及 Redux 类似的 state container （状态管理器）。\n\n然而，**你并不需要学习**: JSX，ES6/ES*，Webpack，Hot Reloading，也不需要理解 Virtual DOM，甚至不需要 React 本身。\n\n那么，我们首先要做的是：\n\n阅读 [Jquery 实现的 TodoMVC](https://github.com/tastejs/todomvc/blob/gh-pages/examples/jquery/js/app.js) 的代码。\n\n也许你会注意到有一个叫 `render` 的方法，他会在某个事件触发或者数据更新的时候被调用。现在，我们从头来实现一个例子：当 `input` 的值改变时，调用 `render` 函数，并且更新 DOM 元素。（[点击这里可查看完整的代码](http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview)）\n\n```javascript\nvar state = {value: null}\n\n$('#input').on('keyup', function () {\n  state.value = $(this).val().trim()\n  render()\n})\n\nfunction render () {\n  $('#output').html(state.value)\n}\n\nrender()\n```\n\n我们使用一个全局变量 `state` 来同步所有的东西。也就是说，当 *input* 的值改变时会更新两样东西：\n\n1. 更新整个应用的 `state`\n2. 更新 DOM（根据应用当前的 `state` 来调用 `render` 函数）\n\n先记住这些，我们等一下就会返回来。\n\n现在，我们有了一个新想法：\n\n```javascript\nfunction output(text) {\n  return '<div>' + text + '</div>'\n}\n```\n\n显然，调用 `output(foo)` 就会返回 `'<div>foo</div>'`。\n\n那么接下来：\n\n```javascript\nfunction h2 (text) {\n  return '<h2>' + text + '</h2>'\n}\n\nfunction div (text) {\n  return '<div>' + text + '</div>'\n}\n\nfunction header (text) {\n  return div(h2(text))\n}\n\nconsole.log(header('foo') === '<div><h2>foo</h2></div>') // true\n```\n\n上面的函数都是基于一个 *text(input)* 然后返回一个 *string(text)* 。调用 `header` 的时候传入相同的参数（*input*），都会得到相同的字符串（*output*）。如果你在想思考 React 中的 **stateless functions** 的话，那么这个其实就是一个简化版。只是 Stateless functions 会返回一个 React Element 而不是一个简单的 string ，但是思路是一样的。\n\n既然这样，我们就把这个想法应用到我们之前的例子中。我们添加了一个 `button`，用来添加 todo item 。\n\n```javascript\nvar state = {items: [], id: 0}\n\n$('#add').on('click', function (e) {\n  var value = $('#input').val().trim()\n  $('#input').val('')\n\n  state.items.push({\n    id: state.id++,\n    text: value,\n    completed: false\n  })\n\n  render()\n})\n\n$('#list').on('click', function () {\n  var toggleId = parseInt($(this).attr('id'))\n\n  state.items.forEach(function (el) {\n    el.id === toggleId && (el.completed = !el.completed)\n  })\n\n  render()\n})\n\nfunction render () {\n  var items = state.items.map(function (item) {\n    var completed = item.completed ? 'completed' : ''\n\n    return '<li class=\"item + ' + completed + '\" id=\"' + item.id + '\">(' +\n      item.id + ') ' + item.text + '</li>'\n  }).join('')\n\n  var html = '<ul>' + items = '</ul>'\n\n  $('#list').html(html)\n}\n\nrender()\n```\n\n效果图如下。我们的应用现在可以显示所有的 todo，也可以改变每个 todo 的状态（进行中或者完成）。\n\n![simple todo lsit](https://cdn-images-1.medium.com/max/800/1*ouOYh6bI3q_8y1XLCoVD-A.png)\n\n在上面，我们定义了两个 `click` 事件，当他们触发时就会更新我们的 `state` 以及调用 `render` 函数。而 `render` 函数会创建一个 todo list 。 `state` 作为中间媒介，简化了事件和 DOM 元素之间的交互，而不是** 通过事件来直接操作 DOM ** （不需要定义每个 DOM 元素和每个事件以及他们之间的关系）。当某个 *action*（如 click 事件） 触发之后，`state` 就会更新，接着调用 `render` 函数，最后我们的应用就会更新。这样一来，就简化了好多复杂的交互。\n\n上面的例子是很好的，我们不妨再来重构他。\n\n可以看到，`render` 函数有一点乱。我们不妨创建一个函数，他接收一个参数（input），然后基于这个参数返回一个字符串（output）。\n\n```javascript\nfunction ItemRow (props) {\n  var className = props.completed ? ' item completed' : 'item'\n  return '<li className=\"' + className +' \">' + props.text + '</li>'\n}\n```\n\n```javascript\nfunction ItemsList (props) {\n  return '<ul>' + props.items.map(ItemRow).join('') + '</ul>'\n}\n```\n\n看，现在我们的 `render` 函数优美多了：\n\n```javascript\nfunction render () {\n  $('#list').html(ItemsList({\n    items: state.items\n  }))\n}\n```\n\n如果 `render` 函数并不知道 `state` 是什么，而是期望一个 *input* 作为参数呢？好吧，现在我们可以重构一下 `render` 函数，他期望接收一个 `props` 对象（这其实就是 React Component 所期望的。\n\n```javascript\nfunction render (props) {\n  $('#list').html(ItemsList({\n    items: props.items\n  }))\n}\n```\n\n现在，`render` 函数并不依赖外部的状态（state），这使得我们在调用 `render` 时可以随便传入一个 *input* ，也就意味着我们的应用重新渲染时，相同的 *input* 会有相同的 *output* 。需要注意的是，DOM 操作其实是一个 side effect，但是现在我们暂时忽略他。\n\n把 `state` 从 `render` 函数中分离出来，可以使得我们很容易实现 `Undo/Redo`。这也意味着每当 * 当前的 state * 改变时，我们能够创建一个 history ，保存这个当前的 state 。\n\n另外一个优化就是传一个 root node 作为参数，而不是写死在 `render` 函数里面：\n\n```javascript\nfunction render (props, node) {\n  node.html(ItemsList({\n    items: props.items\n  }))\n}\n```\n\n因此，我们可以这样调用 `render` 函数：\n\n```javascript\nrender(state, $('#list'))\n```\n\n我们会很容易想到：当 `state` 改变的时候，能不能自动地更新应用？也就是，不用手动地调用 `render` 函数。\n\n现在，我们来创建一个 *store* ，他的作用是当 `state` 改变之后，就立马调用 `render` 函数。下面的实现虽然简单，但也是一个 advanced state container 的雏形。\n\n```javascript\nfunction createStore (initialState) {\n  var _state = initialState || {},\n    _listeners = []\n\n  function updateListeners (state) {\n    _listeners.forEach(function (listener) {\n      listener.cb(state)\n    })\n  }\n\n  return {\n    setState: function (state) {\n      _state = state\n      updateListeners(state)\n    },\n\n    getState: function () {\n      return _state\n    },\n\n    onUpdate: function (name, cb) {\n      _listeners.push({name: name, cb: cb})\n    }\n  }\n}\n```\n\n现在，我们更新 `state` 只需要简单地调用 `setState` 方法。只要 `state` 一改变，我们的 `render` 函数就会被调用：\n\n```javascript\nvar store = createStore(store)\n\nstore.onUpdate('rootRender', function (state) {\n  render(state, $('#list'))\n})\n```\n\n[点击这里可查看完整的代码](http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview)\n\n** 现在我们学会了什么？ ** 我们知道了简单的单向数据流（one-way data flow）的原则。我们给 `render` 函数传了一个 `state` 参数，然后 `state` 就会像流水一样，流到 `render` 函数的每个层次中。比如，`ItemRow` 函数需要 `ItemsList` 给他传进正确的参数。\n\n我们已经创建了多个组件（component），并且我们把这些组件组合（compose）在一起。回想一下前面的 `header` 例子，我们把 `div` 和 `h2` 函数组合成了一个 `header` 函数。并且，这些函数都是 *pure function* ，这使得所有更新都是可预测的。\n\n并且，我们使用了 *store* 来管理我们的 `state`。\n\n而，React 会用更好更优美的方法来实现上面这些东西。组件（组合），使用 Virtual DOM 优化渲染，单向数据流等等。\n\n> …we can focus on examining React’s true strengths: composition, unidirectional data flow, freedom from DSLs, explicit mutation and static mental model.\n\nFrom [Dan Abramov - you're missing the point of react](https://medium.com/@dan_abramov/youre-missing-the-point-of-react-a20e34a51e1a)\n\n我们可以优化的东西还有很多，比如继续优化 state container，重构我们的 listeners，实现 undo/redo，以及更多更好的 feature。**这些东西我们都会在 Part 2 呈现**。\n\n*原文链接：[Learning React Without Using React Part 1](https://medium.com/javascript-inside/learn-the-concepts-part-1-418952d968cb#.femmquo5d)*\n","slug":"Learning-React-Without-Using-React-Part-1","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742z8000h37rq3miwx9z6","content":"<p><em>原文链接：<a href=\"https://medium.com/javascript-inside/learn-the-concepts-part-1-418952d968cb#.femmquo5d\" target=\"_blank\" rel=\"external\">Learning React Without Using React Part 1</a></em></p>\n<p>当我们谈起 React 的时候总是有很多疑惑。下面简单地介绍了 React 以及他的一些底层原理。</p>\n<p>当你完成 Part1 和 Part2 之后，你会学到什么呢？你也许就会知道你为什么需要 React 以及 Redux 类似的 state container （状态管理器）。</p>\n<p>然而，<strong>你并不需要学习</strong>: JSX，ES6/ES*，Webpack，Hot Reloading，也不需要理解 Virtual DOM，甚至不需要 React 本身。</p>\n<p>那么，我们首先要做的是：</p>\n<p>阅读 <a href=\"https://github.com/tastejs/todomvc/blob/gh-pages/examples/jquery/js/app.js\" target=\"_blank\" rel=\"external\">Jquery 实现的 TodoMVC</a> 的代码。</p>\n<p>也许你会注意到有一个叫 <code>render</code> 的方法，他会在某个事件触发或者数据更新的时候被调用。现在，我们从头来实现一个例子：当 <code>input</code> 的值改变时，调用 <code>render</code> 函数，并且更新 DOM 元素。（<a href=\"http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview\" target=\"_blank\" rel=\"external\">点击这里可查看完整的代码</a>）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> state = &#123;value: <span class=\"literal\">null</span>&#125;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#input'</span>).on(<span class=\"string\">'keyup'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  state.value = $(<span class=\"keyword\">this</span>).val().trim()</div><div class=\"line\">  render()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  $(<span class=\"string\">'#output'</span>).html(state.value)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">render()</div></pre></td></tr></table></figure>\n<p>我们使用一个全局变量 <code>state</code> 来同步所有的东西。也就是说，当 <em>input</em> 的值改变时会更新两样东西：</p>\n<ol>\n<li>更新整个应用的 <code>state</code></li>\n<li>更新 DOM（根据应用当前的 <code>state</code> 来调用 <code>render</code> 函数）</li>\n</ol>\n<p>先记住这些，我们等一下就会返回来。</p>\n<p>现在，我们有了一个新想法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">output</span>(<span class=\"params\">text</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;div&gt;'</span> + text + <span class=\"string\">'&lt;/div&gt;'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>显然，调用 <code>output(foo)</code> 就会返回 <code>'&lt;div&gt;foo&lt;/div&gt;'</code>。</p>\n<p>那么接下来：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">h2</span> (<span class=\"params\">text</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;h2&gt;'</span> + text + <span class=\"string\">'&lt;/h2&gt;'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">div</span> (<span class=\"params\">text</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;div&gt;'</span> + text + <span class=\"string\">'&lt;/div&gt;'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">header</span> (<span class=\"params\">text</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> div(h2(text))</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(header(<span class=\"string\">'foo'</span>) === <span class=\"string\">'&lt;div&gt;&lt;h2&gt;foo&lt;/h2&gt;&lt;/div&gt;'</span>) <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>上面的函数都是基于一个 <em>text(input)</em> 然后返回一个 <em>string(text)</em> 。调用 <code>header</code> 的时候传入相同的参数（<em>input</em>），都会得到相同的字符串（<em>output</em>）。如果你在想思考 React 中的 <strong>stateless functions</strong> 的话，那么这个其实就是一个简化版。只是 Stateless functions 会返回一个 React Element 而不是一个简单的 string ，但是思路是一样的。</p>\n<p>既然这样，我们就把这个想法应用到我们之前的例子中。我们添加了一个 <code>button</code>，用来添加 todo item 。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> state = &#123;items: [], id: <span class=\"number\">0</span>&#125;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#add'</span>).on(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> value = $(<span class=\"string\">'#input'</span>).val().trim()</div><div class=\"line\">  $(<span class=\"string\">'#input'</span>).val(<span class=\"string\">''</span>)</div><div class=\"line\"></div><div class=\"line\">  state.items.push(&#123;</div><div class=\"line\">    id: state.id++,</div><div class=\"line\">    text: value,</div><div class=\"line\">    completed: <span class=\"literal\">false</span></div><div class=\"line\">  &#125;)</div><div class=\"line\"></div><div class=\"line\">  render()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#list'</span>).on(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> toggleId = <span class=\"built_in\">parseInt</span>($(<span class=\"keyword\">this</span>).attr(<span class=\"string\">'id'</span>))</div><div class=\"line\"></div><div class=\"line\">  state.items.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</div><div class=\"line\">    el.id === toggleId &amp;&amp; (el.completed = !el.completed)</div><div class=\"line\">  &#125;)</div><div class=\"line\"></div><div class=\"line\">  render()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> items = state.items.map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> completed = item.completed ? <span class=\"string\">'completed'</span> : <span class=\"string\">''</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;li class=\"item + '</span> + completed + <span class=\"string\">'\" id=\"'</span> + item.id + <span class=\"string\">'\"&gt;('</span> +</div><div class=\"line\">      item.id + <span class=\"string\">') '</span> + item.text + <span class=\"string\">'&lt;/li&gt;'</span></div><div class=\"line\">  &#125;).join(<span class=\"string\">''</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> html = <span class=\"string\">'&lt;ul&gt;'</span> + items = <span class=\"string\">'&lt;/ul&gt;'</span></div><div class=\"line\"></div><div class=\"line\">  $(<span class=\"string\">'#list'</span>).html(html)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">render()</div></pre></td></tr></table></figure>\n<p>效果图如下。我们的应用现在可以显示所有的 todo，也可以改变每个 todo 的状态（进行中或者完成）。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*ouOYh6bI3q_8y1XLCoVD-A.png\" alt=\"simple todo lsit\"></p>\n<p>在上面，我们定义了两个 <code>click</code> 事件，当他们触发时就会更新我们的 <code>state</code> 以及调用 <code>render</code> 函数。而 <code>render</code> 函数会创建一个 todo list 。 <code>state</code> 作为中间媒介，简化了事件和 DOM 元素之间的交互，而不是** 通过事件来直接操作 DOM ** （不需要定义每个 DOM 元素和每个事件以及他们之间的关系）。当某个 <em>action</em>（如 click 事件） 触发之后，<code>state</code> 就会更新，接着调用 <code>render</code> 函数，最后我们的应用就会更新。这样一来，就简化了好多复杂的交互。</p>\n<p>上面的例子是很好的，我们不妨再来重构他。</p>\n<p>可以看到，<code>render</code> 函数有一点乱。我们不妨创建一个函数，他接收一个参数（input），然后基于这个参数返回一个字符串（output）。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ItemRow</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> className = props.completed ? <span class=\"string\">' item completed'</span> : <span class=\"string\">'item'</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;li className=\"'</span> + className +<span class=\"string\">' \"&gt;'</span> + props.text + <span class=\"string\">'&lt;/li&gt;'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ItemsList</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;ul&gt;'</span> + props.items.map(ItemRow).join(<span class=\"string\">''</span>) + <span class=\"string\">'&lt;/ul&gt;'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>看，现在我们的 <code>render</code> 函数优美多了：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  $(<span class=\"string\">'#list'</span>).html(ItemsList(&#123;</div><div class=\"line\">    items: state.items</div><div class=\"line\">  &#125;))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果 <code>render</code> 函数并不知道 <code>state</code> 是什么，而是期望一个 <em>input</em> 作为参数呢？好吧，现在我们可以重构一下 <code>render</code> 函数，他期望接收一个 <code>props</code> 对象（这其实就是 React Component 所期望的。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  $(<span class=\"string\">'#list'</span>).html(ItemsList(&#123;</div><div class=\"line\">    items: props.items</div><div class=\"line\">  &#125;))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在，<code>render</code> 函数并不依赖外部的状态（state），这使得我们在调用 <code>render</code> 时可以随便传入一个 <em>input</em> ，也就意味着我们的应用重新渲染时，相同的 <em>input</em> 会有相同的 <em>output</em> 。需要注意的是，DOM 操作其实是一个 side effect，但是现在我们暂时忽略他。</p>\n<p>把 <code>state</code> 从 <code>render</code> 函数中分离出来，可以使得我们很容易实现 <code>Undo/Redo</code>。这也意味着每当 * 当前的 state * 改变时，我们能够创建一个 history ，保存这个当前的 state 。</p>\n<p>另外一个优化就是传一个 root node 作为参数，而不是写死在 <code>render</code> 函数里面：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">props, node</span>) </span>&#123;</div><div class=\"line\">  node.html(ItemsList(&#123;</div><div class=\"line\">    items: props.items</div><div class=\"line\">  &#125;))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>因此，我们可以这样调用 <code>render</code> 函数：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">render(state, $(<span class=\"string\">'#list'</span>))</div></pre></td></tr></table></figure>\n<p>我们会很容易想到：当 <code>state</code> 改变的时候，能不能自动地更新应用？也就是，不用手动地调用 <code>render</code> 函数。</p>\n<p>现在，我们来创建一个 <em>store</em> ，他的作用是当 <code>state</code> 改变之后，就立马调用 <code>render</code> 函数。下面的实现虽然简单，但也是一个 advanced state container 的雏形。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createStore</span> (<span class=\"params\">initialState</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> _state = initialState || &#123;&#125;,</div><div class=\"line\">    _listeners = []</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateListeners</span> (<span class=\"params\">state</span>) </span>&#123;</div><div class=\"line\">    _listeners.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">listener</span>) </span>&#123;</div><div class=\"line\">      listener.cb(state)</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    setState: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">state</span>) </span>&#123;</div><div class=\"line\">      _state = state</div><div class=\"line\">      updateListeners(state)</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    getState: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> _state</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    onUpdate: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name, cb</span>) </span>&#123;</div><div class=\"line\">      _listeners.push(&#123;name: name, cb: cb&#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在，我们更新 <code>state</code> 只需要简单地调用 <code>setState</code> 方法。只要 <code>state</code> 一改变，我们的 <code>render</code> 函数就会被调用：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> store = createStore(store)</div><div class=\"line\"></div><div class=\"line\">store.onUpdate(<span class=\"string\">'rootRender'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">state</span>) </span>&#123;</div><div class=\"line\">  render(state, $(<span class=\"string\">'#list'</span>))</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p><a href=\"http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview\" target=\"_blank\" rel=\"external\">点击这里可查看完整的代码</a></p>\n<p>** 现在我们学会了什么？ ** 我们知道了简单的单向数据流（one-way data flow）的原则。我们给 <code>render</code> 函数传了一个 <code>state</code> 参数，然后 <code>state</code> 就会像流水一样，流到 <code>render</code> 函数的每个层次中。比如，<code>ItemRow</code> 函数需要 <code>ItemsList</code> 给他传进正确的参数。</p>\n<p>我们已经创建了多个组件（component），并且我们把这些组件组合（compose）在一起。回想一下前面的 <code>header</code> 例子，我们把 <code>div</code> 和 <code>h2</code> 函数组合成了一个 <code>header</code> 函数。并且，这些函数都是 <em>pure function</em> ，这使得所有更新都是可预测的。</p>\n<p>并且，我们使用了 <em>store</em> 来管理我们的 <code>state</code>。</p>\n<p>而，React 会用更好更优美的方法来实现上面这些东西。组件（组合），使用 Virtual DOM 优化渲染，单向数据流等等。</p>\n<blockquote>\n<p>…we can focus on examining React’s true strengths: composition, unidirectional data flow, freedom from DSLs, explicit mutation and static mental model.</p>\n</blockquote>\n<p>From <a href=\"https://medium.com/@dan_abramov/youre-missing-the-point-of-react-a20e34a51e1a\" target=\"_blank\" rel=\"external\">Dan Abramov - you’re missing the point of react</a></p>\n<p>我们可以优化的东西还有很多，比如继续优化 state container，重构我们的 listeners，实现 undo/redo，以及更多更好的 feature。<strong>这些东西我们都会在 Part 2 呈现</strong>。</p>\n<p><em>原文链接：<a href=\"https://medium.com/javascript-inside/learn-the-concepts-part-1-418952d968cb#.femmquo5d\" target=\"_blank\" rel=\"external\">Learning React Without Using React Part 1</a></em></p>\n","excerpt":"","more":"<p><em>原文链接：<a href=\"https://medium.com/javascript-inside/learn-the-concepts-part-1-418952d968cb#.femmquo5d\">Learning React Without Using React Part 1</a></em></p>\n<p>当我们谈起 React 的时候总是有很多疑惑。下面简单地介绍了 React 以及他的一些底层原理。</p>\n<p>当你完成 Part1 和 Part2 之后，你会学到什么呢？你也许就会知道你为什么需要 React 以及 Redux 类似的 state container （状态管理器）。</p>\n<p>然而，<strong>你并不需要学习</strong>: JSX，ES6/ES*，Webpack，Hot Reloading，也不需要理解 Virtual DOM，甚至不需要 React 本身。</p>\n<p>那么，我们首先要做的是：</p>\n<p>阅读 <a href=\"https://github.com/tastejs/todomvc/blob/gh-pages/examples/jquery/js/app.js\">Jquery 实现的 TodoMVC</a> 的代码。</p>\n<p>也许你会注意到有一个叫 <code>render</code> 的方法，他会在某个事件触发或者数据更新的时候被调用。现在，我们从头来实现一个例子：当 <code>input</code> 的值改变时，调用 <code>render</code> 函数，并且更新 DOM 元素。（<a href=\"http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview\">点击这里可查看完整的代码</a>）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> state = &#123;value: <span class=\"literal\">null</span>&#125;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#input'</span>).on(<span class=\"string\">'keyup'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  state.value = $(<span class=\"keyword\">this</span>).val().trim()</div><div class=\"line\">  render()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  $(<span class=\"string\">'#output'</span>).html(state.value)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">render()</div></pre></td></tr></table></figure>\n<p>我们使用一个全局变量 <code>state</code> 来同步所有的东西。也就是说，当 <em>input</em> 的值改变时会更新两样东西：</p>\n<ol>\n<li>更新整个应用的 <code>state</code></li>\n<li>更新 DOM（根据应用当前的 <code>state</code> 来调用 <code>render</code> 函数）</li>\n</ol>\n<p>先记住这些，我们等一下就会返回来。</p>\n<p>现在，我们有了一个新想法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">output</span>(<span class=\"params\">text</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;div&gt;'</span> + text + <span class=\"string\">'&lt;/div&gt;'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>显然，调用 <code>output(foo)</code> 就会返回 <code>'&lt;div&gt;foo&lt;/div&gt;'</code>。</p>\n<p>那么接下来：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">h2</span> (<span class=\"params\">text</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;h2&gt;'</span> + text + <span class=\"string\">'&lt;/h2&gt;'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">div</span> (<span class=\"params\">text</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;div&gt;'</span> + text + <span class=\"string\">'&lt;/div&gt;'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">header</span> (<span class=\"params\">text</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> div(h2(text))</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(header(<span class=\"string\">'foo'</span>) === <span class=\"string\">'&lt;div&gt;&lt;h2&gt;foo&lt;/h2&gt;&lt;/div&gt;'</span>) <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<p>上面的函数都是基于一个 <em>text(input)</em> 然后返回一个 <em>string(text)</em> 。调用 <code>header</code> 的时候传入相同的参数（<em>input</em>），都会得到相同的字符串（<em>output</em>）。如果你在想思考 React 中的 <strong>stateless functions</strong> 的话，那么这个其实就是一个简化版。只是 Stateless functions 会返回一个 React Element 而不是一个简单的 string ，但是思路是一样的。</p>\n<p>既然这样，我们就把这个想法应用到我们之前的例子中。我们添加了一个 <code>button</code>，用来添加 todo item 。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> state = &#123;items: [], id: <span class=\"number\">0</span>&#125;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#add'</span>).on(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> value = $(<span class=\"string\">'#input'</span>).val().trim()</div><div class=\"line\">  $(<span class=\"string\">'#input'</span>).val(<span class=\"string\">''</span>)</div><div class=\"line\"></div><div class=\"line\">  state.items.push(&#123;</div><div class=\"line\">    id: state.id++,</div><div class=\"line\">    text: value,</div><div class=\"line\">    completed: <span class=\"literal\">false</span></div><div class=\"line\">  &#125;)</div><div class=\"line\"></div><div class=\"line\">  render()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#list'</span>).on(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> toggleId = <span class=\"built_in\">parseInt</span>($(<span class=\"keyword\">this</span>).attr(<span class=\"string\">'id'</span>))</div><div class=\"line\"></div><div class=\"line\">  state.items.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</div><div class=\"line\">    el.id === toggleId &amp;&amp; (el.completed = !el.completed)</div><div class=\"line\">  &#125;)</div><div class=\"line\"></div><div class=\"line\">  render()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> items = state.items.map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> completed = item.completed ? <span class=\"string\">'completed'</span> : <span class=\"string\">''</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;li class=\"item + '</span> + completed + <span class=\"string\">'\" id=\"'</span> + item.id + <span class=\"string\">'\"&gt;('</span> +</div><div class=\"line\">      item.id + <span class=\"string\">') '</span> + item.text + <span class=\"string\">'&lt;/li&gt;'</span></div><div class=\"line\">  &#125;).join(<span class=\"string\">''</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> html = <span class=\"string\">'&lt;ul&gt;'</span> + items = <span class=\"string\">'&lt;/ul&gt;'</span></div><div class=\"line\"></div><div class=\"line\">  $(<span class=\"string\">'#list'</span>).html(html)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">render()</div></pre></td></tr></table></figure>\n<p>效果图如下。我们的应用现在可以显示所有的 todo，也可以改变每个 todo 的状态（进行中或者完成）。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*ouOYh6bI3q_8y1XLCoVD-A.png\" alt=\"simple todo lsit\"></p>\n<p>在上面，我们定义了两个 <code>click</code> 事件，当他们触发时就会更新我们的 <code>state</code> 以及调用 <code>render</code> 函数。而 <code>render</code> 函数会创建一个 todo list 。 <code>state</code> 作为中间媒介，简化了事件和 DOM 元素之间的交互，而不是** 通过事件来直接操作 DOM ** （不需要定义每个 DOM 元素和每个事件以及他们之间的关系）。当某个 <em>action</em>（如 click 事件） 触发之后，<code>state</code> 就会更新，接着调用 <code>render</code> 函数，最后我们的应用就会更新。这样一来，就简化了好多复杂的交互。</p>\n<p>上面的例子是很好的，我们不妨再来重构他。</p>\n<p>可以看到，<code>render</code> 函数有一点乱。我们不妨创建一个函数，他接收一个参数（input），然后基于这个参数返回一个字符串（output）。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ItemRow</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> className = props.completed ? <span class=\"string\">' item completed'</span> : <span class=\"string\">'item'</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;li className=\"'</span> + className +<span class=\"string\">' \"&gt;'</span> + props.text + <span class=\"string\">'&lt;/li&gt;'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ItemsList</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'&lt;ul&gt;'</span> + props.items.map(ItemRow).join(<span class=\"string\">''</span>) + <span class=\"string\">'&lt;/ul&gt;'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>看，现在我们的 <code>render</code> 函数优美多了：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  $(<span class=\"string\">'#list'</span>).html(ItemsList(&#123;</div><div class=\"line\">    items: state.items</div><div class=\"line\">  &#125;))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果 <code>render</code> 函数并不知道 <code>state</code> 是什么，而是期望一个 <em>input</em> 作为参数呢？好吧，现在我们可以重构一下 <code>render</code> 函数，他期望接收一个 <code>props</code> 对象（这其实就是 React Component 所期望的。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  $(<span class=\"string\">'#list'</span>).html(ItemsList(&#123;</div><div class=\"line\">    items: props.items</div><div class=\"line\">  &#125;))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在，<code>render</code> 函数并不依赖外部的状态（state），这使得我们在调用 <code>render</code> 时可以随便传入一个 <em>input</em> ，也就意味着我们的应用重新渲染时，相同的 <em>input</em> 会有相同的 <em>output</em> 。需要注意的是，DOM 操作其实是一个 side effect，但是现在我们暂时忽略他。</p>\n<p>把 <code>state</code> 从 <code>render</code> 函数中分离出来，可以使得我们很容易实现 <code>Undo/Redo</code>。这也意味着每当 * 当前的 state * 改变时，我们能够创建一个 history ，保存这个当前的 state 。</p>\n<p>另外一个优化就是传一个 root node 作为参数，而不是写死在 <code>render</code> 函数里面：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">props, node</span>) </span>&#123;</div><div class=\"line\">  node.html(ItemsList(&#123;</div><div class=\"line\">    items: props.items</div><div class=\"line\">  &#125;))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>因此，我们可以这样调用 <code>render</code> 函数：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">render(state, $(<span class=\"string\">'#list'</span>))</div></pre></td></tr></table></figure>\n<p>我们会很容易想到：当 <code>state</code> 改变的时候，能不能自动地更新应用？也就是，不用手动地调用 <code>render</code> 函数。</p>\n<p>现在，我们来创建一个 <em>store</em> ，他的作用是当 <code>state</code> 改变之后，就立马调用 <code>render</code> 函数。下面的实现虽然简单，但也是一个 advanced state container 的雏形。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createStore</span> (<span class=\"params\">initialState</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> _state = initialState || &#123;&#125;,</div><div class=\"line\">    _listeners = []</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateListeners</span> (<span class=\"params\">state</span>) </span>&#123;</div><div class=\"line\">    _listeners.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">listener</span>) </span>&#123;</div><div class=\"line\">      listener.cb(state)</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    setState: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">state</span>) </span>&#123;</div><div class=\"line\">      _state = state</div><div class=\"line\">      updateListeners(state)</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    getState: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> _state</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    onUpdate: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name, cb</span>) </span>&#123;</div><div class=\"line\">      _listeners.push(&#123;name: name, cb: cb&#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在，我们更新 <code>state</code> 只需要简单地调用 <code>setState</code> 方法。只要 <code>state</code> 一改变，我们的 <code>render</code> 函数就会被调用：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> store = createStore(store)</div><div class=\"line\"></div><div class=\"line\">store.onUpdate(<span class=\"string\">'rootRender'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">state</span>) </span>&#123;</div><div class=\"line\">  render(state, $(<span class=\"string\">'#list'</span>))</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p><a href=\"http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview\">点击这里可查看完整的代码</a></p>\n<p>** 现在我们学会了什么？ ** 我们知道了简单的单向数据流（one-way data flow）的原则。我们给 <code>render</code> 函数传了一个 <code>state</code> 参数，然后 <code>state</code> 就会像流水一样，流到 <code>render</code> 函数的每个层次中。比如，<code>ItemRow</code> 函数需要 <code>ItemsList</code> 给他传进正确的参数。</p>\n<p>我们已经创建了多个组件（component），并且我们把这些组件组合（compose）在一起。回想一下前面的 <code>header</code> 例子，我们把 <code>div</code> 和 <code>h2</code> 函数组合成了一个 <code>header</code> 函数。并且，这些函数都是 <em>pure function</em> ，这使得所有更新都是可预测的。</p>\n<p>并且，我们使用了 <em>store</em> 来管理我们的 <code>state</code>。</p>\n<p>而，React 会用更好更优美的方法来实现上面这些东西。组件（组合），使用 Virtual DOM 优化渲染，单向数据流等等。</p>\n<blockquote>\n<p>…we can focus on examining React’s true strengths: composition, unidirectional data flow, freedom from DSLs, explicit mutation and static mental model.</p>\n</blockquote>\n<p>From <a href=\"https://medium.com/@dan_abramov/youre-missing-the-point-of-react-a20e34a51e1a\">Dan Abramov - you’re missing the point of react</a></p>\n<p>我们可以优化的东西还有很多，比如继续优化 state container，重构我们的 listeners，实现 undo/redo，以及更多更好的 feature。<strong>这些东西我们都会在 Part 2 呈现</strong>。</p>\n<p><em>原文链接：<a href=\"https://medium.com/javascript-inside/learn-the-concepts-part-1-418952d968cb#.femmquo5d\">Learning React Without Using React Part 1</a></em></p>\n"},{"title":"「译」Learning React Without Using React Part2","author":"Drake Leung","date":"2016-03-22T08:12:22.000Z","foreword":"用 React 的组件化，单向数据流的思路，来改进一个 jQuery 实现的 todo。","_content":"\n*[原文链接](https://medium.com/javascript-inside/learning-react-without-using-react-part-2-703621a89432#.guh60nwi7)*\n\n请阅读 [Part 1](http://drakeleung.github.io/blog/2016/03/20/Learning-React-Without-Using-React-Part-1/) 如果你还没有的话。\n\n让我们继续 Part1 没讲到的东西。\n我们这两篇文章主要是专注于如何重构我们的 todo list。现在，我们的实现包含了可以渲染整个应用的函数（组合），还有管理我们状态（state）的 *store*。然而，我们还有很多方法去优化我们的应用。[完整代码请查看这里](http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview)。\n\n首先，我们还没有正确地处理事件。现在，我们的组件根本就没有绑定任何事件。在 React 里面，数据流是从上往下，而事件流则是从下往上（In React data flows down while events move up）。也就是说，当事件触发的时候，我们应该沿着组件链，从下往上找其对应的回调函数。比如，我们的 `ItemRow` 函数应该调用一个从 `props` 传递下来的函数。\n\n那么，我们怎么实现呢？下面是一个小尝试：\n\n```javascript\nfunction ItemRow (props) {\n  var className = props.completed ? 'item completed' : 'item'\n\n  return $('<li>')\n    .on('click', props.onUpdate.bind(null, props.id))\n    .addClass(className)\n    .attr('id', props.id)\n    .html(props.text)\n}\n```\n\n在上面，我们给 `list` 元素绑定了一个事件。当点击他们的时候，`onUpdate` 函数就会被调用。\n\n现在，我们不妨定义一个函数，他可以在创建元素的时候同时为其绑定事件。\n\n```javascript\nfunction createElement (tag, attrs, children) {\n  var elem = $('<', + tag + '>')\n\n  for (var key in attrs) {\n    var val = attrs[key]\n\n    if (key.indexOf('on') === 0) {\n      var event = key.substr(2).toLowerCase()\n      elem.on(event, val)\n    } else {\n      elem.attr(key, val)\n    }\n  }\n\n  return elem.html(children)\n}\n```\n\n这样一来，我们的 `ItemRow` 函数可以写成这样：\n\n```javascript\nfunction ItemRow (props) {\n  var className = props.completed ? 'item completed' : 'item'\n\n  return createElement('li', {\n    id: props.id,\n    class: props.className,\n    onClick: props.onUpdate.bind(null, props.id)\n  }, props.text)\n}\n```\n\n需要注意的是 React 中的 `createElement` 函数是创建了一个 JavaScript 对象来表示 DOM 元素。还有一点，让我们来看看 React 中的 JSX 语法到底是怎样子的。\n\n下面就是一个 JSX 例子：\n\n```JavaScript\nreturn ( <div id='el' className='entry'> Hello </div>)\n```\n\n接着会转换成：\n\n```javascript\nvar SomeElement = React.createElement('div', {\n  id: 'el',\n  className: 'entry'\n}, 'Hello')\n```\n\n然后调用 `SomeElement` 函数会返回一个像下面差不多的 JavaScript 对象：\n\n```javascript\n{\n  // ...\n  type: 'div',\n  key: null,\n  ref: null,\n  props: {\n    children: 'Hello',\n    className: 'entry',\n    id: 'el'\n  }\n}\n```\n\n想要了解更多的话，请阅读 [React Components, Elements, and Instances](https://medium.com/@dan_abramov/react-components-elements-and-instances-90800811f8ca#.x2b1qra2o)\n\n回到我们的例子中，`onUpdate` 函数是从哪里来的？\n\n现在来看看我们的 `render` 函数。他定义了一个 `updateState` 函数，然后通过 `props` 把这个函数传给 `ItemList` 组件。\n\n```javascript\nfunction render (props, node) {\n  function updateState (toggleId) {\n    state.items.forEach(function (el) {\n      if (el.id === toggleId) {\n        el.completed = !el.completed\n      }\n    })\n    store.setState(state)\n  }\n\n  node.empty().append([ItemList({\n    items: props.items,\n    onUpdate: updateState\n  })])\n}\n```\n\n然后，`ItemList` 函数会把 `onUpdate` 传到每个 `ItemRow` 。\n\n```javascript\nfunctions extending(base, item) {\n  return $.extend({}, item, base)\n}\n\nfunction ItemsList (props) {\n  return createElement('ul', {}, props.items\n    .map(extending.bind(null, {onUpdate: props.onUpdate}))\n  )\n    .map(ItemRow)\n}\n```\n通过以上我们实现了：数据流是从下往下的，而事件流是从下往上。这就意味着我们可以把定义在全局的监听器移除掉（用来监听点击 item 的时候，改变他的状态）。我们把这个函数移到了 `render` 函数里面，也就是前面所讲的 `updateState`。\n\n** 我们还可以重构。 **\n\n现在我们把 `input` 和 `button` 从 HTML 标签变成函数。因此，我们整个 HTML 文件就只剩下一个 `div` 。\n\n```HTML\n<div id=\"app\"></app>\n```\n\n我们的 `input` 元素很容易创建，就这样：\n\n```javascript\nvar input = createElement('input', {id: 'input'})\n```\n\n同样地，我们也可以把监听搜索框按钮点击的全局函数放在我们的 `SearchBar` 函数里面。`SearchBar` 函数会返回一个 `input` 和一个 `button` 元素，他会通过 `props` 传进来的回调函数来处理点击事件。\n\n```javascript\nfunctions SearchBar(props) {\n  function onButtonClick (e) {\n    var val = $('#input').val()\n    $('#input').val('')\n    props.update(val)\n    e.preventDefault()\n  }\n\n  var input = createElement('input', {id: 'input'})\n  var button = createElement('button', {\n    id: 'add',\n    onClick: onButtonClick.bind(null)\n  }, 'Add')\n\n  return createElement('div', {}, {input, button})\n}\n```\n\n我们的 `render` 函数调用 `SearchBar` 的同时传递正确的 `props` 参数。在我们更新 `update` 函数之前，让我们想想 *re-render* 应该在哪里调用才是正确的。首先，忽略我们的 `store`，把注意力集中在如何在一个 high level component 中处理 *state*。\n\n目前为止，所有的函数都是 *stateless* 的。接下来我们会创建一个函数，他会处理 *state* ，以及在适当的时候更新子组件（children）。\n\n**Container Component**\n\n让我们来创建一个 high level container 吧。与此同时，为了更好理解，你可以阅读 [Presentational and Container Component](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.iy4tfncwt)。\n\n首先，我们给这个 container component 取名为 `App`。他所做的事情就是调用 `SearchBar` 和 `ItemList` 函数。现在，我们继续重构 `render` 函数。其实就是把代码移到 `App` 里面去而已。\n\n我们不妨先来看看 `render` 现在是怎样子的：\n\n```javascript\nfunction render (component, node) {\n  node.empty().append(component)\n}\n\nrender(App(state), $('#app'))\n```\n\n我们的 `render` 函数只是简单地把整个应用渲染到指定的节点中。但是，React 的实现会比这个复杂一点，而我们仅仅把一棵 element tree 添加到指定的根节点中而已。但是抽象起来理解的话，这个已经足够了。\n\n现在，我们的 `App` 函数其实就是我们旧的 `render` 函数，除了 DOM 操作被删掉。\n\n```javascript\nfunction App (props) {\n  function updateSearchBar (value) {\n    state.items.push({\n      id: state.id++,\n      text: value,\n      completed: false\n    })\n  }\n\n  function updateState (toggleId) {\n    state.items.forEach(function (el) {\n      if (el.id === toggleId) {\n        el.completed = !el.completed\n      }\n    })\n    store.setState(state)\n  }\n\n  return [\n    SearchBar({update: updateSearchBar}),\n    ItemsList({items: props.items, onUpdate: updateState})\n  ]\n}\n```\n\n我们还需要改进一样东西：我们访问的 `store` 是全局的，并且重新渲染的话需要调用 `setState` 函数。\n\n我们现在来重构 `App` 函数，使得他的子组件重新渲染的是不需要调用 `store` 。那么应该要怎么实现呢？\n\n首先我们要忽略 `store`，并且想想怎么调用 `setState` 函数，从而使得组件和他的子组件重新渲染。\n\n我们需要跟踪这个 high level component 当前的状态，并且只要 `setState` 一调用，就立马重新渲染。下面是一个简单的实现：\n\n```javascript\nfunction App (props) {\n  function getInitialState (props) {\n    return {\n      items: [],\n      id: 0\n    }\n  }\n\n  var _state = getInitialState(),\n    _node = null\n\n  function setState (state) {\n    _state = state\n    render()\n  }\n\n  // ..\n}\n```\n\n我们通过调用 `getInitialState` 来初始化我们的 `state` ，然后每当使用 `setState` 来更新状态的时候，我们会调用 `render` 函数。\n\n而 `render` 函数要么创建一个 node，要么简单地更新 node，只要 `state` 发生改变。\n\n```javascript\n// naive implement of render\n\nfunction render () {\n  var children = [\n    SearchBar({update: updateSearchState}),\n    ItemList({\n      items: _state.items,\n      onUpdate: updateState\n    })\n  ]\n\n  if (!_node) {\n    return _node = createElement('div', {class: 'top'}, children)\n  } else {\n    return _node.html(children)\n  }\n}\n```\n\n很显然，这对性能来说是不好的。需要知道的是，React 中的 `setState` 不会渲染整个应用，而是组件和他的子组件。\n\n下面是 `render` 函数的最新代码，我们调用 `App` 时不需要带任何参数，只是需要简单地调用 `getInitialState`返回初始的状态。\n\n```javascript\nfunction render(component, node) {\n  node.empty().append(component);\n}\nrender(App(), $('#app'));\n```\n\n[查看的所有的代码请点击这里](http://plnkr.co/edit/ISi8AiVuYSfFIfMy9z6t?p=preview)\n\n**继续改进**\n\n如果有一个函数，他会返回一个对象。这个对象包含了 `setState` 函数，还能够区分传进来 `props` 和 组件本身自己的 `state`。\n\n\n差不多就像下面这样：\n\n```javascript\nvar App = createClass({\n  updateSearchState: function (string) { /*...*/ },\n\n  updateState: function (obj) { /*... */ },\n\n  render: function () {\n    var children = [\n      SearchBar({\n        updateSearchState: this.updateSearchState\n      }),\n      ItemsList({\n        items: this.state.items,\n        onUpdate: this.updateState\n      })\n    ]\n\n    return createElement('div', {class: 'top'}, children)\n  }\n})\n```\n\n很幸运的是，在 React 中，你可以通过调用 `React.createClass` 来创建组件。他提供了很多选择，比如 ES6 Class ，stateless function 等，[更多请查看文档](https://facebook.github.io/react/docs/reusable-components.html)。\n\n综上，我们讲解了数据流如何从上往下，而事件从下往上。我们也看到了如何处理一个组件的状态。关于 React 的东西，还有很多要学习。下面的链接也许可以帮助到你。\n\n**扩展阅读**\n\n- [Thnking in React](https://facebook.github.io/react/docs/thinking-in-react.html)\n- [Getting Start React](https://facebook.github.io/react/docs/getting-started.html)\n- [JSX](https://medium.com/javascript-scene/jsx-looks-like-an-abomination-1c1ec351a918#.59q26eqe0)\n- [React How to](https://github.com/petehunt/react-howto)\n- [Removing User Interface Complexity, or Why React is Awesome](http://jlongster.com/Removing-User-Interface-Complexity,-or-Why-React-is-Awesome)\n- [Presentational and Container Component](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.kcyewm6ab)\n- [React Component, Elements, and Instances](https://medium.com/@dan_abramov/react-components-elements-and-instances-90800811f8ca#.xis6z3p1z)\n\n**结尾语**\n\n本来打算在这篇文章讲解如何创建一个 *advanced state container* ，实现 *undo/redo* 以及更多 feature ，但是我认为已经超出了这篇文章的范围。\n\n如果大家有兴趣的话，我也许会写 Part 2.1。\n\n*[原文链接](https://medium.com/javascript-inside/learning-react-without-using-react-part-2-703621a89432#.guh60nwi7)*\n","source":"_posts/Learning-React-Without-Using-React-Part-2.md","raw":"---\ntitle: 「译」Learning React Without Using React Part2\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-03-22 16:12:22\nforeword: 用 React 的组件化，单向数据流的思路，来改进一个 jQuery 实现的 todo。\n---\n\n*[原文链接](https://medium.com/javascript-inside/learning-react-without-using-react-part-2-703621a89432#.guh60nwi7)*\n\n请阅读 [Part 1](http://drakeleung.github.io/blog/2016/03/20/Learning-React-Without-Using-React-Part-1/) 如果你还没有的话。\n\n让我们继续 Part1 没讲到的东西。\n我们这两篇文章主要是专注于如何重构我们的 todo list。现在，我们的实现包含了可以渲染整个应用的函数（组合），还有管理我们状态（state）的 *store*。然而，我们还有很多方法去优化我们的应用。[完整代码请查看这里](http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview)。\n\n首先，我们还没有正确地处理事件。现在，我们的组件根本就没有绑定任何事件。在 React 里面，数据流是从上往下，而事件流则是从下往上（In React data flows down while events move up）。也就是说，当事件触发的时候，我们应该沿着组件链，从下往上找其对应的回调函数。比如，我们的 `ItemRow` 函数应该调用一个从 `props` 传递下来的函数。\n\n那么，我们怎么实现呢？下面是一个小尝试：\n\n```javascript\nfunction ItemRow (props) {\n  var className = props.completed ? 'item completed' : 'item'\n\n  return $('<li>')\n    .on('click', props.onUpdate.bind(null, props.id))\n    .addClass(className)\n    .attr('id', props.id)\n    .html(props.text)\n}\n```\n\n在上面，我们给 `list` 元素绑定了一个事件。当点击他们的时候，`onUpdate` 函数就会被调用。\n\n现在，我们不妨定义一个函数，他可以在创建元素的时候同时为其绑定事件。\n\n```javascript\nfunction createElement (tag, attrs, children) {\n  var elem = $('<', + tag + '>')\n\n  for (var key in attrs) {\n    var val = attrs[key]\n\n    if (key.indexOf('on') === 0) {\n      var event = key.substr(2).toLowerCase()\n      elem.on(event, val)\n    } else {\n      elem.attr(key, val)\n    }\n  }\n\n  return elem.html(children)\n}\n```\n\n这样一来，我们的 `ItemRow` 函数可以写成这样：\n\n```javascript\nfunction ItemRow (props) {\n  var className = props.completed ? 'item completed' : 'item'\n\n  return createElement('li', {\n    id: props.id,\n    class: props.className,\n    onClick: props.onUpdate.bind(null, props.id)\n  }, props.text)\n}\n```\n\n需要注意的是 React 中的 `createElement` 函数是创建了一个 JavaScript 对象来表示 DOM 元素。还有一点，让我们来看看 React 中的 JSX 语法到底是怎样子的。\n\n下面就是一个 JSX 例子：\n\n```JavaScript\nreturn ( <div id='el' className='entry'> Hello </div>)\n```\n\n接着会转换成：\n\n```javascript\nvar SomeElement = React.createElement('div', {\n  id: 'el',\n  className: 'entry'\n}, 'Hello')\n```\n\n然后调用 `SomeElement` 函数会返回一个像下面差不多的 JavaScript 对象：\n\n```javascript\n{\n  // ...\n  type: 'div',\n  key: null,\n  ref: null,\n  props: {\n    children: 'Hello',\n    className: 'entry',\n    id: 'el'\n  }\n}\n```\n\n想要了解更多的话，请阅读 [React Components, Elements, and Instances](https://medium.com/@dan_abramov/react-components-elements-and-instances-90800811f8ca#.x2b1qra2o)\n\n回到我们的例子中，`onUpdate` 函数是从哪里来的？\n\n现在来看看我们的 `render` 函数。他定义了一个 `updateState` 函数，然后通过 `props` 把这个函数传给 `ItemList` 组件。\n\n```javascript\nfunction render (props, node) {\n  function updateState (toggleId) {\n    state.items.forEach(function (el) {\n      if (el.id === toggleId) {\n        el.completed = !el.completed\n      }\n    })\n    store.setState(state)\n  }\n\n  node.empty().append([ItemList({\n    items: props.items,\n    onUpdate: updateState\n  })])\n}\n```\n\n然后，`ItemList` 函数会把 `onUpdate` 传到每个 `ItemRow` 。\n\n```javascript\nfunctions extending(base, item) {\n  return $.extend({}, item, base)\n}\n\nfunction ItemsList (props) {\n  return createElement('ul', {}, props.items\n    .map(extending.bind(null, {onUpdate: props.onUpdate}))\n  )\n    .map(ItemRow)\n}\n```\n通过以上我们实现了：数据流是从下往下的，而事件流是从下往上。这就意味着我们可以把定义在全局的监听器移除掉（用来监听点击 item 的时候，改变他的状态）。我们把这个函数移到了 `render` 函数里面，也就是前面所讲的 `updateState`。\n\n** 我们还可以重构。 **\n\n现在我们把 `input` 和 `button` 从 HTML 标签变成函数。因此，我们整个 HTML 文件就只剩下一个 `div` 。\n\n```HTML\n<div id=\"app\"></app>\n```\n\n我们的 `input` 元素很容易创建，就这样：\n\n```javascript\nvar input = createElement('input', {id: 'input'})\n```\n\n同样地，我们也可以把监听搜索框按钮点击的全局函数放在我们的 `SearchBar` 函数里面。`SearchBar` 函数会返回一个 `input` 和一个 `button` 元素，他会通过 `props` 传进来的回调函数来处理点击事件。\n\n```javascript\nfunctions SearchBar(props) {\n  function onButtonClick (e) {\n    var val = $('#input').val()\n    $('#input').val('')\n    props.update(val)\n    e.preventDefault()\n  }\n\n  var input = createElement('input', {id: 'input'})\n  var button = createElement('button', {\n    id: 'add',\n    onClick: onButtonClick.bind(null)\n  }, 'Add')\n\n  return createElement('div', {}, {input, button})\n}\n```\n\n我们的 `render` 函数调用 `SearchBar` 的同时传递正确的 `props` 参数。在我们更新 `update` 函数之前，让我们想想 *re-render* 应该在哪里调用才是正确的。首先，忽略我们的 `store`，把注意力集中在如何在一个 high level component 中处理 *state*。\n\n目前为止，所有的函数都是 *stateless* 的。接下来我们会创建一个函数，他会处理 *state* ，以及在适当的时候更新子组件（children）。\n\n**Container Component**\n\n让我们来创建一个 high level container 吧。与此同时，为了更好理解，你可以阅读 [Presentational and Container Component](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.iy4tfncwt)。\n\n首先，我们给这个 container component 取名为 `App`。他所做的事情就是调用 `SearchBar` 和 `ItemList` 函数。现在，我们继续重构 `render` 函数。其实就是把代码移到 `App` 里面去而已。\n\n我们不妨先来看看 `render` 现在是怎样子的：\n\n```javascript\nfunction render (component, node) {\n  node.empty().append(component)\n}\n\nrender(App(state), $('#app'))\n```\n\n我们的 `render` 函数只是简单地把整个应用渲染到指定的节点中。但是，React 的实现会比这个复杂一点，而我们仅仅把一棵 element tree 添加到指定的根节点中而已。但是抽象起来理解的话，这个已经足够了。\n\n现在，我们的 `App` 函数其实就是我们旧的 `render` 函数，除了 DOM 操作被删掉。\n\n```javascript\nfunction App (props) {\n  function updateSearchBar (value) {\n    state.items.push({\n      id: state.id++,\n      text: value,\n      completed: false\n    })\n  }\n\n  function updateState (toggleId) {\n    state.items.forEach(function (el) {\n      if (el.id === toggleId) {\n        el.completed = !el.completed\n      }\n    })\n    store.setState(state)\n  }\n\n  return [\n    SearchBar({update: updateSearchBar}),\n    ItemsList({items: props.items, onUpdate: updateState})\n  ]\n}\n```\n\n我们还需要改进一样东西：我们访问的 `store` 是全局的，并且重新渲染的话需要调用 `setState` 函数。\n\n我们现在来重构 `App` 函数，使得他的子组件重新渲染的是不需要调用 `store` 。那么应该要怎么实现呢？\n\n首先我们要忽略 `store`，并且想想怎么调用 `setState` 函数，从而使得组件和他的子组件重新渲染。\n\n我们需要跟踪这个 high level component 当前的状态，并且只要 `setState` 一调用，就立马重新渲染。下面是一个简单的实现：\n\n```javascript\nfunction App (props) {\n  function getInitialState (props) {\n    return {\n      items: [],\n      id: 0\n    }\n  }\n\n  var _state = getInitialState(),\n    _node = null\n\n  function setState (state) {\n    _state = state\n    render()\n  }\n\n  // ..\n}\n```\n\n我们通过调用 `getInitialState` 来初始化我们的 `state` ，然后每当使用 `setState` 来更新状态的时候，我们会调用 `render` 函数。\n\n而 `render` 函数要么创建一个 node，要么简单地更新 node，只要 `state` 发生改变。\n\n```javascript\n// naive implement of render\n\nfunction render () {\n  var children = [\n    SearchBar({update: updateSearchState}),\n    ItemList({\n      items: _state.items,\n      onUpdate: updateState\n    })\n  ]\n\n  if (!_node) {\n    return _node = createElement('div', {class: 'top'}, children)\n  } else {\n    return _node.html(children)\n  }\n}\n```\n\n很显然，这对性能来说是不好的。需要知道的是，React 中的 `setState` 不会渲染整个应用，而是组件和他的子组件。\n\n下面是 `render` 函数的最新代码，我们调用 `App` 时不需要带任何参数，只是需要简单地调用 `getInitialState`返回初始的状态。\n\n```javascript\nfunction render(component, node) {\n  node.empty().append(component);\n}\nrender(App(), $('#app'));\n```\n\n[查看的所有的代码请点击这里](http://plnkr.co/edit/ISi8AiVuYSfFIfMy9z6t?p=preview)\n\n**继续改进**\n\n如果有一个函数，他会返回一个对象。这个对象包含了 `setState` 函数，还能够区分传进来 `props` 和 组件本身自己的 `state`。\n\n\n差不多就像下面这样：\n\n```javascript\nvar App = createClass({\n  updateSearchState: function (string) { /*...*/ },\n\n  updateState: function (obj) { /*... */ },\n\n  render: function () {\n    var children = [\n      SearchBar({\n        updateSearchState: this.updateSearchState\n      }),\n      ItemsList({\n        items: this.state.items,\n        onUpdate: this.updateState\n      })\n    ]\n\n    return createElement('div', {class: 'top'}, children)\n  }\n})\n```\n\n很幸运的是，在 React 中，你可以通过调用 `React.createClass` 来创建组件。他提供了很多选择，比如 ES6 Class ，stateless function 等，[更多请查看文档](https://facebook.github.io/react/docs/reusable-components.html)。\n\n综上，我们讲解了数据流如何从上往下，而事件从下往上。我们也看到了如何处理一个组件的状态。关于 React 的东西，还有很多要学习。下面的链接也许可以帮助到你。\n\n**扩展阅读**\n\n- [Thnking in React](https://facebook.github.io/react/docs/thinking-in-react.html)\n- [Getting Start React](https://facebook.github.io/react/docs/getting-started.html)\n- [JSX](https://medium.com/javascript-scene/jsx-looks-like-an-abomination-1c1ec351a918#.59q26eqe0)\n- [React How to](https://github.com/petehunt/react-howto)\n- [Removing User Interface Complexity, or Why React is Awesome](http://jlongster.com/Removing-User-Interface-Complexity,-or-Why-React-is-Awesome)\n- [Presentational and Container Component](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.kcyewm6ab)\n- [React Component, Elements, and Instances](https://medium.com/@dan_abramov/react-components-elements-and-instances-90800811f8ca#.xis6z3p1z)\n\n**结尾语**\n\n本来打算在这篇文章讲解如何创建一个 *advanced state container* ，实现 *undo/redo* 以及更多 feature ，但是我认为已经超出了这篇文章的范围。\n\n如果大家有兴趣的话，我也许会写 Part 2.1。\n\n*[原文链接](https://medium.com/javascript-inside/learning-react-without-using-react-part-2-703621a89432#.guh60nwi7)*\n","slug":"Learning-React-Without-Using-React-Part-2","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742zb000l37rqdemnppk5","content":"<p><em><a href=\"https://medium.com/javascript-inside/learning-react-without-using-react-part-2-703621a89432#.guh60nwi7\" target=\"_blank\" rel=\"external\">原文链接</a></em></p>\n<p>请阅读 <a href=\"http://drakeleung.github.io/blog/2016/03/20/Learning-React-Without-Using-React-Part-1/\">Part 1</a> 如果你还没有的话。</p>\n<p>让我们继续 Part1 没讲到的东西。<br>\n我们这两篇文章主要是专注于如何重构我们的 todo list。现在，我们的实现包含了可以渲染整个应用的函数（组合），还有管理我们状态（state）的 <em>store</em>。然而，我们还有很多方法去优化我们的应用。<a href=\"http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview\" target=\"_blank\" rel=\"external\">完整代码请查看这里</a>。</p>\n<p>首先，我们还没有正确地处理事件。现在，我们的组件根本就没有绑定任何事件。在 React 里面，数据流是从上往下，而事件流则是从下往上（In React data flows down while events move up）。也就是说，当事件触发的时候，我们应该沿着组件链，从下往上找其对应的回调函数。比如，我们的 <code>ItemRow</code> 函数应该调用一个从 <code>props</code> 传递下来的函数。</p>\n<p>那么，我们怎么实现呢？下面是一个小尝试：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ItemRow</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> className = props.completed ? <span class=\"string\">'item completed'</span> : <span class=\"string\">'item'</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> $(<span class=\"string\">'&lt;li&gt;'</span>)</div><div class=\"line\">    .on(<span class=\"string\">'click'</span>, props.onUpdate.bind(<span class=\"literal\">null</span>, props.id))</div><div class=\"line\">    .addClass(className)</div><div class=\"line\">    .attr(<span class=\"string\">'id'</span>, props.id)</div><div class=\"line\">    .html(props.text)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在上面，我们给 <code>list</code> 元素绑定了一个事件。当点击他们的时候，<code>onUpdate</code> 函数就会被调用。</p>\n<p>现在，我们不妨定义一个函数，他可以在创建元素的时候同时为其绑定事件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createElement</span> (<span class=\"params\">tag, attrs, children</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> elem = $(<span class=\"string\">'&lt;'</span>, + tag + <span class=\"string\">'&gt;'</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> attrs) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> val = attrs[key]</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (key.indexOf(<span class=\"string\">'on'</span>) === <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> event = key.substr(<span class=\"number\">2</span>).toLowerCase()</div><div class=\"line\">      elem.on(event, val)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      elem.attr(key, val)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> elem.html(children)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这样一来，我们的 <code>ItemRow</code> 函数可以写成这样：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">function ItemRow (props) &#123;</div><div class=\"line\">  var className = props.completed ? 'item completed' : 'item'</div><div class=\"line\"></div><div class=\"line\">  return createElement('li', &#123;</div><div class=\"line\">    id: props.id,</div><div class=\"line\">    class: props.className,</div><div class=\"line\">    onClick: props.onUpdate.bind(null, props.id)</div><div class=\"line\">  &#125;, props.text)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>需要注意的是 React 中的 <code>createElement</code> 函数是创建了一个 JavaScript 对象来表示 DOM 元素。还有一点，让我们来看看 React 中的 JSX 语法到底是怎样子的。</p>\n<p>下面就是一个 JSX 例子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">return</span> ( <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">'el'</span> <span class=\"attr\">className</span>=<span class=\"string\">'entry'</span>&gt;</span> Hello <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>)</div></pre></td></tr></table></figure>\n<p>接着会转换成：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> SomeElement = React.createElement(<span class=\"string\">'div'</span>, &#123;</div><div class=\"line\">  id: <span class=\"string\">'el'</span>,</div><div class=\"line\">  className: <span class=\"string\">'entry'</span></div><div class=\"line\">&#125;, <span class=\"string\">'Hello'</span>)</div></pre></td></tr></table></figure>\n<p>然后调用 <code>SomeElement</code> 函数会返回一个像下面差不多的 JavaScript 对象：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\">  type: <span class=\"string\">'div'</span>,</div><div class=\"line\">  key: <span class=\"literal\">null</span>,</div><div class=\"line\">  ref: <span class=\"literal\">null</span>,</div><div class=\"line\">  props: &#123;</div><div class=\"line\">    children: <span class=\"string\">'Hello'</span>,</div><div class=\"line\">    className: <span class=\"string\">'entry'</span>,</div><div class=\"line\">    id: <span class=\"string\">'el'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>想要了解更多的话，请阅读 <a href=\"https://medium.com/@dan_abramov/react-components-elements-and-instances-90800811f8ca#.x2b1qra2o\" target=\"_blank\" rel=\"external\">React Components, Elements, and Instances</a></p>\n<p>回到我们的例子中，<code>onUpdate</code> 函数是从哪里来的？</p>\n<p>现在来看看我们的 <code>render</code> 函数。他定义了一个 <code>updateState</code> 函数，然后通过 <code>props</code> 把这个函数传给 <code>ItemList</code> 组件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">props, node</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateState</span> (<span class=\"params\">toggleId</span>) </span>&#123;</div><div class=\"line\">    state.items.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (el.id === toggleId) &#123;</div><div class=\"line\">        el.completed = !el.completed</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">    store.setState(state)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  node.empty().append([ItemList(&#123;</div><div class=\"line\">    items: props.items,</div><div class=\"line\">    onUpdate: updateState</div><div class=\"line\">  &#125;)])</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后，<code>ItemList</code> 函数会把 <code>onUpdate</code> 传到每个 <code>ItemRow</code> 。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">functions extending(base, item) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> $.extend(&#123;&#125;, item, base)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ItemsList</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> createElement(<span class=\"string\">'ul'</span>, &#123;&#125;, props.items</div><div class=\"line\">    .map(extending.bind(<span class=\"literal\">null</span>, &#123;onUpdate: props.onUpdate&#125;))</div><div class=\"line\">  )</div><div class=\"line\">    .map(ItemRow)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>通过以上我们实现了：数据流是从下往下的，而事件流是从下往上。这就意味着我们可以把定义在全局的监听器移除掉（用来监听点击 item 的时候，改变他的状态）。我们把这个函数移到了 <code>render</code> 函数里面，也就是前面所讲的 <code>updateState</code>。</p>\n<p>** 我们还可以重构。 **</p>\n<p>现在我们把 <code>input</code> 和 <code>button</code> 从 HTML 标签变成函数。因此，我们整个 HTML 文件就只剩下一个 <code>div</code> 。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">app</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>我们的 <code>input</code> 元素很容易创建，就这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> input = createElement(<span class=\"string\">'input'</span>, &#123;id: <span class=\"string\">'input'</span>&#125;)</div></pre></td></tr></table></figure>\n<p>同样地，我们也可以把监听搜索框按钮点击的全局函数放在我们的 <code>SearchBar</code> 函数里面。<code>SearchBar</code> 函数会返回一个 <code>input</code> 和一个 <code>button</code> 元素，他会通过 <code>props</code> 传进来的回调函数来处理点击事件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">functions SearchBar(props) &#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onButtonClick</span> (<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> val = $(<span class=\"string\">'#input'</span>).val()</div><div class=\"line\">    $(<span class=\"string\">'#input'</span>).val(<span class=\"string\">''</span>)</div><div class=\"line\">    props.update(val)</div><div class=\"line\">    e.preventDefault()</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> input = createElement(<span class=\"string\">'input'</span>, &#123;id: <span class=\"string\">'input'</span>&#125;)</div><div class=\"line\">  <span class=\"keyword\">var</span> button = createElement(<span class=\"string\">'button'</span>, &#123;</div><div class=\"line\">    id: <span class=\"string\">'add'</span>,</div><div class=\"line\">    onClick: onButtonClick.bind(<span class=\"literal\">null</span>)</div><div class=\"line\">  &#125;, <span class=\"string\">'Add'</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> createElement(<span class=\"string\">'div'</span>, &#123;&#125;, &#123;input, button&#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我们的 <code>render</code> 函数调用 <code>SearchBar</code> 的同时传递正确的 <code>props</code> 参数。在我们更新 <code>update</code> 函数之前，让我们想想 <em>re-render</em> 应该在哪里调用才是正确的。首先，忽略我们的 <code>store</code>，把注意力集中在如何在一个 high level component 中处理 <em>state</em>。</p>\n<p>目前为止，所有的函数都是 <em>stateless</em> 的。接下来我们会创建一个函数，他会处理 <em>state</em> ，以及在适当的时候更新子组件（children）。</p>\n<p><strong>Container Component</strong></p>\n<p>让我们来创建一个 high level container 吧。与此同时，为了更好理解，你可以阅读 <a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.iy4tfncwt\" target=\"_blank\" rel=\"external\">Presentational and Container Component</a>。</p>\n<p>首先，我们给这个 container component 取名为 <code>App</code>。他所做的事情就是调用 <code>SearchBar</code> 和 <code>ItemList</code> 函数。现在，我们继续重构 <code>render</code> 函数。其实就是把代码移到 <code>App</code> 里面去而已。</p>\n<p>我们不妨先来看看 <code>render</code> 现在是怎样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">component, node</span>) </span>&#123;</div><div class=\"line\">  node.empty().append(component)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">render(App(state), $(<span class=\"string\">'#app'</span>))</div></pre></td></tr></table></figure>\n<p>我们的 <code>render</code> 函数只是简单地把整个应用渲染到指定的节点中。但是，React 的实现会比这个复杂一点，而我们仅仅把一棵 element tree 添加到指定的根节点中而已。但是抽象起来理解的话，这个已经足够了。</p>\n<p>现在，我们的 <code>App</code> 函数其实就是我们旧的 <code>render</code> 函数，除了 DOM 操作被删掉。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateSearchBar</span> (<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    state.items.push(&#123;</div><div class=\"line\">      id: state.id++,</div><div class=\"line\">      text: value,</div><div class=\"line\">      completed: <span class=\"literal\">false</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateState</span> (<span class=\"params\">toggleId</span>) </span>&#123;</div><div class=\"line\">    state.items.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (el.id === toggleId) &#123;</div><div class=\"line\">        el.completed = !el.completed</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">    store.setState(state)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> [</div><div class=\"line\">    SearchBar(&#123;update: updateSearchBar&#125;),</div><div class=\"line\">    ItemsList(&#123;items: props.items, onUpdate: updateState&#125;)</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我们还需要改进一样东西：我们访问的 <code>store</code> 是全局的，并且重新渲染的话需要调用 <code>setState</code> 函数。</p>\n<p>我们现在来重构 <code>App</code> 函数，使得他的子组件重新渲染的是不需要调用 <code>store</code> 。那么应该要怎么实现呢？</p>\n<p>首先我们要忽略 <code>store</code>，并且想想怎么调用 <code>setState</code> 函数，从而使得组件和他的子组件重新渲染。</p>\n<p>我们需要跟踪这个 high level component 当前的状态，并且只要 <code>setState</code> 一调用，就立马重新渲染。下面是一个简单的实现：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInitialState</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">      items: [],</div><div class=\"line\">      id: <span class=\"number\">0</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> _state = getInitialState(),</div><div class=\"line\">    _node = <span class=\"literal\">null</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span> (<span class=\"params\">state</span>) </span>&#123;</div><div class=\"line\">    _state = state</div><div class=\"line\">    render()</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// ..</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我们通过调用 <code>getInitialState</code> 来初始化我们的 <code>state</code> ，然后每当使用 <code>setState</code> 来更新状态的时候，我们会调用 <code>render</code> 函数。</p>\n<p>而 <code>render</code> 函数要么创建一个 node，要么简单地更新 node，只要 <code>state</code> 发生改变。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">// naive implement of render</div><div class=\"line\"></div><div class=\"line\">function render () &#123;</div><div class=\"line\">  var children = [</div><div class=\"line\">    SearchBar(&#123;update: updateSearchState&#125;),</div><div class=\"line\">    ItemList(&#123;</div><div class=\"line\">      items: _state.items,</div><div class=\"line\">      onUpdate: updateState</div><div class=\"line\">    &#125;)</div><div class=\"line\">  ]</div><div class=\"line\"></div><div class=\"line\">  if (!_node) &#123;</div><div class=\"line\">    return _node = createElement('div', &#123;class: 'top'&#125;, children)</div><div class=\"line\">  &#125; else &#123;</div><div class=\"line\">    return _node.html(children)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>很显然，这对性能来说是不好的。需要知道的是，React 中的 <code>setState</code> 不会渲染整个应用，而是组件和他的子组件。</p>\n<p>下面是 <code>render</code> 函数的最新代码，我们调用 <code>App</code> 时不需要带任何参数，只是需要简单地调用 <code>getInitialState</code>返回初始的状态。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\">component, node</span>) </span>&#123;</div><div class=\"line\">  node.empty().append(component);</div><div class=\"line\">&#125;</div><div class=\"line\">render(App(), $(<span class=\"string\">'#app'</span>));</div></pre></td></tr></table></figure>\n<p><a href=\"http://plnkr.co/edit/ISi8AiVuYSfFIfMy9z6t?p=preview\" target=\"_blank\" rel=\"external\">查看的所有的代码请点击这里</a></p>\n<p><strong>继续改进</strong></p>\n<p>如果有一个函数，他会返回一个对象。这个对象包含了 <code>setState</code> 函数，还能够区分传进来 <code>props</code> 和 组件本身自己的 <code>state</code>。</p>\n<p>差不多就像下面这样：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">var App = createClass(&#123;</div><div class=\"line\">  updateSearchState: function (string) &#123; /*...*/ &#125;,</div><div class=\"line\"></div><div class=\"line\">  updateState: function (obj) &#123; /*... */ &#125;,</div><div class=\"line\"></div><div class=\"line\">  render: function () &#123;</div><div class=\"line\">    var children = [</div><div class=\"line\">      SearchBar(&#123;</div><div class=\"line\">        updateSearchState: this.updateSearchState</div><div class=\"line\">      &#125;),</div><div class=\"line\">      ItemsList(&#123;</div><div class=\"line\">        items: this.state.items,</div><div class=\"line\">        onUpdate: this.updateState</div><div class=\"line\">      &#125;)</div><div class=\"line\">    ]</div><div class=\"line\"></div><div class=\"line\">    return createElement('div', &#123;class: 'top'&#125;, children)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>很幸运的是，在 React 中，你可以通过调用 <code>React.createClass</code> 来创建组件。他提供了很多选择，比如 ES6 Class ，stateless function 等，<a href=\"https://facebook.github.io/react/docs/reusable-components.html\" target=\"_blank\" rel=\"external\">更多请查看文档</a>。</p>\n<p>综上，我们讲解了数据流如何从上往下，而事件从下往上。我们也看到了如何处理一个组件的状态。关于 React 的东西，还有很多要学习。下面的链接也许可以帮助到你。</p>\n<p><strong>扩展阅读</strong></p>\n<ul>\n<li><a href=\"https://facebook.github.io/react/docs/thinking-in-react.html\" target=\"_blank\" rel=\"external\">Thnking in React</a></li>\n<li><a href=\"https://facebook.github.io/react/docs/getting-started.html\" target=\"_blank\" rel=\"external\">Getting Start React</a></li>\n<li><a href=\"https://medium.com/javascript-scene/jsx-looks-like-an-abomination-1c1ec351a918#.59q26eqe0\" target=\"_blank\" rel=\"external\">JSX</a></li>\n<li><a href=\"https://github.com/petehunt/react-howto\" target=\"_blank\" rel=\"external\">React How to</a></li>\n<li><a href=\"http://jlongster.com/Removing-User-Interface-Complexity,-or-Why-React-is-Awesome\" target=\"_blank\" rel=\"external\">Removing User Interface Complexity, or Why React is Awesome</a></li>\n<li><a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.kcyewm6ab\" target=\"_blank\" rel=\"external\">Presentational and Container Component</a></li>\n<li><a href=\"https://medium.com/@dan_abramov/react-components-elements-and-instances-90800811f8ca#.xis6z3p1z\" target=\"_blank\" rel=\"external\">React Component, Elements, and Instances</a></li>\n</ul>\n<p><strong>结尾语</strong></p>\n<p>本来打算在这篇文章讲解如何创建一个 <em>advanced state container</em> ，实现 <em>undo/redo</em> 以及更多 feature ，但是我认为已经超出了这篇文章的范围。</p>\n<p>如果大家有兴趣的话，我也许会写 Part 2.1。</p>\n<p><em><a href=\"https://medium.com/javascript-inside/learning-react-without-using-react-part-2-703621a89432#.guh60nwi7\" target=\"_blank\" rel=\"external\">原文链接</a></em></p>\n","excerpt":"","more":"<p><em><a href=\"https://medium.com/javascript-inside/learning-react-without-using-react-part-2-703621a89432#.guh60nwi7\">原文链接</a></em></p>\n<p>请阅读 <a href=\"http://drakeleung.github.io/blog/2016/03/20/Learning-React-Without-Using-React-Part-1/\">Part 1</a> 如果你还没有的话。</p>\n<p>让我们继续 Part1 没讲到的东西。<br>\n我们这两篇文章主要是专注于如何重构我们的 todo list。现在，我们的实现包含了可以渲染整个应用的函数（组合），还有管理我们状态（state）的 <em>store</em>。然而，我们还有很多方法去优化我们的应用。<a href=\"http://plnkr.co/edit/fjQbQwZpQlhd5wXoc9J8?p=preview\">完整代码请查看这里</a>。</p>\n<p>首先，我们还没有正确地处理事件。现在，我们的组件根本就没有绑定任何事件。在 React 里面，数据流是从上往下，而事件流则是从下往上（In React data flows down while events move up）。也就是说，当事件触发的时候，我们应该沿着组件链，从下往上找其对应的回调函数。比如，我们的 <code>ItemRow</code> 函数应该调用一个从 <code>props</code> 传递下来的函数。</p>\n<p>那么，我们怎么实现呢？下面是一个小尝试：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ItemRow</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> className = props.completed ? <span class=\"string\">'item completed'</span> : <span class=\"string\">'item'</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> $(<span class=\"string\">'&lt;li&gt;'</span>)</div><div class=\"line\">    .on(<span class=\"string\">'click'</span>, props.onUpdate.bind(<span class=\"literal\">null</span>, props.id))</div><div class=\"line\">    .addClass(className)</div><div class=\"line\">    .attr(<span class=\"string\">'id'</span>, props.id)</div><div class=\"line\">    .html(props.text)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在上面，我们给 <code>list</code> 元素绑定了一个事件。当点击他们的时候，<code>onUpdate</code> 函数就会被调用。</p>\n<p>现在，我们不妨定义一个函数，他可以在创建元素的时候同时为其绑定事件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createElement</span> (<span class=\"params\">tag, attrs, children</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> elem = $(<span class=\"string\">'&lt;'</span>, + tag + <span class=\"string\">'&gt;'</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> attrs) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> val = attrs[key]</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (key.indexOf(<span class=\"string\">'on'</span>) === <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> event = key.substr(<span class=\"number\">2</span>).toLowerCase()</div><div class=\"line\">      elem.on(event, val)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      elem.attr(key, val)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> elem.html(children)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这样一来，我们的 <code>ItemRow</code> 函数可以写成这样：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">function ItemRow (props) &#123;</div><div class=\"line\">  var className = props.completed ? 'item completed' : 'item'</div><div class=\"line\"></div><div class=\"line\">  return createElement('li', &#123;</div><div class=\"line\">    id: props.id,</div><div class=\"line\">    class: props.className,</div><div class=\"line\">    onClick: props.onUpdate.bind(null, props.id)</div><div class=\"line\">  &#125;, props.text)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>需要注意的是 React 中的 <code>createElement</code> 函数是创建了一个 JavaScript 对象来表示 DOM 元素。还有一点，让我们来看看 React 中的 JSX 语法到底是怎样子的。</p>\n<p>下面就是一个 JSX 例子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">return</span> ( <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">'el'</span> <span class=\"attr\">className</span>=<span class=\"string\">'entry'</span>&gt;</span> Hello <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>)</div></pre></td></tr></table></figure>\n<p>接着会转换成：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> SomeElement = React.createElement(<span class=\"string\">'div'</span>, &#123;</div><div class=\"line\">  id: <span class=\"string\">'el'</span>,</div><div class=\"line\">  className: <span class=\"string\">'entry'</span></div><div class=\"line\">&#125;, <span class=\"string\">'Hello'</span>)</div></pre></td></tr></table></figure>\n<p>然后调用 <code>SomeElement</code> 函数会返回一个像下面差不多的 JavaScript 对象：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\">  type: <span class=\"string\">'div'</span>,</div><div class=\"line\">  key: <span class=\"literal\">null</span>,</div><div class=\"line\">  ref: <span class=\"literal\">null</span>,</div><div class=\"line\">  props: &#123;</div><div class=\"line\">    children: <span class=\"string\">'Hello'</span>,</div><div class=\"line\">    className: <span class=\"string\">'entry'</span>,</div><div class=\"line\">    id: <span class=\"string\">'el'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>想要了解更多的话，请阅读 <a href=\"https://medium.com/@dan_abramov/react-components-elements-and-instances-90800811f8ca#.x2b1qra2o\">React Components, Elements, and Instances</a></p>\n<p>回到我们的例子中，<code>onUpdate</code> 函数是从哪里来的？</p>\n<p>现在来看看我们的 <code>render</code> 函数。他定义了一个 <code>updateState</code> 函数，然后通过 <code>props</code> 把这个函数传给 <code>ItemList</code> 组件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">props, node</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateState</span> (<span class=\"params\">toggleId</span>) </span>&#123;</div><div class=\"line\">    state.items.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (el.id === toggleId) &#123;</div><div class=\"line\">        el.completed = !el.completed</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">    store.setState(state)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  node.empty().append([ItemList(&#123;</div><div class=\"line\">    items: props.items,</div><div class=\"line\">    onUpdate: updateState</div><div class=\"line\">  &#125;)])</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后，<code>ItemList</code> 函数会把 <code>onUpdate</code> 传到每个 <code>ItemRow</code> 。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">functions extending(base, item) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> $.extend(&#123;&#125;, item, base)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ItemsList</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> createElement(<span class=\"string\">'ul'</span>, &#123;&#125;, props.items</div><div class=\"line\">    .map(extending.bind(<span class=\"literal\">null</span>, &#123;onUpdate: props.onUpdate&#125;))</div><div class=\"line\">  )</div><div class=\"line\">    .map(ItemRow)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>通过以上我们实现了：数据流是从下往下的，而事件流是从下往上。这就意味着我们可以把定义在全局的监听器移除掉（用来监听点击 item 的时候，改变他的状态）。我们把这个函数移到了 <code>render</code> 函数里面，也就是前面所讲的 <code>updateState</code>。</p>\n<p>** 我们还可以重构。 **</p>\n<p>现在我们把 <code>input</code> 和 <code>button</code> 从 HTML 标签变成函数。因此，我们整个 HTML 文件就只剩下一个 <code>div</code> 。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">app</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>我们的 <code>input</code> 元素很容易创建，就这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> input = createElement(<span class=\"string\">'input'</span>, &#123;id: <span class=\"string\">'input'</span>&#125;)</div></pre></td></tr></table></figure>\n<p>同样地，我们也可以把监听搜索框按钮点击的全局函数放在我们的 <code>SearchBar</code> 函数里面。<code>SearchBar</code> 函数会返回一个 <code>input</code> 和一个 <code>button</code> 元素，他会通过 <code>props</code> 传进来的回调函数来处理点击事件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">functions SearchBar(props) &#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onButtonClick</span> (<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> val = $(<span class=\"string\">'#input'</span>).val()</div><div class=\"line\">    $(<span class=\"string\">'#input'</span>).val(<span class=\"string\">''</span>)</div><div class=\"line\">    props.update(val)</div><div class=\"line\">    e.preventDefault()</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> input = createElement(<span class=\"string\">'input'</span>, &#123;id: <span class=\"string\">'input'</span>&#125;)</div><div class=\"line\">  <span class=\"keyword\">var</span> button = createElement(<span class=\"string\">'button'</span>, &#123;</div><div class=\"line\">    id: <span class=\"string\">'add'</span>,</div><div class=\"line\">    onClick: onButtonClick.bind(<span class=\"literal\">null</span>)</div><div class=\"line\">  &#125;, <span class=\"string\">'Add'</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> createElement(<span class=\"string\">'div'</span>, &#123;&#125;, &#123;input, button&#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我们的 <code>render</code> 函数调用 <code>SearchBar</code> 的同时传递正确的 <code>props</code> 参数。在我们更新 <code>update</code> 函数之前，让我们想想 <em>re-render</em> 应该在哪里调用才是正确的。首先，忽略我们的 <code>store</code>，把注意力集中在如何在一个 high level component 中处理 <em>state</em>。</p>\n<p>目前为止，所有的函数都是 <em>stateless</em> 的。接下来我们会创建一个函数，他会处理 <em>state</em> ，以及在适当的时候更新子组件（children）。</p>\n<p><strong>Container Component</strong></p>\n<p>让我们来创建一个 high level container 吧。与此同时，为了更好理解，你可以阅读 <a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.iy4tfncwt\">Presentational and Container Component</a>。</p>\n<p>首先，我们给这个 container component 取名为 <code>App</code>。他所做的事情就是调用 <code>SearchBar</code> 和 <code>ItemList</code> 函数。现在，我们继续重构 <code>render</code> 函数。其实就是把代码移到 <code>App</code> 里面去而已。</p>\n<p>我们不妨先来看看 <code>render</code> 现在是怎样子的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">component, node</span>) </span>&#123;</div><div class=\"line\">  node.empty().append(component)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">render(App(state), $(<span class=\"string\">'#app'</span>))</div></pre></td></tr></table></figure>\n<p>我们的 <code>render</code> 函数只是简单地把整个应用渲染到指定的节点中。但是，React 的实现会比这个复杂一点，而我们仅仅把一棵 element tree 添加到指定的根节点中而已。但是抽象起来理解的话，这个已经足够了。</p>\n<p>现在，我们的 <code>App</code> 函数其实就是我们旧的 <code>render</code> 函数，除了 DOM 操作被删掉。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateSearchBar</span> (<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    state.items.push(&#123;</div><div class=\"line\">      id: state.id++,</div><div class=\"line\">      text: value,</div><div class=\"line\">      completed: <span class=\"literal\">false</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateState</span> (<span class=\"params\">toggleId</span>) </span>&#123;</div><div class=\"line\">    state.items.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (el.id === toggleId) &#123;</div><div class=\"line\">        el.completed = !el.completed</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">    store.setState(state)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> [</div><div class=\"line\">    SearchBar(&#123;update: updateSearchBar&#125;),</div><div class=\"line\">    ItemsList(&#123;items: props.items, onUpdate: updateState&#125;)</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我们还需要改进一样东西：我们访问的 <code>store</code> 是全局的，并且重新渲染的话需要调用 <code>setState</code> 函数。</p>\n<p>我们现在来重构 <code>App</code> 函数，使得他的子组件重新渲染的是不需要调用 <code>store</code> 。那么应该要怎么实现呢？</p>\n<p>首先我们要忽略 <code>store</code>，并且想想怎么调用 <code>setState</code> 函数，从而使得组件和他的子组件重新渲染。</p>\n<p>我们需要跟踪这个 high level component 当前的状态，并且只要 <code>setState</code> 一调用，就立马重新渲染。下面是一个简单的实现：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInitialState</span> (<span class=\"params\">props</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">      items: [],</div><div class=\"line\">      id: <span class=\"number\">0</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> _state = getInitialState(),</div><div class=\"line\">    _node = <span class=\"literal\">null</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span> (<span class=\"params\">state</span>) </span>&#123;</div><div class=\"line\">    _state = state</div><div class=\"line\">    render()</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// ..</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我们通过调用 <code>getInitialState</code> 来初始化我们的 <code>state</code> ，然后每当使用 <code>setState</code> 来更新状态的时候，我们会调用 <code>render</code> 函数。</p>\n<p>而 <code>render</code> 函数要么创建一个 node，要么简单地更新 node，只要 <code>state</code> 发生改变。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">// naive implement of render</div><div class=\"line\"></div><div class=\"line\">function render () &#123;</div><div class=\"line\">  var children = [</div><div class=\"line\">    SearchBar(&#123;update: updateSearchState&#125;),</div><div class=\"line\">    ItemList(&#123;</div><div class=\"line\">      items: _state.items,</div><div class=\"line\">      onUpdate: updateState</div><div class=\"line\">    &#125;)</div><div class=\"line\">  ]</div><div class=\"line\"></div><div class=\"line\">  if (!_node) &#123;</div><div class=\"line\">    return _node = createElement('div', &#123;class: 'top'&#125;, children)</div><div class=\"line\">  &#125; else &#123;</div><div class=\"line\">    return _node.html(children)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>很显然，这对性能来说是不好的。需要知道的是，React 中的 <code>setState</code> 不会渲染整个应用，而是组件和他的子组件。</p>\n<p>下面是 <code>render</code> 函数的最新代码，我们调用 <code>App</code> 时不需要带任何参数，只是需要简单地调用 <code>getInitialState</code>返回初始的状态。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\">component, node</span>) </span>&#123;</div><div class=\"line\">  node.empty().append(component);</div><div class=\"line\">&#125;</div><div class=\"line\">render(App(), $(<span class=\"string\">'#app'</span>));</div></pre></td></tr></table></figure>\n<p><a href=\"http://plnkr.co/edit/ISi8AiVuYSfFIfMy9z6t?p=preview\">查看的所有的代码请点击这里</a></p>\n<p><strong>继续改进</strong></p>\n<p>如果有一个函数，他会返回一个对象。这个对象包含了 <code>setState</code> 函数，还能够区分传进来 <code>props</code> 和 组件本身自己的 <code>state</code>。</p>\n<p>差不多就像下面这样：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">var App = createClass(&#123;</div><div class=\"line\">  updateSearchState: function (string) &#123; /*...*/ &#125;,</div><div class=\"line\"></div><div class=\"line\">  updateState: function (obj) &#123; /*... */ &#125;,</div><div class=\"line\"></div><div class=\"line\">  render: function () &#123;</div><div class=\"line\">    var children = [</div><div class=\"line\">      SearchBar(&#123;</div><div class=\"line\">        updateSearchState: this.updateSearchState</div><div class=\"line\">      &#125;),</div><div class=\"line\">      ItemsList(&#123;</div><div class=\"line\">        items: this.state.items,</div><div class=\"line\">        onUpdate: this.updateState</div><div class=\"line\">      &#125;)</div><div class=\"line\">    ]</div><div class=\"line\"></div><div class=\"line\">    return createElement('div', &#123;class: 'top'&#125;, children)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>很幸运的是，在 React 中，你可以通过调用 <code>React.createClass</code> 来创建组件。他提供了很多选择，比如 ES6 Class ，stateless function 等，<a href=\"https://facebook.github.io/react/docs/reusable-components.html\">更多请查看文档</a>。</p>\n<p>综上，我们讲解了数据流如何从上往下，而事件从下往上。我们也看到了如何处理一个组件的状态。关于 React 的东西，还有很多要学习。下面的链接也许可以帮助到你。</p>\n<p><strong>扩展阅读</strong></p>\n<ul>\n<li><a href=\"https://facebook.github.io/react/docs/thinking-in-react.html\">Thnking in React</a></li>\n<li><a href=\"https://facebook.github.io/react/docs/getting-started.html\">Getting Start React</a></li>\n<li><a href=\"https://medium.com/javascript-scene/jsx-looks-like-an-abomination-1c1ec351a918#.59q26eqe0\">JSX</a></li>\n<li><a href=\"https://github.com/petehunt/react-howto\">React How to</a></li>\n<li><a href=\"http://jlongster.com/Removing-User-Interface-Complexity,-or-Why-React-is-Awesome\">Removing User Interface Complexity, or Why React is Awesome</a></li>\n<li><a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.kcyewm6ab\">Presentational and Container Component</a></li>\n<li><a href=\"https://medium.com/@dan_abramov/react-components-elements-and-instances-90800811f8ca#.xis6z3p1z\">React Component, Elements, and Instances</a></li>\n</ul>\n<p><strong>结尾语</strong></p>\n<p>本来打算在这篇文章讲解如何创建一个 <em>advanced state container</em> ，实现 <em>undo/redo</em> 以及更多 feature ，但是我认为已经超出了这篇文章的范围。</p>\n<p>如果大家有兴趣的话，我也许会写 Part 2.1。</p>\n<p><em><a href=\"https://medium.com/javascript-inside/learning-react-without-using-react-part-2-703621a89432#.guh60nwi7\">原文链接</a></em></p>\n"},{"title":"Scope(0) - What Is Scope","author":"Drake Leung","date":"2015-07-06T06:51:18.000Z","foreword":"scope系列的第1篇, 主题是从编译理论知识来讲解为什么需要scope, scope又是什么, 有什么作用.","_content":"\n下面我们会学习JavaScript的scope，也就是作用域．其实很简单~  \n在讲什么是scope之前，我们先讲讲为什么会有scope的存在．\n\n## Why\n我们都知道，一个程序最基本的功能就是对数据的基本操作，比如增删查改．\n\n这个时候，我们就要用到**变量(variable)**了．那么，我们怎么知道变量是存储在哪里的，我们又是怎样获取他的\n值，并且修改呢？\n\n这个时候，我们就需要一个*特殊的地方*来存放变量，然后我们可以在这个地方\n找到我们所需要的变量了．这个＊特殊的地方*就是scope．\n\n## What\n知道了为什么会有scope的存在，我们就很容易知道什么叫做scope了．个人认为的话，\n\n> scope就是一个地方，用来存放变量的．因此，你可以通过scope来获取变量的值，\n从而对这些变量进行基本的操作．\n\n## How It Works\n我们先来了解一些编译(compile)理论知识．\n\n首先，**compile**主要分成３个步骤．\n\n1. Lexing(Takenizing): 把一个要编译的语句分成一些有意义的taken.\n    比如`var bar = 2;`会被分成`var`, `bar`, `=` `2`．\n\n2. Parsing: 把所有的taken弄成一棵*AST*(abstract syntax tree, 抽象语法树)\n\n3. Code Generation: 生成可执行代码\n\n**我们需要明确的一点是: JavaScript的代码是\"从上到下\",\"一句一句\"的编译然后就立马执行的.**\n(注意我使用了双引号)\n\n接下来,介绍3位好机油.分别是浏览器的Engine, Compiler, Scope.\n\n- Engine: 负责分配任务,以及执行代码.\n- Compiler: 接受Engine传递的任务,编译可执行的代码返回给Engine\n- Scope: 存放变量,函数声明等.\n\n那么,让我们通过一个例子,来看看他们是如何合作的.\n\n```javascript\n// Engine will split this statement into 2 parts:\n// `var bar` and `bar = 10`.\n\nvar bar = 10;\n```\nEngine: 先把`var bar`交给Compiler.  \nCompiler: 问问Scope有没有声明过`bar`这个变量.没有的话不管他,否则让Scope声明`bar`变量.\nScope: 我这里没有`bar`, 那我就声明吧.  \n\nEngine: 我要开始执行`bar = 10`啦.Scope你好,请问你那里有没有`bar`这个变量?\nScope: 当然!刚才Compiler叫我声明了.\nEngine: 既然你`bar`的话,那我就把`10`赋值给他咯.\n\n\n## Do It\n通过Scope来查找变量,函数声明等等的过程叫做`identifier looking up`.\n\n下面，我们通过一个例子，来看看怎么一回事．\n\n```javascript\nvar bar;\nbar = 42;\n\nconsole.log(bar);\n```\n\n在第２行代码中，我们引用了`bar`这个变量，并给他赋值了`２`.\n此时，这种引用就叫做**LHS**(left hand side),也就是等号的右边．\n\n在第３行中，我们引用了`bar`这个变量的值．此时，这个引用叫做**RHS**(right hand side)，\n也就是等号的右边，准确来说是等号的非左边．\n\n那么，LHS和RHS有什么不同呢？\n\nLHS只是获取变量,不在乎这个变量对应的值是什么.例子中,我们只想把`42`赋值给`bar`.\n还有一种情况也是`LHS`: 函数的参数.\n\nRHS是为了获取变量的值!例子中,我们想要的就是把`bar`这个变量对应的值打印出来.\n\nRHS如果在scope中找不到这个变量,那么就会报错: `Reference Error`.而LHS则会给`window`\n这个全局变量添加一个属性,如果在没有使用`use strict`的情况下.比如:\n```javascript\n// 'use strict;'\nfoo = 10;\nconsole.log(foo);\n```\n在上面的例子中,很明显在scope中是找不到`foo`这个变量的.\n又由于他是LHS,所有就会有`window.foo = 10;`我们可以通过`console.log(window.hasOwnProperty('foo'))`来测试一下.\n","source":"_posts/Scope-0-What-Is-Scope.md","raw":"title: Scope(0) - What Is Scope\nauthor: Drake Leung\ndate: 2015-07-06 14:51:18\ntags: scope\ncategories: JavaScript\nforeword:\n  scope系列的第1篇, 主题是从编译理论知识来讲解为什么需要scope, scope又是什么, 有什么作用.\n---\n\n下面我们会学习JavaScript的scope，也就是作用域．其实很简单~  \n在讲什么是scope之前，我们先讲讲为什么会有scope的存在．\n\n## Why\n我们都知道，一个程序最基本的功能就是对数据的基本操作，比如增删查改．\n\n这个时候，我们就要用到**变量(variable)**了．那么，我们怎么知道变量是存储在哪里的，我们又是怎样获取他的\n值，并且修改呢？\n\n这个时候，我们就需要一个*特殊的地方*来存放变量，然后我们可以在这个地方\n找到我们所需要的变量了．这个＊特殊的地方*就是scope．\n\n## What\n知道了为什么会有scope的存在，我们就很容易知道什么叫做scope了．个人认为的话，\n\n> scope就是一个地方，用来存放变量的．因此，你可以通过scope来获取变量的值，\n从而对这些变量进行基本的操作．\n\n## How It Works\n我们先来了解一些编译(compile)理论知识．\n\n首先，**compile**主要分成３个步骤．\n\n1. Lexing(Takenizing): 把一个要编译的语句分成一些有意义的taken.\n    比如`var bar = 2;`会被分成`var`, `bar`, `=` `2`．\n\n2. Parsing: 把所有的taken弄成一棵*AST*(abstract syntax tree, 抽象语法树)\n\n3. Code Generation: 生成可执行代码\n\n**我们需要明确的一点是: JavaScript的代码是\"从上到下\",\"一句一句\"的编译然后就立马执行的.**\n(注意我使用了双引号)\n\n接下来,介绍3位好机油.分别是浏览器的Engine, Compiler, Scope.\n\n- Engine: 负责分配任务,以及执行代码.\n- Compiler: 接受Engine传递的任务,编译可执行的代码返回给Engine\n- Scope: 存放变量,函数声明等.\n\n那么,让我们通过一个例子,来看看他们是如何合作的.\n\n```javascript\n// Engine will split this statement into 2 parts:\n// `var bar` and `bar = 10`.\n\nvar bar = 10;\n```\nEngine: 先把`var bar`交给Compiler.  \nCompiler: 问问Scope有没有声明过`bar`这个变量.没有的话不管他,否则让Scope声明`bar`变量.\nScope: 我这里没有`bar`, 那我就声明吧.  \n\nEngine: 我要开始执行`bar = 10`啦.Scope你好,请问你那里有没有`bar`这个变量?\nScope: 当然!刚才Compiler叫我声明了.\nEngine: 既然你`bar`的话,那我就把`10`赋值给他咯.\n\n\n## Do It\n通过Scope来查找变量,函数声明等等的过程叫做`identifier looking up`.\n\n下面，我们通过一个例子，来看看怎么一回事．\n\n```javascript\nvar bar;\nbar = 42;\n\nconsole.log(bar);\n```\n\n在第２行代码中，我们引用了`bar`这个变量，并给他赋值了`２`.\n此时，这种引用就叫做**LHS**(left hand side),也就是等号的右边．\n\n在第３行中，我们引用了`bar`这个变量的值．此时，这个引用叫做**RHS**(right hand side)，\n也就是等号的右边，准确来说是等号的非左边．\n\n那么，LHS和RHS有什么不同呢？\n\nLHS只是获取变量,不在乎这个变量对应的值是什么.例子中,我们只想把`42`赋值给`bar`.\n还有一种情况也是`LHS`: 函数的参数.\n\nRHS是为了获取变量的值!例子中,我们想要的就是把`bar`这个变量对应的值打印出来.\n\nRHS如果在scope中找不到这个变量,那么就会报错: `Reference Error`.而LHS则会给`window`\n这个全局变量添加一个属性,如果在没有使用`use strict`的情况下.比如:\n```javascript\n// 'use strict;'\nfoo = 10;\nconsole.log(foo);\n```\n在上面的例子中,很明显在scope中是找不到`foo`这个变量的.\n又由于他是LHS,所有就会有`window.foo = 10;`我们可以通过`console.log(window.hasOwnProperty('foo'))`来测试一下.\n","slug":"Scope-0-What-Is-Scope","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742zf000n37rqtafibrle","content":"<p>下面我们会学习JavaScript的scope，也就是作用域．其实很简单~<br>\n在讲什么是scope之前，我们先讲讲为什么会有scope的存在．</p>\n<h2>Why</h2>\n<p>我们都知道，一个程序最基本的功能就是对数据的基本操作，比如增删查改．</p>\n<p>这个时候，我们就要用到**变量(variable)**了．那么，我们怎么知道变量是存储在哪里的，我们又是怎样获取他的<br>\n值，并且修改呢？</p>\n<p>这个时候，我们就需要一个<em>特殊的地方</em>来存放变量，然后我们可以在这个地方<br>\n找到我们所需要的变量了．这个＊特殊的地方*就是scope．</p>\n<h2>What</h2>\n<p>知道了为什么会有scope的存在，我们就很容易知道什么叫做scope了．个人认为的话，</p>\n<blockquote>\n<p>scope就是一个地方，用来存放变量的．因此，你可以通过scope来获取变量的值，<br>\n从而对这些变量进行基本的操作．</p>\n</blockquote>\n<h2>How It Works</h2>\n<p>我们先来了解一些编译(compile)理论知识．</p>\n<p>首先，<strong>compile</strong>主要分成３个步骤．</p>\n<ol>\n<li>\n<p>Lexing(Takenizing): 把一个要编译的语句分成一些有意义的taken.<br>\n比如<code>var bar = 2;</code>会被分成<code>var</code>, <code>bar</code>, <code>=</code> <code>2</code>．</p>\n</li>\n<li>\n<p>Parsing: 把所有的taken弄成一棵<em>AST</em>(abstract syntax tree, 抽象语法树)</p>\n</li>\n<li>\n<p>Code Generation: 生成可执行代码</p>\n</li>\n</ol>\n<p><strong>我们需要明确的一点是: JavaScript的代码是&quot;从上到下&quot;,&quot;一句一句&quot;的编译然后就立马执行的.</strong><br>\n(注意我使用了双引号)</p>\n<p>接下来,介绍3位好机油.分别是浏览器的Engine, Compiler, Scope.</p>\n<ul>\n<li>Engine: 负责分配任务,以及执行代码.</li>\n<li>Compiler: 接受Engine传递的任务,编译可执行的代码返回给Engine</li>\n<li>Scope: 存放变量,函数声明等.</li>\n</ul>\n<p>那么,让我们通过一个例子,来看看他们是如何合作的.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Engine will split this statement into 2 parts:</span></div><div class=\"line\"><span class=\"comment\">// `var bar` and `bar = 10`.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> bar = <span class=\"number\">10</span>;</div></pre></td></tr></table></figure>\n<p>Engine: 先把<code>var bar</code>交给Compiler.<br>\nCompiler: 问问Scope有没有声明过<code>bar</code>这个变量.没有的话不管他,否则让Scope声明<code>bar</code>变量.<br>\nScope: 我这里没有<code>bar</code>, 那我就声明吧.</p>\n<p>Engine: 我要开始执行<code>bar = 10</code>啦.Scope你好,请问你那里有没有<code>bar</code>这个变量?<br>\nScope: 当然!刚才Compiler叫我声明了.<br>\nEngine: 既然你<code>bar</code>的话,那我就把<code>10</code>赋值给他咯.</p>\n<h2>Do It</h2>\n<p>通过Scope来查找变量,函数声明等等的过程叫做<code>identifier looking up</code>.</p>\n<p>下面，我们通过一个例子，来看看怎么一回事．</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> bar;</div><div class=\"line\">bar = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(bar);</div></pre></td></tr></table></figure>\n<p>在第２行代码中，我们引用了<code>bar</code>这个变量，并给他赋值了<code>２</code>.<br>\n此时，这种引用就叫做<strong>LHS</strong>(left hand side),也就是等号的右边．</p>\n<p>在第３行中，我们引用了<code>bar</code>这个变量的值．此时，这个引用叫做<strong>RHS</strong>(right hand side)，<br>\n也就是等号的右边，准确来说是等号的非左边．</p>\n<p>那么，LHS和RHS有什么不同呢？</p>\n<p>LHS只是获取变量,不在乎这个变量对应的值是什么.例子中,我们只想把<code>42</code>赋值给<code>bar</code>.<br>\n还有一种情况也是<code>LHS</code>: 函数的参数.</p>\n<p>RHS是为了获取变量的值!例子中,我们想要的就是把<code>bar</code>这个变量对应的值打印出来.</p>\n<p>RHS如果在scope中找不到这个变量,那么就会报错: <code>Reference Error</code>.而LHS则会给<code>window</code><br>\n这个全局变量添加一个属性,如果在没有使用<code>use strict</code>的情况下.比如:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 'use strict;'</span></div><div class=\"line\">foo = <span class=\"number\">10</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(foo);</div></pre></td></tr></table></figure>\n<p>在上面的例子中,很明显在scope中是找不到<code>foo</code>这个变量的.<br>\n又由于他是LHS,所有就会有<code>window.foo = 10;</code>我们可以通过<code>console.log(window.hasOwnProperty('foo'))</code>来测试一下.</p>\n","excerpt":"","more":"<p>下面我们会学习JavaScript的scope，也就是作用域．其实很简单~<br>\n在讲什么是scope之前，我们先讲讲为什么会有scope的存在．</p>\n<h2>Why</h2>\n<p>我们都知道，一个程序最基本的功能就是对数据的基本操作，比如增删查改．</p>\n<p>这个时候，我们就要用到**变量(variable)**了．那么，我们怎么知道变量是存储在哪里的，我们又是怎样获取他的<br>\n值，并且修改呢？</p>\n<p>这个时候，我们就需要一个<em>特殊的地方</em>来存放变量，然后我们可以在这个地方<br>\n找到我们所需要的变量了．这个＊特殊的地方*就是scope．</p>\n<h2>What</h2>\n<p>知道了为什么会有scope的存在，我们就很容易知道什么叫做scope了．个人认为的话，</p>\n<blockquote>\n<p>scope就是一个地方，用来存放变量的．因此，你可以通过scope来获取变量的值，<br>\n从而对这些变量进行基本的操作．</p>\n</blockquote>\n<h2>How It Works</h2>\n<p>我们先来了解一些编译(compile)理论知识．</p>\n<p>首先，<strong>compile</strong>主要分成３个步骤．</p>\n<ol>\n<li>\n<p>Lexing(Takenizing): 把一个要编译的语句分成一些有意义的taken.<br>\n比如<code>var bar = 2;</code>会被分成<code>var</code>, <code>bar</code>, <code>=</code> <code>2</code>．</p>\n</li>\n<li>\n<p>Parsing: 把所有的taken弄成一棵<em>AST</em>(abstract syntax tree, 抽象语法树)</p>\n</li>\n<li>\n<p>Code Generation: 生成可执行代码</p>\n</li>\n</ol>\n<p><strong>我们需要明确的一点是: JavaScript的代码是&quot;从上到下&quot;,&quot;一句一句&quot;的编译然后就立马执行的.</strong><br>\n(注意我使用了双引号)</p>\n<p>接下来,介绍3位好机油.分别是浏览器的Engine, Compiler, Scope.</p>\n<ul>\n<li>Engine: 负责分配任务,以及执行代码.</li>\n<li>Compiler: 接受Engine传递的任务,编译可执行的代码返回给Engine</li>\n<li>Scope: 存放变量,函数声明等.</li>\n</ul>\n<p>那么,让我们通过一个例子,来看看他们是如何合作的.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Engine will split this statement into 2 parts:</span></div><div class=\"line\"><span class=\"comment\">// `var bar` and `bar = 10`.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> bar = <span class=\"number\">10</span>;</div></pre></td></tr></table></figure>\n<p>Engine: 先把<code>var bar</code>交给Compiler.<br>\nCompiler: 问问Scope有没有声明过<code>bar</code>这个变量.没有的话不管他,否则让Scope声明<code>bar</code>变量.<br>\nScope: 我这里没有<code>bar</code>, 那我就声明吧.</p>\n<p>Engine: 我要开始执行<code>bar = 10</code>啦.Scope你好,请问你那里有没有<code>bar</code>这个变量?<br>\nScope: 当然!刚才Compiler叫我声明了.<br>\nEngine: 既然你<code>bar</code>的话,那我就把<code>10</code>赋值给他咯.</p>\n<h2>Do It</h2>\n<p>通过Scope来查找变量,函数声明等等的过程叫做<code>identifier looking up</code>.</p>\n<p>下面，我们通过一个例子，来看看怎么一回事．</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> bar;</div><div class=\"line\">bar = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(bar);</div></pre></td></tr></table></figure>\n<p>在第２行代码中，我们引用了<code>bar</code>这个变量，并给他赋值了<code>２</code>.<br>\n此时，这种引用就叫做<strong>LHS</strong>(left hand side),也就是等号的右边．</p>\n<p>在第３行中，我们引用了<code>bar</code>这个变量的值．此时，这个引用叫做<strong>RHS</strong>(right hand side)，<br>\n也就是等号的右边，准确来说是等号的非左边．</p>\n<p>那么，LHS和RHS有什么不同呢？</p>\n<p>LHS只是获取变量,不在乎这个变量对应的值是什么.例子中,我们只想把<code>42</code>赋值给<code>bar</code>.<br>\n还有一种情况也是<code>LHS</code>: 函数的参数.</p>\n<p>RHS是为了获取变量的值!例子中,我们想要的就是把<code>bar</code>这个变量对应的值打印出来.</p>\n<p>RHS如果在scope中找不到这个变量,那么就会报错: <code>Reference Error</code>.而LHS则会给<code>window</code><br>\n这个全局变量添加一个属性,如果在没有使用<code>use strict</code>的情况下.比如:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 'use strict;'</span></div><div class=\"line\">foo = <span class=\"number\">10</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(foo);</div></pre></td></tr></table></figure>\n<p>在上面的例子中,很明显在scope中是找不到<code>foo</code>这个变量的.<br>\n又由于他是LHS,所有就会有<code>window.foo = 10;</code>我们可以通过<code>console.log(window.hasOwnProperty('foo'))</code>来测试一下.</p>\n"},{"title":"有趣的 Nginx","author":"Drake Leung","date":"2016-08-10T16:53:50.000Z","foreword":"如何使用 nginx 来协助前端开发","_content":"\n由于在开发项目的时候用到了 `nginx` ，觉得挺不错的，所以了解了一下。\n\n一个项目的开发环境一般都会分为4个阶段。\n\n- test(local): 本地\n- alpha\n- beta\n- production\n\n每个环境下，前端的域名是不同的，并且调用后台接口的 `url` 也是不同的。假设我们的项目名字叫做 `toon`，并且 root domain 是 `lyyourc.com`，那么就有：\n\n```bash\n# 前端4个环境下的域名\n-  test: toon.test.lyyourc.net\n- alpha: toon.alpha.lyyourc.net\n-  beta: toon.alpha.lyyourc.net\n-  prod: toon.lyyourc.com\n\n# 后台接口\n-  alpha: toon-api.alpha.lyyourc.net\n-   beta: toon-api..beta.lyyourc.net\n-   prod: toon-api.lyyourc.com\n```\n\n那么，在这种情况下，我们应该如何：\n\n> 不同环境下，前端使用不同的域名，访问对应的后台接口呢？\n\n首先，我们要解决**前端怎么使用域名来访问我们的 web 应用**。\n\n最简单的办法当然是**改 hosts** 。应该还有其他办法，比如 [hotel - get local domain in seconds](https://github.com/typicode/hotel) 。\n\n```bash\n# my project - toon\n127.0.0.1 toon.test.lyyourc.net\n```\n\n接下来，我们需要用到 nginx 作为一个 **proxy server** ，把接收到请求转发到对应的后台接口。\n\n如果你还没接触过 nginx 的话，现在就是一个好机会啦。打开 [nginx 的官网](http://nginx.org/en/docs/)，安装，看 [Beginner’s Guide](http://nginx.org/en/docs/beginners_guide.html) 。\n\n下面，修改我们的 `nginx.conf`(OSX: `/usr/local/etc/nginx/`)\n\n```bash\nworker_processes  7;\nevents { worker_connections 256; }\n\nhttp {\n  server {\n    # 监听 80 端口\n    listen 80; \n    \n    # 域名符合：toon.*.lyyourc.net 等\n    server_name ~^toon\\.(.*\\.)?(lyyourc)\\.net$;\n\n    location / {\n      root \"/Users/drake/Projects/demo/fun/nginx\";\n    }\n\n    # 只要含有 `/api/` 请求，都转发\n    location /api/ {\n      proxy_pass http://toon-api.alpha.lyyourc.net;\n    }\n  }\n}\n```\n\n然后运行：`sudo nginx -s reload`，重新读取 nginx 的配置文件。如果失败的话，会有相关的提示信息。比如下面少写了 `event` 这个指令：\n\n```bash\nnginx: [emerg] no \"events\" section in configuration\n```\n\n在上面的 `nginx.conf` 中，我们定义了：\n\n> 只要请求是来自 80 端口，域名符合，URL中包含了 `/api/` 的，我们都转发到 `http://toon-api.alpha.lyyourc.net` ，如果为 `/` 的话，直接读取 `/Users/drake/Projects/demo/fun/nginx` 目录下的 `index.html` 。\n\n然后，我们前端需要做的是：**根据当前的域名，请求对应的后台接口。**\n\n- 写一个配置文件\n\n```javascript\n// host.js\nexport const apiHost = () => {\n  const items = window.location.hostname.split('.')\n  const env = items[1]\n\n  switch (env) {\n    case 'test': // 本地开发环境 => nginx\n      return ''\n\n    case 'alpha':\n      return '//toon-api.alpha.lyyourc.net'\n\n    case 'beta':\n      return '//toon-api.beta.lyyourc.net'\n\n    default:\n      return '//toon-api.lyyourc.com'\n  }\n}\n```\n\n- 每次请求的时候都带上这个 host :\n\n```javascript\nimport { apiHost } from 'host.js'\n\nfetch(`${apiHot()}/api/heros/`)\n  .then(res => res.json())\n```\n\n这时就有：\n\n- 前端域名为 `toon.test.lyyourc.net` 的时候\n- `apiHost` 返回空字符串 `''` \n- 访问后台接口的 URL 为 `toon.test.lyyourc.net/api/xx`\n- 在 `/etc/hosts` 匹配了这个 URL ，转到 `127.0.0.1`\n- Nginx 接收，转发到 `http://toon-api.alpha.lyyourc.net` \n\n\n为什么不直接在 `host.js` 里面返回 `http://toon-api.alpha.lyyourc.net` 呢？原因有2个我认为：1个是浏览器的同源策略而产生的**跨域问题**，另1个是当我们想要测试任何环境下的后台接口，我们只需要改 `nginx.conf` 里面的 `proxy_pass` 就好了。\n\n综上，**不知道是否还有更好的解决办法呢？**\n\n其实 nginx 还可以做很多事情啦。比如一个服务器上轻松地跑多个 App ，还有反代 google ，配置 HTTPS 等等。\n\nOh~ My Nginx!!","source":"_posts/Oh-My-Nginx.md","raw":"---\ntitle: 有趣的 Nginx\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-08-11 00:53:50\nforeword: 如何使用 nginx 来协助前端开发\n---\n\n由于在开发项目的时候用到了 `nginx` ，觉得挺不错的，所以了解了一下。\n\n一个项目的开发环境一般都会分为4个阶段。\n\n- test(local): 本地\n- alpha\n- beta\n- production\n\n每个环境下，前端的域名是不同的，并且调用后台接口的 `url` 也是不同的。假设我们的项目名字叫做 `toon`，并且 root domain 是 `lyyourc.com`，那么就有：\n\n```bash\n# 前端4个环境下的域名\n-  test: toon.test.lyyourc.net\n- alpha: toon.alpha.lyyourc.net\n-  beta: toon.alpha.lyyourc.net\n-  prod: toon.lyyourc.com\n\n# 后台接口\n-  alpha: toon-api.alpha.lyyourc.net\n-   beta: toon-api..beta.lyyourc.net\n-   prod: toon-api.lyyourc.com\n```\n\n那么，在这种情况下，我们应该如何：\n\n> 不同环境下，前端使用不同的域名，访问对应的后台接口呢？\n\n首先，我们要解决**前端怎么使用域名来访问我们的 web 应用**。\n\n最简单的办法当然是**改 hosts** 。应该还有其他办法，比如 [hotel - get local domain in seconds](https://github.com/typicode/hotel) 。\n\n```bash\n# my project - toon\n127.0.0.1 toon.test.lyyourc.net\n```\n\n接下来，我们需要用到 nginx 作为一个 **proxy server** ，把接收到请求转发到对应的后台接口。\n\n如果你还没接触过 nginx 的话，现在就是一个好机会啦。打开 [nginx 的官网](http://nginx.org/en/docs/)，安装，看 [Beginner’s Guide](http://nginx.org/en/docs/beginners_guide.html) 。\n\n下面，修改我们的 `nginx.conf`(OSX: `/usr/local/etc/nginx/`)\n\n```bash\nworker_processes  7;\nevents { worker_connections 256; }\n\nhttp {\n  server {\n    # 监听 80 端口\n    listen 80; \n    \n    # 域名符合：toon.*.lyyourc.net 等\n    server_name ~^toon\\.(.*\\.)?(lyyourc)\\.net$;\n\n    location / {\n      root \"/Users/drake/Projects/demo/fun/nginx\";\n    }\n\n    # 只要含有 `/api/` 请求，都转发\n    location /api/ {\n      proxy_pass http://toon-api.alpha.lyyourc.net;\n    }\n  }\n}\n```\n\n然后运行：`sudo nginx -s reload`，重新读取 nginx 的配置文件。如果失败的话，会有相关的提示信息。比如下面少写了 `event` 这个指令：\n\n```bash\nnginx: [emerg] no \"events\" section in configuration\n```\n\n在上面的 `nginx.conf` 中，我们定义了：\n\n> 只要请求是来自 80 端口，域名符合，URL中包含了 `/api/` 的，我们都转发到 `http://toon-api.alpha.lyyourc.net` ，如果为 `/` 的话，直接读取 `/Users/drake/Projects/demo/fun/nginx` 目录下的 `index.html` 。\n\n然后，我们前端需要做的是：**根据当前的域名，请求对应的后台接口。**\n\n- 写一个配置文件\n\n```javascript\n// host.js\nexport const apiHost = () => {\n  const items = window.location.hostname.split('.')\n  const env = items[1]\n\n  switch (env) {\n    case 'test': // 本地开发环境 => nginx\n      return ''\n\n    case 'alpha':\n      return '//toon-api.alpha.lyyourc.net'\n\n    case 'beta':\n      return '//toon-api.beta.lyyourc.net'\n\n    default:\n      return '//toon-api.lyyourc.com'\n  }\n}\n```\n\n- 每次请求的时候都带上这个 host :\n\n```javascript\nimport { apiHost } from 'host.js'\n\nfetch(`${apiHot()}/api/heros/`)\n  .then(res => res.json())\n```\n\n这时就有：\n\n- 前端域名为 `toon.test.lyyourc.net` 的时候\n- `apiHost` 返回空字符串 `''` \n- 访问后台接口的 URL 为 `toon.test.lyyourc.net/api/xx`\n- 在 `/etc/hosts` 匹配了这个 URL ，转到 `127.0.0.1`\n- Nginx 接收，转发到 `http://toon-api.alpha.lyyourc.net` \n\n\n为什么不直接在 `host.js` 里面返回 `http://toon-api.alpha.lyyourc.net` 呢？原因有2个我认为：1个是浏览器的同源策略而产生的**跨域问题**，另1个是当我们想要测试任何环境下的后台接口，我们只需要改 `nginx.conf` 里面的 `proxy_pass` 就好了。\n\n综上，**不知道是否还有更好的解决办法呢？**\n\n其实 nginx 还可以做很多事情啦。比如一个服务器上轻松地跑多个 App ，还有反代 google ，配置 HTTPS 等等。\n\nOh~ My Nginx!!","slug":"Oh-My-Nginx","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742zn000q37rqwljwuea5","content":"<p>由于在开发项目的时候用到了 <code>nginx</code> ，觉得挺不错的，所以了解了一下。</p>\n<p>一个项目的开发环境一般都会分为4个阶段。</p>\n<ul>\n<li>test(local): 本地</li>\n<li>alpha</li>\n<li>beta</li>\n<li>production</li>\n</ul>\n<p>每个环境下，前端的域名是不同的，并且调用后台接口的 <code>url</code> 也是不同的。假设我们的项目名字叫做 <code>toon</code>，并且 root domain 是 <code>lyyourc.com</code>，那么就有：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># 前端4个环境下的域名</span></div><div class=\"line\">-  <span class=\"built_in\">test</span>: toon.test.lyyourc.net</div><div class=\"line\">- alpha: toon.alpha.lyyourc.net</div><div class=\"line\">-  beta: toon.alpha.lyyourc.net</div><div class=\"line\">-  prod: toon.lyyourc.com</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 后台接口</span></div><div class=\"line\">-  alpha: toon-api.alpha.lyyourc.net</div><div class=\"line\">-   beta: toon-api..beta.lyyourc.net</div><div class=\"line\">-   prod: toon-api.lyyourc.com</div></pre></td></tr></table></figure>\n<p>那么，在这种情况下，我们应该如何：</p>\n<blockquote>\n<p>不同环境下，前端使用不同的域名，访问对应的后台接口呢？</p>\n</blockquote>\n<p>首先，我们要解决<strong>前端怎么使用域名来访问我们的 web 应用</strong>。</p>\n<p>最简单的办法当然是<strong>改 hosts</strong> 。应该还有其他办法，比如 <a href=\"https://github.com/typicode/hotel\" target=\"_blank\" rel=\"external\">hotel - get local domain in seconds</a> 。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># my project - toon</span></div><div class=\"line\">127.0.0.1 toon.test.lyyourc.net</div></pre></td></tr></table></figure>\n<p>接下来，我们需要用到 nginx 作为一个 <strong>proxy server</strong> ，把接收到请求转发到对应的后台接口。</p>\n<p>如果你还没接触过 nginx 的话，现在就是一个好机会啦。打开 <a href=\"http://nginx.org/en/docs/\" target=\"_blank\" rel=\"external\">nginx 的官网</a>，安装，看 <a href=\"http://nginx.org/en/docs/beginners_guide.html\" target=\"_blank\" rel=\"external\">Beginner’s Guide</a> 。</p>\n<p>下面，修改我们的 <code>nginx.conf</code>(OSX: <code>/usr/local/etc/nginx/</code>)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">worker_processes  7;</div><div class=\"line\">events &#123; worker_connections 256; &#125;</div><div class=\"line\"></div><div class=\"line\">http &#123;</div><div class=\"line\">  server &#123;</div><div class=\"line\">    <span class=\"comment\"># 监听 80 端口</span></div><div class=\"line\">    listen 80; </div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\"># 域名符合：toon.*.lyyourc.net 等</span></div><div class=\"line\">    server_name ~^toon\\.(.*\\.)?(lyyourc)\\.net$;</div><div class=\"line\"></div><div class=\"line\">    location / &#123;</div><div class=\"line\">      root <span class=\"string\">\"/Users/drake/Projects/demo/fun/nginx\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># 只要含有 `/api/` 请求，都转发</span></div><div class=\"line\">    location /api/ &#123;</div><div class=\"line\">      proxy_pass http://toon-api.alpha.lyyourc.net;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后运行：<code>sudo nginx -s reload</code>，重新读取 nginx 的配置文件。如果失败的话，会有相关的提示信息。比如下面少写了 <code>event</code> 这个指令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">nginx: [emerg] no <span class=\"string\">\"events\"</span> section <span class=\"keyword\">in</span> configuration</div></pre></td></tr></table></figure>\n<p>在上面的 <code>nginx.conf</code> 中，我们定义了：</p>\n<blockquote>\n<p>只要请求是来自 80 端口，域名符合，URL中包含了 <code>/api/</code> 的，我们都转发到 <code>http://toon-api.alpha.lyyourc.net</code> ，如果为 <code>/</code> 的话，直接读取 <code>/Users/drake/Projects/demo/fun/nginx</code> 目录下的 <code>index.html</code> 。</p>\n</blockquote>\n<p>然后，我们前端需要做的是：<strong>根据当前的域名，请求对应的后台接口。</strong></p>\n<ul>\n<li>写一个配置文件</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// host.js</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> apiHost = () =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> items = <span class=\"built_in\">window</span>.location.hostname.split(<span class=\"string\">'.'</span>)</div><div class=\"line\">  <span class=\"keyword\">const</span> env = items[<span class=\"number\">1</span>]</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">switch</span> (env) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'test'</span>: <span class=\"comment\">// 本地开发环境 =&gt; nginx</span></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">''</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'alpha'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'//toon-api.alpha.lyyourc.net'</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'beta'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'//toon-api.beta.lyyourc.net'</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">default</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'//toon-api.lyyourc.com'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li>每次请求的时候都带上这个 host :</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; apiHost &#125; <span class=\"keyword\">from</span> <span class=\"string\">'host.js'</span></div><div class=\"line\"></div><div class=\"line\">fetch(<span class=\"string\">`<span class=\"subst\">$&#123;apiHot()&#125;</span>/api/heros/`</span>)</div><div class=\"line\">  .then(res =&gt; res.json())</div></pre></td></tr></table></figure>\n<p>这时就有：</p>\n<ul>\n<li>前端域名为 <code>toon.test.lyyourc.net</code> 的时候</li>\n<li><code>apiHost</code> 返回空字符串 <code>''</code></li>\n<li>访问后台接口的 URL 为 <code>toon.test.lyyourc.net/api/xx</code></li>\n<li>在 <code>/etc/hosts</code> 匹配了这个 URL ，转到 <code>127.0.0.1</code></li>\n<li>Nginx 接收，转发到 <code>http://toon-api.alpha.lyyourc.net</code></li>\n</ul>\n<p>为什么不直接在 <code>host.js</code> 里面返回 <code>http://toon-api.alpha.lyyourc.net</code> 呢？原因有2个我认为：1个是浏览器的同源策略而产生的<strong>跨域问题</strong>，另1个是当我们想要测试任何环境下的后台接口，我们只需要改 <code>nginx.conf</code> 里面的 <code>proxy_pass</code> 就好了。</p>\n<p>综上，<strong>不知道是否还有更好的解决办法呢？</strong></p>\n<p>其实 nginx 还可以做很多事情啦。比如一个服务器上轻松地跑多个 App ，还有反代 google ，配置 HTTPS 等等。</p>\n<p>Oh~ My Nginx!!</p>\n","excerpt":"","more":"<p>由于在开发项目的时候用到了 <code>nginx</code> ，觉得挺不错的，所以了解了一下。</p>\n<p>一个项目的开发环境一般都会分为4个阶段。</p>\n<ul>\n<li>test(local): 本地</li>\n<li>alpha</li>\n<li>beta</li>\n<li>production</li>\n</ul>\n<p>每个环境下，前端的域名是不同的，并且调用后台接口的 <code>url</code> 也是不同的。假设我们的项目名字叫做 <code>toon</code>，并且 root domain 是 <code>lyyourc.com</code>，那么就有：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># 前端4个环境下的域名</span></div><div class=\"line\">-  <span class=\"built_in\">test</span>: toon.test.lyyourc.net</div><div class=\"line\">- alpha: toon.alpha.lyyourc.net</div><div class=\"line\">-  beta: toon.alpha.lyyourc.net</div><div class=\"line\">-  prod: toon.lyyourc.com</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 后台接口</span></div><div class=\"line\">-  alpha: toon-api.alpha.lyyourc.net</div><div class=\"line\">-   beta: toon-api..beta.lyyourc.net</div><div class=\"line\">-   prod: toon-api.lyyourc.com</div></pre></td></tr></table></figure>\n<p>那么，在这种情况下，我们应该如何：</p>\n<blockquote>\n<p>不同环境下，前端使用不同的域名，访问对应的后台接口呢？</p>\n</blockquote>\n<p>首先，我们要解决<strong>前端怎么使用域名来访问我们的 web 应用</strong>。</p>\n<p>最简单的办法当然是<strong>改 hosts</strong> 。应该还有其他办法，比如 <a href=\"https://github.com/typicode/hotel\">hotel - get local domain in seconds</a> 。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># my project - toon</span></div><div class=\"line\">127.0.0.1 toon.test.lyyourc.net</div></pre></td></tr></table></figure>\n<p>接下来，我们需要用到 nginx 作为一个 <strong>proxy server</strong> ，把接收到请求转发到对应的后台接口。</p>\n<p>如果你还没接触过 nginx 的话，现在就是一个好机会啦。打开 <a href=\"http://nginx.org/en/docs/\">nginx 的官网</a>，安装，看 <a href=\"http://nginx.org/en/docs/beginners_guide.html\">Beginner’s Guide</a> 。</p>\n<p>下面，修改我们的 <code>nginx.conf</code>(OSX: <code>/usr/local/etc/nginx/</code>)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">worker_processes  7;</div><div class=\"line\">events &#123; worker_connections 256; &#125;</div><div class=\"line\"></div><div class=\"line\">http &#123;</div><div class=\"line\">  server &#123;</div><div class=\"line\">    <span class=\"comment\"># 监听 80 端口</span></div><div class=\"line\">    listen 80; </div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\"># 域名符合：toon.*.lyyourc.net 等</span></div><div class=\"line\">    server_name ~^toon\\.(.*\\.)?(lyyourc)\\.net$;</div><div class=\"line\"></div><div class=\"line\">    location / &#123;</div><div class=\"line\">      root <span class=\"string\">\"/Users/drake/Projects/demo/fun/nginx\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># 只要含有 `/api/` 请求，都转发</span></div><div class=\"line\">    location /api/ &#123;</div><div class=\"line\">      proxy_pass http://toon-api.alpha.lyyourc.net;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后运行：<code>sudo nginx -s reload</code>，重新读取 nginx 的配置文件。如果失败的话，会有相关的提示信息。比如下面少写了 <code>event</code> 这个指令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">nginx: [emerg] no <span class=\"string\">\"events\"</span> section <span class=\"keyword\">in</span> configuration</div></pre></td></tr></table></figure>\n<p>在上面的 <code>nginx.conf</code> 中，我们定义了：</p>\n<blockquote>\n<p>只要请求是来自 80 端口，域名符合，URL中包含了 <code>/api/</code> 的，我们都转发到 <code>http://toon-api.alpha.lyyourc.net</code> ，如果为 <code>/</code> 的话，直接读取 <code>/Users/drake/Projects/demo/fun/nginx</code> 目录下的 <code>index.html</code> 。</p>\n</blockquote>\n<p>然后，我们前端需要做的是：<strong>根据当前的域名，请求对应的后台接口。</strong></p>\n<ul>\n<li>写一个配置文件</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// host.js</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> apiHost = () =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> items = <span class=\"built_in\">window</span>.location.hostname.split(<span class=\"string\">'.'</span>)</div><div class=\"line\">  <span class=\"keyword\">const</span> env = items[<span class=\"number\">1</span>]</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">switch</span> (env) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'test'</span>: <span class=\"comment\">// 本地开发环境 =&gt; nginx</span></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">''</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'alpha'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'//toon-api.alpha.lyyourc.net'</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'beta'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'//toon-api.beta.lyyourc.net'</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">default</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'//toon-api.lyyourc.com'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li>每次请求的时候都带上这个 host :</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; apiHost &#125; <span class=\"keyword\">from</span> <span class=\"string\">'host.js'</span></div><div class=\"line\"></div><div class=\"line\">fetch(<span class=\"string\">`<span class=\"subst\">$&#123;apiHot()&#125;</span>/api/heros/`</span>)</div><div class=\"line\">  .then(res =&gt; res.json())</div></pre></td></tr></table></figure>\n<p>这时就有：</p>\n<ul>\n<li>前端域名为 <code>toon.test.lyyourc.net</code> 的时候</li>\n<li><code>apiHost</code> 返回空字符串 <code>''</code></li>\n<li>访问后台接口的 URL 为 <code>toon.test.lyyourc.net/api/xx</code></li>\n<li>在 <code>/etc/hosts</code> 匹配了这个 URL ，转到 <code>127.0.0.1</code></li>\n<li>Nginx 接收，转发到 <code>http://toon-api.alpha.lyyourc.net</code></li>\n</ul>\n<p>为什么不直接在 <code>host.js</code> 里面返回 <code>http://toon-api.alpha.lyyourc.net</code> 呢？原因有2个我认为：1个是浏览器的同源策略而产生的<strong>跨域问题</strong>，另1个是当我们想要测试任何环境下的后台接口，我们只需要改 <code>nginx.conf</code> 里面的 <code>proxy_pass</code> 就好了。</p>\n<p>综上，<strong>不知道是否还有更好的解决办法呢？</strong></p>\n<p>其实 nginx 还可以做很多事情啦。比如一个服务器上轻松地跑多个 App ，还有反代 google ，配置 HTTPS 等等。</p>\n<p>Oh~ My Nginx!!</p>\n"},{"title":"迷之前端轮子 - 实现 ES2015 Promise","author":"Drake Leung","date":"2016-02-06T09:59:59.000Z","foreword":"为了更好地学习ES2015的Promise，我们不妨来从零开始实现它。","_content":"\n(所有代码请查看[GitHub tiny-promise](https://github.com/DrakeLeung/tiny-promise))\n\n## Why\n在此之前，我一直不明白 *promise* 的workflow是怎样子的。所以在使用的时候，一直很迷惑。比如，\n\n```javascript\nconst p1 = new Promise((resolve, reject) => {\n  setTimeout(() => resolve('success'), 1000)\n})\n\np1.then(msg => console.log(msg))\n```\n\n对于上面的代码，之前的我只知道`resolve`的参数`success`会传给`then`的`msg`。但是为什么呢？而且，我更没想过到底是`then`先执行呢还是`resolve`先执行？这有什么影响？\n\n## How\n那么，就让我们从零开始实现一个promise吧。\n\n\n### Promise Constructor\n根据[docs](http://devdocs.io/javascript/global_objects/promise)，`Promise`这个构造函数只接受一个参数，且这个参数是一个`function`。他有2个参数，分别是`resolve`和`reject`。\n我们要在构造函数里面执行`executor`函数，并且传2个参数给他。\n\n并且，我们构造函数还有一些property，比如他的状态，数据等\n\n```javascript\nfunction TinyPromise (executor) {\n  this.state = promiseState.PENDING\n  this.msg = void 0\n  this.chains = [] // 在`then()`时再讲\n\n  executor(resolve, reject)\n}\n```\n\n接着，定义`resolve`和`reject`这2个传给`executor`的参数\n\n```javascript\nconst resolve = function (value) {\n  let self = this\n\n  if (self.state !== promiseState.FULLFILLED) { // #0\n    self.state = promiseState.FULLFILLED\n    self.msg = value\n  }\n\n  notify(self) // 下面再讲\n}\n```\n\n`#0`为什么要加上`if`判断呢？因为有可能`resolve`并不是异步执行的，所以在调用`then()`的时候，promise的状态已经为`fullfilled`了，所以这个时候`value`是`undefined`的。你可以自己试试。\n\n到底`chains`是什么呢？\n\n### Then\n当调用`then`的时候，他会返回一个promise。重复之，便形成了链(chain)。因此，我们每次都把这个promise放进`this.chains`里面。\n\n```javascript\nthis['then'] = (onFullfilled, onRejected) => {\n  let o = {\n    onFullfilled,\n    onRejected\n  }\n\n  o.promise = new this.constructor((resolve, reject) => {\n    o = Object.assign(o, {resolve, reject})\n  })\n\n  this.chains = [...this.chains, o]\n\n  // doesn't call resolve or reject in executor async-ly\n  if (this.state === promiseState.FULLFILLED) // #0\n    resolve.call(this)\n  else if (this.state === promiseState.REJECTED)\n    reject.call(this)\n\n  return o.promise\n}\n```\n在`#0`，我们为什么需要做这个判断呢？因为在调用`then`时，promise的状态已经不是`pending`了。为什么？看看文本前面的*Why*部分。\n\n注意到，我们把`then`的2个参数，以及`executor`的2个参数都放进了`this.chains`里面。\n\n### Notify\n`notify`函数的作用就是把`then`返回的结果传递到下一个`then`里面去。\n\n```javascript\nconst handleFullfill = (chain, self) => {\n  // 上一个then()的success handler的返回值\n  const result = chain.onFullfilled(self.msg)\n  // 传给下一个then()\n  chain.resolve(result)\n}\n\nexport const notify = self => {\n  self.chains.forEach(chain => {\n    switch (self.state) {\n      case promiseState.FULLFILLED:\n        handleFullfill(chain, self)\n        break\n\n      case promiseState.REJECTED:\n        handleReject(chain, self)\n        break\n    }\n  })\n}\n```\n\n### Promise.resolve\n这个方法`resolve`其实就是`Promise`构造函数的一个property。\n\n```javascript\ndefineProp(TinyPromise, 'resolve', msg =>\n  new TinyPromise((resolve, reject) => {\n    resolve(msg)\n  })\n)\n\nconst defineProp = (\n  obj = {},\n  prop,\n  value\n) => {\n  try {\n    return Object.defineProperties(obj, prop, {\n      value,\n      writable: true,\n      configurable: true,\n      enumerate: true\n    })\n  } catch (e) {\n    obj[prop] = value\n    return obj\n  }\n}\n```\n\n## Wrap up\n实现完以上，你就可以解决本文前面部分*Why*的问题了。\n\n`then`首先会执行，因为`resolve`是异步的(`setTimeout`里面)。这时，我们把`then`的参数放在一个对象数组里面。等到`resolve`调用的时候，我们再去遍历这个数组，调用`then`的参数，并且把返回值传给下一个promise。\n\n如果`resolve`不是异步的话，那么`resolve`比`then`先执行。在`then`执行的时候，状态已经为`fullfilled`了。因此只需要直接调用`notify`函数。\n\nCool~\n","source":"_posts/Promise.md","raw":"---\ntitle: 迷之前端轮子 - 实现 ES2015 Promise\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-02-06 17:59:59\nforeword: 为了更好地学习ES2015的Promise，我们不妨来从零开始实现它。\n---\n\n(所有代码请查看[GitHub tiny-promise](https://github.com/DrakeLeung/tiny-promise))\n\n## Why\n在此之前，我一直不明白 *promise* 的workflow是怎样子的。所以在使用的时候，一直很迷惑。比如，\n\n```javascript\nconst p1 = new Promise((resolve, reject) => {\n  setTimeout(() => resolve('success'), 1000)\n})\n\np1.then(msg => console.log(msg))\n```\n\n对于上面的代码，之前的我只知道`resolve`的参数`success`会传给`then`的`msg`。但是为什么呢？而且，我更没想过到底是`then`先执行呢还是`resolve`先执行？这有什么影响？\n\n## How\n那么，就让我们从零开始实现一个promise吧。\n\n\n### Promise Constructor\n根据[docs](http://devdocs.io/javascript/global_objects/promise)，`Promise`这个构造函数只接受一个参数，且这个参数是一个`function`。他有2个参数，分别是`resolve`和`reject`。\n我们要在构造函数里面执行`executor`函数，并且传2个参数给他。\n\n并且，我们构造函数还有一些property，比如他的状态，数据等\n\n```javascript\nfunction TinyPromise (executor) {\n  this.state = promiseState.PENDING\n  this.msg = void 0\n  this.chains = [] // 在`then()`时再讲\n\n  executor(resolve, reject)\n}\n```\n\n接着，定义`resolve`和`reject`这2个传给`executor`的参数\n\n```javascript\nconst resolve = function (value) {\n  let self = this\n\n  if (self.state !== promiseState.FULLFILLED) { // #0\n    self.state = promiseState.FULLFILLED\n    self.msg = value\n  }\n\n  notify(self) // 下面再讲\n}\n```\n\n`#0`为什么要加上`if`判断呢？因为有可能`resolve`并不是异步执行的，所以在调用`then()`的时候，promise的状态已经为`fullfilled`了，所以这个时候`value`是`undefined`的。你可以自己试试。\n\n到底`chains`是什么呢？\n\n### Then\n当调用`then`的时候，他会返回一个promise。重复之，便形成了链(chain)。因此，我们每次都把这个promise放进`this.chains`里面。\n\n```javascript\nthis['then'] = (onFullfilled, onRejected) => {\n  let o = {\n    onFullfilled,\n    onRejected\n  }\n\n  o.promise = new this.constructor((resolve, reject) => {\n    o = Object.assign(o, {resolve, reject})\n  })\n\n  this.chains = [...this.chains, o]\n\n  // doesn't call resolve or reject in executor async-ly\n  if (this.state === promiseState.FULLFILLED) // #0\n    resolve.call(this)\n  else if (this.state === promiseState.REJECTED)\n    reject.call(this)\n\n  return o.promise\n}\n```\n在`#0`，我们为什么需要做这个判断呢？因为在调用`then`时，promise的状态已经不是`pending`了。为什么？看看文本前面的*Why*部分。\n\n注意到，我们把`then`的2个参数，以及`executor`的2个参数都放进了`this.chains`里面。\n\n### Notify\n`notify`函数的作用就是把`then`返回的结果传递到下一个`then`里面去。\n\n```javascript\nconst handleFullfill = (chain, self) => {\n  // 上一个then()的success handler的返回值\n  const result = chain.onFullfilled(self.msg)\n  // 传给下一个then()\n  chain.resolve(result)\n}\n\nexport const notify = self => {\n  self.chains.forEach(chain => {\n    switch (self.state) {\n      case promiseState.FULLFILLED:\n        handleFullfill(chain, self)\n        break\n\n      case promiseState.REJECTED:\n        handleReject(chain, self)\n        break\n    }\n  })\n}\n```\n\n### Promise.resolve\n这个方法`resolve`其实就是`Promise`构造函数的一个property。\n\n```javascript\ndefineProp(TinyPromise, 'resolve', msg =>\n  new TinyPromise((resolve, reject) => {\n    resolve(msg)\n  })\n)\n\nconst defineProp = (\n  obj = {},\n  prop,\n  value\n) => {\n  try {\n    return Object.defineProperties(obj, prop, {\n      value,\n      writable: true,\n      configurable: true,\n      enumerate: true\n    })\n  } catch (e) {\n    obj[prop] = value\n    return obj\n  }\n}\n```\n\n## Wrap up\n实现完以上，你就可以解决本文前面部分*Why*的问题了。\n\n`then`首先会执行，因为`resolve`是异步的(`setTimeout`里面)。这时，我们把`then`的参数放在一个对象数组里面。等到`resolve`调用的时候，我们再去遍历这个数组，调用`then`的参数，并且把返回值传给下一个promise。\n\n如果`resolve`不是异步的话，那么`resolve`比`then`先执行。在`then`执行的时候，状态已经为`fullfilled`了。因此只需要直接调用`notify`函数。\n\nCool~\n","slug":"Promise","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742zr000t37rqlvy1i8l7","content":"<p>(所有代码请查看<a href=\"https://github.com/DrakeLeung/tiny-promise\" target=\"_blank\" rel=\"external\">GitHub tiny-promise</a>)</p>\n<h2>Why</h2>\n<p>在此之前，我一直不明白 <em>promise</em> 的workflow是怎样子的。所以在使用的时候，一直很迷惑。比如，</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject) =&gt; &#123;</div><div class=\"line\">  setTimeout(() =&gt; resolve(<span class=\"string\">'success'</span>), <span class=\"number\">1000</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">p1.then(msg =&gt; <span class=\"built_in\">console</span>.log(msg))</div></pre></td></tr></table></figure>\n<p>对于上面的代码，之前的我只知道<code>resolve</code>的参数<code>success</code>会传给<code>then</code>的<code>msg</code>。但是为什么呢？而且，我更没想过到底是<code>then</code>先执行呢还是<code>resolve</code>先执行？这有什么影响？</p>\n<h2>How</h2>\n<p>那么，就让我们从零开始实现一个promise吧。</p>\n<h3>Promise Constructor</h3>\n<p>根据<a href=\"http://devdocs.io/javascript/global_objects/promise\" target=\"_blank\" rel=\"external\">docs</a>，<code>Promise</code>这个构造函数只接受一个参数，且这个参数是一个<code>function</code>。他有2个参数，分别是<code>resolve</code>和<code>reject</code>。<br>\n我们要在构造函数里面执行<code>executor</code>函数，并且传2个参数给他。</p>\n<p>并且，我们构造函数还有一些property，比如他的状态，数据等</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">TinyPromise</span> (<span class=\"params\">executor</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.state = promiseState.PENDING</div><div class=\"line\">  <span class=\"keyword\">this</span>.msg = <span class=\"keyword\">void</span> <span class=\"number\">0</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.chains = [] <span class=\"comment\">// 在`then()`时再讲</span></div><div class=\"line\"></div><div class=\"line\">  executor(resolve, reject)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>接着，定义<code>resolve</code>和<code>reject</code>这2个传给<code>executor</code>的参数</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> resolve = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> self = <span class=\"keyword\">this</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span> (self.state !== promiseState.FULLFILLED) &#123; <span class=\"comment\">// #0</span></div><div class=\"line\">    self.state = promiseState.FULLFILLED</div><div class=\"line\">    self.msg = value</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  notify(self) <span class=\"comment\">// 下面再讲</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>为什么要加上<code>if</code>判断呢？因为有可能<code>resolve</code>并不是异步执行的，所以在调用<code>then()</code>的时候，promise的状态已经为<code>fullfilled</code>了，所以这个时候<code>value</code>是<code>undefined</code>的。你可以自己试试。</p>\n<p>到底<code>chains</code>是什么呢？</p>\n<h3>Then</h3>\n<p>当调用<code>then</code>的时候，他会返回一个promise。重复之，便形成了链(chain)。因此，我们每次都把这个promise放进<code>this.chains</code>里面。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">this</span>[<span class=\"string\">'then'</span>] = (onFullfilled, onRejected) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> o = &#123;</div><div class=\"line\">    onFullfilled,</div><div class=\"line\">    onRejected</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  o.promise = <span class=\"keyword\">new</span> <span class=\"keyword\">this</span>.constructor((resolve, reject) =&gt; &#123;</div><div class=\"line\">    o = <span class=\"built_in\">Object</span>.assign(o, &#123;resolve, reject&#125;)</div><div class=\"line\">  &#125;)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.chains = [...this.chains, o]</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// doesn't call resolve or reject in executor async-ly</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.state === promiseState.FULLFILLED) <span class=\"comment\">// #0</span></div><div class=\"line\">    resolve.call(<span class=\"keyword\">this</span>)</div><div class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.state === promiseState.REJECTED)</div><div class=\"line\">    reject.call(<span class=\"keyword\">this</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> o.promise</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在<code>#0</code>，我们为什么需要做这个判断呢？因为在调用<code>then</code>时，promise的状态已经不是<code>pending</code>了。为什么？看看文本前面的<em>Why</em>部分。</p>\n<p>注意到，我们把<code>then</code>的2个参数，以及<code>executor</code>的2个参数都放进了<code>this.chains</code>里面。</p>\n<h3>Notify</h3>\n<p><code>notify</code>函数的作用就是把<code>then</code>返回的结果传递到下一个<code>then</code>里面去。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> handleFullfill = (chain, self) =&gt; &#123;</div><div class=\"line\">  <span class=\"comment\">// 上一个then()的success handler的返回值</span></div><div class=\"line\">  <span class=\"keyword\">const</span> result = chain.onFullfilled(self.msg)</div><div class=\"line\">  <span class=\"comment\">// 传给下一个then()</span></div><div class=\"line\">  chain.resolve(result)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> notify = self =&gt; &#123;</div><div class=\"line\">  self.chains.forEach(chain =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (self.state) &#123;</div><div class=\"line\">      <span class=\"keyword\">case</span> promiseState.FULLFILLED:</div><div class=\"line\">        handleFullfill(chain, self)</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">case</span> promiseState.REJECTED:</div><div class=\"line\">        handleReject(chain, self)</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3>Promise.resolve</h3>\n<p>这个方法<code>resolve</code>其实就是<code>Promise</code>构造函数的一个property。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">defineProp(TinyPromise, <span class=\"string\">'resolve'</span>, msg =&gt;</div><div class=\"line\">  <span class=\"keyword\">new</span> TinyPromise((resolve, reject) =&gt; &#123;</div><div class=\"line\">    resolve(msg)</div><div class=\"line\">  &#125;)</div><div class=\"line\">)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> defineProp = (</div><div class=\"line\">  obj = &#123;&#125;,</div><div class=\"line\">  prop,</div><div class=\"line\">  value</div><div class=\"line\">) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.defineProperties(obj, prop, &#123;</div><div class=\"line\">      value,</div><div class=\"line\">      writable: <span class=\"literal\">true</span>,</div><div class=\"line\">      configurable: <span class=\"literal\">true</span>,</div><div class=\"line\">      enumerate: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125; <span class=\"keyword\">catch</span> (e) &#123;</div><div class=\"line\">    obj[prop] = value</div><div class=\"line\">    <span class=\"keyword\">return</span> obj</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Wrap up</h2>\n<p>实现完以上，你就可以解决本文前面部分<em>Why</em>的问题了。</p>\n<p><code>then</code>首先会执行，因为<code>resolve</code>是异步的(<code>setTimeout</code>里面)。这时，我们把<code>then</code>的参数放在一个对象数组里面。等到<code>resolve</code>调用的时候，我们再去遍历这个数组，调用<code>then</code>的参数，并且把返回值传给下一个promise。</p>\n<p>如果<code>resolve</code>不是异步的话，那么<code>resolve</code>比<code>then</code>先执行。在<code>then</code>执行的时候，状态已经为<code>fullfilled</code>了。因此只需要直接调用<code>notify</code>函数。</p>\n<p>Cool~</p>\n","excerpt":"","more":"<p>(所有代码请查看<a href=\"https://github.com/DrakeLeung/tiny-promise\">GitHub tiny-promise</a>)</p>\n<h2>Why</h2>\n<p>在此之前，我一直不明白 <em>promise</em> 的workflow是怎样子的。所以在使用的时候，一直很迷惑。比如，</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject) =&gt; &#123;</div><div class=\"line\">  setTimeout(() =&gt; resolve(<span class=\"string\">'success'</span>), <span class=\"number\">1000</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">p1.then(msg =&gt; <span class=\"built_in\">console</span>.log(msg))</div></pre></td></tr></table></figure>\n<p>对于上面的代码，之前的我只知道<code>resolve</code>的参数<code>success</code>会传给<code>then</code>的<code>msg</code>。但是为什么呢？而且，我更没想过到底是<code>then</code>先执行呢还是<code>resolve</code>先执行？这有什么影响？</p>\n<h2>How</h2>\n<p>那么，就让我们从零开始实现一个promise吧。</p>\n<h3>Promise Constructor</h3>\n<p>根据<a href=\"http://devdocs.io/javascript/global_objects/promise\">docs</a>，<code>Promise</code>这个构造函数只接受一个参数，且这个参数是一个<code>function</code>。他有2个参数，分别是<code>resolve</code>和<code>reject</code>。<br>\n我们要在构造函数里面执行<code>executor</code>函数，并且传2个参数给他。</p>\n<p>并且，我们构造函数还有一些property，比如他的状态，数据等</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">TinyPromise</span> (<span class=\"params\">executor</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.state = promiseState.PENDING</div><div class=\"line\">  <span class=\"keyword\">this</span>.msg = <span class=\"keyword\">void</span> <span class=\"number\">0</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.chains = [] <span class=\"comment\">// 在`then()`时再讲</span></div><div class=\"line\"></div><div class=\"line\">  executor(resolve, reject)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>接着，定义<code>resolve</code>和<code>reject</code>这2个传给<code>executor</code>的参数</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> resolve = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> self = <span class=\"keyword\">this</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span> (self.state !== promiseState.FULLFILLED) &#123; <span class=\"comment\">// #0</span></div><div class=\"line\">    self.state = promiseState.FULLFILLED</div><div class=\"line\">    self.msg = value</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  notify(self) <span class=\"comment\">// 下面再讲</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code>为什么要加上<code>if</code>判断呢？因为有可能<code>resolve</code>并不是异步执行的，所以在调用<code>then()</code>的时候，promise的状态已经为<code>fullfilled</code>了，所以这个时候<code>value</code>是<code>undefined</code>的。你可以自己试试。</p>\n<p>到底<code>chains</code>是什么呢？</p>\n<h3>Then</h3>\n<p>当调用<code>then</code>的时候，他会返回一个promise。重复之，便形成了链(chain)。因此，我们每次都把这个promise放进<code>this.chains</code>里面。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">this</span>[<span class=\"string\">'then'</span>] = (onFullfilled, onRejected) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> o = &#123;</div><div class=\"line\">    onFullfilled,</div><div class=\"line\">    onRejected</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  o.promise = <span class=\"keyword\">new</span> <span class=\"keyword\">this</span>.constructor((resolve, reject) =&gt; &#123;</div><div class=\"line\">    o = <span class=\"built_in\">Object</span>.assign(o, &#123;resolve, reject&#125;)</div><div class=\"line\">  &#125;)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.chains = [...this.chains, o]</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// doesn't call resolve or reject in executor async-ly</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.state === promiseState.FULLFILLED) <span class=\"comment\">// #0</span></div><div class=\"line\">    resolve.call(<span class=\"keyword\">this</span>)</div><div class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.state === promiseState.REJECTED)</div><div class=\"line\">    reject.call(<span class=\"keyword\">this</span>)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> o.promise</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在<code>#0</code>，我们为什么需要做这个判断呢？因为在调用<code>then</code>时，promise的状态已经不是<code>pending</code>了。为什么？看看文本前面的<em>Why</em>部分。</p>\n<p>注意到，我们把<code>then</code>的2个参数，以及<code>executor</code>的2个参数都放进了<code>this.chains</code>里面。</p>\n<h3>Notify</h3>\n<p><code>notify</code>函数的作用就是把<code>then</code>返回的结果传递到下一个<code>then</code>里面去。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> handleFullfill = (chain, self) =&gt; &#123;</div><div class=\"line\">  <span class=\"comment\">// 上一个then()的success handler的返回值</span></div><div class=\"line\">  <span class=\"keyword\">const</span> result = chain.onFullfilled(self.msg)</div><div class=\"line\">  <span class=\"comment\">// 传给下一个then()</span></div><div class=\"line\">  chain.resolve(result)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> notify = self =&gt; &#123;</div><div class=\"line\">  self.chains.forEach(chain =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (self.state) &#123;</div><div class=\"line\">      <span class=\"keyword\">case</span> promiseState.FULLFILLED:</div><div class=\"line\">        handleFullfill(chain, self)</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">case</span> promiseState.REJECTED:</div><div class=\"line\">        handleReject(chain, self)</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3>Promise.resolve</h3>\n<p>这个方法<code>resolve</code>其实就是<code>Promise</code>构造函数的一个property。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">defineProp(TinyPromise, <span class=\"string\">'resolve'</span>, msg =&gt;</div><div class=\"line\">  <span class=\"keyword\">new</span> TinyPromise((resolve, reject) =&gt; &#123;</div><div class=\"line\">    resolve(msg)</div><div class=\"line\">  &#125;)</div><div class=\"line\">)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> defineProp = (</div><div class=\"line\">  obj = &#123;&#125;,</div><div class=\"line\">  prop,</div><div class=\"line\">  value</div><div class=\"line\">) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.defineProperties(obj, prop, &#123;</div><div class=\"line\">      value,</div><div class=\"line\">      writable: <span class=\"literal\">true</span>,</div><div class=\"line\">      configurable: <span class=\"literal\">true</span>,</div><div class=\"line\">      enumerate: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125; <span class=\"keyword\">catch</span> (e) &#123;</div><div class=\"line\">    obj[prop] = value</div><div class=\"line\">    <span class=\"keyword\">return</span> obj</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Wrap up</h2>\n<p>实现完以上，你就可以解决本文前面部分<em>Why</em>的问题了。</p>\n<p><code>then</code>首先会执行，因为<code>resolve</code>是异步的(<code>setTimeout</code>里面)。这时，我们把<code>then</code>的参数放在一个对象数组里面。等到<code>resolve</code>调用的时候，我们再去遍历这个数组，调用<code>then</code>的参数，并且把返回值传给下一个promise。</p>\n<p>如果<code>resolve</code>不是异步的话，那么<code>resolve</code>比<code>then</code>先执行。在<code>then</code>执行的时候，状态已经为<code>fullfilled</code>了。因此只需要直接调用<code>notify</code>函数。</p>\n<p>Cool~</p>\n"},{"title":"Scope(1) - Nested Scope","author":"Drake Leung","date":"2015-07-09T10:24:19.000Z","foreword":"scope系列的第2篇, 主题是嵌套作用域, 有block scope, function scope等等.","thumbnail":"images/js.png","_content":"\n## What\n*nested scope*就是所谓的嵌套作用域, 顾名思义就是作用域之间具有嵌套的关系.  \n那么, 为什么我们需要的nested scope呢?\n\n## Why\n我们做出一下的假设:\n\n> 从头到尾只有一个socpe, 没有什么多个, 也没有什么嵌套关系.\n\n这样的话, 我们所有的变量声明, 函数声明都会放到这个**唯一的scope**里面去. 那么, 当数量变大的时候, 程序的性能就会降低. 比如我们要在茫茫变量中找出一个小小的变量, 这性能不就降低了吗?\n\n为了改进他, 我们又做出了以下的假设:\n\n> 其实不止一个socpe, 可以有多个scope. 但是scope之间美柚嵌套关系.\n\n很容易看出, 这次的假设比第一次的好多了. 但是问题又来了, 如果2个scope所存放的变量有很多是相同的, 既然是相同的, 那么我们很容易就想到要**复用**他们. 怎么复用呢? 这个时候, 我们就给这些需要复用的scope加上一次嵌套关系:\n\n> 外部的scope嵌套着内部的scope, 内部的scope可以使用外部的scope的变量, 但反之不行!\n\n这样以来, 我们就可以不同scope之间就可以共用相同的变量. 这是极好的~  \n但是, 我们要怎样才可以创建出多个scope呢?\n\n## How\n在JavaScript中, 有3种不同的scope. 分别是**global scope**, **block scope**以及**function scope**.\n\n### Global Scope\nglobal scope(全局作用域)是不需要创建的, 只要你执行JavaScript文件的话, 他就被自动创建.\n\n他是最外层的scope. 也就是说, 他可以嵌套其他作用域, 不可以被其他scope嵌套.\n\n在浏览器环境下, global scope可以看做为`window`这个对象.\n\n### Block Scope\nblock scope(块级作用域)指的是用`{}`(大括号)创建一个scope. 也就是说, `{}`内的变量定义和声明都是属于这个`{}`所创建的scope.\n\n在ES6中, 我们可以使用`let`这个keyword来实现\n\n```javascript\n{\n  let foo = 2;\n  console.log(foo); // 2\n}\nconsole.log(foo); // Reference Error\n```\n\n但是, 在ES6之前呢? 我们要怎样才能创建一个block scope呢? 一个trick就是使用`try-catch`.\n```javascript\ntry {\n  throw 2;\n} catch (foo) {\n  console.log(foo); // 2\n}\nconsole.log(foo);  // Error\n```\n在上面的例子中, `foo`这个keyword只能在`catch`块里面使用. 但是, 这种写法也太丑了. 因此, 在ES6之前可以说是没有block scope的.\n\n## Function Scope\n当执行一个函数的时候, 就会创建一个属于这个函数的作用域. 当执行完这个函数之后, 理论上这个作用域是会被垃圾回收器回收的.\n\n```javascript\nfunction foo () {\n  var a = 42;\n\n  function bar () {\n    console.log(a);\n  }\n}\n```\n在上面的例子中, 一个有3个scope. 分别是global scope > foo > bar(`>`表示嵌套关系).  \nEngine和各个scope之间的对话.\n\nEngine: 你好`bar scope`, 我想要一个`a`的RHS, 请问你有吗?  \nbar scope: 不好意思, 我没有. 你可以去问问我的外层作用域foo scope.  \nEngine: 你好`foo scope`, 请问你有见过`a`吗?  \nfoo scope: 当然! 这就给你.\nEngine: 那太好了. 既然找到的话, 我就不需要再向上层的作用域找了.  \n\n从上面的对话中, 我们可以很容易知道: 当要查找一个变量的时候, 首先会在当前所在的作用域寻找, 如果没有找到的话, 就向上找, 直到global scope. 这个过程其实就叫做**identifier resolution**(或者identifier look-up).\n\n接下来, 我们再来优化一下上面的例子. 例子中的`bar`函数只是为了打印一个`a`, 我们以后再也不会引用到`bar`这个变量名. 但这个变量却污染了foo scope. 有没有办法既可以打印`a`又可以不创建一个变量名呢? 答案就是利用**IIFE**(Immediately invoked function express).\n```javascript\nfunction foo () {\n  var a = 42;\n\n  (function () {\n    console.log(a);\n  })();\n}\n```\n首先, 用`()`包住整个function body就表明了这个是一个expression, 接着用`()`来调用这个function expression.\n对于IIFE还有其他写法, 你可以选择自己喜欢的口味~\n\nIIFE是很常见的, 因为他在调用一个函数的同时也**避免了作用域的污染**. 这是非常值得我们学习的.\n\n## Summary\n总的来说, nested scope是为了可以共用作用域而产生的, 也就是说内部的scope可以访问外部scope. 而JavaScript有3种作用域global scope, block scope以及function scope. 其中, function scope是最主要的, 并且要懂得其中的IIFE.\n","source":"_posts/Scope-1-Nested-Scope.md","raw":"title: Scope(1) - Nested Scope\nauthor: Drake Leung\ndate: 2015-07-09 18:24:19\ntags: [scope, 作用域]\ncategories: JavaScript\nforeword:\n  scope系列的第2篇, 主题是嵌套作用域, 有block scope, function scope等等.\nthumbnail: images/js.png\n---\n\n## What\n*nested scope*就是所谓的嵌套作用域, 顾名思义就是作用域之间具有嵌套的关系.  \n那么, 为什么我们需要的nested scope呢?\n\n## Why\n我们做出一下的假设:\n\n> 从头到尾只有一个socpe, 没有什么多个, 也没有什么嵌套关系.\n\n这样的话, 我们所有的变量声明, 函数声明都会放到这个**唯一的scope**里面去. 那么, 当数量变大的时候, 程序的性能就会降低. 比如我们要在茫茫变量中找出一个小小的变量, 这性能不就降低了吗?\n\n为了改进他, 我们又做出了以下的假设:\n\n> 其实不止一个socpe, 可以有多个scope. 但是scope之间美柚嵌套关系.\n\n很容易看出, 这次的假设比第一次的好多了. 但是问题又来了, 如果2个scope所存放的变量有很多是相同的, 既然是相同的, 那么我们很容易就想到要**复用**他们. 怎么复用呢? 这个时候, 我们就给这些需要复用的scope加上一次嵌套关系:\n\n> 外部的scope嵌套着内部的scope, 内部的scope可以使用外部的scope的变量, 但反之不行!\n\n这样以来, 我们就可以不同scope之间就可以共用相同的变量. 这是极好的~  \n但是, 我们要怎样才可以创建出多个scope呢?\n\n## How\n在JavaScript中, 有3种不同的scope. 分别是**global scope**, **block scope**以及**function scope**.\n\n### Global Scope\nglobal scope(全局作用域)是不需要创建的, 只要你执行JavaScript文件的话, 他就被自动创建.\n\n他是最外层的scope. 也就是说, 他可以嵌套其他作用域, 不可以被其他scope嵌套.\n\n在浏览器环境下, global scope可以看做为`window`这个对象.\n\n### Block Scope\nblock scope(块级作用域)指的是用`{}`(大括号)创建一个scope. 也就是说, `{}`内的变量定义和声明都是属于这个`{}`所创建的scope.\n\n在ES6中, 我们可以使用`let`这个keyword来实现\n\n```javascript\n{\n  let foo = 2;\n  console.log(foo); // 2\n}\nconsole.log(foo); // Reference Error\n```\n\n但是, 在ES6之前呢? 我们要怎样才能创建一个block scope呢? 一个trick就是使用`try-catch`.\n```javascript\ntry {\n  throw 2;\n} catch (foo) {\n  console.log(foo); // 2\n}\nconsole.log(foo);  // Error\n```\n在上面的例子中, `foo`这个keyword只能在`catch`块里面使用. 但是, 这种写法也太丑了. 因此, 在ES6之前可以说是没有block scope的.\n\n## Function Scope\n当执行一个函数的时候, 就会创建一个属于这个函数的作用域. 当执行完这个函数之后, 理论上这个作用域是会被垃圾回收器回收的.\n\n```javascript\nfunction foo () {\n  var a = 42;\n\n  function bar () {\n    console.log(a);\n  }\n}\n```\n在上面的例子中, 一个有3个scope. 分别是global scope > foo > bar(`>`表示嵌套关系).  \nEngine和各个scope之间的对话.\n\nEngine: 你好`bar scope`, 我想要一个`a`的RHS, 请问你有吗?  \nbar scope: 不好意思, 我没有. 你可以去问问我的外层作用域foo scope.  \nEngine: 你好`foo scope`, 请问你有见过`a`吗?  \nfoo scope: 当然! 这就给你.\nEngine: 那太好了. 既然找到的话, 我就不需要再向上层的作用域找了.  \n\n从上面的对话中, 我们可以很容易知道: 当要查找一个变量的时候, 首先会在当前所在的作用域寻找, 如果没有找到的话, 就向上找, 直到global scope. 这个过程其实就叫做**identifier resolution**(或者identifier look-up).\n\n接下来, 我们再来优化一下上面的例子. 例子中的`bar`函数只是为了打印一个`a`, 我们以后再也不会引用到`bar`这个变量名. 但这个变量却污染了foo scope. 有没有办法既可以打印`a`又可以不创建一个变量名呢? 答案就是利用**IIFE**(Immediately invoked function express).\n```javascript\nfunction foo () {\n  var a = 42;\n\n  (function () {\n    console.log(a);\n  })();\n}\n```\n首先, 用`()`包住整个function body就表明了这个是一个expression, 接着用`()`来调用这个function expression.\n对于IIFE还有其他写法, 你可以选择自己喜欢的口味~\n\nIIFE是很常见的, 因为他在调用一个函数的同时也**避免了作用域的污染**. 这是非常值得我们学习的.\n\n## Summary\n总的来说, nested scope是为了可以共用作用域而产生的, 也就是说内部的scope可以访问外部scope. 而JavaScript有3种作用域global scope, block scope以及function scope. 其中, function scope是最主要的, 并且要懂得其中的IIFE.\n","slug":"Scope-1-Nested-Scope","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742zt000v37rqr8qbxyj9","content":"<h2>What</h2>\n<p><em>nested scope</em>就是所谓的嵌套作用域, 顾名思义就是作用域之间具有嵌套的关系.<br>\n那么, 为什么我们需要的nested scope呢?</p>\n<h2>Why</h2>\n<p>我们做出一下的假设:</p>\n<blockquote>\n<p>从头到尾只有一个socpe, 没有什么多个, 也没有什么嵌套关系.</p>\n</blockquote>\n<p>这样的话, 我们所有的变量声明, 函数声明都会放到这个<strong>唯一的scope</strong>里面去. 那么, 当数量变大的时候, 程序的性能就会降低. 比如我们要在茫茫变量中找出一个小小的变量, 这性能不就降低了吗?</p>\n<p>为了改进他, 我们又做出了以下的假设:</p>\n<blockquote>\n<p>其实不止一个socpe, 可以有多个scope. 但是scope之间美柚嵌套关系.</p>\n</blockquote>\n<p>很容易看出, 这次的假设比第一次的好多了. 但是问题又来了, 如果2个scope所存放的变量有很多是相同的, 既然是相同的, 那么我们很容易就想到要<strong>复用</strong>他们. 怎么复用呢? 这个时候, 我们就给这些需要复用的scope加上一次嵌套关系:</p>\n<blockquote>\n<p>外部的scope嵌套着内部的scope, 内部的scope可以使用外部的scope的变量, 但反之不行!</p>\n</blockquote>\n<p>这样以来, 我们就可以不同scope之间就可以共用相同的变量. 这是极好的~<br>\n但是, 我们要怎样才可以创建出多个scope呢?</p>\n<h2>How</h2>\n<p>在JavaScript中, 有3种不同的scope. 分别是<strong>global scope</strong>, <strong>block scope</strong>以及<strong>function scope</strong>.</p>\n<h3>Global Scope</h3>\n<p>global scope(全局作用域)是不需要创建的, 只要你执行JavaScript文件的话, 他就被自动创建.</p>\n<p>他是最外层的scope. 也就是说, 他可以嵌套其他作用域, 不可以被其他scope嵌套.</p>\n<p>在浏览器环境下, global scope可以看做为<code>window</code>这个对象.</p>\n<h3>Block Scope</h3>\n<p>block scope(块级作用域)指的是用<code>{}</code>(大括号)创建一个scope. 也就是说, <code>{}</code>内的变量定义和声明都是属于这个<code>{}</code>所创建的scope.</p>\n<p>在ES6中, 我们可以使用<code>let</code>这个keyword来实现</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> foo = <span class=\"number\">2</span>;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(foo); <span class=\"comment\">// 2</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(foo); <span class=\"comment\">// Reference Error</span></div></pre></td></tr></table></figure>\n<p>但是, 在ES6之前呢? 我们要怎样才能创建一个block scope呢? 一个trick就是使用<code>try-catch</code>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">try</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"number\">2</span>;</div><div class=\"line\">&#125; <span class=\"keyword\">catch</span> (foo) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(foo); <span class=\"comment\">// 2</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(foo);  <span class=\"comment\">// Error</span></div></pre></td></tr></table></figure>\n<p>在上面的例子中, <code>foo</code>这个keyword只能在<code>catch</code>块里面使用. 但是, 这种写法也太丑了. 因此, 在ES6之前可以说是没有block scope的.</p>\n<h2>Function Scope</h2>\n<p>当执行一个函数的时候, 就会创建一个属于这个函数的作用域. 当执行完这个函数之后, 理论上这个作用域是会被垃圾回收器回收的.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(a);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在上面的例子中, 一个有3个scope. 分别是global scope &gt; foo &gt; bar(<code>&gt;</code>表示嵌套关系).<br>\nEngine和各个scope之间的对话.</p>\n<p>Engine: 你好<code>bar scope</code>, 我想要一个<code>a</code>的RHS, 请问你有吗?<br>\nbar scope: 不好意思, 我没有. 你可以去问问我的外层作用域foo scope.<br>\nEngine: 你好<code>foo scope</code>, 请问你有见过<code>a</code>吗?<br>\nfoo scope: 当然! 这就给你.<br>\nEngine: 那太好了. 既然找到的话, 我就不需要再向上层的作用域找了.</p>\n<p>从上面的对话中, 我们可以很容易知道: 当要查找一个变量的时候, 首先会在当前所在的作用域寻找, 如果没有找到的话, 就向上找, 直到global scope. 这个过程其实就叫做<strong>identifier resolution</strong>(或者identifier look-up).</p>\n<p>接下来, 我们再来优化一下上面的例子. 例子中的<code>bar</code>函数只是为了打印一个<code>a</code>, 我们以后再也不会引用到<code>bar</code>这个变量名. 但这个变量却污染了foo scope. 有没有办法既可以打印<code>a</code>又可以不创建一个变量名呢? 答案就是利用<strong>IIFE</strong>(Immediately invoked function express).</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">  (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(a);</div><div class=\"line\">  &#125;)();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>首先, 用<code>()</code>包住整个function body就表明了这个是一个expression, 接着用<code>()</code>来调用这个function expression.<br>\n对于IIFE还有其他写法, 你可以选择自己喜欢的口味~</p>\n<p>IIFE是很常见的, 因为他在调用一个函数的同时也<strong>避免了作用域的污染</strong>. 这是非常值得我们学习的.</p>\n<h2>Summary</h2>\n<p>总的来说, nested scope是为了可以共用作用域而产生的, 也就是说内部的scope可以访问外部scope. 而JavaScript有3种作用域global scope, block scope以及function scope. 其中, function scope是最主要的, 并且要懂得其中的IIFE.</p>\n","excerpt":"","more":"<h2>What</h2>\n<p><em>nested scope</em>就是所谓的嵌套作用域, 顾名思义就是作用域之间具有嵌套的关系.<br>\n那么, 为什么我们需要的nested scope呢?</p>\n<h2>Why</h2>\n<p>我们做出一下的假设:</p>\n<blockquote>\n<p>从头到尾只有一个socpe, 没有什么多个, 也没有什么嵌套关系.</p>\n</blockquote>\n<p>这样的话, 我们所有的变量声明, 函数声明都会放到这个<strong>唯一的scope</strong>里面去. 那么, 当数量变大的时候, 程序的性能就会降低. 比如我们要在茫茫变量中找出一个小小的变量, 这性能不就降低了吗?</p>\n<p>为了改进他, 我们又做出了以下的假设:</p>\n<blockquote>\n<p>其实不止一个socpe, 可以有多个scope. 但是scope之间美柚嵌套关系.</p>\n</blockquote>\n<p>很容易看出, 这次的假设比第一次的好多了. 但是问题又来了, 如果2个scope所存放的变量有很多是相同的, 既然是相同的, 那么我们很容易就想到要<strong>复用</strong>他们. 怎么复用呢? 这个时候, 我们就给这些需要复用的scope加上一次嵌套关系:</p>\n<blockquote>\n<p>外部的scope嵌套着内部的scope, 内部的scope可以使用外部的scope的变量, 但反之不行!</p>\n</blockquote>\n<p>这样以来, 我们就可以不同scope之间就可以共用相同的变量. 这是极好的~<br>\n但是, 我们要怎样才可以创建出多个scope呢?</p>\n<h2>How</h2>\n<p>在JavaScript中, 有3种不同的scope. 分别是<strong>global scope</strong>, <strong>block scope</strong>以及<strong>function scope</strong>.</p>\n<h3>Global Scope</h3>\n<p>global scope(全局作用域)是不需要创建的, 只要你执行JavaScript文件的话, 他就被自动创建.</p>\n<p>他是最外层的scope. 也就是说, 他可以嵌套其他作用域, 不可以被其他scope嵌套.</p>\n<p>在浏览器环境下, global scope可以看做为<code>window</code>这个对象.</p>\n<h3>Block Scope</h3>\n<p>block scope(块级作用域)指的是用<code>{}</code>(大括号)创建一个scope. 也就是说, <code>{}</code>内的变量定义和声明都是属于这个<code>{}</code>所创建的scope.</p>\n<p>在ES6中, 我们可以使用<code>let</code>这个keyword来实现</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> foo = <span class=\"number\">2</span>;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(foo); <span class=\"comment\">// 2</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(foo); <span class=\"comment\">// Reference Error</span></div></pre></td></tr></table></figure>\n<p>但是, 在ES6之前呢? 我们要怎样才能创建一个block scope呢? 一个trick就是使用<code>try-catch</code>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">try</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"number\">2</span>;</div><div class=\"line\">&#125; <span class=\"keyword\">catch</span> (foo) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(foo); <span class=\"comment\">// 2</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(foo);  <span class=\"comment\">// Error</span></div></pre></td></tr></table></figure>\n<p>在上面的例子中, <code>foo</code>这个keyword只能在<code>catch</code>块里面使用. 但是, 这种写法也太丑了. 因此, 在ES6之前可以说是没有block scope的.</p>\n<h2>Function Scope</h2>\n<p>当执行一个函数的时候, 就会创建一个属于这个函数的作用域. 当执行完这个函数之后, 理论上这个作用域是会被垃圾回收器回收的.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(a);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在上面的例子中, 一个有3个scope. 分别是global scope &gt; foo &gt; bar(<code>&gt;</code>表示嵌套关系).<br>\nEngine和各个scope之间的对话.</p>\n<p>Engine: 你好<code>bar scope</code>, 我想要一个<code>a</code>的RHS, 请问你有吗?<br>\nbar scope: 不好意思, 我没有. 你可以去问问我的外层作用域foo scope.<br>\nEngine: 你好<code>foo scope</code>, 请问你有见过<code>a</code>吗?<br>\nfoo scope: 当然! 这就给你.<br>\nEngine: 那太好了. 既然找到的话, 我就不需要再向上层的作用域找了.</p>\n<p>从上面的对话中, 我们可以很容易知道: 当要查找一个变量的时候, 首先会在当前所在的作用域寻找, 如果没有找到的话, 就向上找, 直到global scope. 这个过程其实就叫做<strong>identifier resolution</strong>(或者identifier look-up).</p>\n<p>接下来, 我们再来优化一下上面的例子. 例子中的<code>bar</code>函数只是为了打印一个<code>a</code>, 我们以后再也不会引用到<code>bar</code>这个变量名. 但这个变量却污染了foo scope. 有没有办法既可以打印<code>a</code>又可以不创建一个变量名呢? 答案就是利用<strong>IIFE</strong>(Immediately invoked function express).</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">  (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(a);</div><div class=\"line\">  &#125;)();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>首先, 用<code>()</code>包住整个function body就表明了这个是一个expression, 接着用<code>()</code>来调用这个function expression.<br>\n对于IIFE还有其他写法, 你可以选择自己喜欢的口味~</p>\n<p>IIFE是很常见的, 因为他在调用一个函数的同时也<strong>避免了作用域的污染</strong>. 这是非常值得我们学习的.</p>\n<h2>Summary</h2>\n<p>总的来说, nested scope是为了可以共用作用域而产生的, 也就是说内部的scope可以访问外部scope. 而JavaScript有3种作用域global scope, block scope以及function scope. 其中, function scope是最主要的, 并且要懂得其中的IIFE.</p>\n"},{"title":"Scope(2)-Lexical Scope & Dynamical Scope","author":"Drake Leung","date":"2015-07-18T15:52:57.000Z","foreword":"通过Lexical scope(静态作用域)以及Dynamical socpe(动态)做比较，了解JavaScript的作用域。","_content":"\n我们先来看一个例子:\n\n```javascript\nfunction foo() {\n  var x = 42;\n\n  function bar() {\n     console.log(x);\n  }\n  bar();\n}\n\nfoo(); // 42\n```\n结果并没有出乎我们的意料，就是`42`。为什么呢？`bar`函数执行的时候，要引用到`baz`的值，那么去哪里找？首先在自己的作用域里面找。噢，一下就找到了，原来是`42`。\n\n上面这种就是**lexical scope**(或者**static scope**)。\n\n## What is Lexical Scope\n**lexical scope取决于函数是在哪里被定义的**.\n\n在上面的例子中，`bar`被定义在`foo`里面，所以`foo`的作用域就是`bar`的lexical scope. 然后，`foo`是被定义在global里面的，所以他的lexical scope就是*global scope*.\n\n所以在lexical scope中，查找`x`的过程如下，\n\n1. 我们要执行`bar`函数，他要引用`x`的值。\n2. 那么去哪里找`x`呢？肯定是先去自己(`bar`)的作用域找。但找不到:(\n3. 接着去他的lexical scope找（也就是`foo`的作用域), 找到了，`x`是42.\n\n是不是有点是懂非懂的样子，我们再来看看dynamical scope，做一下比较就知道了。\n\n## What is Dynamical Scope\n**dynamical Scope是取决于函数是在哪里被调用的**。\n\n看一个例子:\n\n```javascript\nvar x = 0;\n\nfunction bar() {\n  console.log(x);\n}\n\nfunction foo() {\n  var x = 42;\n  bar();\n}\n\nfoo(); // 42\n```\n\n在上面的例子中，由于`bar`是在`foo`里面被调用的，所以`bar`的dynamical socpe就是`foo`的作用域。而`foo`是在global socpe里面被调用的，所以global scope是`foo`的dynamical scope.\n\n所以在dynamical scope中，`x`的查找过程是:\n\n1. `bar`被调用，他要引用`x`的值。\n2. 那么去哪里找`x`呢？首先，肯定是在自己的作用域里面找，但是找不到:(\n3. 看看是谁调用`bar`的，就去那里找。OK, 是`foo`。那么，我们就去`foo`的作用域找。\n4. 噢，找到了。`x`是`42`.\n\n## Summary\n总的来说，lexical scope是取决于函数是在哪里被定义的。而dynamical scope是取决于函数是哪里被调用的。\n\n而JavaScript的**name resolution**(查找变量或者函数的过程)是采用lexical scope的。但是JavaScript的`this`的值却跟dynamical scope很像。我们以后会再讲`this`。\n\n## Resources\n- [Dynamical Scope](http://c2.com/cgi/wiki?DynamicScoping)前面的解释部分。\n","source":"_posts/Scope-2-Lexical-Scope-Dynamical-Scope.md","raw":"title: 'Scope(2)-Lexical Scope & Dynamical Scope'\nauthor: Drake Leung\ntags: [scope]\ncategories: [JavaScript]\ndate: 2015-07-18 23:52:57\nforeword: 通过Lexical scope(静态作用域)以及Dynamical socpe(动态)做比较，了解JavaScript的作用域。\n---\n\n我们先来看一个例子:\n\n```javascript\nfunction foo() {\n  var x = 42;\n\n  function bar() {\n     console.log(x);\n  }\n  bar();\n}\n\nfoo(); // 42\n```\n结果并没有出乎我们的意料，就是`42`。为什么呢？`bar`函数执行的时候，要引用到`baz`的值，那么去哪里找？首先在自己的作用域里面找。噢，一下就找到了，原来是`42`。\n\n上面这种就是**lexical scope**(或者**static scope**)。\n\n## What is Lexical Scope\n**lexical scope取决于函数是在哪里被定义的**.\n\n在上面的例子中，`bar`被定义在`foo`里面，所以`foo`的作用域就是`bar`的lexical scope. 然后，`foo`是被定义在global里面的，所以他的lexical scope就是*global scope*.\n\n所以在lexical scope中，查找`x`的过程如下，\n\n1. 我们要执行`bar`函数，他要引用`x`的值。\n2. 那么去哪里找`x`呢？肯定是先去自己(`bar`)的作用域找。但找不到:(\n3. 接着去他的lexical scope找（也就是`foo`的作用域), 找到了，`x`是42.\n\n是不是有点是懂非懂的样子，我们再来看看dynamical scope，做一下比较就知道了。\n\n## What is Dynamical Scope\n**dynamical Scope是取决于函数是在哪里被调用的**。\n\n看一个例子:\n\n```javascript\nvar x = 0;\n\nfunction bar() {\n  console.log(x);\n}\n\nfunction foo() {\n  var x = 42;\n  bar();\n}\n\nfoo(); // 42\n```\n\n在上面的例子中，由于`bar`是在`foo`里面被调用的，所以`bar`的dynamical socpe就是`foo`的作用域。而`foo`是在global socpe里面被调用的，所以global scope是`foo`的dynamical scope.\n\n所以在dynamical scope中，`x`的查找过程是:\n\n1. `bar`被调用，他要引用`x`的值。\n2. 那么去哪里找`x`呢？首先，肯定是在自己的作用域里面找，但是找不到:(\n3. 看看是谁调用`bar`的，就去那里找。OK, 是`foo`。那么，我们就去`foo`的作用域找。\n4. 噢，找到了。`x`是`42`.\n\n## Summary\n总的来说，lexical scope是取决于函数是在哪里被定义的。而dynamical scope是取决于函数是哪里被调用的。\n\n而JavaScript的**name resolution**(查找变量或者函数的过程)是采用lexical scope的。但是JavaScript的`this`的值却跟dynamical scope很像。我们以后会再讲`this`。\n\n## Resources\n- [Dynamical Scope](http://c2.com/cgi/wiki?DynamicScoping)前面的解释部分。\n","slug":"Scope-2-Lexical-Scope-Dynamical-Scope","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742zv000x37rqid87rk3p","content":"<p>我们先来看一个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">     <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">  &#125;</div><div class=\"line\">  bar();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<p>结果并没有出乎我们的意料，就是<code>42</code>。为什么呢？<code>bar</code>函数执行的时候，要引用到<code>baz</code>的值，那么去哪里找？首先在自己的作用域里面找。噢，一下就找到了，原来是<code>42</code>。</p>\n<p>上面这种就是<strong>lexical scope</strong>(或者<strong>static scope</strong>)。</p>\n<h2>What is Lexical Scope</h2>\n<p><strong>lexical scope取决于函数是在哪里被定义的</strong>.</p>\n<p>在上面的例子中，<code>bar</code>被定义在<code>foo</code>里面，所以<code>foo</code>的作用域就是<code>bar</code>的lexical scope. 然后，<code>foo</code>是被定义在global里面的，所以他的lexical scope就是<em>global scope</em>.</p>\n<p>所以在lexical scope中，查找<code>x</code>的过程如下，</p>\n<ol>\n<li>我们要执行<code>bar</code>函数，他要引用<code>x</code>的值。</li>\n<li>那么去哪里找<code>x</code>呢？肯定是先去自己(<code>bar</code>)的作用域找。但找不到:(</li>\n<li>接着去他的lexical scope找（也就是<code>foo</code>的作用域), 找到了，<code>x</code>是42.</li>\n</ol>\n<p>是不是有点是懂非懂的样子，我们再来看看dynamical scope，做一下比较就知道了。</p>\n<h2>What is Dynamical Scope</h2>\n<p><strong>dynamical Scope是取决于函数是在哪里被调用的</strong>。</p>\n<p>看一个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\">  bar();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<p>在上面的例子中，由于<code>bar</code>是在<code>foo</code>里面被调用的，所以<code>bar</code>的dynamical socpe就是<code>foo</code>的作用域。而<code>foo</code>是在global socpe里面被调用的，所以global scope是<code>foo</code>的dynamical scope.</p>\n<p>所以在dynamical scope中，<code>x</code>的查找过程是:</p>\n<ol>\n<li><code>bar</code>被调用，他要引用<code>x</code>的值。</li>\n<li>那么去哪里找<code>x</code>呢？首先，肯定是在自己的作用域里面找，但是找不到:(</li>\n<li>看看是谁调用<code>bar</code>的，就去那里找。OK, 是<code>foo</code>。那么，我们就去<code>foo</code>的作用域找。</li>\n<li>噢，找到了。<code>x</code>是<code>42</code>.</li>\n</ol>\n<h2>Summary</h2>\n<p>总的来说，lexical scope是取决于函数是在哪里被定义的。而dynamical scope是取决于函数是哪里被调用的。</p>\n<p>而JavaScript的<strong>name resolution</strong>(查找变量或者函数的过程)是采用lexical scope的。但是JavaScript的<code>this</code>的值却跟dynamical scope很像。我们以后会再讲<code>this</code>。</p>\n<h2>Resources</h2>\n<ul>\n<li><a href=\"http://c2.com/cgi/wiki?DynamicScoping\" target=\"_blank\" rel=\"external\">Dynamical Scope</a>前面的解释部分。</li>\n</ul>\n","excerpt":"","more":"<p>我们先来看一个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">     <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">  &#125;</div><div class=\"line\">  bar();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<p>结果并没有出乎我们的意料，就是<code>42</code>。为什么呢？<code>bar</code>函数执行的时候，要引用到<code>baz</code>的值，那么去哪里找？首先在自己的作用域里面找。噢，一下就找到了，原来是<code>42</code>。</p>\n<p>上面这种就是<strong>lexical scope</strong>(或者<strong>static scope</strong>)。</p>\n<h2>What is Lexical Scope</h2>\n<p><strong>lexical scope取决于函数是在哪里被定义的</strong>.</p>\n<p>在上面的例子中，<code>bar</code>被定义在<code>foo</code>里面，所以<code>foo</code>的作用域就是<code>bar</code>的lexical scope. 然后，<code>foo</code>是被定义在global里面的，所以他的lexical scope就是<em>global scope</em>.</p>\n<p>所以在lexical scope中，查找<code>x</code>的过程如下，</p>\n<ol>\n<li>我们要执行<code>bar</code>函数，他要引用<code>x</code>的值。</li>\n<li>那么去哪里找<code>x</code>呢？肯定是先去自己(<code>bar</code>)的作用域找。但找不到:(</li>\n<li>接着去他的lexical scope找（也就是<code>foo</code>的作用域), 找到了，<code>x</code>是42.</li>\n</ol>\n<p>是不是有点是懂非懂的样子，我们再来看看dynamical scope，做一下比较就知道了。</p>\n<h2>What is Dynamical Scope</h2>\n<p><strong>dynamical Scope是取决于函数是在哪里被调用的</strong>。</p>\n<p>看一个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\">  bar();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<p>在上面的例子中，由于<code>bar</code>是在<code>foo</code>里面被调用的，所以<code>bar</code>的dynamical socpe就是<code>foo</code>的作用域。而<code>foo</code>是在global socpe里面被调用的，所以global scope是<code>foo</code>的dynamical scope.</p>\n<p>所以在dynamical scope中，<code>x</code>的查找过程是:</p>\n<ol>\n<li><code>bar</code>被调用，他要引用<code>x</code>的值。</li>\n<li>那么去哪里找<code>x</code>呢？首先，肯定是在自己的作用域里面找，但是找不到:(</li>\n<li>看看是谁调用<code>bar</code>的，就去那里找。OK, 是<code>foo</code>。那么，我们就去<code>foo</code>的作用域找。</li>\n<li>噢，找到了。<code>x</code>是<code>42</code>.</li>\n</ol>\n<h2>Summary</h2>\n<p>总的来说，lexical scope是取决于函数是在哪里被定义的。而dynamical scope是取决于函数是哪里被调用的。</p>\n<p>而JavaScript的<strong>name resolution</strong>(查找变量或者函数的过程)是采用lexical scope的。但是JavaScript的<code>this</code>的值却跟dynamical scope很像。我们以后会再讲<code>this</code>。</p>\n<h2>Resources</h2>\n<ul>\n<li><a href=\"http://c2.com/cgi/wiki?DynamicScoping\">Dynamical Scope</a>前面的解释部分。</li>\n</ul>\n"},{"title":"Scope(3)-What Is Closure","author":"Drake Leung","date":"2015-07-18T17:58:31.000Z","foreword":"闭包其实很简单，只要你想通了lexical scope就迎刃而解了。","_content":"\n## What is Closure\n什么是闭包呢？我们来下个定义吧。\n\n> 闭包就是函数可以访问他的lexical scope，即使他是在他的lexical scope外面执行的。\n\n先看个例子压压惊。\n\n```javascript\nfunction foo() {\n    var x = 42;\n\n    function bar () {\n      console.log(x);\n    }\n    bar();\n}\n\nfoo(); // 42\n```\n很自然而然地，上面例子输出的结果就是`42`。为什么呢？这其实就是作用域链的问题而已。\n`bar`函数要引用到`x`这个变量的值。于是就在自己的作用域找，找不到。于是向上找，然后在`foo`函数的作用域就找到了。\n\n很显然，上面的例子是符合我们对闭包定义的前半部分，**但是后半部分是不符合的**。因为`bar`的lexical scope就是`foo`的作用域，而`bar`就是在`foo`的作用域里面被调用的。\n\n## How it Works\n\n既然这样，我们就想办法让`bar`在`foo`的作用域外面执行。比如使用`return`.\n```javascript\nfunction foo() {\n  var x = 42;\n\n  function bar() {\n    console.log(x);\n  }\n\n  return bar;\n}\n\nvar baz = foo();\nbaz();\n```\n在上面的例子中，其实`baz`就是`bar`，只是名字换了而已，内容还是没有改变的。那么好，现在，`bar`(也就是`baz`)并不是在他的lexical scope(`foo`'s scope)被调用，而是在global scope。并且，`bar`还可以访问他的lexical scope里面的`x`。所以，你可以说，**这就是闭包**。\n\n我们再来看1个例子:\n```javascript\nfunction baz(fn) {\n  fn();\n}\n\nfunction foo() {\n  var x = 42;\n  function bar() {\n    console.log(x);\n  }\n\n  baz(bar);\n}\n\nfoo();\n```\n同样地，上面的例子中，`bar`并没有在他的lexical scope(`foo`'s scope)中执行，而在是`baz`里面执行。并且，`bar`还是可以访问他的lexical scope。因此，这个也是闭包！\n\n## More Examples\n其实，闭包到处都是~\n\n比如，一个定时器。\n```javascript\nfunction wait(msg) {\n  setTimeout(function timer() {\n    console.log(msg);\n  }, 2 * 1000);\n}\nwait('I am also a closure example');\n```\n2秒钟之后，浏览器引擎就会在全局中调用`timer`函数。也就是说，`timer`并没有在他的lexical scope(`wait`'s scope)里面执行，但是他仍然可以访问`msg`。所以，这个也是一个闭包。\n\n再比如，一个Event Handler.\n```javascript\nfunction submit() {\n  var username = 'Drake',\n    submitBtn = document.querySelector('button[type=submit]');\n\n  submitBtn.addEventListener('click', function(event) {\n    console.log(username);\n  }, false);\n}\n```\n## Loops and Closure\n当闭包出现在循环中的时候，就会很容易出现问题。举个例子，\n\n```javascript\nfor (var i = 0; i < 5; i++) {\n  setTimeout(function timer() {\n    console.log(i);\n  }, 1000);\n}\n```\n上面例子中，很出乎意料地输出了5个`5`。为什么呢？原因在于:\n\n1. 在第一个`timer`函数执行之前，已经有5个`timer`函数定义好了。\n2. 当第一个`timer`执行时，他需要引用到`i`。\n3. 首先他在自己的作用域找，找不到。\n4. 于是向上找，因为JavaScript并没有block scope。所以向上的话就是global scope.\n5. 在global scope里面找到了`i`。此时`i`为`5`（因为已经循环了5次)\n\n是不是觉得少了点什么？如果`timer`在自己的作用域就可以找到`i`的话就好咯。或者，在中间加多一层作用域，而不用去到`global scope`里面找（因为他的`i`一定是为`5`的)\n\n### Solution\n第一种，`timer`在自己的作用域就可以找到`i`。可以利用`forEach`等循环方法。\n```javascript\nvar aArray = ['a', 'b', 'c', 'd', 'e'];\n\naArray.forEach(function(item, index, array) {\n  setTimeout(function timer() {\n    console.log(index);\n  });\n});\n```\n\n第二种，在中间新增一层作用域。常用的pattern就是使用IIFE。\n```javascript\nfor (var i = 0; i < 5; i++) {\n  (function(j) {\n    setTimeout(function timer() {\n      console.log(j);\n    });\n  })(i);\n}\n```\n由于IIFE是立即调用的，所以每次调用的时候都传进了不同的实参。\n\n1. 当`timer`要引用`i`的时候，现在自己的作用域里面找。找不到。\n2. 然后向上找，在IIFE里面找到了，也就是形参`j`。\n\n\n第三种利用`let`来创建block scope.\n```javascript\nfor (let i = 0; i < 5; i++) {\n  setTimeout(function timer() {\n    console.log(i);\n  });\n}\n```\n`let`劫持了`for`的作用域。每次循环，都会初始化一个新的`i`。\n\n`timer`在自己的作用域找不到`i`,向上找，在`for`里面找，哈，找到了。\n","source":"_posts/Scope-3-What-Is-Closure.md","raw":"title: Scope(3)-What Is Closure\nauthor: Drake Leung\ntags: [scope, closure]\ncategories: [JavaScript]\ndate: 2015-07-19 01:58:31\nforeword: 闭包其实很简单，只要你想通了lexical scope就迎刃而解了。\n---\n\n## What is Closure\n什么是闭包呢？我们来下个定义吧。\n\n> 闭包就是函数可以访问他的lexical scope，即使他是在他的lexical scope外面执行的。\n\n先看个例子压压惊。\n\n```javascript\nfunction foo() {\n    var x = 42;\n\n    function bar () {\n      console.log(x);\n    }\n    bar();\n}\n\nfoo(); // 42\n```\n很自然而然地，上面例子输出的结果就是`42`。为什么呢？这其实就是作用域链的问题而已。\n`bar`函数要引用到`x`这个变量的值。于是就在自己的作用域找，找不到。于是向上找，然后在`foo`函数的作用域就找到了。\n\n很显然，上面的例子是符合我们对闭包定义的前半部分，**但是后半部分是不符合的**。因为`bar`的lexical scope就是`foo`的作用域，而`bar`就是在`foo`的作用域里面被调用的。\n\n## How it Works\n\n既然这样，我们就想办法让`bar`在`foo`的作用域外面执行。比如使用`return`.\n```javascript\nfunction foo() {\n  var x = 42;\n\n  function bar() {\n    console.log(x);\n  }\n\n  return bar;\n}\n\nvar baz = foo();\nbaz();\n```\n在上面的例子中，其实`baz`就是`bar`，只是名字换了而已，内容还是没有改变的。那么好，现在，`bar`(也就是`baz`)并不是在他的lexical scope(`foo`'s scope)被调用，而是在global scope。并且，`bar`还可以访问他的lexical scope里面的`x`。所以，你可以说，**这就是闭包**。\n\n我们再来看1个例子:\n```javascript\nfunction baz(fn) {\n  fn();\n}\n\nfunction foo() {\n  var x = 42;\n  function bar() {\n    console.log(x);\n  }\n\n  baz(bar);\n}\n\nfoo();\n```\n同样地，上面的例子中，`bar`并没有在他的lexical scope(`foo`'s scope)中执行，而在是`baz`里面执行。并且，`bar`还是可以访问他的lexical scope。因此，这个也是闭包！\n\n## More Examples\n其实，闭包到处都是~\n\n比如，一个定时器。\n```javascript\nfunction wait(msg) {\n  setTimeout(function timer() {\n    console.log(msg);\n  }, 2 * 1000);\n}\nwait('I am also a closure example');\n```\n2秒钟之后，浏览器引擎就会在全局中调用`timer`函数。也就是说，`timer`并没有在他的lexical scope(`wait`'s scope)里面执行，但是他仍然可以访问`msg`。所以，这个也是一个闭包。\n\n再比如，一个Event Handler.\n```javascript\nfunction submit() {\n  var username = 'Drake',\n    submitBtn = document.querySelector('button[type=submit]');\n\n  submitBtn.addEventListener('click', function(event) {\n    console.log(username);\n  }, false);\n}\n```\n## Loops and Closure\n当闭包出现在循环中的时候，就会很容易出现问题。举个例子，\n\n```javascript\nfor (var i = 0; i < 5; i++) {\n  setTimeout(function timer() {\n    console.log(i);\n  }, 1000);\n}\n```\n上面例子中，很出乎意料地输出了5个`5`。为什么呢？原因在于:\n\n1. 在第一个`timer`函数执行之前，已经有5个`timer`函数定义好了。\n2. 当第一个`timer`执行时，他需要引用到`i`。\n3. 首先他在自己的作用域找，找不到。\n4. 于是向上找，因为JavaScript并没有block scope。所以向上的话就是global scope.\n5. 在global scope里面找到了`i`。此时`i`为`5`（因为已经循环了5次)\n\n是不是觉得少了点什么？如果`timer`在自己的作用域就可以找到`i`的话就好咯。或者，在中间加多一层作用域，而不用去到`global scope`里面找（因为他的`i`一定是为`5`的)\n\n### Solution\n第一种，`timer`在自己的作用域就可以找到`i`。可以利用`forEach`等循环方法。\n```javascript\nvar aArray = ['a', 'b', 'c', 'd', 'e'];\n\naArray.forEach(function(item, index, array) {\n  setTimeout(function timer() {\n    console.log(index);\n  });\n});\n```\n\n第二种，在中间新增一层作用域。常用的pattern就是使用IIFE。\n```javascript\nfor (var i = 0; i < 5; i++) {\n  (function(j) {\n    setTimeout(function timer() {\n      console.log(j);\n    });\n  })(i);\n}\n```\n由于IIFE是立即调用的，所以每次调用的时候都传进了不同的实参。\n\n1. 当`timer`要引用`i`的时候，现在自己的作用域里面找。找不到。\n2. 然后向上找，在IIFE里面找到了，也就是形参`j`。\n\n\n第三种利用`let`来创建block scope.\n```javascript\nfor (let i = 0; i < 5; i++) {\n  setTimeout(function timer() {\n    console.log(i);\n  });\n}\n```\n`let`劫持了`for`的作用域。每次循环，都会初始化一个新的`i`。\n\n`timer`在自己的作用域找不到`i`,向上找，在`for`里面找，哈，找到了。\n","slug":"Scope-3-What-Is-Closure","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742zx001137rqztthv3fl","content":"<h2>What is Closure</h2>\n<p>什么是闭包呢？我们来下个定义吧。</p>\n<blockquote>\n<p>闭包就是函数可以访问他的lexical scope，即使他是在他的lexical scope外面执行的。</p>\n</blockquote>\n<p>先看个例子压压惊。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">    &#125;</div><div class=\"line\">    bar();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<p>很自然而然地，上面例子输出的结果就是<code>42</code>。为什么呢？这其实就是作用域链的问题而已。<br>\n<code>bar</code>函数要引用到<code>x</code>这个变量的值。于是就在自己的作用域找，找不到。于是向上找，然后在<code>foo</code>函数的作用域就找到了。</p>\n<p>很显然，上面的例子是符合我们对闭包定义的前半部分，<strong>但是后半部分是不符合的</strong>。因为<code>bar</code>的lexical scope就是<code>foo</code>的作用域，而<code>bar</code>就是在<code>foo</code>的作用域里面被调用的。</p>\n<h2>How it Works</h2>\n<p>既然这样，我们就想办法让<code>bar</code>在<code>foo</code>的作用域外面执行。比如使用<code>return</code>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> bar;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> baz = foo();</div><div class=\"line\">baz();</div></pre></td></tr></table></figure>\n<p>在上面的例子中，其实<code>baz</code>就是<code>bar</code>，只是名字换了而已，内容还是没有改变的。那么好，现在，<code>bar</code>(也就是<code>baz</code>)并不是在他的lexical scope(<code>foo</code>'s scope)被调用，而是在global scope。并且，<code>bar</code>还可以访问他的lexical scope里面的<code>x</code>。所以，你可以说，<strong>这就是闭包</strong>。</p>\n<p>我们再来看1个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">baz</span>(<span class=\"params\">fn</span>) </span>&#123;</div><div class=\"line\">  fn();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  baz(bar);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo();</div></pre></td></tr></table></figure>\n<p>同样地，上面的例子中，<code>bar</code>并没有在他的lexical scope(<code>foo</code>'s scope)中执行，而在是<code>baz</code>里面执行。并且，<code>bar</code>还是可以访问他的lexical scope。因此，这个也是闭包！</p>\n<h2>More Examples</h2>\n<p>其实，闭包到处都是~</p>\n<p>比如，一个定时器。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wait</span>(<span class=\"params\">msg</span>) </span>&#123;</div><div class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(msg);</div><div class=\"line\">  &#125;, <span class=\"number\">2</span> * <span class=\"number\">1000</span>);</div><div class=\"line\">&#125;</div><div class=\"line\">wait(<span class=\"string\">'I am also a closure example'</span>);</div></pre></td></tr></table></figure>\n<p>2秒钟之后，浏览器引擎就会在全局中调用<code>timer</code>函数。也就是说，<code>timer</code>并没有在他的lexical scope(<code>wait</code>'s scope)里面执行，但是他仍然可以访问<code>msg</code>。所以，这个也是一个闭包。</p>\n<p>再比如，一个Event Handler.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">submit</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> username = <span class=\"string\">'Drake'</span>,</div><div class=\"line\">    submitBtn = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'button[type=submit]'</span>);</div><div class=\"line\"></div><div class=\"line\">  submitBtn.addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(username);</div><div class=\"line\">  &#125;, <span class=\"literal\">false</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Loops and Closure</h2>\n<p>当闭包出现在循环中的时候，就会很容易出现问题。举个例子，</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(i);</div><div class=\"line\">  &#125;, <span class=\"number\">1000</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>上面例子中，很出乎意料地输出了5个<code>5</code>。为什么呢？原因在于:</p>\n<ol>\n<li>在第一个<code>timer</code>函数执行之前，已经有5个<code>timer</code>函数定义好了。</li>\n<li>当第一个<code>timer</code>执行时，他需要引用到<code>i</code>。</li>\n<li>首先他在自己的作用域找，找不到。</li>\n<li>于是向上找，因为JavaScript并没有block scope。所以向上的话就是global scope.</li>\n<li>在global scope里面找到了<code>i</code>。此时<code>i</code>为<code>5</code>（因为已经循环了5次)</li>\n</ol>\n<p>是不是觉得少了点什么？如果<code>timer</code>在自己的作用域就可以找到<code>i</code>的话就好咯。或者，在中间加多一层作用域，而不用去到<code>global scope</code>里面找（因为他的<code>i</code>一定是为<code>5</code>的)</p>\n<h3>Solution</h3>\n<p>第一种，<code>timer</code>在自己的作用域就可以找到<code>i</code>。可以利用<code>forEach</code>等循环方法。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> aArray = [<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'c'</span>, <span class=\"string\">'d'</span>, <span class=\"string\">'e'</span>];</div><div class=\"line\"></div><div class=\"line\">aArray.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, array</span>) </span>&#123;</div><div class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(index);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>第二种，在中间新增一层作用域。常用的pattern就是使用IIFE。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">j</span>) </span>&#123;</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(j);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;)(i);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>由于IIFE是立即调用的，所以每次调用的时候都传进了不同的实参。</p>\n<ol>\n<li>当<code>timer</code>要引用<code>i</code>的时候，现在自己的作用域里面找。找不到。</li>\n<li>然后向上找，在IIFE里面找到了，也就是形参<code>j</code>。</li>\n</ol>\n<p>第三种利用<code>let</code>来创建block scope.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(i);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>let</code>劫持了<code>for</code>的作用域。每次循环，都会初始化一个新的<code>i</code>。</p>\n<p><code>timer</code>在自己的作用域找不到<code>i</code>,向上找，在<code>for</code>里面找，哈，找到了。</p>\n","excerpt":"","more":"<h2>What is Closure</h2>\n<p>什么是闭包呢？我们来下个定义吧。</p>\n<blockquote>\n<p>闭包就是函数可以访问他的lexical scope，即使他是在他的lexical scope外面执行的。</p>\n</blockquote>\n<p>先看个例子压压惊。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">    &#125;</div><div class=\"line\">    bar();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo(); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<p>很自然而然地，上面例子输出的结果就是<code>42</code>。为什么呢？这其实就是作用域链的问题而已。<br>\n<code>bar</code>函数要引用到<code>x</code>这个变量的值。于是就在自己的作用域找，找不到。于是向上找，然后在<code>foo</code>函数的作用域就找到了。</p>\n<p>很显然，上面的例子是符合我们对闭包定义的前半部分，<strong>但是后半部分是不符合的</strong>。因为<code>bar</code>的lexical scope就是<code>foo</code>的作用域，而<code>bar</code>就是在<code>foo</code>的作用域里面被调用的。</p>\n<h2>How it Works</h2>\n<p>既然这样，我们就想办法让<code>bar</code>在<code>foo</code>的作用域外面执行。比如使用<code>return</code>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> bar;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> baz = foo();</div><div class=\"line\">baz();</div></pre></td></tr></table></figure>\n<p>在上面的例子中，其实<code>baz</code>就是<code>bar</code>，只是名字换了而已，内容还是没有改变的。那么好，现在，<code>bar</code>(也就是<code>baz</code>)并不是在他的lexical scope(<code>foo</code>'s scope)被调用，而是在global scope。并且，<code>bar</code>还可以访问他的lexical scope里面的<code>x</code>。所以，你可以说，<strong>这就是闭包</strong>。</p>\n<p>我们再来看1个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">baz</span>(<span class=\"params\">fn</span>) </span>&#123;</div><div class=\"line\">  fn();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">42</span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(x);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  baz(bar);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo();</div></pre></td></tr></table></figure>\n<p>同样地，上面的例子中，<code>bar</code>并没有在他的lexical scope(<code>foo</code>'s scope)中执行，而在是<code>baz</code>里面执行。并且，<code>bar</code>还是可以访问他的lexical scope。因此，这个也是闭包！</p>\n<h2>More Examples</h2>\n<p>其实，闭包到处都是~</p>\n<p>比如，一个定时器。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wait</span>(<span class=\"params\">msg</span>) </span>&#123;</div><div class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(msg);</div><div class=\"line\">  &#125;, <span class=\"number\">2</span> * <span class=\"number\">1000</span>);</div><div class=\"line\">&#125;</div><div class=\"line\">wait(<span class=\"string\">'I am also a closure example'</span>);</div></pre></td></tr></table></figure>\n<p>2秒钟之后，浏览器引擎就会在全局中调用<code>timer</code>函数。也就是说，<code>timer</code>并没有在他的lexical scope(<code>wait</code>'s scope)里面执行，但是他仍然可以访问<code>msg</code>。所以，这个也是一个闭包。</p>\n<p>再比如，一个Event Handler.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">submit</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> username = <span class=\"string\">'Drake'</span>,</div><div class=\"line\">    submitBtn = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'button[type=submit]'</span>);</div><div class=\"line\"></div><div class=\"line\">  submitBtn.addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(username);</div><div class=\"line\">  &#125;, <span class=\"literal\">false</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Loops and Closure</h2>\n<p>当闭包出现在循环中的时候，就会很容易出现问题。举个例子，</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(i);</div><div class=\"line\">  &#125;, <span class=\"number\">1000</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>上面例子中，很出乎意料地输出了5个<code>5</code>。为什么呢？原因在于:</p>\n<ol>\n<li>在第一个<code>timer</code>函数执行之前，已经有5个<code>timer</code>函数定义好了。</li>\n<li>当第一个<code>timer</code>执行时，他需要引用到<code>i</code>。</li>\n<li>首先他在自己的作用域找，找不到。</li>\n<li>于是向上找，因为JavaScript并没有block scope。所以向上的话就是global scope.</li>\n<li>在global scope里面找到了<code>i</code>。此时<code>i</code>为<code>5</code>（因为已经循环了5次)</li>\n</ol>\n<p>是不是觉得少了点什么？如果<code>timer</code>在自己的作用域就可以找到<code>i</code>的话就好咯。或者，在中间加多一层作用域，而不用去到<code>global scope</code>里面找（因为他的<code>i</code>一定是为<code>5</code>的)</p>\n<h3>Solution</h3>\n<p>第一种，<code>timer</code>在自己的作用域就可以找到<code>i</code>。可以利用<code>forEach</code>等循环方法。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> aArray = [<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'c'</span>, <span class=\"string\">'d'</span>, <span class=\"string\">'e'</span>];</div><div class=\"line\"></div><div class=\"line\">aArray.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, array</span>) </span>&#123;</div><div class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(index);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>第二种，在中间新增一层作用域。常用的pattern就是使用IIFE。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">j</span>) </span>&#123;</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(j);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;)(i);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>由于IIFE是立即调用的，所以每次调用的时候都传进了不同的实参。</p>\n<ol>\n<li>当<code>timer</code>要引用<code>i</code>的时候，现在自己的作用域里面找。找不到。</li>\n<li>然后向上找，在IIFE里面找到了，也就是形参<code>j</code>。</li>\n</ol>\n<p>第三种利用<code>let</code>来创建block scope.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timer</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(i);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>let</code>劫持了<code>for</code>的作用域。每次循环，都会初始化一个新的<code>i</code>。</p>\n<p><code>timer</code>在自己的作用域找不到<code>i</code>,向上找，在<code>for</code>里面找，哈，找到了。</p>\n"},{"title":"迷之前端轮子 - 实现一个简单的 Virtual DOM","author":"Drake Leung","date":"2016-01-31T05:30:49.000Z","foreword":"然而我并没有实现React Diff算法，因为不会= =","_content":"\n最近实现了一个简单版的[Virtual DOM](https://github.com/DrakeLeung/little-virtual-DOM)。\n之所以简单，是因为并没有实现React的diff算法，不过我们还是可以了解一下Virtual DOM。\n\n## What\n*Virtual DOM* 其实就是用JS对象去表示DOM元素。\n{% asset_img vdom0.png %}\n\n## Why\n为什么要Virtual DOM呢？因为DOM的操作本身是很慢的。但更慢的是批量操作时的不当。\n\n比如，我们要添加5个`<li>`：\n```javascript\nconst appendElement =\n  type =>\n    () =>\n      document.body.appendChild(document.createElement(type))\n\nArray.from(Array(5)).forEach(appendElement('li'))\n```\n上面每次生成一个`li`就插入，这样是很慢的。正确的做法应该是先生成5个`li`，然后再一次性把这个5个`li`插入。这个过程，我们就可以使用Virtual DOM来实现。\n\n## How\n总共分4个步骤，如下图所示：\n{% asset_img vdom2.png %}\n\n### VNode\n`VNode`这个函数是用JavaScript对象来表示DOM元素，比如：\n\n```html\n<li id=\"item1\">Call Me Item 1</li>\n```\n\n可以表示为:\n\n```javascript\n{\n  type: 'li',\n  props: {\n    id: 'item1'\n  },\n  children: ['item1']\n}\n```\n\n当然，`props`可以是数组，`children` 也可以放在`props`里面。\n\n### toHTML\n这个就是把`VNode`转化成真正的DOM元素。\n\n```javascript\n//\n// 大体分3步\n//\n\n// Step 1: createElement\nconst node = document.createElement(type)\n\n// Step 2: set props\nObject.keys(props).forEach(prop => {\n  node.setAttribute(prop, props[prop])\n})\n\n// Step 3: set children\nchildren.forEach(VChild => {\n  let childNode\n\n  // if text\n  if (typeof VChild === 'string') {  // #0\n    childNode = document.createTextNode(VChild)\n  } else {\n    childNode = createNode(VChild)\n  }\n\n  node.appendChild(childNode)\n})\n\nreturn node\n```\n在`#0`中，如果当前node是`string`的话，就表明是`text`。否则进行递归。\n\n### Diff\n`diff`需要把新的Virtual DOM和旧的进行比较，从而得到变化的地方。\n这个过程最难的了。我没用实现React的diff算法，只是对同级元素进行了比较而已。\n\n主要有不同的4种情况:\n```javascript\nexport const TEXT = 'TEXT'\nexport const PROPS = 'PROPS'\nexport const REPLACE = 'REPLACE'\nexport const ADD_CHILD = 'ADD_CHILD'\n```\n\n- `TEXT`: 替换旧的`text`\n- `PROPS`: 表明`props`可能是增加，删除或修改\n- `REPLACE`: 替换旧的节点，包括删除的\n- `ADD_CHILD`: 表示需要增加child\n\n实现过程不讲述，详细看源代码([diff](https://github.com/DrakeLeung/little-virtual-DOM/blob/master/src%2Fdiff.js))\n\n### Patch\n这个过程把上个步骤得到的`diff`来给当前的DOM节点进行操作。这个过程就是我们优化DOM操作的地方。\n\n```javascript\nconst applyPatch = (node, currentPatch) => {\n  switch (currentPatch.type) {\n    case patchType.TEXT:\n      node.nodeValue = currentPatch.content\n      break\n\n    case patchType.PROPS:\n      setProps(node, currentPatch.props)\n      break\n\n    case patchType.REPLACE:\n      if (isExist(currentPatch.node)) {\n        node.parentNode.replaceChild(toHTML(currentPatch.node), node)\n      } else {\n        node.parentNode.removeChild(node)\n      }\n      break\n\n    case patchType.ADD_CHILD:\n      node.appendChild(toHTML(currentPatch.node))\n      break\n\n    default:\n  }\n}\n```\n\n## Wrap up\n从实现这个简单的Virtual DOM，思路确实是打开了不少。\n\n- 用JavaScript对象来表示DOM元素。之前只会直接操作DOM，没有想到可以这样玩。\n- 怎么比较2棵树的不同？只需要比较同级的元素。虽然还是不会比较children\n- 复习了DOM的一些知识。\n\n所以**多尝试**不同的东西，思路会扩展不少~\n\n## Resource\n- [React (Virtual) DOM Terminology](https://gist.github.com/sebmarkbage/fcb1b6ab493b0c77d589)\n- [Understanding-react-and-reimplementing-it-from-scratch-part-1](https://gcanti.github.io/2014/10/29/understanding-react-and-reimplementing-it-from-scratch-part-1.html)\n- [怎么更好地理解虚拟DOM](https://www.zhihu.com/question/29504639)\n- [如何实现一个Virtual DOM算法](https://github.com/livoras/blog/issues/13)\n","source":"_posts/Virtual-DOM.md","raw":"---\ntitle: 迷之前端轮子 - 实现一个简单的 Virtual DOM\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-01-31 13:30:49\nforeword: 然而我并没有实现React Diff算法，因为不会= =\n---\n\n最近实现了一个简单版的[Virtual DOM](https://github.com/DrakeLeung/little-virtual-DOM)。\n之所以简单，是因为并没有实现React的diff算法，不过我们还是可以了解一下Virtual DOM。\n\n## What\n*Virtual DOM* 其实就是用JS对象去表示DOM元素。\n{% asset_img vdom0.png %}\n\n## Why\n为什么要Virtual DOM呢？因为DOM的操作本身是很慢的。但更慢的是批量操作时的不当。\n\n比如，我们要添加5个`<li>`：\n```javascript\nconst appendElement =\n  type =>\n    () =>\n      document.body.appendChild(document.createElement(type))\n\nArray.from(Array(5)).forEach(appendElement('li'))\n```\n上面每次生成一个`li`就插入，这样是很慢的。正确的做法应该是先生成5个`li`，然后再一次性把这个5个`li`插入。这个过程，我们就可以使用Virtual DOM来实现。\n\n## How\n总共分4个步骤，如下图所示：\n{% asset_img vdom2.png %}\n\n### VNode\n`VNode`这个函数是用JavaScript对象来表示DOM元素，比如：\n\n```html\n<li id=\"item1\">Call Me Item 1</li>\n```\n\n可以表示为:\n\n```javascript\n{\n  type: 'li',\n  props: {\n    id: 'item1'\n  },\n  children: ['item1']\n}\n```\n\n当然，`props`可以是数组，`children` 也可以放在`props`里面。\n\n### toHTML\n这个就是把`VNode`转化成真正的DOM元素。\n\n```javascript\n//\n// 大体分3步\n//\n\n// Step 1: createElement\nconst node = document.createElement(type)\n\n// Step 2: set props\nObject.keys(props).forEach(prop => {\n  node.setAttribute(prop, props[prop])\n})\n\n// Step 3: set children\nchildren.forEach(VChild => {\n  let childNode\n\n  // if text\n  if (typeof VChild === 'string') {  // #0\n    childNode = document.createTextNode(VChild)\n  } else {\n    childNode = createNode(VChild)\n  }\n\n  node.appendChild(childNode)\n})\n\nreturn node\n```\n在`#0`中，如果当前node是`string`的话，就表明是`text`。否则进行递归。\n\n### Diff\n`diff`需要把新的Virtual DOM和旧的进行比较，从而得到变化的地方。\n这个过程最难的了。我没用实现React的diff算法，只是对同级元素进行了比较而已。\n\n主要有不同的4种情况:\n```javascript\nexport const TEXT = 'TEXT'\nexport const PROPS = 'PROPS'\nexport const REPLACE = 'REPLACE'\nexport const ADD_CHILD = 'ADD_CHILD'\n```\n\n- `TEXT`: 替换旧的`text`\n- `PROPS`: 表明`props`可能是增加，删除或修改\n- `REPLACE`: 替换旧的节点，包括删除的\n- `ADD_CHILD`: 表示需要增加child\n\n实现过程不讲述，详细看源代码([diff](https://github.com/DrakeLeung/little-virtual-DOM/blob/master/src%2Fdiff.js))\n\n### Patch\n这个过程把上个步骤得到的`diff`来给当前的DOM节点进行操作。这个过程就是我们优化DOM操作的地方。\n\n```javascript\nconst applyPatch = (node, currentPatch) => {\n  switch (currentPatch.type) {\n    case patchType.TEXT:\n      node.nodeValue = currentPatch.content\n      break\n\n    case patchType.PROPS:\n      setProps(node, currentPatch.props)\n      break\n\n    case patchType.REPLACE:\n      if (isExist(currentPatch.node)) {\n        node.parentNode.replaceChild(toHTML(currentPatch.node), node)\n      } else {\n        node.parentNode.removeChild(node)\n      }\n      break\n\n    case patchType.ADD_CHILD:\n      node.appendChild(toHTML(currentPatch.node))\n      break\n\n    default:\n  }\n}\n```\n\n## Wrap up\n从实现这个简单的Virtual DOM，思路确实是打开了不少。\n\n- 用JavaScript对象来表示DOM元素。之前只会直接操作DOM，没有想到可以这样玩。\n- 怎么比较2棵树的不同？只需要比较同级的元素。虽然还是不会比较children\n- 复习了DOM的一些知识。\n\n所以**多尝试**不同的东西，思路会扩展不少~\n\n## Resource\n- [React (Virtual) DOM Terminology](https://gist.github.com/sebmarkbage/fcb1b6ab493b0c77d589)\n- [Understanding-react-and-reimplementing-it-from-scratch-part-1](https://gcanti.github.io/2014/10/29/understanding-react-and-reimplementing-it-from-scratch-part-1.html)\n- [怎么更好地理解虚拟DOM](https://www.zhihu.com/question/29504639)\n- [如何实现一个Virtual DOM算法](https://github.com/livoras/blog/issues/13)\n","slug":"Virtual-DOM","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu742zz001437rq8w79yvl2","content":"<p>最近实现了一个简单版的<a href=\"https://github.com/DrakeLeung/little-virtual-DOM\" target=\"_blank\" rel=\"external\">Virtual DOM</a>。<br>\n之所以简单，是因为并没有实现React的diff算法，不过我们还是可以了解一下Virtual DOM。</p>\n<h2>What</h2>\n<p><em>Virtual DOM</em> 其实就是用JS对象去表示DOM元素。</p>\n<img src=\"/2016/01/31/Virtual-DOM/vdom0.png\" alt=\"vdom0.png\" title=\"\">\n<h2>Why</h2>\n<p>为什么要Virtual DOM呢？因为DOM的操作本身是很慢的。但更慢的是批量操作时的不当。</p>\n<p>比如，我们要添加5个<code>&lt;li&gt;</code>：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> appendElement =</div><div class=\"line\">  type =&gt;</div><div class=\"line\">    () =&gt;</div><div class=\"line\">      <span class=\"built_in\">document</span>.body.appendChild(<span class=\"built_in\">document</span>.createElement(type))</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Array</span>.from(<span class=\"built_in\">Array</span>(<span class=\"number\">5</span>)).forEach(appendElement(<span class=\"string\">'li'</span>))</div></pre></td></tr></table></figure>\n<p>上面每次生成一个<code>li</code>就插入，这样是很慢的。正确的做法应该是先生成5个<code>li</code>，然后再一次性把这个5个<code>li</code>插入。这个过程，我们就可以使用Virtual DOM来实现。</p>\n<h2>How</h2>\n<p>总共分4个步骤，如下图所示：</p>\n<img src=\"/2016/01/31/Virtual-DOM/vdom2.png\" alt=\"vdom2.png\" title=\"\">\n<h3>VNode</h3>\n<p><code>VNode</code>这个函数是用JavaScript对象来表示DOM元素，比如：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"item1\"</span>&gt;</span>Call Me Item 1<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>可以表示为:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  type: <span class=\"string\">'li'</span>,</div><div class=\"line\">  props: &#123;</div><div class=\"line\">    id: <span class=\"string\">'item1'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  children: [<span class=\"string\">'item1'</span>]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>当然，<code>props</code>可以是数组，<code>children</code> 也可以放在<code>props</code>里面。</p>\n<h3>toHTML</h3>\n<p>这个就是把<code>VNode</code>转化成真正的DOM元素。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">// 大体分3步</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Step 1: createElement</span></div><div class=\"line\"><span class=\"keyword\">const</span> node = <span class=\"built_in\">document</span>.createElement(type)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Step 2: set props</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.keys(props).forEach(prop =&gt; &#123;</div><div class=\"line\">  node.setAttribute(prop, props[prop])</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Step 3: set children</span></div><div class=\"line\">children.forEach(VChild =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> childNode</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// if text</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> VChild === <span class=\"string\">'string'</span>) &#123;  <span class=\"comment\">// #0</span></div><div class=\"line\">    childNode = <span class=\"built_in\">document</span>.createTextNode(VChild)</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    childNode = createNode(VChild)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  node.appendChild(childNode)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">return</span> node</div></pre></td></tr></table></figure>\n<p>在<code>#0</code>中，如果当前node是<code>string</code>的话，就表明是<code>text</code>。否则进行递归。</p>\n<h3>Diff</h3>\n<p><code>diff</code>需要把新的Virtual DOM和旧的进行比较，从而得到变化的地方。<br>\n这个过程最难的了。我没用实现React的diff算法，只是对同级元素进行了比较而已。</p>\n<p>主要有不同的4种情况:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> TEXT = <span class=\"string\">'TEXT'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> PROPS = <span class=\"string\">'PROPS'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> REPLACE = <span class=\"string\">'REPLACE'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_CHILD = <span class=\"string\">'ADD_CHILD'</span></div></pre></td></tr></table></figure>\n<ul>\n<li><code>TEXT</code>: 替换旧的<code>text</code></li>\n<li><code>PROPS</code>: 表明<code>props</code>可能是增加，删除或修改</li>\n<li><code>REPLACE</code>: 替换旧的节点，包括删除的</li>\n<li><code>ADD_CHILD</code>: 表示需要增加child</li>\n</ul>\n<p>实现过程不讲述，详细看源代码(<a href=\"https://github.com/DrakeLeung/little-virtual-DOM/blob/master/src%2Fdiff.js\" target=\"_blank\" rel=\"external\">diff</a>)</p>\n<h3>Patch</h3>\n<p>这个过程把上个步骤得到的<code>diff</code>来给当前的DOM节点进行操作。这个过程就是我们优化DOM操作的地方。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> applyPatch = (node, currentPatch) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">switch</span> (currentPatch.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> patchType.TEXT:</div><div class=\"line\">      node.nodeValue = currentPatch.content</div><div class=\"line\">      <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> patchType.PROPS:</div><div class=\"line\">      setProps(node, currentPatch.props)</div><div class=\"line\">      <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> patchType.REPLACE:</div><div class=\"line\">      <span class=\"keyword\">if</span> (isExist(currentPatch.node)) &#123;</div><div class=\"line\">        node.parentNode.replaceChild(toHTML(currentPatch.node), node)</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        node.parentNode.removeChild(node)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> patchType.ADD_CHILD:</div><div class=\"line\">      node.appendChild(toHTML(currentPatch.node))</div><div class=\"line\">      <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">default</span>:</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Wrap up</h2>\n<p>从实现这个简单的Virtual DOM，思路确实是打开了不少。</p>\n<ul>\n<li>用JavaScript对象来表示DOM元素。之前只会直接操作DOM，没有想到可以这样玩。</li>\n<li>怎么比较2棵树的不同？只需要比较同级的元素。虽然还是不会比较children</li>\n<li>复习了DOM的一些知识。</li>\n</ul>\n<p>所以<strong>多尝试</strong>不同的东西，思路会扩展不少~</p>\n<h2>Resource</h2>\n<ul>\n<li><a href=\"https://gist.github.com/sebmarkbage/fcb1b6ab493b0c77d589\" target=\"_blank\" rel=\"external\">React (Virtual) DOM Terminology</a></li>\n<li><a href=\"https://gcanti.github.io/2014/10/29/understanding-react-and-reimplementing-it-from-scratch-part-1.html\" target=\"_blank\" rel=\"external\">Understanding-react-and-reimplementing-it-from-scratch-part-1</a></li>\n<li><a href=\"https://www.zhihu.com/question/29504639\" target=\"_blank\" rel=\"external\">怎么更好地理解虚拟DOM</a></li>\n<li><a href=\"https://github.com/livoras/blog/issues/13\" target=\"_blank\" rel=\"external\">如何实现一个Virtual DOM算法</a></li>\n</ul>\n","excerpt":"","more":"<p>最近实现了一个简单版的<a href=\"https://github.com/DrakeLeung/little-virtual-DOM\">Virtual DOM</a>。<br>\n之所以简单，是因为并没有实现React的diff算法，不过我们还是可以了解一下Virtual DOM。</p>\n<h2>What</h2>\n<p><em>Virtual DOM</em> 其实就是用JS对象去表示DOM元素。</p>\n<img src=\"/2016/01/31/Virtual-DOM/vdom0.png\" alt=\"vdom0.png\" title=\"\">\n<h2>Why</h2>\n<p>为什么要Virtual DOM呢？因为DOM的操作本身是很慢的。但更慢的是批量操作时的不当。</p>\n<p>比如，我们要添加5个<code>&lt;li&gt;</code>：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> appendElement =</div><div class=\"line\">  type =&gt;</div><div class=\"line\">    () =&gt;</div><div class=\"line\">      <span class=\"built_in\">document</span>.body.appendChild(<span class=\"built_in\">document</span>.createElement(type))</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Array</span>.from(<span class=\"built_in\">Array</span>(<span class=\"number\">5</span>)).forEach(appendElement(<span class=\"string\">'li'</span>))</div></pre></td></tr></table></figure>\n<p>上面每次生成一个<code>li</code>就插入，这样是很慢的。正确的做法应该是先生成5个<code>li</code>，然后再一次性把这个5个<code>li</code>插入。这个过程，我们就可以使用Virtual DOM来实现。</p>\n<h2>How</h2>\n<p>总共分4个步骤，如下图所示：</p>\n<img src=\"/2016/01/31/Virtual-DOM/vdom2.png\" alt=\"vdom2.png\" title=\"\">\n<h3>VNode</h3>\n<p><code>VNode</code>这个函数是用JavaScript对象来表示DOM元素，比如：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"item1\"</span>&gt;</span>Call Me Item 1<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>可以表示为:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  type: <span class=\"string\">'li'</span>,</div><div class=\"line\">  props: &#123;</div><div class=\"line\">    id: <span class=\"string\">'item1'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  children: [<span class=\"string\">'item1'</span>]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>当然，<code>props</code>可以是数组，<code>children</code> 也可以放在<code>props</code>里面。</p>\n<h3>toHTML</h3>\n<p>这个就是把<code>VNode</code>转化成真正的DOM元素。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">// 大体分3步</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Step 1: createElement</span></div><div class=\"line\"><span class=\"keyword\">const</span> node = <span class=\"built_in\">document</span>.createElement(type)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Step 2: set props</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.keys(props).forEach(prop =&gt; &#123;</div><div class=\"line\">  node.setAttribute(prop, props[prop])</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Step 3: set children</span></div><div class=\"line\">children.forEach(VChild =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> childNode</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// if text</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> VChild === <span class=\"string\">'string'</span>) &#123;  <span class=\"comment\">// #0</span></div><div class=\"line\">    childNode = <span class=\"built_in\">document</span>.createTextNode(VChild)</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    childNode = createNode(VChild)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  node.appendChild(childNode)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">return</span> node</div></pre></td></tr></table></figure>\n<p>在<code>#0</code>中，如果当前node是<code>string</code>的话，就表明是<code>text</code>。否则进行递归。</p>\n<h3>Diff</h3>\n<p><code>diff</code>需要把新的Virtual DOM和旧的进行比较，从而得到变化的地方。<br>\n这个过程最难的了。我没用实现React的diff算法，只是对同级元素进行了比较而已。</p>\n<p>主要有不同的4种情况:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> TEXT = <span class=\"string\">'TEXT'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> PROPS = <span class=\"string\">'PROPS'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> REPLACE = <span class=\"string\">'REPLACE'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_CHILD = <span class=\"string\">'ADD_CHILD'</span></div></pre></td></tr></table></figure>\n<ul>\n<li><code>TEXT</code>: 替换旧的<code>text</code></li>\n<li><code>PROPS</code>: 表明<code>props</code>可能是增加，删除或修改</li>\n<li><code>REPLACE</code>: 替换旧的节点，包括删除的</li>\n<li><code>ADD_CHILD</code>: 表示需要增加child</li>\n</ul>\n<p>实现过程不讲述，详细看源代码(<a href=\"https://github.com/DrakeLeung/little-virtual-DOM/blob/master/src%2Fdiff.js\">diff</a>)</p>\n<h3>Patch</h3>\n<p>这个过程把上个步骤得到的<code>diff</code>来给当前的DOM节点进行操作。这个过程就是我们优化DOM操作的地方。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> applyPatch = (node, currentPatch) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">switch</span> (currentPatch.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> patchType.TEXT:</div><div class=\"line\">      node.nodeValue = currentPatch.content</div><div class=\"line\">      <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> patchType.PROPS:</div><div class=\"line\">      setProps(node, currentPatch.props)</div><div class=\"line\">      <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> patchType.REPLACE:</div><div class=\"line\">      <span class=\"keyword\">if</span> (isExist(currentPatch.node)) &#123;</div><div class=\"line\">        node.parentNode.replaceChild(toHTML(currentPatch.node), node)</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        node.parentNode.removeChild(node)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> patchType.ADD_CHILD:</div><div class=\"line\">      node.appendChild(toHTML(currentPatch.node))</div><div class=\"line\">      <span class=\"keyword\">break</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">default</span>:</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Wrap up</h2>\n<p>从实现这个简单的Virtual DOM，思路确实是打开了不少。</p>\n<ul>\n<li>用JavaScript对象来表示DOM元素。之前只会直接操作DOM，没有想到可以这样玩。</li>\n<li>怎么比较2棵树的不同？只需要比较同级的元素。虽然还是不会比较children</li>\n<li>复习了DOM的一些知识。</li>\n</ul>\n<p>所以<strong>多尝试</strong>不同的东西，思路会扩展不少~</p>\n<h2>Resource</h2>\n<ul>\n<li><a href=\"https://gist.github.com/sebmarkbage/fcb1b6ab493b0c77d589\">React (Virtual) DOM Terminology</a></li>\n<li><a href=\"https://gcanti.github.io/2014/10/29/understanding-react-and-reimplementing-it-from-scratch-part-1.html\">Understanding-react-and-reimplementing-it-from-scratch-part-1</a></li>\n<li><a href=\"https://www.zhihu.com/question/29504639\">怎么更好地理解虚拟DOM</a></li>\n<li><a href=\"https://github.com/livoras/blog/issues/13\">如何实现一个Virtual DOM算法</a></li>\n</ul>\n"},{"title":"为你的JavaScript代码写测试","author":"Drake Leung","date":"2016-02-17T11:32:51.000Z","foreword":"我会把测试JavaScript代码的功力一一传授给你。","_content":"下面会讲解如何使用 karama, jasmine 以及 webpack，来为我们的 ES6 代码编写测试。\n（最后我写了一个可用的例子，请查看 [ES2015-Starter-Kit](https://github.com/DrakeLeung/ES2015-Starter-Kit/tree/master) ）\n\n## 艰难的抉择\n> 首先，我们要写测试，用什么写？自己写一个函数，还是使用某个测试框架？\n\n看起来，后者可观一点。\n\n> 然后，有哪些测试框架可以选择？选哪个？\n\n于是，我们 google 之，找到 stackoverflow 的一个问题 [JavaScript unit test tools for TDD](http://stackoverflow.com/questions/300855/javascript-unit-test-tools-for-tdd)。\n\n看了问题回答，很纠结，太多了不知道选择哪个！最后，我决定选择 [Karma](https://karma-runner.github.io/0.13/index.html), [Jasmine](https://github.com/jasmine/jasmine) 和 [Mocha](http://mochajs.org/) 这三者之一，根据 Star 数量以及维护团队。\n\n{% asset_img 0.png %}\n\n> 那么，*Karma*, *Jasmine* 以及 *Mocha* 这三者之间哪个好，有什么不同？\n\n于是，我们不妨 google，找到了 [What are the differences between mocha, chai, karma, jasmine, should.js, etc. testing frameworks?](http://stackoverflow.com/questions/24391462/what-are-the-differences-between-mocha-chai-karma-jasmine-should-js-etc-te) 这个问题。\n\n从回答中我们可以知道：*Karma* 只是一个 test runner，他负责提供 environment。而 *Jasmine* 和 *Mocha* 是编写测试脚本的框架。也就是说，我们可以选择 *Karma + Jasmine*或者 *Karma + Mocha*。我们不妨先选择前者~\n\n综上所述，**我们要使用 *Karma + Jasmine* 组合来为我们的 JavaScript 代码写测试**。\n\n## 战斗的号角\n接下来，我们根据文档（[karma - Installation](https://karma-runner.github.io/0.13/intro/installation.html), [karma - Configuration](https://karma-runner.github.io/0.13/intro/configuration.html) 和 [Jasmine - introduction](http://jasmine.github.io/2.0/introduction.html)），很容易就能搞起来。\n\n在这里我想说的是：当编写多个测试脚本的时候，你也许可以使用 `beforeEach` 和 `afterEach`。他们分别会在每个测试（spec）的之前和之后执行一次。\n\n## 副本\n最后还有一个问题是*如何结合 [Webpack](http://webpack.github.io/)* 来为我们的ES6代码编写测试。\n\n我不得不承认，这是一个很不错的问题。然而，我也通过google找到了答案。\n\n详细教程请看 *VueJS* 的 [Testing](https://vuejs.github.io/vue-loader/workflow/testing.html) 文档。\n\n## 战斗的荣耀\n你可以为你的仓库弄一个亮晶晶的 [travis ci status image](https://docs.travis-ci.com/user/status-images/)：\n\n![](https://travis-ci.org/travis-ci/travis-web.svg?branch=master)\n\n详细设置请查看 [travis docs](https://docs.travis-ci.com/user/getting-started/)以及这篇教程 [Testing JavaScript with Jasmine, Travis, and Karma](http://www.sitepoint.com/testing-javascript-jasmine-travis-karma/)。\n\n最后，如果还是不懂的话，可以查看我写的一个例子：[ES2015-Starter-Kit](https://github.com/DrakeLeung/ES2015-Starter-Kit/tree/master)\n\n## Resources\n- [JavaScript unit test tools for TDD](http://stackoverflow.com/questions/300855/javascript-unit-test-tools-for-tdd)\n- [What are the differences between mocha, chai, karma, jasmine, should.js, etc. testing frameworks?](http://stackoverflow.com/questions/24391462/what-are-the-differences-between-mocha-chai-karma-jasmine-should-js-etc-te)\n- [vuejs - Testing](https://vuejs.github.io/vue-loader/workflow/testing.html)\n- [Testing JavaScript with Jasmine, Travis, and Karma](http://www.sitepoint.com/testing-javascript-jasmine-travis-karma/)\n","source":"_posts/Write-Test-For-Your-JavaScript.md","raw":"---\ntitle: 为你的JavaScript代码写测试\nauthor: Drake Leung\ntags: [JavaScript, test]\ncategories: []\ndate: 2016-02-17 19:32:51\nforeword: 我会把测试JavaScript代码的功力一一传授给你。\n---\n下面会讲解如何使用 karama, jasmine 以及 webpack，来为我们的 ES6 代码编写测试。\n（最后我写了一个可用的例子，请查看 [ES2015-Starter-Kit](https://github.com/DrakeLeung/ES2015-Starter-Kit/tree/master) ）\n\n## 艰难的抉择\n> 首先，我们要写测试，用什么写？自己写一个函数，还是使用某个测试框架？\n\n看起来，后者可观一点。\n\n> 然后，有哪些测试框架可以选择？选哪个？\n\n于是，我们 google 之，找到 stackoverflow 的一个问题 [JavaScript unit test tools for TDD](http://stackoverflow.com/questions/300855/javascript-unit-test-tools-for-tdd)。\n\n看了问题回答，很纠结，太多了不知道选择哪个！最后，我决定选择 [Karma](https://karma-runner.github.io/0.13/index.html), [Jasmine](https://github.com/jasmine/jasmine) 和 [Mocha](http://mochajs.org/) 这三者之一，根据 Star 数量以及维护团队。\n\n{% asset_img 0.png %}\n\n> 那么，*Karma*, *Jasmine* 以及 *Mocha* 这三者之间哪个好，有什么不同？\n\n于是，我们不妨 google，找到了 [What are the differences between mocha, chai, karma, jasmine, should.js, etc. testing frameworks?](http://stackoverflow.com/questions/24391462/what-are-the-differences-between-mocha-chai-karma-jasmine-should-js-etc-te) 这个问题。\n\n从回答中我们可以知道：*Karma* 只是一个 test runner，他负责提供 environment。而 *Jasmine* 和 *Mocha* 是编写测试脚本的框架。也就是说，我们可以选择 *Karma + Jasmine*或者 *Karma + Mocha*。我们不妨先选择前者~\n\n综上所述，**我们要使用 *Karma + Jasmine* 组合来为我们的 JavaScript 代码写测试**。\n\n## 战斗的号角\n接下来，我们根据文档（[karma - Installation](https://karma-runner.github.io/0.13/intro/installation.html), [karma - Configuration](https://karma-runner.github.io/0.13/intro/configuration.html) 和 [Jasmine - introduction](http://jasmine.github.io/2.0/introduction.html)），很容易就能搞起来。\n\n在这里我想说的是：当编写多个测试脚本的时候，你也许可以使用 `beforeEach` 和 `afterEach`。他们分别会在每个测试（spec）的之前和之后执行一次。\n\n## 副本\n最后还有一个问题是*如何结合 [Webpack](http://webpack.github.io/)* 来为我们的ES6代码编写测试。\n\n我不得不承认，这是一个很不错的问题。然而，我也通过google找到了答案。\n\n详细教程请看 *VueJS* 的 [Testing](https://vuejs.github.io/vue-loader/workflow/testing.html) 文档。\n\n## 战斗的荣耀\n你可以为你的仓库弄一个亮晶晶的 [travis ci status image](https://docs.travis-ci.com/user/status-images/)：\n\n![](https://travis-ci.org/travis-ci/travis-web.svg?branch=master)\n\n详细设置请查看 [travis docs](https://docs.travis-ci.com/user/getting-started/)以及这篇教程 [Testing JavaScript with Jasmine, Travis, and Karma](http://www.sitepoint.com/testing-javascript-jasmine-travis-karma/)。\n\n最后，如果还是不懂的话，可以查看我写的一个例子：[ES2015-Starter-Kit](https://github.com/DrakeLeung/ES2015-Starter-Kit/tree/master)\n\n## Resources\n- [JavaScript unit test tools for TDD](http://stackoverflow.com/questions/300855/javascript-unit-test-tools-for-tdd)\n- [What are the differences between mocha, chai, karma, jasmine, should.js, etc. testing frameworks?](http://stackoverflow.com/questions/24391462/what-are-the-differences-between-mocha-chai-karma-jasmine-should-js-etc-te)\n- [vuejs - Testing](https://vuejs.github.io/vue-loader/workflow/testing.html)\n- [Testing JavaScript with Jasmine, Travis, and Karma](http://www.sitepoint.com/testing-javascript-jasmine-travis-karma/)\n","slug":"Write-Test-For-Your-JavaScript","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu74301001637rqcydma2m7","content":"<p>下面会讲解如何使用 karama, jasmine 以及 webpack，来为我们的 ES6 代码编写测试。<br>\n（最后我写了一个可用的例子，请查看 <a href=\"https://github.com/DrakeLeung/ES2015-Starter-Kit/tree/master\" target=\"_blank\" rel=\"external\">ES2015-Starter-Kit</a> ）</p>\n<h2>艰难的抉择</h2>\n<blockquote>\n<p>首先，我们要写测试，用什么写？自己写一个函数，还是使用某个测试框架？</p>\n</blockquote>\n<p>看起来，后者可观一点。</p>\n<blockquote>\n<p>然后，有哪些测试框架可以选择？选哪个？</p>\n</blockquote>\n<p>于是，我们 google 之，找到 stackoverflow 的一个问题 <a href=\"http://stackoverflow.com/questions/300855/javascript-unit-test-tools-for-tdd\" target=\"_blank\" rel=\"external\">JavaScript unit test tools for TDD</a>。</p>\n<p>看了问题回答，很纠结，太多了不知道选择哪个！最后，我决定选择 <a href=\"https://karma-runner.github.io/0.13/index.html\" target=\"_blank\" rel=\"external\">Karma</a>, <a href=\"https://github.com/jasmine/jasmine\" target=\"_blank\" rel=\"external\">Jasmine</a> 和 <a href=\"http://mochajs.org/\" target=\"_blank\" rel=\"external\">Mocha</a> 这三者之一，根据 Star 数量以及维护团队。</p>\n\n<blockquote>\n<p>那么，<em>Karma</em>, <em>Jasmine</em> 以及 <em>Mocha</em> 这三者之间哪个好，有什么不同？</p>\n</blockquote>\n<p>于是，我们不妨 google，找到了 <a href=\"http://stackoverflow.com/questions/24391462/what-are-the-differences-between-mocha-chai-karma-jasmine-should-js-etc-te\" target=\"_blank\" rel=\"external\">What are the differences between mocha, chai, karma, jasmine, should.js, etc. testing frameworks?</a> 这个问题。</p>\n<p>从回答中我们可以知道：<em>Karma</em> 只是一个 test runner，他负责提供 environment。而 <em>Jasmine</em> 和 <em>Mocha</em> 是编写测试脚本的框架。也就是说，我们可以选择 <em>Karma + Jasmine</em>或者 <em>Karma + Mocha</em>。我们不妨先选择前者~</p>\n<p>综上所述，<strong>我们要使用 <em>Karma + Jasmine</em> 组合来为我们的 JavaScript 代码写测试</strong>。</p>\n<h2>战斗的号角</h2>\n<p>接下来，我们根据文档（<a href=\"https://karma-runner.github.io/0.13/intro/installation.html\" target=\"_blank\" rel=\"external\">karma - Installation</a>, <a href=\"https://karma-runner.github.io/0.13/intro/configuration.html\" target=\"_blank\" rel=\"external\">karma - Configuration</a> 和 <a href=\"http://jasmine.github.io/2.0/introduction.html\" target=\"_blank\" rel=\"external\">Jasmine - introduction</a>），很容易就能搞起来。</p>\n<p>在这里我想说的是：当编写多个测试脚本的时候，你也许可以使用 <code>beforeEach</code> 和 <code>afterEach</code>。他们分别会在每个测试（spec）的之前和之后执行一次。</p>\n<h2>副本</h2>\n<p>最后还有一个问题是<em>如何结合 <a href=\"http://webpack.github.io/\" target=\"_blank\" rel=\"external\">Webpack</a></em> 来为我们的ES6代码编写测试。</p>\n<p>我不得不承认，这是一个很不错的问题。然而，我也通过google找到了答案。</p>\n<p>详细教程请看 <em>VueJS</em> 的 <a href=\"https://vuejs.github.io/vue-loader/workflow/testing.html\" target=\"_blank\" rel=\"external\">Testing</a> 文档。</p>\n<h2>战斗的荣耀</h2>\n<p>你可以为你的仓库弄一个亮晶晶的 <a href=\"https://docs.travis-ci.com/user/status-images/\" target=\"_blank\" rel=\"external\">travis ci status image</a>：</p>\n<p><img src=\"https://travis-ci.org/travis-ci/travis-web.svg?branch=master\" alt=\"\"></p>\n<p>详细设置请查看 <a href=\"https://docs.travis-ci.com/user/getting-started/\" target=\"_blank\" rel=\"external\">travis docs</a>以及这篇教程 <a href=\"http://www.sitepoint.com/testing-javascript-jasmine-travis-karma/\" target=\"_blank\" rel=\"external\">Testing JavaScript with Jasmine, Travis, and Karma</a>。</p>\n<p>最后，如果还是不懂的话，可以查看我写的一个例子：<a href=\"https://github.com/DrakeLeung/ES2015-Starter-Kit/tree/master\" target=\"_blank\" rel=\"external\">ES2015-Starter-Kit</a></p>\n<h2>Resources</h2>\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/300855/javascript-unit-test-tools-for-tdd\" target=\"_blank\" rel=\"external\">JavaScript unit test tools for TDD</a></li>\n<li><a href=\"http://stackoverflow.com/questions/24391462/what-are-the-differences-between-mocha-chai-karma-jasmine-should-js-etc-te\" target=\"_blank\" rel=\"external\">What are the differences between mocha, chai, karma, jasmine, should.js, etc. testing frameworks?</a></li>\n<li><a href=\"https://vuejs.github.io/vue-loader/workflow/testing.html\" target=\"_blank\" rel=\"external\">vuejs - Testing</a></li>\n<li><a href=\"http://www.sitepoint.com/testing-javascript-jasmine-travis-karma/\" target=\"_blank\" rel=\"external\">Testing JavaScript with Jasmine, Travis, and Karma</a></li>\n</ul>\n","excerpt":"","more":"<p>下面会讲解如何使用 karama, jasmine 以及 webpack，来为我们的 ES6 代码编写测试。<br>\n（最后我写了一个可用的例子，请查看 <a href=\"https://github.com/DrakeLeung/ES2015-Starter-Kit/tree/master\">ES2015-Starter-Kit</a> ）</p>\n<h2>艰难的抉择</h2>\n<blockquote>\n<p>首先，我们要写测试，用什么写？自己写一个函数，还是使用某个测试框架？</p>\n</blockquote>\n<p>看起来，后者可观一点。</p>\n<blockquote>\n<p>然后，有哪些测试框架可以选择？选哪个？</p>\n</blockquote>\n<p>于是，我们 google 之，找到 stackoverflow 的一个问题 <a href=\"http://stackoverflow.com/questions/300855/javascript-unit-test-tools-for-tdd\">JavaScript unit test tools for TDD</a>。</p>\n<p>看了问题回答，很纠结，太多了不知道选择哪个！最后，我决定选择 <a href=\"https://karma-runner.github.io/0.13/index.html\">Karma</a>, <a href=\"https://github.com/jasmine/jasmine\">Jasmine</a> 和 <a href=\"http://mochajs.org/\">Mocha</a> 这三者之一，根据 Star 数量以及维护团队。</p>\n\n<blockquote>\n<p>那么，<em>Karma</em>, <em>Jasmine</em> 以及 <em>Mocha</em> 这三者之间哪个好，有什么不同？</p>\n</blockquote>\n<p>于是，我们不妨 google，找到了 <a href=\"http://stackoverflow.com/questions/24391462/what-are-the-differences-between-mocha-chai-karma-jasmine-should-js-etc-te\">What are the differences between mocha, chai, karma, jasmine, should.js, etc. testing frameworks?</a> 这个问题。</p>\n<p>从回答中我们可以知道：<em>Karma</em> 只是一个 test runner，他负责提供 environment。而 <em>Jasmine</em> 和 <em>Mocha</em> 是编写测试脚本的框架。也就是说，我们可以选择 <em>Karma + Jasmine</em>或者 <em>Karma + Mocha</em>。我们不妨先选择前者~</p>\n<p>综上所述，<strong>我们要使用 <em>Karma + Jasmine</em> 组合来为我们的 JavaScript 代码写测试</strong>。</p>\n<h2>战斗的号角</h2>\n<p>接下来，我们根据文档（<a href=\"https://karma-runner.github.io/0.13/intro/installation.html\">karma - Installation</a>, <a href=\"https://karma-runner.github.io/0.13/intro/configuration.html\">karma - Configuration</a> 和 <a href=\"http://jasmine.github.io/2.0/introduction.html\">Jasmine - introduction</a>），很容易就能搞起来。</p>\n<p>在这里我想说的是：当编写多个测试脚本的时候，你也许可以使用 <code>beforeEach</code> 和 <code>afterEach</code>。他们分别会在每个测试（spec）的之前和之后执行一次。</p>\n<h2>副本</h2>\n<p>最后还有一个问题是<em>如何结合 <a href=\"http://webpack.github.io/\">Webpack</a></em> 来为我们的ES6代码编写测试。</p>\n<p>我不得不承认，这是一个很不错的问题。然而，我也通过google找到了答案。</p>\n<p>详细教程请看 <em>VueJS</em> 的 <a href=\"https://vuejs.github.io/vue-loader/workflow/testing.html\">Testing</a> 文档。</p>\n<h2>战斗的荣耀</h2>\n<p>你可以为你的仓库弄一个亮晶晶的 <a href=\"https://docs.travis-ci.com/user/status-images/\">travis ci status image</a>：</p>\n<p><img src=\"https://travis-ci.org/travis-ci/travis-web.svg?branch=master\" alt=\"\"></p>\n<p>详细设置请查看 <a href=\"https://docs.travis-ci.com/user/getting-started/\">travis docs</a>以及这篇教程 <a href=\"http://www.sitepoint.com/testing-javascript-jasmine-travis-karma/\">Testing JavaScript with Jasmine, Travis, and Karma</a>。</p>\n<p>最后，如果还是不懂的话，可以查看我写的一个例子：<a href=\"https://github.com/DrakeLeung/ES2015-Starter-Kit/tree/master\">ES2015-Starter-Kit</a></p>\n<h2>Resources</h2>\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/300855/javascript-unit-test-tools-for-tdd\">JavaScript unit test tools for TDD</a></li>\n<li><a href=\"http://stackoverflow.com/questions/24391462/what-are-the-differences-between-mocha-chai-karma-jasmine-should-js-etc-te\">What are the differences between mocha, chai, karma, jasmine, should.js, etc. testing frameworks?</a></li>\n<li><a href=\"https://vuejs.github.io/vue-loader/workflow/testing.html\">vuejs - Testing</a></li>\n<li><a href=\"http://www.sitepoint.com/testing-javascript-jasmine-travis-karma/\">Testing JavaScript with Jasmine, Travis, and Karma</a></li>\n</ul>\n"},{"title":"从零开始编写一个Hexo主题","author":"Drake Leung","date":"2016-01-27T14:23:29.000Z","foreword":"从零开始写一个主题的话，就意味着我们要了解Hexo的workflow。","_content":"\n之前我也不会写，但是当我了解以下东西的时候，就可以从零开始写一个Hexo主题了。\n{% asset_img hexo2.png %}\n\n- NodeJS / NPM\n- 模板引擎(Template Engine)，比如EJS, Jade，Handlebars等等都可以\n- HTML / CSS / JavaScript\n- 阅读Hexo的[文档](https://hexo.io/docs/)\n- 阅读Hexo默认主题[landscape](https://github.com/hexojs/hexo-theme-landscape)的源码\n\n以上正是一名Web前端人员需要了解和掌握的东西。\n**不过，不会前端也不要紧，我告诉你以下的东西就足够了。**\n\n## NodeJS / NPM\n首先，Hexo是由NodeJS来编写的。编写一个应用是需要第三方包(依赖/库)，这个就是我们的`package.json`文件的由来。这些package怎么下载的呢？答案就是通过[NPM](https://www.npmjs.com/)(Node Package Manager)，然后他们都会安装在`node_modules/`这个文件夹里面。\n\nOK，这就是我们需要知道的NodeJS和NPM的知识。\n\n## Hexo的Workflow\n**下面是重点。**\n\nHexo会读取根目录下的`_config.yml`里面的`theme`属性, 从而采用对应的主题。而主题都是放在`themes/`目录下面的，然后你会发现他里面有个`landscape`的目录，这个就是默认主题啦。\n\n{% asset_img hexo1.png theme workflow %}\n\n接着，我们查看`themes/landscape/`目录，以及根据文档[docs-themes](https://hexo.io/docs/themes.html)，我们很容易得出：一个主题其实由4部分组成。\n\n- `_config.yml`: 主题的配置文件\n- `source/`: 放我们的CSS文件以及图片\n- `layout/`: 模板文件\n- `scripts`: 放JavaScript文件，他们会自动加载\n\n然后，根据文档[docs-templates](https://hexo.io/docs/templates.html)，不难得出：\n\n每次当我们在浏览器访问时，Hexo都会去解析`sources`目录下对应的模板文件。不同的URL对应不同的文件，所以才有了不同的页面。那么，我们怎么知道哪个URL对应哪个页面呢？(下面我们以`EJS`为例)\n\n无论URL是什么，Hexo先读取`layout.ejs`，然后里面的[body](https://github.com/hexojs/hexo-theme-landscape/blob/master/layout%2Flayout.ejs)变量会替换成以下内容：(*Fallback*的意思是如果访问`/archives`时，我们的`archives.ejs`不存在的话，就会返回`index.ejs`)\n\nURL   | Template  | Fallback\n---   | ----      | ---\n/     | index.ejs |\n/archives | archive.ejs | index.ejs\n文章  | post.ejs  | index.ejs\n\n\n如下图所示:\n{% asset_img hexo.png template workflow %}\n\n或者，可以先尝试一下没有`layout.ejs`的情况，因为比较简单。也就是，访问`/`，Hexo就返回`index.ejs`里面的东西给你。访问`/archives`就返回`archive.ejs`。\n\n## 模板文件\n那么，接下来就要编写我们的模板文件了。怎么写呢？\n比如我的根目录想显示所有的文章？我们就要使用Hexo提供的[变量](https://hexo.io/docs/variables.html)了。通过文档，我们可以得出`page.posts`这个变量就包含了所有的文章。\n\n```html\n<% page.posts.each(function(post){ %>\n  <article>\n    <h1> post.title </h1>\n    <div> post.content </div>\n  </article>\n<% }) %>\n```\n\n编写模板文件的时候，我们可能利用Hexo内置的一些[helper](https://hexo.io/docs/helpers.html)来方便开发，比如分页使用[paginator](https://hexo.io/docs/helpers.html#paginator)，路径处理使用[url_for](https://hexo.io/docs/helpers.html#url_for)等。\n\n## 样式\n我们的CSS文件是放在`source`里面的，然后要怎么加载呢？这个时候，我们就需要在模板文件里面引入，比如我们的首页需要`app.css`，那么就在`index.ejs`里面引用就行了。如果每个页面都用到的话，就放在`layout.ejs`。\n```html\n<%- css('path/to/app') %>\n```\n\n当然，你也可以使用预处理器来写样式，比如Sass，Stylus等等。此时，你就要下载对应的package来解释成CSS。比如，我使用的是Sass，那么我就要`npm i --save hexo-renderer-sass`来把`.scss`文件解释成`.css`文件。\n\n## 总结一下\n如果遇到问题的话，查看Hexo默认主题[landscape](https://github.com/hexojs/hexo-theme-landscape)的源码以及[文档](https://hexo.io/docs/)就能解决了。\n最后卖下广告，这是我写的主题：[hexo-theme-again](https://github.com/DrakeLeung/hexo-theme-again)。\n","source":"_posts/Write-a-Hexo-Theme-From-Strach.md","raw":"title: 从零开始编写一个Hexo主题\nauthor: Drake Leung\ntags: [hexo, theme]\ncategories: []\ndate: 2016-01-27 22:23:29\nforeword: 从零开始写一个主题的话，就意味着我们要了解Hexo的workflow。\n---\n\n之前我也不会写，但是当我了解以下东西的时候，就可以从零开始写一个Hexo主题了。\n{% asset_img hexo2.png %}\n\n- NodeJS / NPM\n- 模板引擎(Template Engine)，比如EJS, Jade，Handlebars等等都可以\n- HTML / CSS / JavaScript\n- 阅读Hexo的[文档](https://hexo.io/docs/)\n- 阅读Hexo默认主题[landscape](https://github.com/hexojs/hexo-theme-landscape)的源码\n\n以上正是一名Web前端人员需要了解和掌握的东西。\n**不过，不会前端也不要紧，我告诉你以下的东西就足够了。**\n\n## NodeJS / NPM\n首先，Hexo是由NodeJS来编写的。编写一个应用是需要第三方包(依赖/库)，这个就是我们的`package.json`文件的由来。这些package怎么下载的呢？答案就是通过[NPM](https://www.npmjs.com/)(Node Package Manager)，然后他们都会安装在`node_modules/`这个文件夹里面。\n\nOK，这就是我们需要知道的NodeJS和NPM的知识。\n\n## Hexo的Workflow\n**下面是重点。**\n\nHexo会读取根目录下的`_config.yml`里面的`theme`属性, 从而采用对应的主题。而主题都是放在`themes/`目录下面的，然后你会发现他里面有个`landscape`的目录，这个就是默认主题啦。\n\n{% asset_img hexo1.png theme workflow %}\n\n接着，我们查看`themes/landscape/`目录，以及根据文档[docs-themes](https://hexo.io/docs/themes.html)，我们很容易得出：一个主题其实由4部分组成。\n\n- `_config.yml`: 主题的配置文件\n- `source/`: 放我们的CSS文件以及图片\n- `layout/`: 模板文件\n- `scripts`: 放JavaScript文件，他们会自动加载\n\n然后，根据文档[docs-templates](https://hexo.io/docs/templates.html)，不难得出：\n\n每次当我们在浏览器访问时，Hexo都会去解析`sources`目录下对应的模板文件。不同的URL对应不同的文件，所以才有了不同的页面。那么，我们怎么知道哪个URL对应哪个页面呢？(下面我们以`EJS`为例)\n\n无论URL是什么，Hexo先读取`layout.ejs`，然后里面的[body](https://github.com/hexojs/hexo-theme-landscape/blob/master/layout%2Flayout.ejs)变量会替换成以下内容：(*Fallback*的意思是如果访问`/archives`时，我们的`archives.ejs`不存在的话，就会返回`index.ejs`)\n\nURL   | Template  | Fallback\n---   | ----      | ---\n/     | index.ejs |\n/archives | archive.ejs | index.ejs\n文章  | post.ejs  | index.ejs\n\n\n如下图所示:\n{% asset_img hexo.png template workflow %}\n\n或者，可以先尝试一下没有`layout.ejs`的情况，因为比较简单。也就是，访问`/`，Hexo就返回`index.ejs`里面的东西给你。访问`/archives`就返回`archive.ejs`。\n\n## 模板文件\n那么，接下来就要编写我们的模板文件了。怎么写呢？\n比如我的根目录想显示所有的文章？我们就要使用Hexo提供的[变量](https://hexo.io/docs/variables.html)了。通过文档，我们可以得出`page.posts`这个变量就包含了所有的文章。\n\n```html\n<% page.posts.each(function(post){ %>\n  <article>\n    <h1> post.title </h1>\n    <div> post.content </div>\n  </article>\n<% }) %>\n```\n\n编写模板文件的时候，我们可能利用Hexo内置的一些[helper](https://hexo.io/docs/helpers.html)来方便开发，比如分页使用[paginator](https://hexo.io/docs/helpers.html#paginator)，路径处理使用[url_for](https://hexo.io/docs/helpers.html#url_for)等。\n\n## 样式\n我们的CSS文件是放在`source`里面的，然后要怎么加载呢？这个时候，我们就需要在模板文件里面引入，比如我们的首页需要`app.css`，那么就在`index.ejs`里面引用就行了。如果每个页面都用到的话，就放在`layout.ejs`。\n```html\n<%- css('path/to/app') %>\n```\n\n当然，你也可以使用预处理器来写样式，比如Sass，Stylus等等。此时，你就要下载对应的package来解释成CSS。比如，我使用的是Sass，那么我就要`npm i --save hexo-renderer-sass`来把`.scss`文件解释成`.css`文件。\n\n## 总结一下\n如果遇到问题的话，查看Hexo默认主题[landscape](https://github.com/hexojs/hexo-theme-landscape)的源码以及[文档](https://hexo.io/docs/)就能解决了。\n最后卖下广告，这是我写的主题：[hexo-theme-again](https://github.com/DrakeLeung/hexo-theme-again)。\n","slug":"Write-a-Hexo-Theme-From-Strach","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu74305001a37rqdckp21ga","content":"<p>之前我也不会写，但是当我了解以下东西的时候，就可以从零开始写一个Hexo主题了。</p>\n\n<ul>\n<li>NodeJS / NPM</li>\n<li>模板引擎(Template Engine)，比如EJS, Jade，Handlebars等等都可以</li>\n<li>HTML / CSS / JavaScript</li>\n<li>阅读Hexo的<a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"external\">文档</a></li>\n<li>阅读Hexo默认主题<a href=\"https://github.com/hexojs/hexo-theme-landscape\" target=\"_blank\" rel=\"external\">landscape</a>的源码</li>\n</ul>\n<p>以上正是一名Web前端人员需要了解和掌握的东西。<br>\n<strong>不过，不会前端也不要紧，我告诉你以下的东西就足够了。</strong></p>\n<h2>NodeJS / NPM</h2>\n<p>首先，Hexo是由NodeJS来编写的。编写一个应用是需要第三方包(依赖/库)，这个就是我们的<code>package.json</code>文件的由来。这些package怎么下载的呢？答案就是通过<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"external\">NPM</a>(Node Package Manager)，然后他们都会安装在<code>node_modules/</code>这个文件夹里面。</p>\n<p>OK，这就是我们需要知道的NodeJS和NPM的知识。</p>\n<h2>Hexo的Workflow</h2>\n<p><strong>下面是重点。</strong></p>\n<p>Hexo会读取根目录下的<code>_config.yml</code>里面的<code>theme</code>属性, 从而采用对应的主题。而主题都是放在<code>themes/</code>目录下面的，然后你会发现他里面有个<code>landscape</code>的目录，这个就是默认主题啦。</p>\n\n<p>接着，我们查看<code>themes/landscape/</code>目录，以及根据文档<a href=\"https://hexo.io/docs/themes.html\" target=\"_blank\" rel=\"external\">docs-themes</a>，我们很容易得出：一个主题其实由4部分组成。</p>\n<ul>\n<li><code>_config.yml</code>: 主题的配置文件</li>\n<li><code>source/</code>: 放我们的CSS文件以及图片</li>\n<li><code>layout/</code>: 模板文件</li>\n<li><code>scripts</code>: 放JavaScript文件，他们会自动加载</li>\n</ul>\n<p>然后，根据文档<a href=\"https://hexo.io/docs/templates.html\" target=\"_blank\" rel=\"external\">docs-templates</a>，不难得出：</p>\n<p>每次当我们在浏览器访问时，Hexo都会去解析<code>sources</code>目录下对应的模板文件。不同的URL对应不同的文件，所以才有了不同的页面。那么，我们怎么知道哪个URL对应哪个页面呢？(下面我们以<code>EJS</code>为例)</p>\n<p>无论URL是什么，Hexo先读取<code>layout.ejs</code>，然后里面的<a href=\"https://github.com/hexojs/hexo-theme-landscape/blob/master/layout%2Flayout.ejs\" target=\"_blank\" rel=\"external\">body</a>变量会替换成以下内容：(<em>Fallback</em>的意思是如果访问<code>/archives</code>时，我们的<code>archives.ejs</code>不存在的话，就会返回<code>index.ejs</code>)</p>\n<table>\n<thead>\n<tr>\n<th>URL</th>\n<th>Template</th>\n<th>Fallback</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>/</td>\n<td>index.ejs</td>\n<td></td>\n</tr>\n<tr>\n<td>/archives</td>\n<td>archive.ejs</td>\n<td>index.ejs</td>\n</tr>\n<tr>\n<td>文章</td>\n<td>post.ejs</td>\n<td>index.ejs</td>\n</tr>\n</tbody>\n</table>\n<p>如下图所示:</p>\n\n<p>或者，可以先尝试一下没有<code>layout.ejs</code>的情况，因为比较简单。也就是，访问<code>/</code>，Hexo就返回<code>index.ejs</code>里面的东西给你。访问<code>/archives</code>就返回<code>archive.ejs</code>。</p>\n<h2>模板文件</h2>\n<p>那么，接下来就要编写我们的模板文件了。怎么写呢？<br>\n比如我的根目录想显示所有的文章？我们就要使用Hexo提供的<a href=\"https://hexo.io/docs/variables.html\" target=\"_blank\" rel=\"external\">变量</a>了。通过文档，我们可以得出<code>page.posts</code>这个变量就包含了所有的文章。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">page.posts.each</span>(<span class=\"attr\">function</span>(<span class=\"attr\">post</span>)&#123; %&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">article</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span> post.title <span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> post.content <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">article</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> &#125;) %&gt;</span></div></pre></td></tr></table></figure>\n<p>编写模板文件的时候，我们可能利用Hexo内置的一些<a href=\"https://hexo.io/docs/helpers.html\" target=\"_blank\" rel=\"external\">helper</a>来方便开发，比如分页使用<a href=\"https://hexo.io/docs/helpers.html#paginator\" target=\"_blank\" rel=\"external\">paginator</a>，路径处理使用<a href=\"https://hexo.io/docs/helpers.html#url_for\" target=\"_blank\" rel=\"external\">url_for</a>等。</p>\n<h2>样式</h2>\n<p>我们的CSS文件是放在<code>source</code>里面的，然后要怎么加载呢？这个时候，我们就需要在模板文件里面引入，比如我们的首页需要<code>app.css</code>，那么就在<code>index.ejs</code>里面引用就行了。如果每个页面都用到的话，就放在<code>layout.ejs</code>。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">css</span>('<span class=\"attr\">path</span>/<span class=\"attr\">to</span>/<span class=\"attr\">app</span>') %&gt;</span></div></pre></td></tr></table></figure>\n<p>当然，你也可以使用预处理器来写样式，比如Sass，Stylus等等。此时，你就要下载对应的package来解释成CSS。比如，我使用的是Sass，那么我就要<code>npm i --save hexo-renderer-sass</code>来把<code>.scss</code>文件解释成<code>.css</code>文件。</p>\n<h2>总结一下</h2>\n<p>如果遇到问题的话，查看Hexo默认主题<a href=\"https://github.com/hexojs/hexo-theme-landscape\" target=\"_blank\" rel=\"external\">landscape</a>的源码以及<a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"external\">文档</a>就能解决了。<br>\n最后卖下广告，这是我写的主题：<a href=\"https://github.com/DrakeLeung/hexo-theme-again\" target=\"_blank\" rel=\"external\">hexo-theme-again</a>。</p>\n","excerpt":"","more":"<p>之前我也不会写，但是当我了解以下东西的时候，就可以从零开始写一个Hexo主题了。</p>\n\n<ul>\n<li>NodeJS / NPM</li>\n<li>模板引擎(Template Engine)，比如EJS, Jade，Handlebars等等都可以</li>\n<li>HTML / CSS / JavaScript</li>\n<li>阅读Hexo的<a href=\"https://hexo.io/docs/\">文档</a></li>\n<li>阅读Hexo默认主题<a href=\"https://github.com/hexojs/hexo-theme-landscape\">landscape</a>的源码</li>\n</ul>\n<p>以上正是一名Web前端人员需要了解和掌握的东西。<br>\n<strong>不过，不会前端也不要紧，我告诉你以下的东西就足够了。</strong></p>\n<h2>NodeJS / NPM</h2>\n<p>首先，Hexo是由NodeJS来编写的。编写一个应用是需要第三方包(依赖/库)，这个就是我们的<code>package.json</code>文件的由来。这些package怎么下载的呢？答案就是通过<a href=\"https://www.npmjs.com/\">NPM</a>(Node Package Manager)，然后他们都会安装在<code>node_modules/</code>这个文件夹里面。</p>\n<p>OK，这就是我们需要知道的NodeJS和NPM的知识。</p>\n<h2>Hexo的Workflow</h2>\n<p><strong>下面是重点。</strong></p>\n<p>Hexo会读取根目录下的<code>_config.yml</code>里面的<code>theme</code>属性, 从而采用对应的主题。而主题都是放在<code>themes/</code>目录下面的，然后你会发现他里面有个<code>landscape</code>的目录，这个就是默认主题啦。</p>\n\n<p>接着，我们查看<code>themes/landscape/</code>目录，以及根据文档<a href=\"https://hexo.io/docs/themes.html\">docs-themes</a>，我们很容易得出：一个主题其实由4部分组成。</p>\n<ul>\n<li><code>_config.yml</code>: 主题的配置文件</li>\n<li><code>source/</code>: 放我们的CSS文件以及图片</li>\n<li><code>layout/</code>: 模板文件</li>\n<li><code>scripts</code>: 放JavaScript文件，他们会自动加载</li>\n</ul>\n<p>然后，根据文档<a href=\"https://hexo.io/docs/templates.html\">docs-templates</a>，不难得出：</p>\n<p>每次当我们在浏览器访问时，Hexo都会去解析<code>sources</code>目录下对应的模板文件。不同的URL对应不同的文件，所以才有了不同的页面。那么，我们怎么知道哪个URL对应哪个页面呢？(下面我们以<code>EJS</code>为例)</p>\n<p>无论URL是什么，Hexo先读取<code>layout.ejs</code>，然后里面的<a href=\"https://github.com/hexojs/hexo-theme-landscape/blob/master/layout%2Flayout.ejs\">body</a>变量会替换成以下内容：(<em>Fallback</em>的意思是如果访问<code>/archives</code>时，我们的<code>archives.ejs</code>不存在的话，就会返回<code>index.ejs</code>)</p>\n<table>\n<thead>\n<tr>\n<th>URL</th>\n<th>Template</th>\n<th>Fallback</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>/</td>\n<td>index.ejs</td>\n<td></td>\n</tr>\n<tr>\n<td>/archives</td>\n<td>archive.ejs</td>\n<td>index.ejs</td>\n</tr>\n<tr>\n<td>文章</td>\n<td>post.ejs</td>\n<td>index.ejs</td>\n</tr>\n</tbody>\n</table>\n<p>如下图所示:</p>\n\n<p>或者，可以先尝试一下没有<code>layout.ejs</code>的情况，因为比较简单。也就是，访问<code>/</code>，Hexo就返回<code>index.ejs</code>里面的东西给你。访问<code>/archives</code>就返回<code>archive.ejs</code>。</p>\n<h2>模板文件</h2>\n<p>那么，接下来就要编写我们的模板文件了。怎么写呢？<br>\n比如我的根目录想显示所有的文章？我们就要使用Hexo提供的<a href=\"https://hexo.io/docs/variables.html\">变量</a>了。通过文档，我们可以得出<code>page.posts</code>这个变量就包含了所有的文章。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">page.posts.each</span>(<span class=\"attr\">function</span>(<span class=\"attr\">post</span>)&#123; %&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">article</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span> post.title <span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> post.content <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">article</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> &#125;) %&gt;</span></div></pre></td></tr></table></figure>\n<p>编写模板文件的时候，我们可能利用Hexo内置的一些<a href=\"https://hexo.io/docs/helpers.html\">helper</a>来方便开发，比如分页使用<a href=\"https://hexo.io/docs/helpers.html#paginator\">paginator</a>，路径处理使用<a href=\"https://hexo.io/docs/helpers.html#url_for\">url_for</a>等。</p>\n<h2>样式</h2>\n<p>我们的CSS文件是放在<code>source</code>里面的，然后要怎么加载呢？这个时候，我们就需要在模板文件里面引入，比如我们的首页需要<code>app.css</code>，那么就在<code>index.ejs</code>里面引用就行了。如果每个页面都用到的话，就放在<code>layout.ejs</code>。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">css</span>('<span class=\"attr\">path</span>/<span class=\"attr\">to</span>/<span class=\"attr\">app</span>') %&gt;</span></div></pre></td></tr></table></figure>\n<p>当然，你也可以使用预处理器来写样式，比如Sass，Stylus等等。此时，你就要下载对应的package来解释成CSS。比如，我使用的是Sass，那么我就要<code>npm i --save hexo-renderer-sass</code>来把<code>.scss</code>文件解释成<code>.css</code>文件。</p>\n<h2>总结一下</h2>\n<p>如果遇到问题的话，查看Hexo默认主题<a href=\"https://github.com/hexojs/hexo-theme-landscape\">landscape</a>的源码以及<a href=\"https://hexo.io/docs/\">文档</a>就能解决了。<br>\n最后卖下广告，这是我写的主题：<a href=\"https://github.com/DrakeLeung/hexo-theme-again\">hexo-theme-again</a>。</p>\n"},{"title":"A Mathematical Expressions Parser","author":"Drake Leung","date":"2016-07-14T12:56:20.000Z","foreword":"计算四则运算表达式（含括号）的值。","_content":"\n更多信息可查看 [SLIDE](http://drakeleung.github.io/demo/slides/calc) 。\n\n## 问题\n我们的问题是这样子的：\n\n> 写一个 `calculate` 函数，他的参数是一个四则运算表达式字符串，返回结果则是该参数的求值。\n\n```javascript\ncalculate('1+2*3') // 7\ncalculate('1*(2+3)*4)') // 20\n\n/*\n * 规则：\n * 1. 禁止 eval 及其类似物\n * 2. 禁止第三方库\n */\n```\n\n## 最简单的思路\n假设字符串就是简单的 `1+2`，那么最简单的想法当然是：\n\n> 遍历该字符串，然后根据不同的操作符，计算其结果，重复之。\n\n然而，当字符串为 `1+2*3` 时，得到的结果是 `9` 而不是 `7` 。这是因为我们并没有考虑到**操作符的优先级**。并且，如果加上括号（`()`）的话，那么优先级就变得更加复杂。\n\n所以啊，我们就想：\n\n> 能不能没有优先级，按顺序就好啦，这样就简单多了。\n\n## 逆波兰\n只要努力 google 一下，我们就可以找到解决方法：\n\n> 使用「逆波兰表达式」。\n\n像我们平时使用的 `1 + 1` 就叫 *中缀表达式* 。而 *逆波兰*（*后缀表达式* ）则形如 `1 1 +`。\n\n现在，我们的问题就变成了:\n\n> 怎样把「中缀表达式」转换成「逆波兰表达式」？\n\n## Tokenizer\n第一步，我们需要做的是：\n\n```bash\n// 假设我们的字符串形如：`1+2*3-4`\n// 那么就要把他转换成这样的一个数组：\n\n[\n  { type: 'number', value: 1 },\n  { type: 'operator', value: '+' },\n  { type: 'number', value: 2 },\n  ....\n]\n```\n\n*查看代码请点击 [tokenizer](https://github.com/DrakeLeung/calc/blob/master/src/tokenizer.js) 。*\n\n## toRPN\n第二步，我们要把得到的 tokens 转换成 *逆波兰* 形式。这个时候需要用到 [shunting-yard]() 算法。\n\n*查看代码请点击 [toRPN](https://github.com/DrakeLeung/calc/blob/master/src/toRPN.js) 。*\n\n## Calculator\n第三步，也是我们最后一步。\n\n我们需要把创建一个 **操作数栈** ，如果是操作数的话，push 到栈里去；如果是操作符的话，把栈里的前两个操作数 pop 出来，计算他们和该操作符的结果。然后把结果 push 到栈里。重复之，直到遍历完所有的 tokens 。\n\n*查看代码请点击 [calculator](https://github.com/DrakeLeung/calc/blob/master/src/index.js) 。*\n\n## 抽象语法树\n其实，我们还能做些更有趣的事情。比如，构建一棵 AST 。做法其实和第三步差不多。\n\n1. 创建一个 **操作数栈**\n2. 遍历 tokens\n3. 如果 token 为操作数，则 push 到栈里。\n4. 如果 token 为操作符，则把 栈里的两个操作数 pop 出来，与该操作符形成 AST 的一个节点，接着把该节点 push 到栈里去\n5. 重复之，直到遍历完 tokens\n\n有了 AST 之后，如果我们对其分别进行前序，中序，后序遍历的话，就可以得到 **前缀表达式** ，**中缀表达式** ，以及 **后缀表达式** 。\n\n*查看代码请点击 [parser](https://github.com/DrakeLeung/calc/blob/master/src/parser.js) 。*\n\n## 项目源码\n所有代码可查看：https://github.com/DrakeLeung/calc","source":"_posts/a-mathematical-expressions-parser.md","raw":"---\ntitle: A Mathematical Expressions Parser\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-07-14 20:56:20\nforeword: 计算四则运算表达式（含括号）的值。\n---\n\n更多信息可查看 [SLIDE](http://drakeleung.github.io/demo/slides/calc) 。\n\n## 问题\n我们的问题是这样子的：\n\n> 写一个 `calculate` 函数，他的参数是一个四则运算表达式字符串，返回结果则是该参数的求值。\n\n```javascript\ncalculate('1+2*3') // 7\ncalculate('1*(2+3)*4)') // 20\n\n/*\n * 规则：\n * 1. 禁止 eval 及其类似物\n * 2. 禁止第三方库\n */\n```\n\n## 最简单的思路\n假设字符串就是简单的 `1+2`，那么最简单的想法当然是：\n\n> 遍历该字符串，然后根据不同的操作符，计算其结果，重复之。\n\n然而，当字符串为 `1+2*3` 时，得到的结果是 `9` 而不是 `7` 。这是因为我们并没有考虑到**操作符的优先级**。并且，如果加上括号（`()`）的话，那么优先级就变得更加复杂。\n\n所以啊，我们就想：\n\n> 能不能没有优先级，按顺序就好啦，这样就简单多了。\n\n## 逆波兰\n只要努力 google 一下，我们就可以找到解决方法：\n\n> 使用「逆波兰表达式」。\n\n像我们平时使用的 `1 + 1` 就叫 *中缀表达式* 。而 *逆波兰*（*后缀表达式* ）则形如 `1 1 +`。\n\n现在，我们的问题就变成了:\n\n> 怎样把「中缀表达式」转换成「逆波兰表达式」？\n\n## Tokenizer\n第一步，我们需要做的是：\n\n```bash\n// 假设我们的字符串形如：`1+2*3-4`\n// 那么就要把他转换成这样的一个数组：\n\n[\n  { type: 'number', value: 1 },\n  { type: 'operator', value: '+' },\n  { type: 'number', value: 2 },\n  ....\n]\n```\n\n*查看代码请点击 [tokenizer](https://github.com/DrakeLeung/calc/blob/master/src/tokenizer.js) 。*\n\n## toRPN\n第二步，我们要把得到的 tokens 转换成 *逆波兰* 形式。这个时候需要用到 [shunting-yard]() 算法。\n\n*查看代码请点击 [toRPN](https://github.com/DrakeLeung/calc/blob/master/src/toRPN.js) 。*\n\n## Calculator\n第三步，也是我们最后一步。\n\n我们需要把创建一个 **操作数栈** ，如果是操作数的话，push 到栈里去；如果是操作符的话，把栈里的前两个操作数 pop 出来，计算他们和该操作符的结果。然后把结果 push 到栈里。重复之，直到遍历完所有的 tokens 。\n\n*查看代码请点击 [calculator](https://github.com/DrakeLeung/calc/blob/master/src/index.js) 。*\n\n## 抽象语法树\n其实，我们还能做些更有趣的事情。比如，构建一棵 AST 。做法其实和第三步差不多。\n\n1. 创建一个 **操作数栈**\n2. 遍历 tokens\n3. 如果 token 为操作数，则 push 到栈里。\n4. 如果 token 为操作符，则把 栈里的两个操作数 pop 出来，与该操作符形成 AST 的一个节点，接着把该节点 push 到栈里去\n5. 重复之，直到遍历完 tokens\n\n有了 AST 之后，如果我们对其分别进行前序，中序，后序遍历的话，就可以得到 **前缀表达式** ，**中缀表达式** ，以及 **后缀表达式** 。\n\n*查看代码请点击 [parser](https://github.com/DrakeLeung/calc/blob/master/src/parser.js) 。*\n\n## 项目源码\n所有代码可查看：https://github.com/DrakeLeung/calc","slug":"a-mathematical-expressions-parser","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu7430b001c37rqdhjyvgk3","content":"<p>更多信息可查看 <a href=\"http://drakeleung.github.io/demo/slides/calc\">SLIDE</a> 。</p>\n<h2>问题</h2>\n<p>我们的问题是这样子的：</p>\n<blockquote>\n<p>写一个 <code>calculate</code> 函数，他的参数是一个四则运算表达式字符串，返回结果则是该参数的求值。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">calculate(<span class=\"string\">'1+2*3'</span>) <span class=\"comment\">// 7</span></div><div class=\"line\">calculate(<span class=\"string\">'1*(2+3)*4)'</span>) <span class=\"comment\">// 20</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/*</span></div><div class=\"line\"> * 规则：</div><div class=\"line\"> * 1. 禁止 eval 及其类似物</div><div class=\"line\"> * 2. 禁止第三方库</div><div class=\"line\"> */</div></pre></td></tr></table></figure>\n<h2>最简单的思路</h2>\n<p>假设字符串就是简单的 <code>1+2</code>，那么最简单的想法当然是：</p>\n<blockquote>\n<p>遍历该字符串，然后根据不同的操作符，计算其结果，重复之。</p>\n</blockquote>\n<p>然而，当字符串为 <code>1+2*3</code> 时，得到的结果是 <code>9</code> 而不是 <code>7</code> 。这是因为我们并没有考虑到<strong>操作符的优先级</strong>。并且，如果加上括号（<code>()</code>）的话，那么优先级就变得更加复杂。</p>\n<p>所以啊，我们就想：</p>\n<blockquote>\n<p>能不能没有优先级，按顺序就好啦，这样就简单多了。</p>\n</blockquote>\n<h2>逆波兰</h2>\n<p>只要努力 google 一下，我们就可以找到解决方法：</p>\n<blockquote>\n<p>使用「逆波兰表达式」。</p>\n</blockquote>\n<p>像我们平时使用的 <code>1 + 1</code> 就叫 <em>中缀表达式</em> 。而 <em>逆波兰</em>（<em>后缀表达式</em> ）则形如 <code>1 1 +</code>。</p>\n<p>现在，我们的问题就变成了:</p>\n<blockquote>\n<p>怎样把「中缀表达式」转换成「逆波兰表达式」？</p>\n</blockquote>\n<h2>Tokenizer</h2>\n<p>第一步，我们需要做的是：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">// 假设我们的字符串形如：`1+2*3-4`</div><div class=\"line\">// 那么就要把他转换成这样的一个数组：</div><div class=\"line\"></div><div class=\"line\">[</div><div class=\"line\">  &#123; <span class=\"built_in\">type</span>: <span class=\"string\">'number'</span>, value: 1 &#125;,</div><div class=\"line\">  &#123; <span class=\"built_in\">type</span>: <span class=\"string\">'operator'</span>, value: <span class=\"string\">'+'</span> &#125;,</div><div class=\"line\">  &#123; <span class=\"built_in\">type</span>: <span class=\"string\">'number'</span>, value: 2 &#125;,</div><div class=\"line\">  ....</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<p><em>查看代码请点击 <a href=\"https://github.com/DrakeLeung/calc/blob/master/src/tokenizer.js\" target=\"_blank\" rel=\"external\">tokenizer</a> 。</em></p>\n<h2>toRPN</h2>\n<p>第二步，我们要把得到的 tokens 转换成 <em>逆波兰</em> 形式。这个时候需要用到 <a href=\"\">shunting-yard</a> 算法。</p>\n<p><em>查看代码请点击 <a href=\"https://github.com/DrakeLeung/calc/blob/master/src/toRPN.js\" target=\"_blank\" rel=\"external\">toRPN</a> 。</em></p>\n<h2>Calculator</h2>\n<p>第三步，也是我们最后一步。</p>\n<p>我们需要把创建一个 <strong>操作数栈</strong> ，如果是操作数的话，push 到栈里去；如果是操作符的话，把栈里的前两个操作数 pop 出来，计算他们和该操作符的结果。然后把结果 push 到栈里。重复之，直到遍历完所有的 tokens 。</p>\n<p><em>查看代码请点击 <a href=\"https://github.com/DrakeLeung/calc/blob/master/src/index.js\" target=\"_blank\" rel=\"external\">calculator</a> 。</em></p>\n<h2>抽象语法树</h2>\n<p>其实，我们还能做些更有趣的事情。比如，构建一棵 AST 。做法其实和第三步差不多。</p>\n<ol>\n<li>创建一个 <strong>操作数栈</strong></li>\n<li>遍历 tokens</li>\n<li>如果 token 为操作数，则 push 到栈里。</li>\n<li>如果 token 为操作符，则把 栈里的两个操作数 pop 出来，与该操作符形成 AST 的一个节点，接着把该节点 push 到栈里去</li>\n<li>重复之，直到遍历完 tokens</li>\n</ol>\n<p>有了 AST 之后，如果我们对其分别进行前序，中序，后序遍历的话，就可以得到 <strong>前缀表达式</strong> ，<strong>中缀表达式</strong> ，以及 <strong>后缀表达式</strong> 。</p>\n<p><em>查看代码请点击 <a href=\"https://github.com/DrakeLeung/calc/blob/master/src/parser.js\" target=\"_blank\" rel=\"external\">parser</a> 。</em></p>\n<h2>项目源码</h2>\n<p>所有代码可查看：<a href=\"https://github.com/DrakeLeung/calc\" target=\"_blank\" rel=\"external\">https://github.com/DrakeLeung/calc</a></p>\n","excerpt":"","more":"<p>更多信息可查看 <a href=\"http://drakeleung.github.io/demo/slides/calc\">SLIDE</a> 。</p>\n<h2>问题</h2>\n<p>我们的问题是这样子的：</p>\n<blockquote>\n<p>写一个 <code>calculate</code> 函数，他的参数是一个四则运算表达式字符串，返回结果则是该参数的求值。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">calculate(<span class=\"string\">'1+2*3'</span>) <span class=\"comment\">// 7</span></div><div class=\"line\">calculate(<span class=\"string\">'1*(2+3)*4)'</span>) <span class=\"comment\">// 20</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/*</div><div class=\"line\"> * 规则：</div><div class=\"line\"> * 1. 禁止 eval 及其类似物</div><div class=\"line\"> * 2. 禁止第三方库</div><div class=\"line\"> */</span></div></pre></td></tr></table></figure>\n<h2>最简单的思路</h2>\n<p>假设字符串就是简单的 <code>1+2</code>，那么最简单的想法当然是：</p>\n<blockquote>\n<p>遍历该字符串，然后根据不同的操作符，计算其结果，重复之。</p>\n</blockquote>\n<p>然而，当字符串为 <code>1+2*3</code> 时，得到的结果是 <code>9</code> 而不是 <code>7</code> 。这是因为我们并没有考虑到<strong>操作符的优先级</strong>。并且，如果加上括号（<code>()</code>）的话，那么优先级就变得更加复杂。</p>\n<p>所以啊，我们就想：</p>\n<blockquote>\n<p>能不能没有优先级，按顺序就好啦，这样就简单多了。</p>\n</blockquote>\n<h2>逆波兰</h2>\n<p>只要努力 google 一下，我们就可以找到解决方法：</p>\n<blockquote>\n<p>使用「逆波兰表达式」。</p>\n</blockquote>\n<p>像我们平时使用的 <code>1 + 1</code> 就叫 <em>中缀表达式</em> 。而 <em>逆波兰</em>（<em>后缀表达式</em> ）则形如 <code>1 1 +</code>。</p>\n<p>现在，我们的问题就变成了:</p>\n<blockquote>\n<p>怎样把「中缀表达式」转换成「逆波兰表达式」？</p>\n</blockquote>\n<h2>Tokenizer</h2>\n<p>第一步，我们需要做的是：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">// 假设我们的字符串形如：`1+2*3-4`</div><div class=\"line\">// 那么就要把他转换成这样的一个数组：</div><div class=\"line\"></div><div class=\"line\">[</div><div class=\"line\">  &#123; <span class=\"built_in\">type</span>: <span class=\"string\">'number'</span>, value: 1 &#125;,</div><div class=\"line\">  &#123; <span class=\"built_in\">type</span>: <span class=\"string\">'operator'</span>, value: <span class=\"string\">'+'</span> &#125;,</div><div class=\"line\">  &#123; <span class=\"built_in\">type</span>: <span class=\"string\">'number'</span>, value: 2 &#125;,</div><div class=\"line\">  ....</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<p><em>查看代码请点击 <a href=\"https://github.com/DrakeLeung/calc/blob/master/src/tokenizer.js\">tokenizer</a> 。</em></p>\n<h2>toRPN</h2>\n<p>第二步，我们要把得到的 tokens 转换成 <em>逆波兰</em> 形式。这个时候需要用到 <a href=\"\">shunting-yard</a> 算法。</p>\n<p><em>查看代码请点击 <a href=\"https://github.com/DrakeLeung/calc/blob/master/src/toRPN.js\">toRPN</a> 。</em></p>\n<h2>Calculator</h2>\n<p>第三步，也是我们最后一步。</p>\n<p>我们需要把创建一个 <strong>操作数栈</strong> ，如果是操作数的话，push 到栈里去；如果是操作符的话，把栈里的前两个操作数 pop 出来，计算他们和该操作符的结果。然后把结果 push 到栈里。重复之，直到遍历完所有的 tokens 。</p>\n<p><em>查看代码请点击 <a href=\"https://github.com/DrakeLeung/calc/blob/master/src/index.js\">calculator</a> 。</em></p>\n<h2>抽象语法树</h2>\n<p>其实，我们还能做些更有趣的事情。比如，构建一棵 AST 。做法其实和第三步差不多。</p>\n<ol>\n<li>创建一个 <strong>操作数栈</strong></li>\n<li>遍历 tokens</li>\n<li>如果 token 为操作数，则 push 到栈里。</li>\n<li>如果 token 为操作符，则把 栈里的两个操作数 pop 出来，与该操作符形成 AST 的一个节点，接着把该节点 push 到栈里去</li>\n<li>重复之，直到遍历完 tokens</li>\n</ol>\n<p>有了 AST 之后，如果我们对其分别进行前序，中序，后序遍历的话，就可以得到 <strong>前缀表达式</strong> ，<strong>中缀表达式</strong> ，以及 <strong>后缀表达式</strong> 。</p>\n<p><em>查看代码请点击 <a href=\"https://github.com/DrakeLeung/calc/blob/master/src/parser.js\">parser</a> 。</em></p>\n<h2>项目源码</h2>\n<p>所有代码可查看：<a href=\"https://github.com/DrakeLeung/calc\">https://github.com/DrakeLeung/calc</a></p>\n"},{"title":"bubble sorting visually","author":"Drake Leung","date":"2016-03-27T15:01:37.000Z","foreword":"实现一个冒泡排序的可视化。","_content":"\nTL;DR: [在线例子和相关代码请查看这里。](http://plnkr.co/edit/je2wWv?p=preview)\n\n本文章的目的来源于知乎的一个问题：[我用js写了一个冒泡排序法，怎么用html和css把排序过程展现出来？](https://www.zhihu.com/question/41642706)\n\n下面讲一下要解决的几个问题和 tips。\n\n## 如何实现「交换」的动画\n我觉得这个是整个应用的难点。\n\n看了 [visual.net](http://visualgo.net/sorting.html)，他的实现是利用 CSS3 的 `transform` 函数里面的 `translate`。这似乎是不错的想法，但是我发现要用 JS 获取 `translate` 对应的值的话，[有点麻烦](http://stackoverflow.com/questions/21912684/how-to-get-value-of-translatex-and-translatey)。\n\n接着，我又看了一个答案的[实现](http://meowtec.github.io/demo/sort-v/)。他的方法是利用 CSS 中的 `left`。而 `left` 的值是相对于设定了 `position: relative` 的 *parent*。\n\n我不是很懂上面的方法。但是我想到了另一个方法：**`left` 是相对于他本身**。也就是设置他本身为 `position: relative` 而不是他的 *parent*。\n\n```css\n.bar {\n  position: relative;\n  left: 0;  /* must set, or not transition when value in falsy */\n  /*transition: left 1s;*/\n}\n```\n\n我之所以设置 `left` 为 `0`，是因为我们要用 CSS3 的 `transition` 实现渐变的效果。\n\n然后，每次交换的时候，我们只需要把他当前的 `left` 加/减 柱形图的宽度。没错，这就是这种方法的「缺点」之一，我们需要用 JS 写死柱形图的宽度。\n\n```javascript\nswap () {\n  // ...\n\n  const getLeft = item =>\n    parseInt(item.style.left.slice(0, -2)) || 0 // rm 'px'\n\n  item1.style.left = `${this.barWidth + getLeft(item1)}px`\n  item2.style.left = `${-this.barWidth + getLeft(item2)}px`\n}\n```\n\n在交换的时候，我们要先找到对应的 DOM 元素，也就是上面代码中的 `item` 和 `item2`。\n\n怎么找？（假设我们排序的是一堆数字）\n一开始我想到了两种方法。\n\n第一种是，根据数字，找到具有对用数字的 DOM 元素，就像这样：\n\n```javascript\nswap (value1, value2) {\n  const item1 = this.el.querySelector(`[data-value='${value1}']`)\n}\n```\n\n但这种方法是行不通的。为什么？\n因为当有多个数字相同的时候，我们找到的 DOM 元素不一定是我们想要交换的。因为 `querySelector` 返回的总是第一个匹配的元素。\n\n那我们在 `item1` 后面才开始找 `item2` 行不行？使用 CSS3 的 `~` 选择器。比如这样：\n\n```javascript\nswap (value1, value2) {\n  const item1 = this.el.querySelector(`[data-value='${value1}']`)\n  const item2 = this.el.querySelector(`[data-value='${value2}'] ~ data-value='${value2}']`)\n}\n```\n\n这种方法有时可以，有时是不可以的。为什么？\n因为我们的 DOM 结构根本就没有变化，只是用 CSS 的 `left` 在视觉上改变了位置而已。\n\n因此，我们的第二种方法当然就是在交换的时候，不仅改变 `left` 的值，而且交换 DOM 的位置。\n\n```javascript\nfunction swapDOM(element1, element2) {\n  element1.parentNode.insertBefore(element2, element1);\n}\n```\n\n但是，这种方法还是行不通的。因为 `insertBefore` 会把 `element2` 从 DOM 中删掉。这样的话，就没有了「交换」的渐变效果。\n\n果然，我们还是不能 DOM 元素。那么只能返回第一种方法。\n\n这个时候我突然想到了 React 中循环的时候需要写上 `key` 属性。然后。。。然后只要把 `key` 和 数字绑定在一起，查找数字对应的 DOM 元素只需要使用 `key` 就行。\n\n```javascript\n// data = [64, 39, 78, 36]\nthis.items = data.map((d, i) => ({key: `key-${i}`, value: d}))\n\nswap (key1, key2) {\n  const item1 = this.el.querySelector(`[data-key='${key1}']`)\n}\n```\n\n终于搞定了「交换」动画了，不知道有没有更好的实现方法呢？\n\n\n## 为什么我的「交换」动画一瞬间就跑完了\n\n假设我们的排序算法是这样的：\n\n```javascript\nsort () {\n  const items = this.items\n\n  for (let i = 0; i < items.length; i++) {\n    for (let j = 0; j < items.length - i - 1; j++) {\n      const item1 = items[j]\n      const item2 = items[j + 1]\n\n      if (less(item2.value, item1.value)) {\n        swap(j, j + 1, items)\n      }\n    }\n  }\n  return this.items\n}\n```\n\n注意到，我们的 `swap` 函数是在 `for` 循环里面调用的，这是没错的。\n\n然而我们的「交换」动画就跑完了，根本没有渐变的效果，我们想要的是等到前一个交换动画完成后，下一个才发生。为什么会这样？因为我们的两个 `for` 是瞬间就可以跑完的= =\n\n怎么解决这个问题呢？`setInterval`？好像会把排序算法的逻辑扰乱。\n突然，我想到了 jQuery 好像有个动画队列的东西。\n\n也就是说，**我们可以把所有的动画先放在一个队列里面。然后再一个一个地出队，一个一个地调用。**\n\n```javascript\nfor () {\n  for () {\n    if (less(item2.value, item1.value)) {\n      this.queue.push(() => this.swap(item1.key, item2.key))\n    }\n  }\n}\n\nplay () {\n  const intervalId = setInterval(() => {\n    if (this.queue.length === 0) {\n      clearInterval(intervalId)\n    } else {\n      const swap = this.queue.shift()\n      swap()\n    }\n  }, 2 * 1000)\n}\n```\n\n看了知乎上的答案，这个问题还有其他实现的方法。**总的来说，就是如何解决异步编程问题。**\n\n## Tips\n可以利用 CSS 的 伪元素`::before` 以及 `attr` 函数，来实现柱形图上显示对应的数字。\n\n```css\n.bar::before {\n  content: attr(data-value);\n  position: absolute;\n  top: -16px;\n  color: #233;\n}\n```\n\n## Continue\n\n我们的代码还可以继续优化，比如接口如何设计，使得可以扩展于其他的排序算法。还有用户体验,比如，排序前中后状态的颜色都设为不同，等等。\n","source":"_posts/bubble-sorting-visually.md","raw":"---\ntitle: bubble sorting visually\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-03-27 23:01:37\nforeword: 实现一个冒泡排序的可视化。\n---\n\nTL;DR: [在线例子和相关代码请查看这里。](http://plnkr.co/edit/je2wWv?p=preview)\n\n本文章的目的来源于知乎的一个问题：[我用js写了一个冒泡排序法，怎么用html和css把排序过程展现出来？](https://www.zhihu.com/question/41642706)\n\n下面讲一下要解决的几个问题和 tips。\n\n## 如何实现「交换」的动画\n我觉得这个是整个应用的难点。\n\n看了 [visual.net](http://visualgo.net/sorting.html)，他的实现是利用 CSS3 的 `transform` 函数里面的 `translate`。这似乎是不错的想法，但是我发现要用 JS 获取 `translate` 对应的值的话，[有点麻烦](http://stackoverflow.com/questions/21912684/how-to-get-value-of-translatex-and-translatey)。\n\n接着，我又看了一个答案的[实现](http://meowtec.github.io/demo/sort-v/)。他的方法是利用 CSS 中的 `left`。而 `left` 的值是相对于设定了 `position: relative` 的 *parent*。\n\n我不是很懂上面的方法。但是我想到了另一个方法：**`left` 是相对于他本身**。也就是设置他本身为 `position: relative` 而不是他的 *parent*。\n\n```css\n.bar {\n  position: relative;\n  left: 0;  /* must set, or not transition when value in falsy */\n  /*transition: left 1s;*/\n}\n```\n\n我之所以设置 `left` 为 `0`，是因为我们要用 CSS3 的 `transition` 实现渐变的效果。\n\n然后，每次交换的时候，我们只需要把他当前的 `left` 加/减 柱形图的宽度。没错，这就是这种方法的「缺点」之一，我们需要用 JS 写死柱形图的宽度。\n\n```javascript\nswap () {\n  // ...\n\n  const getLeft = item =>\n    parseInt(item.style.left.slice(0, -2)) || 0 // rm 'px'\n\n  item1.style.left = `${this.barWidth + getLeft(item1)}px`\n  item2.style.left = `${-this.barWidth + getLeft(item2)}px`\n}\n```\n\n在交换的时候，我们要先找到对应的 DOM 元素，也就是上面代码中的 `item` 和 `item2`。\n\n怎么找？（假设我们排序的是一堆数字）\n一开始我想到了两种方法。\n\n第一种是，根据数字，找到具有对用数字的 DOM 元素，就像这样：\n\n```javascript\nswap (value1, value2) {\n  const item1 = this.el.querySelector(`[data-value='${value1}']`)\n}\n```\n\n但这种方法是行不通的。为什么？\n因为当有多个数字相同的时候，我们找到的 DOM 元素不一定是我们想要交换的。因为 `querySelector` 返回的总是第一个匹配的元素。\n\n那我们在 `item1` 后面才开始找 `item2` 行不行？使用 CSS3 的 `~` 选择器。比如这样：\n\n```javascript\nswap (value1, value2) {\n  const item1 = this.el.querySelector(`[data-value='${value1}']`)\n  const item2 = this.el.querySelector(`[data-value='${value2}'] ~ data-value='${value2}']`)\n}\n```\n\n这种方法有时可以，有时是不可以的。为什么？\n因为我们的 DOM 结构根本就没有变化，只是用 CSS 的 `left` 在视觉上改变了位置而已。\n\n因此，我们的第二种方法当然就是在交换的时候，不仅改变 `left` 的值，而且交换 DOM 的位置。\n\n```javascript\nfunction swapDOM(element1, element2) {\n  element1.parentNode.insertBefore(element2, element1);\n}\n```\n\n但是，这种方法还是行不通的。因为 `insertBefore` 会把 `element2` 从 DOM 中删掉。这样的话，就没有了「交换」的渐变效果。\n\n果然，我们还是不能 DOM 元素。那么只能返回第一种方法。\n\n这个时候我突然想到了 React 中循环的时候需要写上 `key` 属性。然后。。。然后只要把 `key` 和 数字绑定在一起，查找数字对应的 DOM 元素只需要使用 `key` 就行。\n\n```javascript\n// data = [64, 39, 78, 36]\nthis.items = data.map((d, i) => ({key: `key-${i}`, value: d}))\n\nswap (key1, key2) {\n  const item1 = this.el.querySelector(`[data-key='${key1}']`)\n}\n```\n\n终于搞定了「交换」动画了，不知道有没有更好的实现方法呢？\n\n\n## 为什么我的「交换」动画一瞬间就跑完了\n\n假设我们的排序算法是这样的：\n\n```javascript\nsort () {\n  const items = this.items\n\n  for (let i = 0; i < items.length; i++) {\n    for (let j = 0; j < items.length - i - 1; j++) {\n      const item1 = items[j]\n      const item2 = items[j + 1]\n\n      if (less(item2.value, item1.value)) {\n        swap(j, j + 1, items)\n      }\n    }\n  }\n  return this.items\n}\n```\n\n注意到，我们的 `swap` 函数是在 `for` 循环里面调用的，这是没错的。\n\n然而我们的「交换」动画就跑完了，根本没有渐变的效果，我们想要的是等到前一个交换动画完成后，下一个才发生。为什么会这样？因为我们的两个 `for` 是瞬间就可以跑完的= =\n\n怎么解决这个问题呢？`setInterval`？好像会把排序算法的逻辑扰乱。\n突然，我想到了 jQuery 好像有个动画队列的东西。\n\n也就是说，**我们可以把所有的动画先放在一个队列里面。然后再一个一个地出队，一个一个地调用。**\n\n```javascript\nfor () {\n  for () {\n    if (less(item2.value, item1.value)) {\n      this.queue.push(() => this.swap(item1.key, item2.key))\n    }\n  }\n}\n\nplay () {\n  const intervalId = setInterval(() => {\n    if (this.queue.length === 0) {\n      clearInterval(intervalId)\n    } else {\n      const swap = this.queue.shift()\n      swap()\n    }\n  }, 2 * 1000)\n}\n```\n\n看了知乎上的答案，这个问题还有其他实现的方法。**总的来说，就是如何解决异步编程问题。**\n\n## Tips\n可以利用 CSS 的 伪元素`::before` 以及 `attr` 函数，来实现柱形图上显示对应的数字。\n\n```css\n.bar::before {\n  content: attr(data-value);\n  position: absolute;\n  top: -16px;\n  color: #233;\n}\n```\n\n## Continue\n\n我们的代码还可以继续优化，比如接口如何设计，使得可以扩展于其他的排序算法。还有用户体验,比如，排序前中后状态的颜色都设为不同，等等。\n","slug":"bubble-sorting-visually","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu7430d001e37rq9wudsaxx","content":"<p>TL;DR: <a href=\"http://plnkr.co/edit/je2wWv?p=preview\" target=\"_blank\" rel=\"external\">在线例子和相关代码请查看这里。</a></p>\n<p>本文章的目的来源于知乎的一个问题：<a href=\"https://www.zhihu.com/question/41642706\" target=\"_blank\" rel=\"external\">我用js写了一个冒泡排序法，怎么用html和css把排序过程展现出来？</a></p>\n<p>下面讲一下要解决的几个问题和 tips。</p>\n<h2>如何实现「交换」的动画</h2>\n<p>我觉得这个是整个应用的难点。</p>\n<p>看了 <a href=\"http://visualgo.net/sorting.html\" target=\"_blank\" rel=\"external\">visual.net</a>，他的实现是利用 CSS3 的 <code>transform</code> 函数里面的 <code>translate</code>。这似乎是不错的想法，但是我发现要用 JS 获取 <code>translate</code> 对应的值的话，<a href=\"http://stackoverflow.com/questions/21912684/how-to-get-value-of-translatex-and-translatey\" target=\"_blank\" rel=\"external\">有点麻烦</a>。</p>\n<p>接着，我又看了一个答案的<a href=\"http://meowtec.github.io/demo/sort-v/\" target=\"_blank\" rel=\"external\">实现</a>。他的方法是利用 CSS 中的 <code>left</code>。而 <code>left</code> 的值是相对于设定了 <code>position: relative</code> 的 <em>parent</em>。</p>\n<p>我不是很懂上面的方法。但是我想到了另一个方法：<strong><code>left</code> 是相对于他本身</strong>。也就是设置他本身为 <code>position: relative</code> 而不是他的 <em>parent</em>。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.bar</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: relative;</div><div class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;  <span class=\"comment\">/* must set, or not transition when value in falsy */</span></div><div class=\"line\">  <span class=\"comment\">/*transition: left 1s;*/</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我之所以设置 <code>left</code> 为 <code>0</code>，是因为我们要用 CSS3 的 <code>transition</code> 实现渐变的效果。</p>\n<p>然后，每次交换的时候，我们只需要把他当前的 <code>left</code> 加/减 柱形图的宽度。没错，这就是这种方法的「缺点」之一，我们需要用 JS 写死柱形图的宽度。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">swap () &#123;</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">const</span> getLeft = item =&gt;</div><div class=\"line\">    <span class=\"built_in\">parseInt</span>(item.style.left.slice(<span class=\"number\">0</span>, <span class=\"number\">-2</span>)) || <span class=\"number\">0</span> <span class=\"comment\">// rm 'px'</span></div><div class=\"line\"></div><div class=\"line\">  item1.style.left = <span class=\"string\">`<span class=\"subst\">$&#123;this.barWidth + getLeft(item1)&#125;</span>px`</span></div><div class=\"line\">  item2.style.left = <span class=\"string\">`<span class=\"subst\">$&#123;-this.barWidth + getLeft(item2)&#125;</span>px`</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在交换的时候，我们要先找到对应的 DOM 元素，也就是上面代码中的 <code>item</code> 和 <code>item2</code>。</p>\n<p>怎么找？（假设我们排序的是一堆数字）<br>\n一开始我想到了两种方法。</p>\n<p>第一种是，根据数字，找到具有对用数字的 DOM 元素，就像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">swap (value1, value2) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> item1 = <span class=\"keyword\">this</span>.el.querySelector(<span class=\"string\">`[data-value='<span class=\"subst\">$&#123;value1&#125;</span>']`</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>但这种方法是行不通的。为什么？<br>\n因为当有多个数字相同的时候，我们找到的 DOM 元素不一定是我们想要交换的。因为 <code>querySelector</code> 返回的总是第一个匹配的元素。</p>\n<p>那我们在 <code>item1</code> 后面才开始找 <code>item2</code> 行不行？使用 CSS3 的 <code>~</code> 选择器。比如这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">swap (value1, value2) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> item1 = <span class=\"keyword\">this</span>.el.querySelector(<span class=\"string\">`[data-value='<span class=\"subst\">$&#123;value1&#125;</span>']`</span>)</div><div class=\"line\">  <span class=\"keyword\">const</span> item2 = <span class=\"keyword\">this</span>.el.querySelector(<span class=\"string\">`[data-value='<span class=\"subst\">$&#123;value2&#125;</span>'] ~ data-value='<span class=\"subst\">$&#123;value2&#125;</span>']`</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这种方法有时可以，有时是不可以的。为什么？<br>\n因为我们的 DOM 结构根本就没有变化，只是用 CSS 的 <code>left</code> 在视觉上改变了位置而已。</p>\n<p>因此，我们的第二种方法当然就是在交换的时候，不仅改变 <code>left</code> 的值，而且交换 DOM 的位置。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">swapDOM</span>(<span class=\"params\">element1, element2</span>) </span>&#123;</div><div class=\"line\">  element1.parentNode.insertBefore(element2, element1);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>但是，这种方法还是行不通的。因为 <code>insertBefore</code> 会把 <code>element2</code> 从 DOM 中删掉。这样的话，就没有了「交换」的渐变效果。</p>\n<p>果然，我们还是不能 DOM 元素。那么只能返回第一种方法。</p>\n<p>这个时候我突然想到了 React 中循环的时候需要写上 <code>key</code> 属性。然后。。。然后只要把 <code>key</code> 和 数字绑定在一起，查找数字对应的 DOM 元素只需要使用 <code>key</code> 就行。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// data = [64, 39, 78, 36]</span></div><div class=\"line\"><span class=\"keyword\">this</span>.items = data.map((d, i) =&gt; (&#123;key: <span class=\"string\">`key-<span class=\"subst\">$&#123;i&#125;</span>`</span>, value: d&#125;))</div><div class=\"line\"></div><div class=\"line\">swap (key1, key2) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> item1 = <span class=\"keyword\">this</span>.el.querySelector(<span class=\"string\">`[data-key='<span class=\"subst\">$&#123;key1&#125;</span>']`</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>终于搞定了「交换」动画了，不知道有没有更好的实现方法呢？</p>\n<h2>为什么我的「交换」动画一瞬间就跑完了</h2>\n<p>假设我们的排序算法是这样的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">sort () &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> items = <span class=\"keyword\">this</span>.items</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; items.length - i - <span class=\"number\">1</span>; j++) &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> item1 = items[j]</div><div class=\"line\">      <span class=\"keyword\">const</span> item2 = items[j + <span class=\"number\">1</span>]</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (less(item2.value, item1.value)) &#123;</div><div class=\"line\">        swap(j, j + <span class=\"number\">1</span>, items)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.items</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>注意到，我们的 <code>swap</code> 函数是在 <code>for</code> 循环里面调用的，这是没错的。</p>\n<p>然而我们的「交换」动画就跑完了，根本没有渐变的效果，我们想要的是等到前一个交换动画完成后，下一个才发生。为什么会这样？因为我们的两个 <code>for</code> 是瞬间就可以跑完的= =</p>\n<p>怎么解决这个问题呢？<code>setInterval</code>？好像会把排序算法的逻辑扰乱。<br>\n突然，我想到了 jQuery 好像有个动画队列的东西。</p>\n<p>也就是说，<strong>我们可以把所有的动画先放在一个队列里面。然后再一个一个地出队，一个一个地调用。</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> () &#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> () &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (less(item2.value, item1.value)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.queue.push(() =&gt; <span class=\"keyword\">this</span>.swap(item1.key, item2.key))</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">play () &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> intervalId = setInterval(() =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.queue.length === <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      clearInterval(intervalId)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> swap = <span class=\"keyword\">this</span>.queue.shift()</div><div class=\"line\">      swap()</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;, <span class=\"number\">2</span> * <span class=\"number\">1000</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>看了知乎上的答案，这个问题还有其他实现的方法。<strong>总的来说，就是如何解决异步编程问题。</strong></p>\n<h2>Tips</h2>\n<p>可以利用 CSS 的 伪元素<code>::before</code> 以及 <code>attr</code> 函数，来实现柱形图上显示对应的数字。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.bar</span><span class=\"selector-pseudo\">::before</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"built_in\">attr</span>(data-value);</div><div class=\"line\">  <span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">  <span class=\"attribute\">top</span>: -<span class=\"number\">16px</span>;</div><div class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#233</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Continue</h2>\n<p>我们的代码还可以继续优化，比如接口如何设计，使得可以扩展于其他的排序算法。还有用户体验,比如，排序前中后状态的颜色都设为不同，等等。</p>\n","excerpt":"","more":"<p>TL;DR: <a href=\"http://plnkr.co/edit/je2wWv?p=preview\">在线例子和相关代码请查看这里。</a></p>\n<p>本文章的目的来源于知乎的一个问题：<a href=\"https://www.zhihu.com/question/41642706\">我用js写了一个冒泡排序法，怎么用html和css把排序过程展现出来？</a></p>\n<p>下面讲一下要解决的几个问题和 tips。</p>\n<h2>如何实现「交换」的动画</h2>\n<p>我觉得这个是整个应用的难点。</p>\n<p>看了 <a href=\"http://visualgo.net/sorting.html\">visual.net</a>，他的实现是利用 CSS3 的 <code>transform</code> 函数里面的 <code>translate</code>。这似乎是不错的想法，但是我发现要用 JS 获取 <code>translate</code> 对应的值的话，<a href=\"http://stackoverflow.com/questions/21912684/how-to-get-value-of-translatex-and-translatey\">有点麻烦</a>。</p>\n<p>接着，我又看了一个答案的<a href=\"http://meowtec.github.io/demo/sort-v/\">实现</a>。他的方法是利用 CSS 中的 <code>left</code>。而 <code>left</code> 的值是相对于设定了 <code>position: relative</code> 的 <em>parent</em>。</p>\n<p>我不是很懂上面的方法。但是我想到了另一个方法：<strong><code>left</code> 是相对于他本身</strong>。也就是设置他本身为 <code>position: relative</code> 而不是他的 <em>parent</em>。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.bar</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: relative;</div><div class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;  <span class=\"comment\">/* must set, or not transition when value in falsy */</span></div><div class=\"line\">  <span class=\"comment\">/*transition: left 1s;*/</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我之所以设置 <code>left</code> 为 <code>0</code>，是因为我们要用 CSS3 的 <code>transition</code> 实现渐变的效果。</p>\n<p>然后，每次交换的时候，我们只需要把他当前的 <code>left</code> 加/减 柱形图的宽度。没错，这就是这种方法的「缺点」之一，我们需要用 JS 写死柱形图的宽度。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">swap () &#123;</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">const</span> getLeft = item =&gt;</div><div class=\"line\">    <span class=\"built_in\">parseInt</span>(item.style.left.slice(<span class=\"number\">0</span>, <span class=\"number\">-2</span>)) || <span class=\"number\">0</span> <span class=\"comment\">// rm 'px'</span></div><div class=\"line\"></div><div class=\"line\">  item1.style.left = <span class=\"string\">`<span class=\"subst\">$&#123;this.barWidth + getLeft(item1)&#125;</span>px`</span></div><div class=\"line\">  item2.style.left = <span class=\"string\">`<span class=\"subst\">$&#123;-this.barWidth + getLeft(item2)&#125;</span>px`</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在交换的时候，我们要先找到对应的 DOM 元素，也就是上面代码中的 <code>item</code> 和 <code>item2</code>。</p>\n<p>怎么找？（假设我们排序的是一堆数字）<br>\n一开始我想到了两种方法。</p>\n<p>第一种是，根据数字，找到具有对用数字的 DOM 元素，就像这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">swap (value1, value2) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> item1 = <span class=\"keyword\">this</span>.el.querySelector(<span class=\"string\">`[data-value='<span class=\"subst\">$&#123;value1&#125;</span>']`</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>但这种方法是行不通的。为什么？<br>\n因为当有多个数字相同的时候，我们找到的 DOM 元素不一定是我们想要交换的。因为 <code>querySelector</code> 返回的总是第一个匹配的元素。</p>\n<p>那我们在 <code>item1</code> 后面才开始找 <code>item2</code> 行不行？使用 CSS3 的 <code>~</code> 选择器。比如这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">swap (value1, value2) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> item1 = <span class=\"keyword\">this</span>.el.querySelector(<span class=\"string\">`[data-value='<span class=\"subst\">$&#123;value1&#125;</span>']`</span>)</div><div class=\"line\">  <span class=\"keyword\">const</span> item2 = <span class=\"keyword\">this</span>.el.querySelector(<span class=\"string\">`[data-value='<span class=\"subst\">$&#123;value2&#125;</span>'] ~ data-value='<span class=\"subst\">$&#123;value2&#125;</span>']`</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这种方法有时可以，有时是不可以的。为什么？<br>\n因为我们的 DOM 结构根本就没有变化，只是用 CSS 的 <code>left</code> 在视觉上改变了位置而已。</p>\n<p>因此，我们的第二种方法当然就是在交换的时候，不仅改变 <code>left</code> 的值，而且交换 DOM 的位置。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">swapDOM</span>(<span class=\"params\">element1, element2</span>) </span>&#123;</div><div class=\"line\">  element1.parentNode.insertBefore(element2, element1);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>但是，这种方法还是行不通的。因为 <code>insertBefore</code> 会把 <code>element2</code> 从 DOM 中删掉。这样的话，就没有了「交换」的渐变效果。</p>\n<p>果然，我们还是不能 DOM 元素。那么只能返回第一种方法。</p>\n<p>这个时候我突然想到了 React 中循环的时候需要写上 <code>key</code> 属性。然后。。。然后只要把 <code>key</code> 和 数字绑定在一起，查找数字对应的 DOM 元素只需要使用 <code>key</code> 就行。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// data = [64, 39, 78, 36]</span></div><div class=\"line\"><span class=\"keyword\">this</span>.items = data.map((d, i) =&gt; (&#123;key: <span class=\"string\">`key-<span class=\"subst\">$&#123;i&#125;</span>`</span>, value: d&#125;))</div><div class=\"line\"></div><div class=\"line\">swap (key1, key2) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> item1 = <span class=\"keyword\">this</span>.el.querySelector(<span class=\"string\">`[data-key='<span class=\"subst\">$&#123;key1&#125;</span>']`</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>终于搞定了「交换」动画了，不知道有没有更好的实现方法呢？</p>\n<h2>为什么我的「交换」动画一瞬间就跑完了</h2>\n<p>假设我们的排序算法是这样的：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">sort () &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> items = <span class=\"keyword\">this</span>.items</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; items.length; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; items.length - i - <span class=\"number\">1</span>; j++) &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> item1 = items[j]</div><div class=\"line\">      <span class=\"keyword\">const</span> item2 = items[j + <span class=\"number\">1</span>]</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (less(item2.value, item1.value)) &#123;</div><div class=\"line\">        swap(j, j + <span class=\"number\">1</span>, items)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.items</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>注意到，我们的 <code>swap</code> 函数是在 <code>for</code> 循环里面调用的，这是没错的。</p>\n<p>然而我们的「交换」动画就跑完了，根本没有渐变的效果，我们想要的是等到前一个交换动画完成后，下一个才发生。为什么会这样？因为我们的两个 <code>for</code> 是瞬间就可以跑完的= =</p>\n<p>怎么解决这个问题呢？<code>setInterval</code>？好像会把排序算法的逻辑扰乱。<br>\n突然，我想到了 jQuery 好像有个动画队列的东西。</p>\n<p>也就是说，<strong>我们可以把所有的动画先放在一个队列里面。然后再一个一个地出队，一个一个地调用。</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> () &#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> () &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (less(item2.value, item1.value)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.queue.push(() =&gt; <span class=\"keyword\">this</span>.swap(item1.key, item2.key))</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">play () &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> intervalId = setInterval(() =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.queue.length === <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      clearInterval(intervalId)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> swap = <span class=\"keyword\">this</span>.queue.shift()</div><div class=\"line\">      swap()</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;, <span class=\"number\">2</span> * <span class=\"number\">1000</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>看了知乎上的答案，这个问题还有其他实现的方法。<strong>总的来说，就是如何解决异步编程问题。</strong></p>\n<h2>Tips</h2>\n<p>可以利用 CSS 的 伪元素<code>::before</code> 以及 <code>attr</code> 函数，来实现柱形图上显示对应的数字。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.bar</span><span class=\"selector-pseudo\">::before</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"built_in\">attr</span>(data-value);</div><div class=\"line\">  <span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">  <span class=\"attribute\">top</span>: -<span class=\"number\">16px</span>;</div><div class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#233</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2>Continue</h2>\n<p>我们的代码还可以继续优化，比如接口如何设计，使得可以扩展于其他的排序算法。还有用户体验,比如，排序前中后状态的颜色都设为不同，等等。</p>\n"},{"title":"google chrome Devtools Overview","author":"Drake Leung","date":"2015-07-15T17:29:29.000Z","foreword":"学习google chrome DevTools的４个部分. 分别为Console, Elements, Network以及Sources.","_content":"\n官方文档: [Chrome DevTools](https://developer.chrome.com/devtools)\n## Console\n### Basic Operation\n- 打开: `Ctrl + Shift + J`\n- `Shift + Enter`可以换行，当你要写多行代码的时候。\n- 删除console history: `Ctrl + L`\n- drawer: 假设你在其他tab里面，想要看到`Console`tab的东西，就可以可以按`Esc`来显示drawer\n    ![](http://ww3.sinaimg.cn/large/7f85b91egw1eu3hckqtijj20rg0c8dj9.jpg)\n\n### Console API\n在DevTools里面定义了一个全局对象`console`。他有许多有用的API\n\n- 打印日志: `console.log(arg1, arg2)`。`.log()`可以有多个参数，`console.log('loved?', true)`\n\n- 打印错误日志: `console.error()`以及打印警告日志: `console.warn()`\n\n- 用CSS来style你的日志: `%c`作为指示，第2个参数写CSS。\n    ```javascript\n    console.log(\"%cThis will be formatted with large, blue text\", \"color: blue; font-size: x-large\");\n\n    console.log('%cBlue! %cRed!', 'color: blue;', 'color: red;');\n    ```\n  这样就可以在console里面写一些漂亮的彩蛋了。\n\n- 把DOM元素格式化为JavaScript对象: `console.dir()`, 如`console.dir(document)`\n\n- 测量时间: 传一个`string`作为给`.time()`作为开始，这个string就是time marker。结束\n的话就`timeEnd(string)`。string和前面的一样。\n    ```javascript\n    console.time(\"Array initialize\");\n        var array= new Array(1000000);\n        for (var i = array.length - 1; i >= 0; i--) {\n            array[i] = new Object();\n        };\n    console.timeEnd(\"Array initialize\");\n    ```\n\n### Command Line API\n- 自动补全: 比如输入`doc`就会有提示。如果是单个提示时，可以使用`tab`来补全。而多个时，按`↑`\n和`↓`进行选择，然后按`→`补全当前。\n\n- 选择元素: `$()`是`querySelector()`的简写，而`$$()`是`querySelectorAll()`\n\n- `$0~$4`保存了你在**Element tab**里面选择过的5个元素。\n\n## Network\n![](http://ww2.sinaimg.cn/large/7f85b91egw1eu3ifwyikzj20ov08i77o.jpg)\n\n- 可以检查你的文件路径有没有写对。\n- 直播下载网易云音乐的歌曲。\n\n## Elements\n对着你想要审查的元素，鼠标右击 -> Inspect Element。或者`Ctrl + Shift + C`.\n可以随便修改删除一些标签啊，比如去掉广告浮窗，或者这样啊，\n![](http://ww1.sinaimg.cn/large/7f85b91egw1eu3g2gwgaij20dh0a4aaz.jpg)\n\n- color picker: 按`shift` + click可以切换颜色的表示方法。\n- adding new CSS rules\n- toggle element state\n    ![](http://ww4.sinaimg.cn/large/7f85b91egw1eu3gx9r0ppj20dc01r0sp.jpg)\n\n## Sources\nSources tab可以查看你的文件。\n![](http://ww3.sinaimg.cn/large/7f85b91egw1eu392veow8j20uk0rm0vv.jpg)\n\n### debugging JavaScript with breakpoints\n\n1. 按`Ctrl + P`就可以搜索我们的文件，此时会调到**Sources tab**。接着`Ctrl + Shift + O`搜索函数名, `Ctrl + G`可以跳到任意一行，或者`Ctrl + Shift + F`在所有文件中搜索文本。\n\n    ![](http://ww2.sinaimg.cn/large/7f85b91egw1eu3fzown0oj20lo08bwgi.jpg)\n\n2. 单击**line gutter**就可以在该行设置一个breakpoint。然后你可以在右边的面板的**BreakPoints**\n找到所有设置过的breakpoint\n\n    ![](http://ww2.sinaimg.cn/large/7f85b91egw1eu39fv8s2gj20le0cd400.jpg)\n\n3. Control\n    - **Continue**: 继续执行，直到下一个breakpoint\n    - **Step over**: 下一行\n    - **Step into**: 跳进函数里面去\n    - **Step over**: 从函数里面跳出来\n    - **Toggle breakpoints**: 激活/不激活breakpoints\n\n\n4. 查看\n然后，我们就可以在**Scope Vraibles**那里查看你想要的变量。如果你有一直想看的变量，\n可以把他添加到**Watch Expressions**\n\n### Saving changes with workspaces\n把文件夹添加到workspace之后，你在DevTools上面修改的东西就会同步到实际的文件\n当中去。\n![](http://ww2.sinaimg.cn/large/7f85b91egw1eu3d1b12tsj20ve0bl77g.jpg)\n\n这样一来，DevTools就相当于一个编辑器了。\n","source":"_posts/google-chrome-Devtools-Overview.md","raw":"title: google chrome Devtools Overview\nauthor: Drake Leung\ntags: [google chrome, devtools]\ncategories: [Tools]\ndate: 2015-07-16 01:29:29\nforeword: 学习google chrome DevTools的４个部分. 分别为Console, Elements, Network以及Sources.\n---\n\n官方文档: [Chrome DevTools](https://developer.chrome.com/devtools)\n## Console\n### Basic Operation\n- 打开: `Ctrl + Shift + J`\n- `Shift + Enter`可以换行，当你要写多行代码的时候。\n- 删除console history: `Ctrl + L`\n- drawer: 假设你在其他tab里面，想要看到`Console`tab的东西，就可以可以按`Esc`来显示drawer\n    ![](http://ww3.sinaimg.cn/large/7f85b91egw1eu3hckqtijj20rg0c8dj9.jpg)\n\n### Console API\n在DevTools里面定义了一个全局对象`console`。他有许多有用的API\n\n- 打印日志: `console.log(arg1, arg2)`。`.log()`可以有多个参数，`console.log('loved?', true)`\n\n- 打印错误日志: `console.error()`以及打印警告日志: `console.warn()`\n\n- 用CSS来style你的日志: `%c`作为指示，第2个参数写CSS。\n    ```javascript\n    console.log(\"%cThis will be formatted with large, blue text\", \"color: blue; font-size: x-large\");\n\n    console.log('%cBlue! %cRed!', 'color: blue;', 'color: red;');\n    ```\n  这样就可以在console里面写一些漂亮的彩蛋了。\n\n- 把DOM元素格式化为JavaScript对象: `console.dir()`, 如`console.dir(document)`\n\n- 测量时间: 传一个`string`作为给`.time()`作为开始，这个string就是time marker。结束\n的话就`timeEnd(string)`。string和前面的一样。\n    ```javascript\n    console.time(\"Array initialize\");\n        var array= new Array(1000000);\n        for (var i = array.length - 1; i >= 0; i--) {\n            array[i] = new Object();\n        };\n    console.timeEnd(\"Array initialize\");\n    ```\n\n### Command Line API\n- 自动补全: 比如输入`doc`就会有提示。如果是单个提示时，可以使用`tab`来补全。而多个时，按`↑`\n和`↓`进行选择，然后按`→`补全当前。\n\n- 选择元素: `$()`是`querySelector()`的简写，而`$$()`是`querySelectorAll()`\n\n- `$0~$4`保存了你在**Element tab**里面选择过的5个元素。\n\n## Network\n![](http://ww2.sinaimg.cn/large/7f85b91egw1eu3ifwyikzj20ov08i77o.jpg)\n\n- 可以检查你的文件路径有没有写对。\n- 直播下载网易云音乐的歌曲。\n\n## Elements\n对着你想要审查的元素，鼠标右击 -> Inspect Element。或者`Ctrl + Shift + C`.\n可以随便修改删除一些标签啊，比如去掉广告浮窗，或者这样啊，\n![](http://ww1.sinaimg.cn/large/7f85b91egw1eu3g2gwgaij20dh0a4aaz.jpg)\n\n- color picker: 按`shift` + click可以切换颜色的表示方法。\n- adding new CSS rules\n- toggle element state\n    ![](http://ww4.sinaimg.cn/large/7f85b91egw1eu3gx9r0ppj20dc01r0sp.jpg)\n\n## Sources\nSources tab可以查看你的文件。\n![](http://ww3.sinaimg.cn/large/7f85b91egw1eu392veow8j20uk0rm0vv.jpg)\n\n### debugging JavaScript with breakpoints\n\n1. 按`Ctrl + P`就可以搜索我们的文件，此时会调到**Sources tab**。接着`Ctrl + Shift + O`搜索函数名, `Ctrl + G`可以跳到任意一行，或者`Ctrl + Shift + F`在所有文件中搜索文本。\n\n    ![](http://ww2.sinaimg.cn/large/7f85b91egw1eu3fzown0oj20lo08bwgi.jpg)\n\n2. 单击**line gutter**就可以在该行设置一个breakpoint。然后你可以在右边的面板的**BreakPoints**\n找到所有设置过的breakpoint\n\n    ![](http://ww2.sinaimg.cn/large/7f85b91egw1eu39fv8s2gj20le0cd400.jpg)\n\n3. Control\n    - **Continue**: 继续执行，直到下一个breakpoint\n    - **Step over**: 下一行\n    - **Step into**: 跳进函数里面去\n    - **Step over**: 从函数里面跳出来\n    - **Toggle breakpoints**: 激活/不激活breakpoints\n\n\n4. 查看\n然后，我们就可以在**Scope Vraibles**那里查看你想要的变量。如果你有一直想看的变量，\n可以把他添加到**Watch Expressions**\n\n### Saving changes with workspaces\n把文件夹添加到workspace之后，你在DevTools上面修改的东西就会同步到实际的文件\n当中去。\n![](http://ww2.sinaimg.cn/large/7f85b91egw1eu3d1b12tsj20ve0bl77g.jpg)\n\n这样一来，DevTools就相当于一个编辑器了。\n","slug":"google-chrome-Devtools-Overview","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu7430e001g37rqxgsorlfl","content":"<p>官方文档: <a href=\"https://developer.chrome.com/devtools\" target=\"_blank\" rel=\"external\">Chrome DevTools</a></p>\n<h2>Console</h2>\n<h3>Basic Operation</h3>\n<ul>\n<li>打开: <code>Ctrl + Shift + J</code></li>\n<li><code>Shift + Enter</code>可以换行，当你要写多行代码的时候。</li>\n<li>删除console history: <code>Ctrl + L</code></li>\n<li>drawer: 假设你在其他tab里面，想要看到<code>Console</code>tab的东西，就可以可以按<code>Esc</code>来显示drawer<br>\n<img src=\"http://ww3.sinaimg.cn/large/7f85b91egw1eu3hckqtijj20rg0c8dj9.jpg\" alt=\"\"></li>\n</ul>\n<h3>Console API</h3>\n<p>在DevTools里面定义了一个全局对象<code>console</code>。他有许多有用的API</p>\n<ul>\n<li>\n<p>打印日志: <code>console.log(arg1, arg2)</code>。<code>.log()</code>可以有多个参数，<code>console.log('loved?', true)</code></p>\n</li>\n<li>\n<p>打印错误日志: <code>console.error()</code>以及打印警告日志: <code>console.warn()</code></p>\n</li>\n<li>\n<p>用CSS来style你的日志: <code>%c</code>作为指示，第2个参数写CSS。</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"%cThis will be formatted with large, blue text\"</span>, <span class=\"string\">\"color: blue; font-size: x-large\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'%cBlue! %cRed!'</span>, <span class=\"string\">'color: blue;'</span>, <span class=\"string\">'color: red;'</span>);</div></pre></td></tr></table></figure>\n<p>这样就可以在console里面写一些漂亮的彩蛋了。</p>\n</li>\n<li>\n<p>把DOM元素格式化为JavaScript对象: <code>console.dir()</code>, 如<code>console.dir(document)</code></p>\n</li>\n<li>\n<p>测量时间: 传一个<code>string</code>作为给<code>.time()</code>作为开始，这个string就是time marker。结束<br>\n的话就<code>timeEnd(string)</code>。string和前面的一样。</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">\"Array initialize\"</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> array= <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">1000000</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = array.length - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</div><div class=\"line\">        array[i] = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</div><div class=\"line\">    &#125;;</div><div class=\"line\"><span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"Array initialize\"</span>);</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3>Command Line API</h3>\n<ul>\n<li>\n<p>自动补全: 比如输入<code>doc</code>就会有提示。如果是单个提示时，可以使用<code>tab</code>来补全。而多个时，按<code>↑</code><br>\n和<code>↓</code>进行选择，然后按<code>→</code>补全当前。</p>\n</li>\n<li>\n<p>选择元素: <code>$()</code>是<code>querySelector()</code>的简写，而<code>$$()</code>是<code>querySelectorAll()</code></p>\n</li>\n<li>\n<p><code>$0~$4</code>保存了你在<strong>Element tab</strong>里面选择过的5个元素。</p>\n</li>\n</ul>\n<h2>Network</h2>\n<p><img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1eu3ifwyikzj20ov08i77o.jpg\" alt=\"\"></p>\n<ul>\n<li>可以检查你的文件路径有没有写对。</li>\n<li>直播下载网易云音乐的歌曲。</li>\n</ul>\n<h2>Elements</h2>\n<p>对着你想要审查的元素，鼠标右击 -&gt; Inspect Element。或者<code>Ctrl + Shift + C</code>.<br>\n可以随便修改删除一些标签啊，比如去掉广告浮窗，或者这样啊，<br>\n<img src=\"http://ww1.sinaimg.cn/large/7f85b91egw1eu3g2gwgaij20dh0a4aaz.jpg\" alt=\"\"></p>\n<ul>\n<li>color picker: 按<code>shift</code> + click可以切换颜色的表示方法。</li>\n<li>adding new CSS rules</li>\n<li>toggle element state<br>\n<img src=\"http://ww4.sinaimg.cn/large/7f85b91egw1eu3gx9r0ppj20dc01r0sp.jpg\" alt=\"\"></li>\n</ul>\n<h2>Sources</h2>\n<p>Sources tab可以查看你的文件。<br>\n<img src=\"http://ww3.sinaimg.cn/large/7f85b91egw1eu392veow8j20uk0rm0vv.jpg\" alt=\"\"></p>\n<h3>debugging JavaScript with breakpoints</h3>\n<ol>\n<li>\n<p>按<code>Ctrl + P</code>就可以搜索我们的文件，此时会调到<strong>Sources tab</strong>。接着<code>Ctrl + Shift + O</code>搜索函数名, <code>Ctrl + G</code>可以跳到任意一行，或者<code>Ctrl + Shift + F</code>在所有文件中搜索文本。</p>\n<p><img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1eu3fzown0oj20lo08bwgi.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>单击<strong>line gutter</strong>就可以在该行设置一个breakpoint。然后你可以在右边的面板的<strong>BreakPoints</strong><br>\n找到所有设置过的breakpoint</p>\n<p><img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1eu39fv8s2gj20le0cd400.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>Control</p>\n<ul>\n<li><strong>Continue</strong>: 继续执行，直到下一个breakpoint</li>\n<li><strong>Step over</strong>: 下一行</li>\n<li><strong>Step into</strong>: 跳进函数里面去</li>\n<li><strong>Step over</strong>: 从函数里面跳出来</li>\n<li><strong>Toggle breakpoints</strong>: 激活/不激活breakpoints</li>\n</ul>\n</li>\n</ol>\n<ol start=\"4\">\n<li>查看<br>\n然后，我们就可以在<strong>Scope Vraibles</strong>那里查看你想要的变量。如果你有一直想看的变量，<br>\n可以把他添加到<strong>Watch Expressions</strong></li>\n</ol>\n<h3>Saving changes with workspaces</h3>\n<p>把文件夹添加到workspace之后，你在DevTools上面修改的东西就会同步到实际的文件<br>\n当中去。<br>\n<img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1eu3d1b12tsj20ve0bl77g.jpg\" alt=\"\"></p>\n<p>这样一来，DevTools就相当于一个编辑器了。</p>\n","excerpt":"","more":"<p>官方文档: <a href=\"https://developer.chrome.com/devtools\">Chrome DevTools</a></p>\n<h2>Console</h2>\n<h3>Basic Operation</h3>\n<ul>\n<li>打开: <code>Ctrl + Shift + J</code></li>\n<li><code>Shift + Enter</code>可以换行，当你要写多行代码的时候。</li>\n<li>删除console history: <code>Ctrl + L</code></li>\n<li>drawer: 假设你在其他tab里面，想要看到<code>Console</code>tab的东西，就可以可以按<code>Esc</code>来显示drawer<br>\n<img src=\"http://ww3.sinaimg.cn/large/7f85b91egw1eu3hckqtijj20rg0c8dj9.jpg\" alt=\"\"></li>\n</ul>\n<h3>Console API</h3>\n<p>在DevTools里面定义了一个全局对象<code>console</code>。他有许多有用的API</p>\n<ul>\n<li>\n<p>打印日志: <code>console.log(arg1, arg2)</code>。<code>.log()</code>可以有多个参数，<code>console.log('loved?', true)</code></p>\n</li>\n<li>\n<p>打印错误日志: <code>console.error()</code>以及打印警告日志: <code>console.warn()</code></p>\n</li>\n<li>\n<p>用CSS来style你的日志: <code>%c</code>作为指示，第2个参数写CSS。</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"%cThis will be formatted with large, blue text\"</span>, <span class=\"string\">\"color: blue; font-size: x-large\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'%cBlue! %cRed!'</span>, <span class=\"string\">'color: blue;'</span>, <span class=\"string\">'color: red;'</span>);</div></pre></td></tr></table></figure>\n<p>这样就可以在console里面写一些漂亮的彩蛋了。</p>\n</li>\n<li>\n<p>把DOM元素格式化为JavaScript对象: <code>console.dir()</code>, 如<code>console.dir(document)</code></p>\n</li>\n<li>\n<p>测量时间: 传一个<code>string</code>作为给<code>.time()</code>作为开始，这个string就是time marker。结束<br>\n的话就<code>timeEnd(string)</code>。string和前面的一样。</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">\"Array initialize\"</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> array= <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">1000000</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = array.length - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</div><div class=\"line\">        array[i] = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</div><div class=\"line\">    &#125;;</div><div class=\"line\"><span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"Array initialize\"</span>);</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3>Command Line API</h3>\n<ul>\n<li>\n<p>自动补全: 比如输入<code>doc</code>就会有提示。如果是单个提示时，可以使用<code>tab</code>来补全。而多个时，按<code>↑</code><br>\n和<code>↓</code>进行选择，然后按<code>→</code>补全当前。</p>\n</li>\n<li>\n<p>选择元素: <code>$()</code>是<code>querySelector()</code>的简写，而<code>$$()</code>是<code>querySelectorAll()</code></p>\n</li>\n<li>\n<p><code>$0~$4</code>保存了你在<strong>Element tab</strong>里面选择过的5个元素。</p>\n</li>\n</ul>\n<h2>Network</h2>\n<p><img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1eu3ifwyikzj20ov08i77o.jpg\" alt=\"\"></p>\n<ul>\n<li>可以检查你的文件路径有没有写对。</li>\n<li>直播下载网易云音乐的歌曲。</li>\n</ul>\n<h2>Elements</h2>\n<p>对着你想要审查的元素，鼠标右击 -&gt; Inspect Element。或者<code>Ctrl + Shift + C</code>.<br>\n可以随便修改删除一些标签啊，比如去掉广告浮窗，或者这样啊，<br>\n<img src=\"http://ww1.sinaimg.cn/large/7f85b91egw1eu3g2gwgaij20dh0a4aaz.jpg\" alt=\"\"></p>\n<ul>\n<li>color picker: 按<code>shift</code> + click可以切换颜色的表示方法。</li>\n<li>adding new CSS rules</li>\n<li>toggle element state<br>\n<img src=\"http://ww4.sinaimg.cn/large/7f85b91egw1eu3gx9r0ppj20dc01r0sp.jpg\" alt=\"\"></li>\n</ul>\n<h2>Sources</h2>\n<p>Sources tab可以查看你的文件。<br>\n<img src=\"http://ww3.sinaimg.cn/large/7f85b91egw1eu392veow8j20uk0rm0vv.jpg\" alt=\"\"></p>\n<h3>debugging JavaScript with breakpoints</h3>\n<ol>\n<li>\n<p>按<code>Ctrl + P</code>就可以搜索我们的文件，此时会调到<strong>Sources tab</strong>。接着<code>Ctrl + Shift + O</code>搜索函数名, <code>Ctrl + G</code>可以跳到任意一行，或者<code>Ctrl + Shift + F</code>在所有文件中搜索文本。</p>\n<p><img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1eu3fzown0oj20lo08bwgi.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>单击<strong>line gutter</strong>就可以在该行设置一个breakpoint。然后你可以在右边的面板的<strong>BreakPoints</strong><br>\n找到所有设置过的breakpoint</p>\n<p><img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1eu39fv8s2gj20le0cd400.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>Control</p>\n<ul>\n<li><strong>Continue</strong>: 继续执行，直到下一个breakpoint</li>\n<li><strong>Step over</strong>: 下一行</li>\n<li><strong>Step into</strong>: 跳进函数里面去</li>\n<li><strong>Step over</strong>: 从函数里面跳出来</li>\n<li><strong>Toggle breakpoints</strong>: 激活/不激活breakpoints</li>\n</ul>\n</li>\n</ol>\n<ol start=\"4\">\n<li>查看<br>\n然后，我们就可以在<strong>Scope Vraibles</strong>那里查看你想要的变量。如果你有一直想看的变量，<br>\n可以把他添加到<strong>Watch Expressions</strong></li>\n</ol>\n<h3>Saving changes with workspaces</h3>\n<p>把文件夹添加到workspace之后，你在DevTools上面修改的东西就会同步到实际的文件<br>\n当中去。<br>\n<img src=\"http://ww2.sinaimg.cn/large/7f85b91egw1eu3d1b12tsj20ve0bl77g.jpg\" alt=\"\"></p>\n<p>这样一来，DevTools就相当于一个编辑器了。</p>\n"},{"title":"gulp in practice","author":"Drake Leung","date":"2015-06-10T17:47:58.000Z","foreword":"通过研究generator-gulp-webapp这个例子, 来实践一下gulp的各种用途.","_content":"\n我们研究的例子是[generator-gulp-webapp](https://github.com/yeoman/generator-gulp-webapp/blob/master/app%2Ftemplates%2Fgulpfile.js)的gulp recipe.\n\n## Getting Start\n假设我正在开发一个项目。首先，我要用`jade`来写一个页面。那么，我们就需要[gulp-jade](https://www.npmjs.com/package/gulp-jade)来帮助把`jade`解析为`HTML`。\n```javascript\nvar gulp = require('gulp'),\n $ = require('gulp-load-plugins')();\n\ngulp.task('views', function() {\n  gulp.src('app/views/index.jade')\n    .pipe($.plumber())\n    .pipe($.jade({\n        pretty: true\n    }))\n    .pipe(gulp.dest('.tmp'));\n});\n```\n `require`是什么？他可以外部的一个模块，类似`java`的import。[详情请看]()\n\n因为我们使用了[gulp-load-plugins](https://www.npmjs.com/package/gulp-load-plugins)，他会读取`package.json`里面的`devDependencies`或者`dependencies`的内容来加载plugins。比如，这是我的`package.json`:\n```json\n{\n  \"devDependencies\": {\n    \"gulp-jade\": \"^1.0.1\"\n  }\n}\n```\n所以，我可以通过这样来加载`gulp-jade`模块\n```javascript\n $ = require('gulp-load-plugins')();\n $.jade();\n```\n否则的话，我就需要这样：\n```javascript\nvar jade = require('gulp-jade');\n```\n上面这种方法，如果插件多起来的话，就要写很多变量名。\n```javascript\nvar jade = require('..'),\n  sass = require('..'),\n  // ....\n  //...\n```\n\n然后，关于`gulp-jade`可以传哪些参数，可以看[docs](https://www.npmjs.com/package/gulp-jade#options)。\n\n最后，`$.plumber`是用来捕捉并处理错误的。\n\n## Next\n现在我想把bower_components里面的东西都inject到我的`index.jade`里面来，这样就不需要我手动写了。这个时候，我们需要用到[wiredep](https://github.com/taptapship/wiredep#gulpjs)\n```javascript\ngulp.task('wiredep', function() {\n  gulp.src('app/views/index.jade')\n    pipe(wiredep({\n        // options\n    }))\n    .pipe(gulp.dest('app/views/index.jade'));\n});\n```\n如果像上面那样式不够的，因为wiredep根本不知道要把bower_compoents里面的东西插到`index.jade`的什么位置，因此我们要指定placeholder.\n```jade\ndoctype html\n  head\n    meta(charset='utf-8')\n\n    // bower:css\n    // endbower\n\n  body\n    p Goodbye world\n\n    // bower:js\n    // endbower\n```\n`wiredep`会默认会读取`bower.json`默认的`bower_compponets`路径，接着找到每个component里面的`bower.json`里的`main`property。\n\n如果`main`里面没有指定相关的文件，`wiredep`是无法自动添加依赖到placeholder的。[docs - what can go wrong](https://github.com/taptapship/wiredep#what-can-go-wrong)\n\n举个例子：`semantic-ui`下的`bower.json`里的`main`没有指定他的CSS文件。\n```json\n{\n  \"main\": [\n    \"src/semantic.less\",\n    \"dist/semantic.js\"\n  ]\n}\n```\n所以你如果按照前面写的placeholder，你可以加载到`semantic,js`，但是无法添加`semantic.css`。因为我们上面的代码写的placeholder是要求css：\n```jade\ndoctype html\nhtml\n  head\n    meta(charset='utf-8')\n    title(My blog)\n\n    // bower:css\n    // endbower\n\n  body\n    p Goodbye world\n\n    // bower:js\n    script(src='../../bower_components/jquery/dist/jquery.js')\n    script(src='../../bower_components/semantic-ui/dist/semantic.js')\n    // endbower\n```\n也就是说，我们要手动添加我们想要的文件到`main`property里面去，比如`dist/semantic.css`\n```\n{\n  \"main\": [\n    \"src/semantic.less\",\n    \"dist/semantic.js\",\n    \"dist/semantic.css\"\n  ]\n}\n```\n### Issue\n假设我们已经执行了`wiredep`任务，相关的依赖已经添加到了`index.jade`。接下来就要执行`views`任务，把jade解析成`HTML`到`.tmp`目录下。\n```html\n<!-- .tmp/index.html -->\n\n<!-- omit some tag here -->\n<body>\n  <script src=\"../../bower_components/semantic-ui/dist/semantic.js\"></script>\n</body>\n```\n如果你足够细心的话，你会发现引入的semantic的**路径是不对的**。因为`.tmp`是在根目录下面的，而本来`index.jade`实在`app/views`下面的。\n正确的应该是这样：\n```html\n<body>\n  <script src=\"/bower_components/semantic-ui/dist/semantic.js\"></script>\n</body>\n```\n所以我们要在`wiredep`的时候就要忽略掉`../..`这个字符串。\n```javascript\ngulp.task('wiredep', function() {\n  gulp.src('app/views/index.jade')\n    pipe(wiredep({\n      ignorePath: /^(\\.\\.\\/)*\\.\\./  // 去掉../..\n    }))\n    .pipe(gulp.dest('app/views/index.jade'));\n});\n```\n\n## More\n话说，你不觉得这样引入多外部文件会不好吗？这样HTTP请求就变多了。所以，我们应该要把这些依赖都concatenate在同一个文件里面去。\n\n[gulp-assets](https://www.npmjs.com/package/gulp-useref)会把HTML的build block的引用的文件concatenate在一起。\n\n```javascript\ngulp.task('html', ['views'], function() {\n  var assets = $.useref.assets({searchPath: ['.tmp', 'app', '.']});\n\n  gulp.src(['.tmp/*.html'])\n    .pipe(assets)\n    .pipe($.if('*.js', $.uglify()))\n    .pipe($.if('*.css', $.csso()))\n    .pipe(assets.restore())\n    .pipe($.useref())\n    .pipe(gulp.dest('dist'));\n});\n```\n\n## End\n利用[gulp-subtree](https://github.com/Snugug/gulp-subtree)，把指定的目录提交奥到指定分支上面去。默认的分支是: `gh-page`。\n\n所以，我们只需要把`dist`目录发布到`gh-page`分支上，我们就可以通过`username.github.io/repo-name`来访问了。\n\n```javascript\ngulp.task('deploy', ['build'], function() {\n  eturn gulp.src('dist')\n    .pipe($.subtree())\n    .pipe($.clean());\n});\n```\n\n## Append: gulpfile.js\nhttps://gist.github.com/DrakeLeung/bd9132aa68b45c3c6794\n","source":"_posts/gulp-in-practice.md","raw":"title: gulp in practice\nauthor: Drake Leung\ndate: 2015-06-11 01:47:58\n\ntags: gulp\ncategories: FrontEnd\nforeword:\n  通过研究generator-gulp-webapp这个例子, 来实践一下gulp的各种用途.\n---\n\n我们研究的例子是[generator-gulp-webapp](https://github.com/yeoman/generator-gulp-webapp/blob/master/app%2Ftemplates%2Fgulpfile.js)的gulp recipe.\n\n## Getting Start\n假设我正在开发一个项目。首先，我要用`jade`来写一个页面。那么，我们就需要[gulp-jade](https://www.npmjs.com/package/gulp-jade)来帮助把`jade`解析为`HTML`。\n```javascript\nvar gulp = require('gulp'),\n $ = require('gulp-load-plugins')();\n\ngulp.task('views', function() {\n  gulp.src('app/views/index.jade')\n    .pipe($.plumber())\n    .pipe($.jade({\n        pretty: true\n    }))\n    .pipe(gulp.dest('.tmp'));\n});\n```\n `require`是什么？他可以外部的一个模块，类似`java`的import。[详情请看]()\n\n因为我们使用了[gulp-load-plugins](https://www.npmjs.com/package/gulp-load-plugins)，他会读取`package.json`里面的`devDependencies`或者`dependencies`的内容来加载plugins。比如，这是我的`package.json`:\n```json\n{\n  \"devDependencies\": {\n    \"gulp-jade\": \"^1.0.1\"\n  }\n}\n```\n所以，我可以通过这样来加载`gulp-jade`模块\n```javascript\n $ = require('gulp-load-plugins')();\n $.jade();\n```\n否则的话，我就需要这样：\n```javascript\nvar jade = require('gulp-jade');\n```\n上面这种方法，如果插件多起来的话，就要写很多变量名。\n```javascript\nvar jade = require('..'),\n  sass = require('..'),\n  // ....\n  //...\n```\n\n然后，关于`gulp-jade`可以传哪些参数，可以看[docs](https://www.npmjs.com/package/gulp-jade#options)。\n\n最后，`$.plumber`是用来捕捉并处理错误的。\n\n## Next\n现在我想把bower_components里面的东西都inject到我的`index.jade`里面来，这样就不需要我手动写了。这个时候，我们需要用到[wiredep](https://github.com/taptapship/wiredep#gulpjs)\n```javascript\ngulp.task('wiredep', function() {\n  gulp.src('app/views/index.jade')\n    pipe(wiredep({\n        // options\n    }))\n    .pipe(gulp.dest('app/views/index.jade'));\n});\n```\n如果像上面那样式不够的，因为wiredep根本不知道要把bower_compoents里面的东西插到`index.jade`的什么位置，因此我们要指定placeholder.\n```jade\ndoctype html\n  head\n    meta(charset='utf-8')\n\n    // bower:css\n    // endbower\n\n  body\n    p Goodbye world\n\n    // bower:js\n    // endbower\n```\n`wiredep`会默认会读取`bower.json`默认的`bower_compponets`路径，接着找到每个component里面的`bower.json`里的`main`property。\n\n如果`main`里面没有指定相关的文件，`wiredep`是无法自动添加依赖到placeholder的。[docs - what can go wrong](https://github.com/taptapship/wiredep#what-can-go-wrong)\n\n举个例子：`semantic-ui`下的`bower.json`里的`main`没有指定他的CSS文件。\n```json\n{\n  \"main\": [\n    \"src/semantic.less\",\n    \"dist/semantic.js\"\n  ]\n}\n```\n所以你如果按照前面写的placeholder，你可以加载到`semantic,js`，但是无法添加`semantic.css`。因为我们上面的代码写的placeholder是要求css：\n```jade\ndoctype html\nhtml\n  head\n    meta(charset='utf-8')\n    title(My blog)\n\n    // bower:css\n    // endbower\n\n  body\n    p Goodbye world\n\n    // bower:js\n    script(src='../../bower_components/jquery/dist/jquery.js')\n    script(src='../../bower_components/semantic-ui/dist/semantic.js')\n    // endbower\n```\n也就是说，我们要手动添加我们想要的文件到`main`property里面去，比如`dist/semantic.css`\n```\n{\n  \"main\": [\n    \"src/semantic.less\",\n    \"dist/semantic.js\",\n    \"dist/semantic.css\"\n  ]\n}\n```\n### Issue\n假设我们已经执行了`wiredep`任务，相关的依赖已经添加到了`index.jade`。接下来就要执行`views`任务，把jade解析成`HTML`到`.tmp`目录下。\n```html\n<!-- .tmp/index.html -->\n\n<!-- omit some tag here -->\n<body>\n  <script src=\"../../bower_components/semantic-ui/dist/semantic.js\"></script>\n</body>\n```\n如果你足够细心的话，你会发现引入的semantic的**路径是不对的**。因为`.tmp`是在根目录下面的，而本来`index.jade`实在`app/views`下面的。\n正确的应该是这样：\n```html\n<body>\n  <script src=\"/bower_components/semantic-ui/dist/semantic.js\"></script>\n</body>\n```\n所以我们要在`wiredep`的时候就要忽略掉`../..`这个字符串。\n```javascript\ngulp.task('wiredep', function() {\n  gulp.src('app/views/index.jade')\n    pipe(wiredep({\n      ignorePath: /^(\\.\\.\\/)*\\.\\./  // 去掉../..\n    }))\n    .pipe(gulp.dest('app/views/index.jade'));\n});\n```\n\n## More\n话说，你不觉得这样引入多外部文件会不好吗？这样HTTP请求就变多了。所以，我们应该要把这些依赖都concatenate在同一个文件里面去。\n\n[gulp-assets](https://www.npmjs.com/package/gulp-useref)会把HTML的build block的引用的文件concatenate在一起。\n\n```javascript\ngulp.task('html', ['views'], function() {\n  var assets = $.useref.assets({searchPath: ['.tmp', 'app', '.']});\n\n  gulp.src(['.tmp/*.html'])\n    .pipe(assets)\n    .pipe($.if('*.js', $.uglify()))\n    .pipe($.if('*.css', $.csso()))\n    .pipe(assets.restore())\n    .pipe($.useref())\n    .pipe(gulp.dest('dist'));\n});\n```\n\n## End\n利用[gulp-subtree](https://github.com/Snugug/gulp-subtree)，把指定的目录提交奥到指定分支上面去。默认的分支是: `gh-page`。\n\n所以，我们只需要把`dist`目录发布到`gh-page`分支上，我们就可以通过`username.github.io/repo-name`来访问了。\n\n```javascript\ngulp.task('deploy', ['build'], function() {\n  eturn gulp.src('dist')\n    .pipe($.subtree())\n    .pipe($.clean());\n});\n```\n\n## Append: gulpfile.js\nhttps://gist.github.com/DrakeLeung/bd9132aa68b45c3c6794\n","slug":"gulp-in-practice","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu7430h001j37rqs0kwjhzh","content":"<p>我们研究的例子是<a href=\"https://github.com/yeoman/generator-gulp-webapp/blob/master/app%2Ftemplates%2Fgulpfile.js\" target=\"_blank\" rel=\"external\">generator-gulp-webapp</a>的gulp recipe.</p>\n<h2>Getting Start</h2>\n<p>假设我正在开发一个项目。首先，我要用<code>jade</code>来写一个页面。那么，我们就需要<a href=\"https://www.npmjs.com/package/gulp-jade\" target=\"_blank\" rel=\"external\">gulp-jade</a>来帮助把<code>jade</code>解析为<code>HTML</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp'</span>),</div><div class=\"line\"> $ = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp-load-plugins'</span>)();</div><div class=\"line\"></div><div class=\"line\">gulp.task(<span class=\"string\">'views'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  gulp.src(<span class=\"string\">'app/views/index.jade'</span>)</div><div class=\"line\">    .pipe($.plumber())</div><div class=\"line\">    .pipe($.jade(&#123;</div><div class=\"line\">        pretty: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;))</div><div class=\"line\">    .pipe(gulp.dest(<span class=\"string\">'.tmp'</span>));</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p><code>require</code>是什么？他可以外部的一个模块，类似<code>java</code>的import。<a href=\"\">详情请看</a></p>\n<p>因为我们使用了<a href=\"https://www.npmjs.com/package/gulp-load-plugins\" target=\"_blank\" rel=\"external\">gulp-load-plugins</a>，他会读取<code>package.json</code>里面的<code>devDependencies</code>或者<code>dependencies</code>的内容来加载plugins。比如，这是我的<code>package.json</code>:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"devDependencies\"</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">\"gulp-jade\"</span>: <span class=\"string\">\"^1.0.1\"</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>所以，我可以通过这样来加载<code>gulp-jade</code>模块</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp-load-plugins'</span>)();</div><div class=\"line\">$.jade();</div></pre></td></tr></table></figure>\n<p>否则的话，我就需要这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> jade = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp-jade'</span>);</div></pre></td></tr></table></figure>\n<p>上面这种方法，如果插件多起来的话，就要写很多变量名。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> jade = <span class=\"built_in\">require</span>(<span class=\"string\">'..'</span>),</div><div class=\"line\">  sass = <span class=\"built_in\">require</span>(<span class=\"string\">'..'</span>),</div><div class=\"line\">  <span class=\"comment\">// ....</span></div><div class=\"line\">  <span class=\"comment\">//...</span></div></pre></td></tr></table></figure>\n<p>然后，关于<code>gulp-jade</code>可以传哪些参数，可以看<a href=\"https://www.npmjs.com/package/gulp-jade#options\" target=\"_blank\" rel=\"external\">docs</a>。</p>\n<p>最后，<code>$.plumber</code>是用来捕捉并处理错误的。</p>\n<h2>Next</h2>\n<p>现在我想把bower_components里面的东西都inject到我的<code>index.jade</code>里面来，这样就不需要我手动写了。这个时候，我们需要用到<a href=\"https://github.com/taptapship/wiredep#gulpjs\" target=\"_blank\" rel=\"external\">wiredep</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.task(<span class=\"string\">'wiredep'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  gulp.src(<span class=\"string\">'app/views/index.jade'</span>)</div><div class=\"line\">    pipe(wiredep(&#123;</div><div class=\"line\">        <span class=\"comment\">// options</span></div><div class=\"line\">    &#125;))</div><div class=\"line\">    .pipe(gulp.dest(<span class=\"string\">'app/views/index.jade'</span>));</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>如果像上面那样式不够的，因为wiredep根本不知道要把bower_compoents里面的东西插到<code>index.jade</code>的什么位置，因此我们要指定placeholder.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">doctype html</div><div class=\"line\">  head</div><div class=\"line\">    meta(charset=&apos;utf-8&apos;)</div><div class=\"line\"></div><div class=\"line\">    // bower:css</div><div class=\"line\">    // endbower</div><div class=\"line\"></div><div class=\"line\">  body</div><div class=\"line\">    p Goodbye world</div><div class=\"line\"></div><div class=\"line\">    // bower:js</div><div class=\"line\">    // endbower</div></pre></td></tr></table></figure>\n<p><code>wiredep</code>会默认会读取<code>bower.json</code>默认的<code>bower_compponets</code>路径，接着找到每个component里面的<code>bower.json</code>里的<code>main</code>property。</p>\n<p>如果<code>main</code>里面没有指定相关的文件，<code>wiredep</code>是无法自动添加依赖到placeholder的。<a href=\"https://github.com/taptapship/wiredep#what-can-go-wrong\" target=\"_blank\" rel=\"external\">docs - what can go wrong</a></p>\n<p>举个例子：<code>semantic-ui</code>下的<code>bower.json</code>里的<code>main</code>没有指定他的CSS文件。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"main\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"src/semantic.less\"</span>,</div><div class=\"line\">    <span class=\"string\">\"dist/semantic.js\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>所以你如果按照前面写的placeholder，你可以加载到<code>semantic,js</code>，但是无法添加<code>semantic.css</code>。因为我们上面的代码写的placeholder是要求css：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">doctype html</div><div class=\"line\">html</div><div class=\"line\">  head</div><div class=\"line\">    meta(charset=&apos;utf-8&apos;)</div><div class=\"line\">    title(My blog)</div><div class=\"line\"></div><div class=\"line\">    // bower:css</div><div class=\"line\">    // endbower</div><div class=\"line\"></div><div class=\"line\">  body</div><div class=\"line\">    p Goodbye world</div><div class=\"line\"></div><div class=\"line\">    // bower:js</div><div class=\"line\">    script(src=&apos;../../bower_components/jquery/dist/jquery.js&apos;)</div><div class=\"line\">    script(src=&apos;../../bower_components/semantic-ui/dist/semantic.js&apos;)</div><div class=\"line\">    // endbower</div></pre></td></tr></table></figure>\n<p>也就是说，我们要手动添加我们想要的文件到<code>main</code>property里面去，比如<code>dist/semantic.css</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  &quot;main&quot;: [</div><div class=\"line\">    &quot;src/semantic.less&quot;,</div><div class=\"line\">    &quot;dist/semantic.js&quot;,</div><div class=\"line\">    &quot;dist/semantic.css&quot;</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3>Issue</h3>\n<p>假设我们已经执行了<code>wiredep</code>任务，相关的依赖已经添加到了<code>index.jade</code>。接下来就要执行<code>views</code>任务，把jade解析成<code>HTML</code>到<code>.tmp</code>目录下。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- .tmp/index.html --&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- omit some tag here --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../../bower_components/semantic-ui/dist/semantic.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>如果你足够细心的话，你会发现引入的semantic的<strong>路径是不对的</strong>。因为<code>.tmp</code>是在根目录下面的，而本来<code>index.jade</code>实在<code>app/views</code>下面的。<br>\n正确的应该是这样：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/bower_components/semantic-ui/dist/semantic.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>所以我们要在<code>wiredep</code>的时候就要忽略掉<code>../..</code>这个字符串。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.task(<span class=\"string\">'wiredep'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  gulp.src(<span class=\"string\">'app/views/index.jade'</span>)</div><div class=\"line\">    pipe(wiredep(&#123;</div><div class=\"line\">      ignorePath: <span class=\"regexp\">/^(\\.\\.\\/)*\\.\\./</span>  <span class=\"comment\">// 去掉../..</span></div><div class=\"line\">    &#125;))</div><div class=\"line\">    .pipe(gulp.dest(<span class=\"string\">'app/views/index.jade'</span>));</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2>More</h2>\n<p>话说，你不觉得这样引入多外部文件会不好吗？这样HTTP请求就变多了。所以，我们应该要把这些依赖都concatenate在同一个文件里面去。</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-useref\" target=\"_blank\" rel=\"external\">gulp-assets</a>会把HTML的build block的引用的文件concatenate在一起。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.task(<span class=\"string\">'html'</span>, [<span class=\"string\">'views'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> assets = $.useref.assets(&#123;searchPath: [<span class=\"string\">'.tmp'</span>, <span class=\"string\">'app'</span>, <span class=\"string\">'.'</span>]&#125;);</div><div class=\"line\"></div><div class=\"line\">  gulp.src([<span class=\"string\">'.tmp/*.html'</span>])</div><div class=\"line\">    .pipe(assets)</div><div class=\"line\">    .pipe($.<span class=\"keyword\">if</span>(<span class=\"string\">'*.js'</span>, $.uglify()))</div><div class=\"line\">    .pipe($.<span class=\"keyword\">if</span>(<span class=\"string\">'*.css'</span>, $.csso()))</div><div class=\"line\">    .pipe(assets.restore())</div><div class=\"line\">    .pipe($.useref())</div><div class=\"line\">    .pipe(gulp.dest(<span class=\"string\">'dist'</span>));</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2>End</h2>\n<p>利用<a href=\"https://github.com/Snugug/gulp-subtree\" target=\"_blank\" rel=\"external\">gulp-subtree</a>，把指定的目录提交奥到指定分支上面去。默认的分支是: <code>gh-page</code>。</p>\n<p>所以，我们只需要把<code>dist</code>目录发布到<code>gh-page</code>分支上，我们就可以通过<code>username.github.io/repo-name</code>来访问了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.task(<span class=\"string\">'deploy'</span>, [<span class=\"string\">'build'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  eturn gulp.src(<span class=\"string\">'dist'</span>)</div><div class=\"line\">    .pipe($.subtree())</div><div class=\"line\">    .pipe($.clean());</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2>Append: gulpfile.js</h2>\n<p><a href=\"https://gist.github.com/DrakeLeung/bd9132aa68b45c3c6794\" target=\"_blank\" rel=\"external\">https://gist.github.com/DrakeLeung/bd9132aa68b45c3c6794</a></p>\n","excerpt":"","more":"<p>我们研究的例子是<a href=\"https://github.com/yeoman/generator-gulp-webapp/blob/master/app%2Ftemplates%2Fgulpfile.js\">generator-gulp-webapp</a>的gulp recipe.</p>\n<h2>Getting Start</h2>\n<p>假设我正在开发一个项目。首先，我要用<code>jade</code>来写一个页面。那么，我们就需要<a href=\"https://www.npmjs.com/package/gulp-jade\">gulp-jade</a>来帮助把<code>jade</code>解析为<code>HTML</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp'</span>),</div><div class=\"line\"> $ = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp-load-plugins'</span>)();</div><div class=\"line\"></div><div class=\"line\">gulp.task(<span class=\"string\">'views'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  gulp.src(<span class=\"string\">'app/views/index.jade'</span>)</div><div class=\"line\">    .pipe($.plumber())</div><div class=\"line\">    .pipe($.jade(&#123;</div><div class=\"line\">        pretty: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;))</div><div class=\"line\">    .pipe(gulp.dest(<span class=\"string\">'.tmp'</span>));</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p><code>require</code>是什么？他可以外部的一个模块，类似<code>java</code>的import。<a href=\"\">详情请看</a></p>\n<p>因为我们使用了<a href=\"https://www.npmjs.com/package/gulp-load-plugins\">gulp-load-plugins</a>，他会读取<code>package.json</code>里面的<code>devDependencies</code>或者<code>dependencies</code>的内容来加载plugins。比如，这是我的<code>package.json</code>:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"devDependencies\"</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">\"gulp-jade\"</span>: <span class=\"string\">\"^1.0.1\"</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>所以，我可以通过这样来加载<code>gulp-jade</code>模块</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp-load-plugins'</span>)();</div><div class=\"line\">$.jade();</div></pre></td></tr></table></figure>\n<p>否则的话，我就需要这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> jade = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp-jade'</span>);</div></pre></td></tr></table></figure>\n<p>上面这种方法，如果插件多起来的话，就要写很多变量名。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> jade = <span class=\"built_in\">require</span>(<span class=\"string\">'..'</span>),</div><div class=\"line\">  sass = <span class=\"built_in\">require</span>(<span class=\"string\">'..'</span>),</div><div class=\"line\">  <span class=\"comment\">// ....</span></div><div class=\"line\">  <span class=\"comment\">//...</span></div></pre></td></tr></table></figure>\n<p>然后，关于<code>gulp-jade</code>可以传哪些参数，可以看<a href=\"https://www.npmjs.com/package/gulp-jade#options\">docs</a>。</p>\n<p>最后，<code>$.plumber</code>是用来捕捉并处理错误的。</p>\n<h2>Next</h2>\n<p>现在我想把bower_components里面的东西都inject到我的<code>index.jade</code>里面来，这样就不需要我手动写了。这个时候，我们需要用到<a href=\"https://github.com/taptapship/wiredep#gulpjs\">wiredep</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.task(<span class=\"string\">'wiredep'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  gulp.src(<span class=\"string\">'app/views/index.jade'</span>)</div><div class=\"line\">    pipe(wiredep(&#123;</div><div class=\"line\">        <span class=\"comment\">// options</span></div><div class=\"line\">    &#125;))</div><div class=\"line\">    .pipe(gulp.dest(<span class=\"string\">'app/views/index.jade'</span>));</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>如果像上面那样式不够的，因为wiredep根本不知道要把bower_compoents里面的东西插到<code>index.jade</code>的什么位置，因此我们要指定placeholder.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">doctype html</div><div class=\"line\">  head</div><div class=\"line\">    meta(charset=&apos;utf-8&apos;)</div><div class=\"line\"></div><div class=\"line\">    // bower:css</div><div class=\"line\">    // endbower</div><div class=\"line\"></div><div class=\"line\">  body</div><div class=\"line\">    p Goodbye world</div><div class=\"line\"></div><div class=\"line\">    // bower:js</div><div class=\"line\">    // endbower</div></pre></td></tr></table></figure>\n<p><code>wiredep</code>会默认会读取<code>bower.json</code>默认的<code>bower_compponets</code>路径，接着找到每个component里面的<code>bower.json</code>里的<code>main</code>property。</p>\n<p>如果<code>main</code>里面没有指定相关的文件，<code>wiredep</code>是无法自动添加依赖到placeholder的。<a href=\"https://github.com/taptapship/wiredep#what-can-go-wrong\">docs - what can go wrong</a></p>\n<p>举个例子：<code>semantic-ui</code>下的<code>bower.json</code>里的<code>main</code>没有指定他的CSS文件。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"main\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"src/semantic.less\"</span>,</div><div class=\"line\">    <span class=\"string\">\"dist/semantic.js\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>所以你如果按照前面写的placeholder，你可以加载到<code>semantic,js</code>，但是无法添加<code>semantic.css</code>。因为我们上面的代码写的placeholder是要求css：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">doctype html</div><div class=\"line\">html</div><div class=\"line\">  head</div><div class=\"line\">    meta(charset=&apos;utf-8&apos;)</div><div class=\"line\">    title(My blog)</div><div class=\"line\"></div><div class=\"line\">    // bower:css</div><div class=\"line\">    // endbower</div><div class=\"line\"></div><div class=\"line\">  body</div><div class=\"line\">    p Goodbye world</div><div class=\"line\"></div><div class=\"line\">    // bower:js</div><div class=\"line\">    script(src=&apos;../../bower_components/jquery/dist/jquery.js&apos;)</div><div class=\"line\">    script(src=&apos;../../bower_components/semantic-ui/dist/semantic.js&apos;)</div><div class=\"line\">    // endbower</div></pre></td></tr></table></figure>\n<p>也就是说，我们要手动添加我们想要的文件到<code>main</code>property里面去，比如<code>dist/semantic.css</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  &quot;main&quot;: [</div><div class=\"line\">    &quot;src/semantic.less&quot;,</div><div class=\"line\">    &quot;dist/semantic.js&quot;,</div><div class=\"line\">    &quot;dist/semantic.css&quot;</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3>Issue</h3>\n<p>假设我们已经执行了<code>wiredep</code>任务，相关的依赖已经添加到了<code>index.jade</code>。接下来就要执行<code>views</code>任务，把jade解析成<code>HTML</code>到<code>.tmp</code>目录下。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- .tmp/index.html --&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- omit some tag here --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../../bower_components/semantic-ui/dist/semantic.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>如果你足够细心的话，你会发现引入的semantic的<strong>路径是不对的</strong>。因为<code>.tmp</code>是在根目录下面的，而本来<code>index.jade</code>实在<code>app/views</code>下面的。<br>\n正确的应该是这样：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/bower_components/semantic-ui/dist/semantic.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>所以我们要在<code>wiredep</code>的时候就要忽略掉<code>../..</code>这个字符串。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.task(<span class=\"string\">'wiredep'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  gulp.src(<span class=\"string\">'app/views/index.jade'</span>)</div><div class=\"line\">    pipe(wiredep(&#123;</div><div class=\"line\">      ignorePath: <span class=\"regexp\">/^(\\.\\.\\/)*\\.\\./</span>  <span class=\"comment\">// 去掉../..</span></div><div class=\"line\">    &#125;))</div><div class=\"line\">    .pipe(gulp.dest(<span class=\"string\">'app/views/index.jade'</span>));</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2>More</h2>\n<p>话说，你不觉得这样引入多外部文件会不好吗？这样HTTP请求就变多了。所以，我们应该要把这些依赖都concatenate在同一个文件里面去。</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-useref\">gulp-assets</a>会把HTML的build block的引用的文件concatenate在一起。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.task(<span class=\"string\">'html'</span>, [<span class=\"string\">'views'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> assets = $.useref.assets(&#123;searchPath: [<span class=\"string\">'.tmp'</span>, <span class=\"string\">'app'</span>, <span class=\"string\">'.'</span>]&#125;);</div><div class=\"line\"></div><div class=\"line\">  gulp.src([<span class=\"string\">'.tmp/*.html'</span>])</div><div class=\"line\">    .pipe(assets)</div><div class=\"line\">    .pipe($.<span class=\"keyword\">if</span>(<span class=\"string\">'*.js'</span>, $.uglify()))</div><div class=\"line\">    .pipe($.<span class=\"keyword\">if</span>(<span class=\"string\">'*.css'</span>, $.csso()))</div><div class=\"line\">    .pipe(assets.restore())</div><div class=\"line\">    .pipe($.useref())</div><div class=\"line\">    .pipe(gulp.dest(<span class=\"string\">'dist'</span>));</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2>End</h2>\n<p>利用<a href=\"https://github.com/Snugug/gulp-subtree\">gulp-subtree</a>，把指定的目录提交奥到指定分支上面去。默认的分支是: <code>gh-page</code>。</p>\n<p>所以，我们只需要把<code>dist</code>目录发布到<code>gh-page</code>分支上，我们就可以通过<code>username.github.io/repo-name</code>来访问了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.task(<span class=\"string\">'deploy'</span>, [<span class=\"string\">'build'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  eturn gulp.src(<span class=\"string\">'dist'</span>)</div><div class=\"line\">    .pipe($.subtree())</div><div class=\"line\">    .pipe($.clean());</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2>Append: gulpfile.js</h2>\n<p><a href=\"https://gist.github.com/DrakeLeung/bd9132aa68b45c3c6794\">https://gist.github.com/DrakeLeung/bd9132aa68b45c3c6794</a></p>\n"},{"title":"fetch api 用起来！","author":"Drake Leung","date":"2016-08-14T16:16:49.000Z","foreword":"超级简单的 fetch 。","_content":"\n今天把 vue-resource 砍掉，换成了 [fetch](http://devdocs.io/dom/globalfetch/fetch) 。\n然而，代码体积在 build 之后只是少了 2K =。=\n\n为了兼容旧浏览器，我们将使用这个的 polyfill : [whatwg-fetch](https://github.com/github/fetch) ；如果还想兼容 node 的话：[isomorphic-fetch](https://github.com/matthew-andrews/isomorphic-fetch) 。安装请看对应的文档。\n\n## fetch api\n\n最简单的 `fetch` 接口是下面这样子的：\n\n```javascript\n/**\n * fetch\n *\n * @param {string} url \n * @param {object} config\n * @return {promise}\n*/\nfetch('/api/heros/, {\n  method: 'GET',\n})\n```\n更详情的请看文档啦：[globalfetch.fetch](http://devdocs.io/dom/globalfetch/fetch) 。\n\n\n## 常用例子\n看这个：[fetch - usage](https://github.com/github/fetch#usage) 。\n\n## 可能遇到的坑\n- 不发送 cookie\n- 不 catch 404 或者 500 等 HTTP 错误状态码。\n\n解决办法可以查看 [fetch - caveats](https://github.com/github/fetch#caveats) 。\n\n## 拦截器\n\n如果我们想在每个请求之前或者之后进行某些操作的话，就需要用到拦截器啦。\n下面我们用到的是拦截器是 [fetch-intercept](https://github.com/werk85/fetch-intercept) 。可以去看看源码，只有 80 行不到，超级优美的代码。\n\n如果我们想每个请求都发送 cookie 的话，就必须要设置 [credentials](https://github.com/github/fetch#sending-cookies) 。但是我不想每个请求都设置一遍，这时我们就可以用到拦截器啦。\n\n```javascript\nimport fetchIntercept\n\nfetchIntercept.register({\n  request(url, config = {}) {\n    const myConf = {\n      credentials: 'include', // send cookie\n    }\n\n    return [\n      url,\n      defaults(config, myConf), // merge 2 objects\n    ]\n  },\n})\n```\n\n同样地，我们可以简化请求的 URL 。比如说，\n\n- `/rootHost/api/heros/`\n- `/rootHost/api/coolBoys/`\n\n这个时候我们就可以把 `/rootHost/api/` 提取出来。\n\n```javascript\nfetchIntercept.register({\n  request(url, config = {}) {\n    return [\n     `${apiHost()}/api/${url},\n     config,\n    ]\n  },\n})\n\nfetch('heros/')\nfetch('coolBoys/')\n```\n\n类似地，我们也可以用在 GET 请求时带的 query string 。\n\n另外，因为 fetch 不会 catch 404 等错误，所以需要我们手动设置。\n\n```javascript\nfetchIntercept.register({\n  response(res) {\n    if (res.status >= 200 && res.status < 300) return res\n    return Promise.reject(res.statusText)\n  },\n})\n```\n\n可以看到使用了拦截器之后，我们的代码就变得优美多了 :smile:\n\n\n## See Also\n- [whatwg-fetch](https://github.com/github/fetch)\n- [isomorphic-fetch](https://github.com/matthew-andrews/isomorphic-fetch)\n- [fetch-intercept](https://github.com/werk85/fetch-intercept)\n\n","source":"_posts/fetch-api-now.md","raw":"---\ntitle: fetch api 用起来！\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-08-15 00:16:49\nforeword: 超级简单的 fetch 。\n---\n\n今天把 vue-resource 砍掉，换成了 [fetch](http://devdocs.io/dom/globalfetch/fetch) 。\n然而，代码体积在 build 之后只是少了 2K =。=\n\n为了兼容旧浏览器，我们将使用这个的 polyfill : [whatwg-fetch](https://github.com/github/fetch) ；如果还想兼容 node 的话：[isomorphic-fetch](https://github.com/matthew-andrews/isomorphic-fetch) 。安装请看对应的文档。\n\n## fetch api\n\n最简单的 `fetch` 接口是下面这样子的：\n\n```javascript\n/**\n * fetch\n *\n * @param {string} url \n * @param {object} config\n * @return {promise}\n*/\nfetch('/api/heros/, {\n  method: 'GET',\n})\n```\n更详情的请看文档啦：[globalfetch.fetch](http://devdocs.io/dom/globalfetch/fetch) 。\n\n\n## 常用例子\n看这个：[fetch - usage](https://github.com/github/fetch#usage) 。\n\n## 可能遇到的坑\n- 不发送 cookie\n- 不 catch 404 或者 500 等 HTTP 错误状态码。\n\n解决办法可以查看 [fetch - caveats](https://github.com/github/fetch#caveats) 。\n\n## 拦截器\n\n如果我们想在每个请求之前或者之后进行某些操作的话，就需要用到拦截器啦。\n下面我们用到的是拦截器是 [fetch-intercept](https://github.com/werk85/fetch-intercept) 。可以去看看源码，只有 80 行不到，超级优美的代码。\n\n如果我们想每个请求都发送 cookie 的话，就必须要设置 [credentials](https://github.com/github/fetch#sending-cookies) 。但是我不想每个请求都设置一遍，这时我们就可以用到拦截器啦。\n\n```javascript\nimport fetchIntercept\n\nfetchIntercept.register({\n  request(url, config = {}) {\n    const myConf = {\n      credentials: 'include', // send cookie\n    }\n\n    return [\n      url,\n      defaults(config, myConf), // merge 2 objects\n    ]\n  },\n})\n```\n\n同样地，我们可以简化请求的 URL 。比如说，\n\n- `/rootHost/api/heros/`\n- `/rootHost/api/coolBoys/`\n\n这个时候我们就可以把 `/rootHost/api/` 提取出来。\n\n```javascript\nfetchIntercept.register({\n  request(url, config = {}) {\n    return [\n     `${apiHost()}/api/${url},\n     config,\n    ]\n  },\n})\n\nfetch('heros/')\nfetch('coolBoys/')\n```\n\n类似地，我们也可以用在 GET 请求时带的 query string 。\n\n另外，因为 fetch 不会 catch 404 等错误，所以需要我们手动设置。\n\n```javascript\nfetchIntercept.register({\n  response(res) {\n    if (res.status >= 200 && res.status < 300) return res\n    return Promise.reject(res.statusText)\n  },\n})\n```\n\n可以看到使用了拦截器之后，我们的代码就变得优美多了 :smile:\n\n\n## See Also\n- [whatwg-fetch](https://github.com/github/fetch)\n- [isomorphic-fetch](https://github.com/matthew-andrews/isomorphic-fetch)\n- [fetch-intercept](https://github.com/werk85/fetch-intercept)\n\n","slug":"fetch-api-now","published":1,"updated":"2016-09-08T10:44:36.000Z","_id":"cisu7430k001l37rq6wurz6f5","comments":1,"layout":"post","photos":[],"link":"","content":"<p>今天把 vue-resource 砍掉，换成了 <a href=\"http://devdocs.io/dom/globalfetch/fetch\" target=\"_blank\" rel=\"external\">fetch</a> 。<br>\n然而，代码体积在 build 之后只是少了 2K =。=</p>\n<p>为了兼容旧浏览器，我们将使用这个的 polyfill : <a href=\"https://github.com/github/fetch\" target=\"_blank\" rel=\"external\">whatwg-fetch</a> ；如果还想兼容 node 的话：<a href=\"https://github.com/matthew-andrews/isomorphic-fetch\" target=\"_blank\" rel=\"external\">isomorphic-fetch</a> 。安装请看对应的文档。</p>\n<h2>fetch api</h2>\n<p>最简单的 <code>fetch</code> 接口是下面这样子的：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">/**</div><div class=\"line\"> * fetch</div><div class=\"line\"> *</div><div class=\"line\"> * @param &#123;string&#125; url </div><div class=\"line\"> * @param &#123;object&#125; config</div><div class=\"line\"> * @return &#123;promise&#125;</div><div class=\"line\">*/</div><div class=\"line\">fetch('/api/heros/, &#123;</div><div class=\"line\">  method: 'GET',</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>更详情的请看文档啦：<a href=\"http://devdocs.io/dom/globalfetch/fetch\" target=\"_blank\" rel=\"external\">globalfetch.fetch</a> 。</p>\n<h2>常用例子</h2>\n<p>看这个：<a href=\"https://github.com/github/fetch#usage\" target=\"_blank\" rel=\"external\">fetch - usage</a> 。</p>\n<h2>可能遇到的坑</h2>\n<ul>\n<li>不发送 cookie</li>\n<li>不 catch 404 或者 500 等 HTTP 错误状态码。</li>\n</ul>\n<p>解决办法可以查看 <a href=\"https://github.com/github/fetch#caveats\" target=\"_blank\" rel=\"external\">fetch - caveats</a> 。</p>\n<h2>拦截器</h2>\n<p>如果我们想在每个请求之前或者之后进行某些操作的话，就需要用到拦截器啦。<br>\n下面我们用到的是拦截器是 <a href=\"https://github.com/werk85/fetch-intercept\" target=\"_blank\" rel=\"external\">fetch-intercept</a> 。可以去看看源码，只有 80 行不到，超级优美的代码。</p>\n<p>如果我们想每个请求都发送 cookie 的话，就必须要设置 <a href=\"https://github.com/github/fetch#sending-cookies\" target=\"_blank\" rel=\"external\">credentials</a> 。但是我不想每个请求都设置一遍，这时我们就可以用到拦截器啦。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> fetchIntercept</div><div class=\"line\"></div><div class=\"line\">fetchIntercept.register(&#123;</div><div class=\"line\">  request(url, config = &#123;&#125;) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> myConf = &#123;</div><div class=\"line\">      credentials: <span class=\"string\">'include'</span>, <span class=\"comment\">// send cookie</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> [</div><div class=\"line\">      url,</div><div class=\"line\">      defaults(config, myConf), <span class=\"comment\">// merge 2 objects</span></div><div class=\"line\">    ]</div><div class=\"line\">  &#125;,</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>同样地，我们可以简化请求的 URL 。比如说，</p>\n<ul>\n<li><code>/rootHost/api/heros/</code></li>\n<li><code>/rootHost/api/coolBoys/</code></li>\n</ul>\n<p>这个时候我们就可以把 <code>/rootHost/api/</code> 提取出来。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">fetchIntercept.register(&#123;</div><div class=\"line\">  request(url, config = &#123;&#125;) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> [</div><div class=\"line\">     <span class=\"string\">`<span class=\"subst\">$&#123;apiHost()&#125;</span>/api/<span class=\"subst\">$&#123;url&#125;</span>,</span></div><div class=\"line\">     config,</div><div class=\"line\">    ]</div><div class=\"line\">  &#125;,</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">fetch('heros/')</div><div class=\"line\">fetch('coolBoys/')</div></pre></td></tr></table></figure>\n<p>类似地，我们也可以用在 GET 请求时带的 query string 。</p>\n<p>另外，因为 fetch 不会 catch 404 等错误，所以需要我们手动设置。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">fetchIntercept.register(&#123;</div><div class=\"line\">  response(res) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (res.status &gt;= <span class=\"number\">200</span> &amp;&amp; res.status &lt; <span class=\"number\">300</span>) <span class=\"keyword\">return</span> res</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(res.statusText)</div><div class=\"line\">  &#125;,</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>可以看到使用了拦截器之后，我们的代码就变得优美多了 <img class=\"emoji\" draggable=\"false\" alt=\"😄\" src=\"https://twemoji.maxcdn.com/2/72x72/1f604.png\"></p>\n<h2>See Also</h2>\n<ul>\n<li><a href=\"https://github.com/github/fetch\" target=\"_blank\" rel=\"external\">whatwg-fetch</a></li>\n<li><a href=\"https://github.com/matthew-andrews/isomorphic-fetch\" target=\"_blank\" rel=\"external\">isomorphic-fetch</a></li>\n<li><a href=\"https://github.com/werk85/fetch-intercept\" target=\"_blank\" rel=\"external\">fetch-intercept</a></li>\n</ul>\n","excerpt":"","more":"<p>今天把 vue-resource 砍掉，换成了 <a href=\"http://devdocs.io/dom/globalfetch/fetch\">fetch</a> 。<br>\n然而，代码体积在 build 之后只是少了 2K =。=</p>\n<p>为了兼容旧浏览器，我们将使用这个的 polyfill : <a href=\"https://github.com/github/fetch\">whatwg-fetch</a> ；如果还想兼容 node 的话：<a href=\"https://github.com/matthew-andrews/isomorphic-fetch\">isomorphic-fetch</a> 。安装请看对应的文档。</p>\n<h2>fetch api</h2>\n<p>最简单的 <code>fetch</code> 接口是下面这样子的：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">/**</div><div class=\"line\"> * fetch</div><div class=\"line\"> *</div><div class=\"line\"> * @param &#123;string&#125; url </div><div class=\"line\"> * @param &#123;object&#125; config</div><div class=\"line\"> * @return &#123;promise&#125;</div><div class=\"line\">*/</div><div class=\"line\">fetch('/api/heros/, &#123;</div><div class=\"line\">  method: 'GET',</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>更详情的请看文档啦：<a href=\"http://devdocs.io/dom/globalfetch/fetch\">globalfetch.fetch</a> 。</p>\n<h2>常用例子</h2>\n<p>看这个：<a href=\"https://github.com/github/fetch#usage\">fetch - usage</a> 。</p>\n<h2>可能遇到的坑</h2>\n<ul>\n<li>不发送 cookie</li>\n<li>不 catch 404 或者 500 等 HTTP 错误状态码。</li>\n</ul>\n<p>解决办法可以查看 <a href=\"https://github.com/github/fetch#caveats\">fetch - caveats</a> 。</p>\n<h2>拦截器</h2>\n<p>如果我们想在每个请求之前或者之后进行某些操作的话，就需要用到拦截器啦。<br>\n下面我们用到的是拦截器是 <a href=\"https://github.com/werk85/fetch-intercept\">fetch-intercept</a> 。可以去看看源码，只有 80 行不到，超级优美的代码。</p>\n<p>如果我们想每个请求都发送 cookie 的话，就必须要设置 <a href=\"https://github.com/github/fetch#sending-cookies\">credentials</a> 。但是我不想每个请求都设置一遍，这时我们就可以用到拦截器啦。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> fetchIntercept</div><div class=\"line\"></div><div class=\"line\">fetchIntercept.register(&#123;</div><div class=\"line\">  request(url, config = &#123;&#125;) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> myConf = &#123;</div><div class=\"line\">      credentials: <span class=\"string\">'include'</span>, <span class=\"comment\">// send cookie</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> [</div><div class=\"line\">      url,</div><div class=\"line\">      defaults(config, myConf), <span class=\"comment\">// merge 2 objects</span></div><div class=\"line\">    ]</div><div class=\"line\">  &#125;,</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>同样地，我们可以简化请求的 URL 。比如说，</p>\n<ul>\n<li><code>/rootHost/api/heros/</code></li>\n<li><code>/rootHost/api/coolBoys/</code></li>\n</ul>\n<p>这个时候我们就可以把 <code>/rootHost/api/</code> 提取出来。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">fetchIntercept.register(&#123;</div><div class=\"line\">  request(url, config = &#123;&#125;) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> [</div><div class=\"line\">     <span class=\"string\">`<span class=\"subst\">$&#123;apiHost()&#125;</span>/api/<span class=\"subst\">$&#123;url&#125;</span>,</div><div class=\"line\">     config,</div><div class=\"line\">    ]</div><div class=\"line\">  &#125;,</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">fetch('heros/')</div><div class=\"line\">fetch('coolBoys/')</span></div></pre></td></tr></table></figure>\n<p>类似地，我们也可以用在 GET 请求时带的 query string 。</p>\n<p>另外，因为 fetch 不会 catch 404 等错误，所以需要我们手动设置。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">fetchIntercept.register(&#123;</div><div class=\"line\">  response(res) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (res.status &gt;= <span class=\"number\">200</span> &amp;&amp; res.status &lt; <span class=\"number\">300</span>) <span class=\"keyword\">return</span> res</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(res.statusText)</div><div class=\"line\">  &#125;,</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>可以看到使用了拦截器之后，我们的代码就变得优美多了 <img class=\"emoji\" draggable=\"false\" alt=\"😄\" src=\"https://twemoji.maxcdn.com/2/72x72/1f604.png\"></p>\n<h2>See Also</h2>\n<ul>\n<li><a href=\"https://github.com/github/fetch\">whatwg-fetch</a></li>\n<li><a href=\"https://github.com/matthew-andrews/isomorphic-fetch\">isomorphic-fetch</a></li>\n<li><a href=\"https://github.com/werk85/fetch-intercept\">fetch-intercept</a></li>\n</ul>\n"},{"title":"实现一个简单的 AMD 模块加载器","author":"Drake Leung","date":"2016-02-11T15:32:53.000Z","foreword":"讲一下实现过程中遇到的问题。","_content":"\n(完整代码请看[GitHub - tiny module loader](https://github.com/DrakeLeung/tiny-module-loader))\n\n## What\n不了解JavaScript模块化的请看[「译」JavaScript Modules Part1: A Beginner Guide](http://drakeleung.github.io/blog/2016/02/07/JavaScript-Module-A-Beginner-Guide/)。\n\n简单来说，AMD规范定义了模块加载的方式是异步的而不是同步。\n\n接着，语法是这样子的：`define`函数去请求依赖。其中，第一个参数是依赖的模块数组，第二个参数是函数。当依赖都加载完毕之后，就会作为参数，传进这个函数里面。\n\n## Why\n为了探究 AMD 模块加载器的原理，我们不妨尝试着从零开始实现他。\n\n我们只实现一个 `define` 函数。其他后面再慢慢完善。\n\n## How\n主要分成3部分：下载依赖，执行依赖并导出，读取依赖并执行回调(递归地)。\n\n### 下载依赖\n接受一个依赖模块的URL，然后用Ajax请求。这时会返回包含文件内容的字符串。\n\n这个很简单，只是用*Promise*简便一点而已。\n\n```JavaScript\n// getModule.js\n\nexport const fetchDeps = name =>\n  new Promise((resolve, reject) => {\n    let req = new XMLHttpRequest()\n\n    req.addEventListener('load', () => {\n      if (req.status < 400) resolve(req.responseText)\n      else reject(req.status)\n    }, false)\n\n    req.addEventListener('error', () => {\n      reject(req.status)\n    }, false)\n\n    req.open('GET', name, true)\n    req.send(null)\n  })\n```\n\n### 执行依赖\n由于请求依赖返回的是一个字符串。但我们想要的是把这个字符串当作 JavaScript 代码来执行，解决方法有2种，分别是 `eval()` 和 `new Function()`。我们采取后者。\n\n还有一种方法应该可以：动态创建 `<script>` 标签。\n\n```JavaScript\n// getModule.js\n\nlet currentModule = null\n\nexport const getModule = code => {\n  let module = {\n    exports: null,\n    exported: false,\n    onExport: []\n  }\n\n  currentModule = module\n  new Function ('', code)() // work with eval(), as well\n\n  return module\n}\n\nexport {\n  currentModule,\n  getModule\n}\n```\n\n这里有一个我觉得是最难的问题：由于 `new Function()` 执行的时候，是不返回东西的（其实我并不知道 `new Function` 的工作原理)。\n\n所以，这个时候依赖虽然是请求回来并执行了，但是他依然还没有导出(`exports`)。所以，返回的 `module` 对象的 `exports` 是 `null`的。并且，我们还用了一个变量 `currentModule` 还存储当前的变量。\n\n\n### 导出依赖并执行回调函数\n\n```javascript\n// myDefine.js\n\n// import {\n//   currentModule,\n//   getModule\n// } from './getModule'\n//\n// import {fetchDeps} from './fetchDeps'\n// import {whenDepsExported} from './whenDepsExported'\n\nexport const define = (deps, callback) => {\n  let myModule = currentModule // #0\n  const getDeps = deps.map(fetchDeps)\n\n  Promise.all(getDeps)\n    .then(codes => {\n      const modules = codes.map(getModule)\n\n      // #1\n      modules.forEach(m =>\n        !m.exported && m.onExport.push(() =>\n          whenDepsExported(callback, modules, myModule)\n        )\n      )\n\n      whenDepsExported(callback, modules, myModule) // #2\n    })\n}\n```\n\n`#0` 我们把 `currentModule` 赋给一个局部变量，这样使得每个 `define` 都有自己的「模块」。这个也是困惑了我好久的一步。我也似懂非懂，因为反正已经 work 起来了= =\n\n这个时候问题就来了。因为我们需要递归地加载依赖，那么，肯定是加载最外面的依赖，然后才到里面。如果没有了 `#1`，那么就会执行 `#2`，这样就会导致和想我们想要的相反，即先执行最里面的依赖的回调，再执行外面的。\n\n因此，我们把最里面的模块先放到一个数组里面，然后当他的依赖执行完之后，再去执行他的回调，这时他的回调的参数才有值。\n\n```JavaScript\n// whenDepsExported.js\n\nexport const whenDepsExported = (cb, deps, myModule) => {\n  if (!deps.every(dep => dep.exported)) return\n\n  // params for 'callback of define'\n  let args = deps.map(dep => dep.exports)\n  let exports = cb.apply(null, args)\n\n  // #0\n  if (myModule) {\n    myModule.exports = exports\n    myModule.exported = true\n    myModule.onExport.forEach(f => f())\n  }\n\n  return exports\n}\n```\n\n`#0` 中，我们导出了依赖，并且执行了 `onExport` 的回调函数。\n\n## Wrap up\n原理看起来不是很难，但自己实现一遍还是挺难的。\n\n不过 AMD，CommonJS 这些规范倒是改善了 JavaScript 模块系统，使得 JavaScript 能够在规模较大的项目中更加容易开发，以及维护。\n\n(完整代码请看[GitHub - tiny module loader](https://github.com/DrakeLeung/tiny-module-loader))\n\n## Resources\n- [eloquent javascript - modules](http://eloquentjavascript.net/10_modules.html)\n","source":"_posts/implement-a-simple-AMD-module-loader.md","raw":"---\ntitle: 实现一个简单的 AMD 模块加载器\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-02-11 23:32:53\nforeword: 讲一下实现过程中遇到的问题。\n---\n\n(完整代码请看[GitHub - tiny module loader](https://github.com/DrakeLeung/tiny-module-loader))\n\n## What\n不了解JavaScript模块化的请看[「译」JavaScript Modules Part1: A Beginner Guide](http://drakeleung.github.io/blog/2016/02/07/JavaScript-Module-A-Beginner-Guide/)。\n\n简单来说，AMD规范定义了模块加载的方式是异步的而不是同步。\n\n接着，语法是这样子的：`define`函数去请求依赖。其中，第一个参数是依赖的模块数组，第二个参数是函数。当依赖都加载完毕之后，就会作为参数，传进这个函数里面。\n\n## Why\n为了探究 AMD 模块加载器的原理，我们不妨尝试着从零开始实现他。\n\n我们只实现一个 `define` 函数。其他后面再慢慢完善。\n\n## How\n主要分成3部分：下载依赖，执行依赖并导出，读取依赖并执行回调(递归地)。\n\n### 下载依赖\n接受一个依赖模块的URL，然后用Ajax请求。这时会返回包含文件内容的字符串。\n\n这个很简单，只是用*Promise*简便一点而已。\n\n```JavaScript\n// getModule.js\n\nexport const fetchDeps = name =>\n  new Promise((resolve, reject) => {\n    let req = new XMLHttpRequest()\n\n    req.addEventListener('load', () => {\n      if (req.status < 400) resolve(req.responseText)\n      else reject(req.status)\n    }, false)\n\n    req.addEventListener('error', () => {\n      reject(req.status)\n    }, false)\n\n    req.open('GET', name, true)\n    req.send(null)\n  })\n```\n\n### 执行依赖\n由于请求依赖返回的是一个字符串。但我们想要的是把这个字符串当作 JavaScript 代码来执行，解决方法有2种，分别是 `eval()` 和 `new Function()`。我们采取后者。\n\n还有一种方法应该可以：动态创建 `<script>` 标签。\n\n```JavaScript\n// getModule.js\n\nlet currentModule = null\n\nexport const getModule = code => {\n  let module = {\n    exports: null,\n    exported: false,\n    onExport: []\n  }\n\n  currentModule = module\n  new Function ('', code)() // work with eval(), as well\n\n  return module\n}\n\nexport {\n  currentModule,\n  getModule\n}\n```\n\n这里有一个我觉得是最难的问题：由于 `new Function()` 执行的时候，是不返回东西的（其实我并不知道 `new Function` 的工作原理)。\n\n所以，这个时候依赖虽然是请求回来并执行了，但是他依然还没有导出(`exports`)。所以，返回的 `module` 对象的 `exports` 是 `null`的。并且，我们还用了一个变量 `currentModule` 还存储当前的变量。\n\n\n### 导出依赖并执行回调函数\n\n```javascript\n// myDefine.js\n\n// import {\n//   currentModule,\n//   getModule\n// } from './getModule'\n//\n// import {fetchDeps} from './fetchDeps'\n// import {whenDepsExported} from './whenDepsExported'\n\nexport const define = (deps, callback) => {\n  let myModule = currentModule // #0\n  const getDeps = deps.map(fetchDeps)\n\n  Promise.all(getDeps)\n    .then(codes => {\n      const modules = codes.map(getModule)\n\n      // #1\n      modules.forEach(m =>\n        !m.exported && m.onExport.push(() =>\n          whenDepsExported(callback, modules, myModule)\n        )\n      )\n\n      whenDepsExported(callback, modules, myModule) // #2\n    })\n}\n```\n\n`#0` 我们把 `currentModule` 赋给一个局部变量，这样使得每个 `define` 都有自己的「模块」。这个也是困惑了我好久的一步。我也似懂非懂，因为反正已经 work 起来了= =\n\n这个时候问题就来了。因为我们需要递归地加载依赖，那么，肯定是加载最外面的依赖，然后才到里面。如果没有了 `#1`，那么就会执行 `#2`，这样就会导致和想我们想要的相反，即先执行最里面的依赖的回调，再执行外面的。\n\n因此，我们把最里面的模块先放到一个数组里面，然后当他的依赖执行完之后，再去执行他的回调，这时他的回调的参数才有值。\n\n```JavaScript\n// whenDepsExported.js\n\nexport const whenDepsExported = (cb, deps, myModule) => {\n  if (!deps.every(dep => dep.exported)) return\n\n  // params for 'callback of define'\n  let args = deps.map(dep => dep.exports)\n  let exports = cb.apply(null, args)\n\n  // #0\n  if (myModule) {\n    myModule.exports = exports\n    myModule.exported = true\n    myModule.onExport.forEach(f => f())\n  }\n\n  return exports\n}\n```\n\n`#0` 中，我们导出了依赖，并且执行了 `onExport` 的回调函数。\n\n## Wrap up\n原理看起来不是很难，但自己实现一遍还是挺难的。\n\n不过 AMD，CommonJS 这些规范倒是改善了 JavaScript 模块系统，使得 JavaScript 能够在规模较大的项目中更加容易开发，以及维护。\n\n(完整代码请看[GitHub - tiny module loader](https://github.com/DrakeLeung/tiny-module-loader))\n\n## Resources\n- [eloquent javascript - modules](http://eloquentjavascript.net/10_modules.html)\n","slug":"implement-a-simple-AMD-module-loader","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu7430m001n37rq3uroy1rw","content":"<p>(完整代码请看<a href=\"https://github.com/DrakeLeung/tiny-module-loader\" target=\"_blank\" rel=\"external\">GitHub - tiny module loader</a>)</p>\n<h2>What</h2>\n<p>不了解JavaScript模块化的请看<a href=\"http://drakeleung.github.io/blog/2016/02/07/JavaScript-Module-A-Beginner-Guide/\">「译」JavaScript Modules Part1: A Beginner Guide</a>。</p>\n<p>简单来说，AMD规范定义了模块加载的方式是异步的而不是同步。</p>\n<p>接着，语法是这样子的：<code>define</code>函数去请求依赖。其中，第一个参数是依赖的模块数组，第二个参数是函数。当依赖都加载完毕之后，就会作为参数，传进这个函数里面。</p>\n<h2>Why</h2>\n<p>为了探究 AMD 模块加载器的原理，我们不妨尝试着从零开始实现他。</p>\n<p>我们只实现一个 <code>define</code> 函数。其他后面再慢慢完善。</p>\n<h2>How</h2>\n<p>主要分成3部分：下载依赖，执行依赖并导出，读取依赖并执行回调(递归地)。</p>\n<h3>下载依赖</h3>\n<p>接受一个依赖模块的URL，然后用Ajax请求。这时会返回包含文件内容的字符串。</p>\n<p>这个很简单，只是用<em>Promise</em>简便一点而已。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// getModule.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchDeps = name =&gt;</div><div class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> req = <span class=\"keyword\">new</span> XMLHttpRequest()</div><div class=\"line\"></div><div class=\"line\">    req.addEventListener(<span class=\"string\">'load'</span>, () =&gt; &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (req.status &lt; <span class=\"number\">400</span>) resolve(req.responseText)</div><div class=\"line\">      <span class=\"keyword\">else</span> reject(req.status)</div><div class=\"line\">    &#125;, <span class=\"literal\">false</span>)</div><div class=\"line\"></div><div class=\"line\">    req.addEventListener(<span class=\"string\">'error'</span>, () =&gt; &#123;</div><div class=\"line\">      reject(req.status)</div><div class=\"line\">    &#125;, <span class=\"literal\">false</span>)</div><div class=\"line\"></div><div class=\"line\">    req.open(<span class=\"string\">'GET'</span>, name, <span class=\"literal\">true</span>)</div><div class=\"line\">    req.send(<span class=\"literal\">null</span>)</div><div class=\"line\">  &#125;)</div></pre></td></tr></table></figure>\n<h3>执行依赖</h3>\n<p>由于请求依赖返回的是一个字符串。但我们想要的是把这个字符串当作 JavaScript 代码来执行，解决方法有2种，分别是 <code>eval()</code> 和 <code>new Function()</code>。我们采取后者。</p>\n<p>还有一种方法应该可以：动态创建 <code>&lt;script&gt;</code> 标签。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// getModule.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> currentModule = <span class=\"literal\">null</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getModule = code =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> <span class=\"built_in\">module</span> = &#123;</div><div class=\"line\">    exports: <span class=\"literal\">null</span>,</div><div class=\"line\">    exported: <span class=\"literal\">false</span>,</div><div class=\"line\">    onExport: []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  currentModule = <span class=\"built_in\">module</span></div><div class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Function</span> (<span class=\"string\">''</span>, code)() <span class=\"comment\">// work with eval(), as well</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">module</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> &#123;</div><div class=\"line\">  currentModule,</div><div class=\"line\">  getModule</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这里有一个我觉得是最难的问题：由于 <code>new Function()</code> 执行的时候，是不返回东西的（其实我并不知道 <code>new Function</code> 的工作原理)。</p>\n<p>所以，这个时候依赖虽然是请求回来并执行了，但是他依然还没有导出(<code>exports</code>)。所以，返回的 <code>module</code> 对象的 <code>exports</code> 是 <code>null</code>的。并且，我们还用了一个变量 <code>currentModule</code> 还存储当前的变量。</p>\n<h3>导出依赖并执行回调函数</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// myDefine.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// import &#123;</span></div><div class=\"line\"><span class=\"comment\">//   currentModule,</span></div><div class=\"line\"><span class=\"comment\">//   getModule</span></div><div class=\"line\"><span class=\"comment\">// &#125; from './getModule'</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">// import &#123;fetchDeps&#125; from './fetchDeps'</span></div><div class=\"line\"><span class=\"comment\">// import &#123;whenDepsExported&#125; from './whenDepsExported'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> define = (deps, callback) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> myModule = currentModule <span class=\"comment\">// #0</span></div><div class=\"line\">  <span class=\"keyword\">const</span> getDeps = deps.map(fetchDeps)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">Promise</span>.all(getDeps)</div><div class=\"line\">    .then(codes =&gt; &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> modules = codes.map(getModule)</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// #1</span></div><div class=\"line\">      modules.forEach(m =&gt;</div><div class=\"line\">        !m.exported &amp;&amp; m.onExport.push(() =&gt;</div><div class=\"line\">          whenDepsExported(callback, modules, myModule)</div><div class=\"line\">        )</div><div class=\"line\">      )</div><div class=\"line\"></div><div class=\"line\">      whenDepsExported(callback, modules, myModule) <span class=\"comment\">// #2</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code> 我们把 <code>currentModule</code> 赋给一个局部变量，这样使得每个 <code>define</code> 都有自己的「模块」。这个也是困惑了我好久的一步。我也似懂非懂，因为反正已经 work 起来了= =</p>\n<p>这个时候问题就来了。因为我们需要递归地加载依赖，那么，肯定是加载最外面的依赖，然后才到里面。如果没有了 <code>#1</code>，那么就会执行 <code>#2</code>，这样就会导致和想我们想要的相反，即先执行最里面的依赖的回调，再执行外面的。</p>\n<p>因此，我们把最里面的模块先放到一个数组里面，然后当他的依赖执行完之后，再去执行他的回调，这时他的回调的参数才有值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// whenDepsExported.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> whenDepsExported = (cb, deps, myModule) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (!deps.every(dep =&gt; dep.exported)) <span class=\"keyword\">return</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// params for 'callback of define'</span></div><div class=\"line\">  <span class=\"keyword\">let</span> args = deps.map(dep =&gt; dep.exports)</div><div class=\"line\">  <span class=\"keyword\">let</span> exports = cb.apply(<span class=\"literal\">null</span>, args)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// #0</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (myModule) &#123;</div><div class=\"line\">    myModule.exports = exports</div><div class=\"line\">    myModule.exported = <span class=\"literal\">true</span></div><div class=\"line\">    myModule.onExport.forEach(f =&gt; f())</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> exports</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code> 中，我们导出了依赖，并且执行了 <code>onExport</code> 的回调函数。</p>\n<h2>Wrap up</h2>\n<p>原理看起来不是很难，但自己实现一遍还是挺难的。</p>\n<p>不过 AMD，CommonJS 这些规范倒是改善了 JavaScript 模块系统，使得 JavaScript 能够在规模较大的项目中更加容易开发，以及维护。</p>\n<p>(完整代码请看<a href=\"https://github.com/DrakeLeung/tiny-module-loader\" target=\"_blank\" rel=\"external\">GitHub - tiny module loader</a>)</p>\n<h2>Resources</h2>\n<ul>\n<li><a href=\"http://eloquentjavascript.net/10_modules.html\" target=\"_blank\" rel=\"external\">eloquent javascript - modules</a></li>\n</ul>\n","excerpt":"","more":"<p>(完整代码请看<a href=\"https://github.com/DrakeLeung/tiny-module-loader\">GitHub - tiny module loader</a>)</p>\n<h2>What</h2>\n<p>不了解JavaScript模块化的请看<a href=\"http://drakeleung.github.io/blog/2016/02/07/JavaScript-Module-A-Beginner-Guide/\">「译」JavaScript Modules Part1: A Beginner Guide</a>。</p>\n<p>简单来说，AMD规范定义了模块加载的方式是异步的而不是同步。</p>\n<p>接着，语法是这样子的：<code>define</code>函数去请求依赖。其中，第一个参数是依赖的模块数组，第二个参数是函数。当依赖都加载完毕之后，就会作为参数，传进这个函数里面。</p>\n<h2>Why</h2>\n<p>为了探究 AMD 模块加载器的原理，我们不妨尝试着从零开始实现他。</p>\n<p>我们只实现一个 <code>define</code> 函数。其他后面再慢慢完善。</p>\n<h2>How</h2>\n<p>主要分成3部分：下载依赖，执行依赖并导出，读取依赖并执行回调(递归地)。</p>\n<h3>下载依赖</h3>\n<p>接受一个依赖模块的URL，然后用Ajax请求。这时会返回包含文件内容的字符串。</p>\n<p>这个很简单，只是用<em>Promise</em>简便一点而已。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// getModule.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchDeps = name =&gt;</div><div class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>((resolve, reject) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> req = <span class=\"keyword\">new</span> XMLHttpRequest()</div><div class=\"line\"></div><div class=\"line\">    req.addEventListener(<span class=\"string\">'load'</span>, () =&gt; &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (req.status &lt; <span class=\"number\">400</span>) resolve(req.responseText)</div><div class=\"line\">      <span class=\"keyword\">else</span> reject(req.status)</div><div class=\"line\">    &#125;, <span class=\"literal\">false</span>)</div><div class=\"line\"></div><div class=\"line\">    req.addEventListener(<span class=\"string\">'error'</span>, () =&gt; &#123;</div><div class=\"line\">      reject(req.status)</div><div class=\"line\">    &#125;, <span class=\"literal\">false</span>)</div><div class=\"line\"></div><div class=\"line\">    req.open(<span class=\"string\">'GET'</span>, name, <span class=\"literal\">true</span>)</div><div class=\"line\">    req.send(<span class=\"literal\">null</span>)</div><div class=\"line\">  &#125;)</div></pre></td></tr></table></figure>\n<h3>执行依赖</h3>\n<p>由于请求依赖返回的是一个字符串。但我们想要的是把这个字符串当作 JavaScript 代码来执行，解决方法有2种，分别是 <code>eval()</code> 和 <code>new Function()</code>。我们采取后者。</p>\n<p>还有一种方法应该可以：动态创建 <code>&lt;script&gt;</code> 标签。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// getModule.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> currentModule = <span class=\"literal\">null</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getModule = code =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> <span class=\"built_in\">module</span> = &#123;</div><div class=\"line\">    exports: <span class=\"literal\">null</span>,</div><div class=\"line\">    exported: <span class=\"literal\">false</span>,</div><div class=\"line\">    onExport: []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  currentModule = <span class=\"built_in\">module</span></div><div class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Function</span> (<span class=\"string\">''</span>, code)() <span class=\"comment\">// work with eval(), as well</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">module</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> &#123;</div><div class=\"line\">  currentModule,</div><div class=\"line\">  getModule</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这里有一个我觉得是最难的问题：由于 <code>new Function()</code> 执行的时候，是不返回东西的（其实我并不知道 <code>new Function</code> 的工作原理)。</p>\n<p>所以，这个时候依赖虽然是请求回来并执行了，但是他依然还没有导出(<code>exports</code>)。所以，返回的 <code>module</code> 对象的 <code>exports</code> 是 <code>null</code>的。并且，我们还用了一个变量 <code>currentModule</code> 还存储当前的变量。</p>\n<h3>导出依赖并执行回调函数</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// myDefine.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// import &#123;</span></div><div class=\"line\"><span class=\"comment\">//   currentModule,</span></div><div class=\"line\"><span class=\"comment\">//   getModule</span></div><div class=\"line\"><span class=\"comment\">// &#125; from './getModule'</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">// import &#123;fetchDeps&#125; from './fetchDeps'</span></div><div class=\"line\"><span class=\"comment\">// import &#123;whenDepsExported&#125; from './whenDepsExported'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> define = (deps, callback) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> myModule = currentModule <span class=\"comment\">// #0</span></div><div class=\"line\">  <span class=\"keyword\">const</span> getDeps = deps.map(fetchDeps)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">Promise</span>.all(getDeps)</div><div class=\"line\">    .then(codes =&gt; &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> modules = codes.map(getModule)</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// #1</span></div><div class=\"line\">      modules.forEach(m =&gt;</div><div class=\"line\">        !m.exported &amp;&amp; m.onExport.push(() =&gt;</div><div class=\"line\">          whenDepsExported(callback, modules, myModule)</div><div class=\"line\">        )</div><div class=\"line\">      )</div><div class=\"line\"></div><div class=\"line\">      whenDepsExported(callback, modules, myModule) <span class=\"comment\">// #2</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code> 我们把 <code>currentModule</code> 赋给一个局部变量，这样使得每个 <code>define</code> 都有自己的「模块」。这个也是困惑了我好久的一步。我也似懂非懂，因为反正已经 work 起来了= =</p>\n<p>这个时候问题就来了。因为我们需要递归地加载依赖，那么，肯定是加载最外面的依赖，然后才到里面。如果没有了 <code>#1</code>，那么就会执行 <code>#2</code>，这样就会导致和想我们想要的相反，即先执行最里面的依赖的回调，再执行外面的。</p>\n<p>因此，我们把最里面的模块先放到一个数组里面，然后当他的依赖执行完之后，再去执行他的回调，这时他的回调的参数才有值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// whenDepsExported.js</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> whenDepsExported = (cb, deps, myModule) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (!deps.every(dep =&gt; dep.exported)) <span class=\"keyword\">return</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// params for 'callback of define'</span></div><div class=\"line\">  <span class=\"keyword\">let</span> args = deps.map(dep =&gt; dep.exports)</div><div class=\"line\">  <span class=\"keyword\">let</span> exports = cb.apply(<span class=\"literal\">null</span>, args)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// #0</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (myModule) &#123;</div><div class=\"line\">    myModule.exports = exports</div><div class=\"line\">    myModule.exported = <span class=\"literal\">true</span></div><div class=\"line\">    myModule.onExport.forEach(f =&gt; f())</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> exports</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>#0</code> 中，我们导出了依赖，并且执行了 <code>onExport</code> 的回调函数。</p>\n<h2>Wrap up</h2>\n<p>原理看起来不是很难，但自己实现一遍还是挺难的。</p>\n<p>不过 AMD，CommonJS 这些规范倒是改善了 JavaScript 模块系统，使得 JavaScript 能够在规模较大的项目中更加容易开发，以及维护。</p>\n<p>(完整代码请看<a href=\"https://github.com/DrakeLeung/tiny-module-loader\">GitHub - tiny module loader</a>)</p>\n<h2>Resources</h2>\n<ul>\n<li><a href=\"http://eloquentjavascript.net/10_modules.html\">eloquent javascript - modules</a></li>\n</ul>\n"},{"title":"实现一个 flickr like 布局","author":"Drake Leung","date":"2016-04-29T15:27:28.000Z","foreword":"flickr 的图片都是不改变原来的横纵比，且每一行的高度都是差不多。","_content":"\nFlickr 团队最近开源了他们图片布局的项目 - [Flickr's Justified Layout](https://github.com/flickr/justified-layout/blob/master/README.md) 。那么，通过阅读其源代码后，我实现了一个简单版 - [jjjustify](https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2FREADME.md)。点击这里可以查看在线 [demo](http://frontend-addiction.github.io/Baidu-IFE/stage03/task43/flickr/index.html) 。\n\n## 核心算法\n整个应用的核心是：**如何确定一行中的图片数量并且保持横纵比** 。\n\n首先，我们需要知道一个知识：\n\n> 假设我们一行的高度为 300 ，宽度为 1200 。那么在这一行中的所有图片的横纵比之和就小于等于这一行的横纵比，也就是 4:1 。\n\n我们这里不用数学来证明。但是不妨想象，当一行中的图片都收缩或者拉伸之后，是可以占满整行的，这时，就相当于这一行。所以，当前行所有图片的横纵比之和要**小于等于**初始设定的整行的横纵比。\n\n{% asset_img 1.png %}\n\n但是，为了增加灵活性，我们可以**设定一个容忍度**。他的取值范围是 `[0, 1]` 。如果当前行所有图片的横纵比之和介于（初始设定的整行的横纵比 * (1 +- 容忍度）的话，我们都能接受（容忍），在当前行插入该图片。\n\n举个例子：初始设定的整行的横纵比（`targetRowAspectRatio`）为 4 ，我们的容忍度（`tolerance`）为 `0.25` 。所以，只要图片们的横纵比之和介于 `targetRowAspectRatio * (1 - tolerance)` 和 `targetRowAspectRatio * (1 + tolerance)` 就让他们在当前行。\n\n{% asset_img 2.png %}\n\n如果大于容忍后的横纵比的话，**为了更加精确，我们可以比较绝对值**。看看插入图片后的横纵比之和 - targetRowAspectRatio 的绝对值小，还是插入图片前的横纵比之和 - targetRowAspectRatio 的绝对值小。哪个小就采用哪种方案。\n\n插入新图片前的绝对值为 `3.5` :\n{% asset_img 4.png %}\n\n插入后的绝对值为 `0.5` ，小于 `3.5` ，所以我们选择在当前行插入该图片。\n{% asset_img 3.png %}\n\n\n如果小于容忍后的横纵比的话，假设还没插完图片，就继续插。如果已经插完了图片，这里我们可以选择是否铺满一行，还是就让他这样。这个时候我们的高度就是原始设定的高度。\n\n详细代码实现请参考 [rrrow.js](https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2Frrrow.js) 的 `addItem()` 方法。","source":"_posts/justified-layout.md","raw":"---\ntitle: 实现一个 flickr like 布局\nauthor: Drake Leung\ntags: []\ncategories: []\ndate: 2016-04-29 23:27:28\nforeword: flickr 的图片都是不改变原来的横纵比，且每一行的高度都是差不多。\n---\n\nFlickr 团队最近开源了他们图片布局的项目 - [Flickr's Justified Layout](https://github.com/flickr/justified-layout/blob/master/README.md) 。那么，通过阅读其源代码后，我实现了一个简单版 - [jjjustify](https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2FREADME.md)。点击这里可以查看在线 [demo](http://frontend-addiction.github.io/Baidu-IFE/stage03/task43/flickr/index.html) 。\n\n## 核心算法\n整个应用的核心是：**如何确定一行中的图片数量并且保持横纵比** 。\n\n首先，我们需要知道一个知识：\n\n> 假设我们一行的高度为 300 ，宽度为 1200 。那么在这一行中的所有图片的横纵比之和就小于等于这一行的横纵比，也就是 4:1 。\n\n我们这里不用数学来证明。但是不妨想象，当一行中的图片都收缩或者拉伸之后，是可以占满整行的，这时，就相当于这一行。所以，当前行所有图片的横纵比之和要**小于等于**初始设定的整行的横纵比。\n\n{% asset_img 1.png %}\n\n但是，为了增加灵活性，我们可以**设定一个容忍度**。他的取值范围是 `[0, 1]` 。如果当前行所有图片的横纵比之和介于（初始设定的整行的横纵比 * (1 +- 容忍度）的话，我们都能接受（容忍），在当前行插入该图片。\n\n举个例子：初始设定的整行的横纵比（`targetRowAspectRatio`）为 4 ，我们的容忍度（`tolerance`）为 `0.25` 。所以，只要图片们的横纵比之和介于 `targetRowAspectRatio * (1 - tolerance)` 和 `targetRowAspectRatio * (1 + tolerance)` 就让他们在当前行。\n\n{% asset_img 2.png %}\n\n如果大于容忍后的横纵比的话，**为了更加精确，我们可以比较绝对值**。看看插入图片后的横纵比之和 - targetRowAspectRatio 的绝对值小，还是插入图片前的横纵比之和 - targetRowAspectRatio 的绝对值小。哪个小就采用哪种方案。\n\n插入新图片前的绝对值为 `3.5` :\n{% asset_img 4.png %}\n\n插入后的绝对值为 `0.5` ，小于 `3.5` ，所以我们选择在当前行插入该图片。\n{% asset_img 3.png %}\n\n\n如果小于容忍后的横纵比的话，假设还没插完图片，就继续插。如果已经插完了图片，这里我们可以选择是否铺满一行，还是就让他这样。这个时候我们的高度就是原始设定的高度。\n\n详细代码实现请参考 [rrrow.js](https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2Frrrow.js) 的 `addItem()` 方法。","slug":"justified-layout","published":1,"updated":"2016-09-08T05:01:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cisu7430o001p37rqhj4zapn3","content":"<p>Flickr 团队最近开源了他们图片布局的项目 - <a href=\"https://github.com/flickr/justified-layout/blob/master/README.md\" target=\"_blank\" rel=\"external\">Flickr’s Justified Layout</a> 。那么，通过阅读其源代码后，我实现了一个简单版 - <a href=\"https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2FREADME.md\" target=\"_blank\" rel=\"external\">jjjustify</a>。点击这里可以查看在线 <a href=\"http://frontend-addiction.github.io/Baidu-IFE/stage03/task43/flickr/index.html\" target=\"_blank\" rel=\"external\">demo</a> 。</p>\n<h2>核心算法</h2>\n<p>整个应用的核心是：<strong>如何确定一行中的图片数量并且保持横纵比</strong> 。</p>\n<p>首先，我们需要知道一个知识：</p>\n<blockquote>\n<p>假设我们一行的高度为 300 ，宽度为 1200 。那么在这一行中的所有图片的横纵比之和就小于等于这一行的横纵比，也就是 4:1 。</p>\n</blockquote>\n<p>我们这里不用数学来证明。但是不妨想象，当一行中的图片都收缩或者拉伸之后，是可以占满整行的，这时，就相当于这一行。所以，当前行所有图片的横纵比之和要<strong>小于等于</strong>初始设定的整行的横纵比。</p>\n<img src=\"/2016/04/29/justified-layout/1.png\" alt=\"1.png\" title=\"\">\n<p>但是，为了增加灵活性，我们可以<strong>设定一个容忍度</strong>。他的取值范围是 <code>[0, 1]</code> 。如果当前行所有图片的横纵比之和介于（初始设定的整行的横纵比 * (1 ± 容忍度）的话，我们都能接受（容忍），在当前行插入该图片。</p>\n<p>举个例子：初始设定的整行的横纵比（<code>targetRowAspectRatio</code>）为 4 ，我们的容忍度（<code>tolerance</code>）为 <code>0.25</code> 。所以，只要图片们的横纵比之和介于 <code>targetRowAspectRatio * (1 - tolerance)</code> 和 <code>targetRowAspectRatio * (1 + tolerance)</code> 就让他们在当前行。</p>\n<img src=\"/2016/04/29/justified-layout/2.png\" alt=\"2.png\" title=\"\">\n<p>如果大于容忍后的横纵比的话，<strong>为了更加精确，我们可以比较绝对值</strong>。看看插入图片后的横纵比之和 - targetRowAspectRatio 的绝对值小，还是插入图片前的横纵比之和 - targetRowAspectRatio 的绝对值小。哪个小就采用哪种方案。</p>\n<p>插入新图片前的绝对值为 <code>3.5</code> :</p>\n<img src=\"/2016/04/29/justified-layout/4.png\" alt=\"4.png\" title=\"\">\n<p>插入后的绝对值为 <code>0.5</code> ，小于 <code>3.5</code> ，所以我们选择在当前行插入该图片。</p>\n<img src=\"/2016/04/29/justified-layout/3.png\" alt=\"3.png\" title=\"\">\n<p>如果小于容忍后的横纵比的话，假设还没插完图片，就继续插。如果已经插完了图片，这里我们可以选择是否铺满一行，还是就让他这样。这个时候我们的高度就是原始设定的高度。</p>\n<p>详细代码实现请参考 <a href=\"https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2Frrrow.js\" target=\"_blank\" rel=\"external\">rrrow.js</a> 的 <code>addItem()</code> 方法。</p>\n","excerpt":"","more":"<p>Flickr 团队最近开源了他们图片布局的项目 - <a href=\"https://github.com/flickr/justified-layout/blob/master/README.md\">Flickr’s Justified Layout</a> 。那么，通过阅读其源代码后，我实现了一个简单版 - <a href=\"https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2FREADME.md\">jjjustify</a>。点击这里可以查看在线 <a href=\"http://frontend-addiction.github.io/Baidu-IFE/stage03/task43/flickr/index.html\">demo</a> 。</p>\n<h2>核心算法</h2>\n<p>整个应用的核心是：<strong>如何确定一行中的图片数量并且保持横纵比</strong> 。</p>\n<p>首先，我们需要知道一个知识：</p>\n<blockquote>\n<p>假设我们一行的高度为 300 ，宽度为 1200 。那么在这一行中的所有图片的横纵比之和就小于等于这一行的横纵比，也就是 4:1 。</p>\n</blockquote>\n<p>我们这里不用数学来证明。但是不妨想象，当一行中的图片都收缩或者拉伸之后，是可以占满整行的，这时，就相当于这一行。所以，当前行所有图片的横纵比之和要<strong>小于等于</strong>初始设定的整行的横纵比。</p>\n<img src=\"/2016/04/29/justified-layout/1.png\" alt=\"1.png\" title=\"\">\n<p>但是，为了增加灵活性，我们可以<strong>设定一个容忍度</strong>。他的取值范围是 <code>[0, 1]</code> 。如果当前行所有图片的横纵比之和介于（初始设定的整行的横纵比 * (1 ± 容忍度）的话，我们都能接受（容忍），在当前行插入该图片。</p>\n<p>举个例子：初始设定的整行的横纵比（<code>targetRowAspectRatio</code>）为 4 ，我们的容忍度（<code>tolerance</code>）为 <code>0.25</code> 。所以，只要图片们的横纵比之和介于 <code>targetRowAspectRatio * (1 - tolerance)</code> 和 <code>targetRowAspectRatio * (1 + tolerance)</code> 就让他们在当前行。</p>\n<img src=\"/2016/04/29/justified-layout/2.png\" alt=\"2.png\" title=\"\">\n<p>如果大于容忍后的横纵比的话，<strong>为了更加精确，我们可以比较绝对值</strong>。看看插入图片后的横纵比之和 - targetRowAspectRatio 的绝对值小，还是插入图片前的横纵比之和 - targetRowAspectRatio 的绝对值小。哪个小就采用哪种方案。</p>\n<p>插入新图片前的绝对值为 <code>3.5</code> :</p>\n<img src=\"/2016/04/29/justified-layout/4.png\" alt=\"4.png\" title=\"\">\n<p>插入后的绝对值为 <code>0.5</code> ，小于 <code>3.5</code> ，所以我们选择在当前行插入该图片。</p>\n<img src=\"/2016/04/29/justified-layout/3.png\" alt=\"3.png\" title=\"\">\n<p>如果小于容忍后的横纵比的话，假设还没插完图片，就继续插。如果已经插完了图片，这里我们可以选择是否铺满一行，还是就让他这样。这个时候我们的高度就是原始设定的高度。</p>\n<p>详细代码实现请参考 <a href=\"https://github.com/DrakeLeung/demo/blob/gh-pages/toys%2Fjjjustify%2Frrrow.js\">rrrow.js</a> 的 <code>addItem()</code> 方法。</p>\n"}],"PostAsset":[{"_id":"source/_posts/How-Medium-Load-Images/inspect.png","post":"cisu742yv000937rqzqi7crol","slug":"inspect.png","modified":1,"renderable":1},{"_id":"source/_posts/How-Medium-Load-Images/network.png","post":"cisu742yv000937rqzqi7crol","slug":"network.png","modified":1,"renderable":1},{"_id":"source/_posts/Virtual-DOM/vdom0.png","post":"cisu742zz001437rq8w79yvl2","slug":"vdom0.png","modified":1,"renderable":1},{"_id":"source/_posts/Virtual-DOM/vdom1.png","post":"cisu742zz001437rq8w79yvl2","slug":"vdom1.png","modified":1,"renderable":1},{"_id":"source/_posts/Virtual-DOM/vdom2.png","post":"cisu742zz001437rq8w79yvl2","slug":"vdom2.png","modified":1,"renderable":1},{"_id":"source/_posts/justified-layout/1.png","post":"cisu7430o001p37rqhj4zapn3","slug":"1.png","modified":1,"renderable":1},{"_id":"source/_posts/justified-layout/2.png","post":"cisu7430o001p37rqhj4zapn3","slug":"2.png","modified":1,"renderable":1},{"_id":"source/_posts/justified-layout/3.png","post":"cisu7430o001p37rqhj4zapn3","slug":"3.png","modified":1,"renderable":1},{"_id":"source/_posts/justified-layout/4.png","post":"cisu7430o001p37rqhj4zapn3","slug":"4.png","modified":1,"renderable":1}],"PostCategory":[{"post_id":"cisu742yw000a37rqlw8meave","category_id":"cisu742yo000737rqacq4ui2b","_id":"cisu742z7000g37rq8bvwz7cl"},{"post_id":"cisu742yh000537rq0bih3auz","category_id":"cisu742yo000737rqacq4ui2b","_id":"cisu742zb000k37rq5hpstwoq"},{"post_id":"cisu742yn000637rqz9zz8zjm","category_id":"cisu742z2000c37rq9mwl0mvn","_id":"cisu742zi000o37rqr7dthr0z"},{"post_id":"cisu742z0000b37rq13ojn9r8","category_id":"cisu742za000i37rq8zpwktdl","_id":"cisu742zs000u37rq7m3tgkg7"},{"post_id":"cisu742zf000n37rqtafibrle","category_id":"cisu742yo000737rqacq4ui2b","_id":"cisu742zv000w37rq8wj4v8i7"},{"post_id":"cisu742z4000f37rqhj0bo51v","category_id":"cisu742za000i37rq8zpwktdl","_id":"cisu742zx000y37rq50ny4a48"},{"post_id":"cisu742zt000v37rqr8qbxyj9","category_id":"cisu742yo000737rqacq4ui2b","_id":"cisu742zz001237rqqgw6h3ct"},{"post_id":"cisu742zv000x37rqid87rk3p","category_id":"cisu742yo000737rqacq4ui2b","_id":"cisu74301001537rqneryv2qk"},{"post_id":"cisu742zx001137rqztthv3fl","category_id":"cisu742yo000737rqacq4ui2b","_id":"cisu74304001837rq0zhwbrm5"},{"post_id":"cisu7430e001g37rqxgsorlfl","category_id":"cisu7430j001k37rqm2bdf825","_id":"cisu7430s001t37rqdxg28npy"},{"post_id":"cisu7430h001j37rqs0kwjhzh","category_id":"cisu7430p001q37rqhrvkwu6d","_id":"cisu7430t001v37rqupeevcjs"}],"PostTag":[{"post_id":"cisu742yh000537rq0bih3auz","tag_id":"cisu742yu000837rqi3amrpxa","_id":"cisu742z4000e37rqc09iy5j9"},{"post_id":"cisu742yn000637rqz9zz8zjm","tag_id":"cisu742z2000d37rqf1osslam","_id":"cisu742zc000m37rqnpiguh1d"},{"post_id":"cisu742yw000a37rqlw8meave","tag_id":"cisu742za000j37rq2qhctha1","_id":"cisu742zq000r37rqgxmpqnl4"},{"post_id":"cisu742zf000n37rqtafibrle","tag_id":"cisu742zr000s37rqrmu8q3b6","_id":"cisu742zx001037rqbnfrkmw0"},{"post_id":"cisu742zv000x37rqid87rk3p","tag_id":"cisu742zr000s37rqrmu8q3b6","_id":"cisu742zz001337rqh2iaa10m"},{"post_id":"cisu742zt000v37rqr8qbxyj9","tag_id":"cisu742zr000s37rqrmu8q3b6","_id":"cisu74305001937rq9ghn81vu"},{"post_id":"cisu742zt000v37rqr8qbxyj9","tag_id":"cisu742zx000z37rq3glypmyk","_id":"cisu7430b001b37rq3lvn5zww"},{"post_id":"cisu742zx001137rqztthv3fl","tag_id":"cisu742zr000s37rqrmu8q3b6","_id":"cisu7430e001f37rq9rk9vhg8"},{"post_id":"cisu742zx001137rqztthv3fl","tag_id":"cisu74302001737rqrseptrtj","_id":"cisu7430g001h37rq3w48uwka"},{"post_id":"cisu74301001637rqcydma2m7","tag_id":"cisu7430c001d37rq15syv7gx","_id":"cisu7430n001o37rqrusu9odo"},{"post_id":"cisu74301001637rqcydma2m7","tag_id":"cisu7430h001i37rqzrad6a78","_id":"cisu7430q001r37rq9m9yfhzk"},{"post_id":"cisu74305001a37rqdckp21ga","tag_id":"cisu7430m001m37rqq9qhyy0p","_id":"cisu7430t001w37rqjqhu9t90"},{"post_id":"cisu74305001a37rqdckp21ga","tag_id":"cisu7430r001s37rq3uyvtqwt","_id":"cisu7430u001x37rqdun0vthe"},{"post_id":"cisu7430e001g37rqxgsorlfl","tag_id":"cisu7430t001u37rqhf2l5op2","_id":"cisu7430x002037rq97ftgj0s"},{"post_id":"cisu7430e001g37rqxgsorlfl","tag_id":"cisu7430u001y37rqldaj0lzz","_id":"cisu7430x002137rqatznb7ei"},{"post_id":"cisu7430h001j37rqs0kwjhzh","tag_id":"cisu7430v001z37rq3d7y3j7b","_id":"cisu7430y002237rqdy16xnrp"}],"Tag":[{"name":"ES6","_id":"cisu742yu000837rqi3amrpxa"},{"name":"BFC","_id":"cisu742z2000d37rqf1osslam"},{"name":"This","_id":"cisu742za000j37rq2qhctha1"},{"name":"scope","_id":"cisu742zr000s37rqrmu8q3b6"},{"name":"作用域","_id":"cisu742zx000z37rq3glypmyk"},{"name":"closure","_id":"cisu74302001737rqrseptrtj"},{"name":"JavaScript","_id":"cisu7430c001d37rq15syv7gx"},{"name":"test","_id":"cisu7430h001i37rqzrad6a78"},{"name":"hexo","_id":"cisu7430m001m37rqq9qhyy0p"},{"name":"theme","_id":"cisu7430r001s37rq3uyvtqwt"},{"name":"google chrome","_id":"cisu7430t001u37rqhf2l5op2"},{"name":"devtools","_id":"cisu7430u001y37rqldaj0lzz"},{"name":"gulp","_id":"cisu7430v001z37rq3d7y3j7b"}]}}